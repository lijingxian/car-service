(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af4ced06"],{2383:function(e,t,a){"use strict";var n=a("ac6a"),i=a.n(n);i.a},"2b58":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"supplier-check-acount"},[a("div",{attrs:{slot:"top"},slot:"top"},[a("biz-header",{attrs:{operations:e.operations,filters:e.filters},on:{operate:e.operate,filterDataChange:e.filterDataChange}}),a("div",{staticClass:"toggle-btn",on:{click:e.isShow}},[e._v(" "+e._s(e.toggleRecommendTxt)+" "),a("div",{staticClass:"iconfont biz-icon-i-web-zd1",class:{"rotate-180":e.showRecommend}})]),a("div",{staticStyle:{"font-size":"14px","margin-bottom":"10px"}},[e._v(" 单据金额总和： "),[e._v("￥"+e._s(e.totalAmount))]],2)],1),a("biz-list",{ref:"table",attrs:{tableData:e.tableData,size:"small",height:"100%"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"订单","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[e._v(" "+e._s(t.row.sn)+" ")]),a("div",[e._v(" 状态："+e._s(t.row.stateName)+" ")])])]}}])}),a("el-table-column",{attrs:{label:"供应商","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[e._v(" "+e._s(t.row.supplier?t.row.supplier.name:"")+" ")])])]}}])}),a("el-table-column",{attrs:{label:"支付","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("div",[e._v(" 支付方式："+e._s(t.row.paymentMethodName)+" ")]),a("div",[e._v(" 付款方式："+e._s(t.row.paymentTypeName)+" ")])])]}}])}),a("el-table-column",{attrs:{label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.amount))]}}])}),a("el-table-column",{attrs:{label:"商品","min-width":"220px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[a("div",{staticStyle:{width:"100%"}},e._l(t.row.orderItems.length>0?[t.row.orderItems[0]]:[],(function(n){return a("div",{key:n.sn,staticClass:"product-info-content"},[n.thumbnail&&" "!==n.thumbnail?a("img",{attrs:{src:n.thumbnail,onerror:e.errorImg}}):a("img",{attrs:{src:"/resources/admin/images/default/product-default-100.png"}}),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"titleClass",attrs:{title:n.name}},[e._v(e._s(n.name))]),a("div",[e._v(e._s(n.product?n.product.barCode:""))]),a("div",[e._v("单价(含税)："+e._s(n.price))])]),a("div",{staticClass:"amount"},[e._v(e._s(n.quantity)+e._s(t.row.orderItems.length>1?"...":""))])])})),0)])]}}])})],1),a("div",{attrs:{slot:"bottom"},slot:"bottom"},[a("biz-pagination",{attrs:{pagination:e.pagination},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)],1)},i=[],s=(a("99af"),a("4160"),a("d81d"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("3ca3"),a("466d"),a("1276"),a("159b"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),r=a("5530"),l=a("04d3"),o=a("f36f"),c=a("1ab1"),u=a("2f62"),d=a("c596"),p=a("bc3a"),f=a.n(p),h={name:"SupplierCheckAcount",data:function(){return{isEdit:!0,loading:!1,selections:[],showRecommend:!1,operations:[{label:"导出",name:"export",type:"",auth:["admin:finance.reconciliation.export"]},{label:"刷新",name:"refresh",type:""}],filters:[{type:"select",label:"供应商",name:"supplier",value:"",class:"hidden",options:[]},{label:"订单状态",type:"select",value:"",name:"state",class:"hidden",options:[{value:"",label:"全部"},{value:"1",label:"待商家确认"},{value:"2",label:"商家已确认"},{value:"3",label:"买家已付款"},{value:"4",label:"订单已执行"},{value:"5",label:"交易完成"},{value:"6",label:"订单关闭"},{value:"7",label:"已评价"},{value:"9",label:"退款退货中"}]},{label:"支付方式",type:"select",value:"",name:"",class:"hidden",options:[]},{label:"付款方式",type:"select",value:"",name:"",class:"hidden",options:[]},{type:"daterange",label:"",name:"publishDate",value:[]}],tableData:[],totalAmount:"",errorImg:'this.src="/resources/admin/images/default/product-default.png"',itemId:"",pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:9}}},components:{BizGrid:o["a"],BizHeader:l["d"],BizList:l["e"],BizPagination:l["f"]},created:function(){this.queryFilters(),this.getPaymentMethods(),this.getPaymentType(),this.refresh()},watch:{},computed:{toggleRecommendTxt:function(){var e=this.showRecommend;return e?"收起":"筛选"}},mounted:function(){},methods:Object(r["a"])(Object(r["a"])({},Object(u["c"])(["getUser"])),{},{operate:function(e){this[e]()},isShow:function(){this.showRecommend?(this.filters[0].class="hidden",this.filters[1].class="hidden",this.filters[2].class="hidden",this.filters[3].class="hidden",document.getElementsByClassName("biz-table-filter")[0].style.marginTop="",document.getElementsByClassName("biz-table-filter")[0].style.marginBottom=""):(this.filters[0].class="show",this.filters[1].class="show",this.filters[2].class="show",this.filters[3].class="show",document.getElementsByClassName("biz-table-filter")[0].style.marginTop="30px",document.getElementsByClassName("biz-table-filter")[0].style.marginBottom="0px"),this.showRecommend=!this.showRecommend},refresh:function(){this.getList()},export:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,i,s,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],e.selections&&e.selections.length>0&&e.selections.forEach((function(e){a.push(e.id)})),n={ids:a,pageNumber:e.pagination.currentPage,pageSize:e.pagination.pageSize,shopId:window.top.SHOP_ID||"",supplierId:e.filters[0].value,orderStatus:e.filters[1].value,paymentMethod:e.filters[2].value,paymentType:e.filters[3].value,beginDate:e.filters[4].value[0]?e.filters[4].value[0]+" 00:00:00":"",endDate:e.filters[4].value[1]?e.filters[4].value[1]+" 23:59:59":""},t.prev=3,t.next=6,f.a.post(d["g"].finance.supplierCheckAcount.export,n,{responseType:"blob"});case 6:return i=t.sent,console.log("response => ",i),s=new Blob([i.data],{type:"application/vnd.ms-excel"}),console.log(decodeURI(i.headers["content-disposition"])),r=decodeURI(i.headers["content-disposition"].split("filename=")[1]),l=document.createElement("a"),l.download=r.match(/"(\S*)"/)[1],l.style.display="none",l.href=URL.createObjectURL(s),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l),t.abrupt("return");case 22:throw t.prev=22,t.t0=t["catch"](3),new Error(t.t0);case 25:case"end":return t.stop()}}),t,null,[[3,22]])})))()},getList:function(){var e=this,t={pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize,shopId:window.top.SHOP_ID||"",supplierId:this.filters[0].value,orderStatus:this.filters[1].value,paymentMethod:this.filters[2].value,paymentType:this.filters[3].value,beginDate:this.filters[4].value[0]?this.filters[4].value[0]+" 00:00:00":"",endDate:this.filters[4].value[1]?this.filters[4].value[1]+" 23:59:59":""};this.loading=!0,c["a"].get(d["g"].finance.supplierCheckAcount.list,t).then((function(t){e.tableData=t.content,e.totalAmount=t.totalAmount,e.pagination.total=Number(t.total),e.loading=!1})).catch((function(t){e.$message.warning(t.errorMessage),console.log("ERR_REFRESH: ",t)})).finally((function(t){e.loading=!1}))},queryFilters:function(){var e=this,t={shopId:window.top.SHOP_ID||"",cooperationType:"0",state:"",pageNumber:1,pageSize:1e3};c["a"].get(d["g"].invoicing.supplierMgmt.shopSupplierList,t).then((function(t){e.filters[0].options=[{label:"全部",value:""}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}})))})).catch((function(t){e.$message.warning(t.errorMessage),console.log("ERR_REFRESH: ",t)})).finally((function(e){}))},getPaymentMethods:function(){var e=this,t={shopId:window.top.SHOP_ID||""};c["a"].get(d["g"].finance.receiptMgmt.getPaymentMethods,t).then((function(t){e.filters[2].options=[{label:"全部",value:""}].concat(t.paymentMethods.map((function(e){return{label:e.name,value:e.name}})))})).catch((function(t){e.$message.warning(t.errorMessage)})).finally((function(e){}))},getPaymentType:function(){var e=this,t={};c["a"].get("/admin/payment_method/paymentTypes.jhtml",t).then((function(t){e.filters[3].options=[{label:"全部",value:""}].concat(t.paymentTypeList.map((function(e){return{label:e.label,value:e.label}})))})).catch((function(t){e.$message.warning(t.errorMessage)})).finally((function(e){}))},handleSelectionChange:function(e){this.selections=e},filterDataChange:function(e){this.filters=e,this.pagination.currentPage=1,this.refresh()},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()},getOrderStatus:function(e){switch(e.type){case"11":return"卖家已发货";case"10":return"退款退货完成";case"9":return"退款退货中";case"8":return"已过期";case"7":return"已评价";case"6":return"订单关闭";case"5":return"交易完成";case"4":return"订单已执行";case"3":return"买家已付款";case"2":return"商家已确认";case"1":return"待商家确认";default:return"无"}}})},m=h,g=(a("2383"),a("2877")),b=Object(g["a"])(m,n,i,!1,null,null,null);t["default"]=b.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),i=a("5899"),s="["+i+"]",r=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),o=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(r,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:o(1),end:o(2),trim:o(3)}},a9e3:function(e,t,a){"use strict";var n=a("83ab"),i=a("da84"),s=a("94ca"),r=a("6eeb"),l=a("5135"),o=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),p=a("7c73"),f=a("241c").f,h=a("06cf").f,m=a("9bf2").f,g=a("58a8").trim,b="Number",v=i[b],y=v.prototype,w=o(p(y))==b,_=function(e){var t,a,n,i,s,r,l,o,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=g(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(s=c.slice(2),r=s.length,l=0;l<r;l++)if(o=s.charCodeAt(l),o<48||o>i)return NaN;return parseInt(s,n)}return+c};if(s(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var S,C=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof C&&(w?d((function(){y.valueOf.call(a)})):o(a)!=b)?c(new v(_(t)),a,C):_(t)},I=n?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;I.length>N;N++)l(v,S=I[N])&&!l(C,S)&&m(C,S,h(v,S));C.prototype=y,y.constructor=C,r(i,b,C)}},ac6a:function(e,t,a){}}]);