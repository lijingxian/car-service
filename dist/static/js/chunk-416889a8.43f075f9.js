(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-416889a8"],{"0723":function(e,t,a){"use strict";var n=a("56b6"),r=a.n(n);r.a},"1d7b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicle-mgmt-abnormal-statistics"},[a("biz-flex-table",{attrs:{operations:e.operations,filters:e.filters,loading:e.loading,tableData:e.tableData,pagination:e.pagination,checkable:e.checkable},on:{operate:e.operate,"filter-data-change":e.filterDataChange,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{width:"150",prop:"plateNumber",label:"车牌号"}}),a("el-table-column",{attrs:{width:"150",prop:"ownerName",label:"车主"}}),a("el-table-column",{attrs:{width:"150",prop:"happenDate",label:"日期"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"content",label:"位置"}})],1)],1)},r=[],i=(a("99af"),a("d81d"),a("b0c0"),a("04d3")),o=a("cc3c"),c={name:"AbnormalStatistics",data:function(){return{today:"",operations:[{label:"导出",name:"export",type:""}],filters:[{type:"select",label:"车队",name:"carGroup",value:"",options:[]},{type:"select",label:"类型",name:"type",value:"plugin",options:[{value:"plugin",label:"设备插拔"},{value:"fencein",label:"围栏"}]},{type:"daterange",label:"日期区间：",value:["2011-11-11","2012-12-12"]}],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},tableData:[],checkable:!1,loading:!1}},methods:{operate:function(e){this[e]()},filterDataChange:function(e){this.filters=e,this.refresh()},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()},export:function(){var e={fleetName:this.filters[0].value,type:this.filters[1].value,statisDate:"".concat(this.filters[2].value[0],"-").concat(this.filters[2].value[1]),treeNodeId:"fleet_".concat(this.filters[0].value),beginTimeStr:this.filters[2].value[0],endTimeStr:this.filters[2].value[1],pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};o["a"].abnormalExport(e,(function(e){}),(function(e){console.log("ERR_EXPORT: ",e)}))},refresh:function(){var e=this;if(this.filters[2].value[0]>this.today||this.filters[2].value[1]>this.today)return this.$message.warning({message:"不能选择将来的时间",showClose:!0}),void this.getFormatDate();this.loading=!0;var t={treeNodeId:"fleet_".concat(this.filters[0].value),type:this.filters[1].value,beginTimeStr:this.filters[2].value[0],endTimeStr:this.filters[2].value[1],pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};o["a"].queryAbnormalData(t,(function(t){e.tableData=t.abnormalStatisticsDatas,e.pagination.total=parseInt(t.total),e.loading=!1}),(function(t){e.loading=!1,console.log("ERR_REFRESH: ",t)}))},queryCarFleet:function(){var e=this,t={fleetType:"group",pageNumber:"1",pageSize:"200"};o["a"].queryFleetList(t,(function(t){var a=[];t.content.map((function(e){a.push({value:e.id,label:e.name})})),e.$set(e.filters[0],"options",a),e.filters[0].value=e.filters[0].options[0].value}),(function(e){console.log("ERR_GET_FLEET: ",e)}))},getFormatDate:function(){var e=new Date;this.filters[2].value[1]="".concat(e.getFullYear(),"-").concat(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate()),this.today=this.filters[2].value[1];var t=function(){var e=new Date;return e.setDate(1),"".concat(e.getFullYear(),"-").concat(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate())};this.filters[2].value[0]=t()}},mounted:function(){this.queryCarFleet()},created:function(){this.getFormatDate()},components:{BizFlexTable:i["c"]}},l=c,s=(a("0723"),a("2877")),u=Object(s["a"])(l,n,r,!1,null,null,null);t["default"]=u.exports},2497:function(e,t,a){"use strict";var n=a("4360"),r=a("a18c");t["a"]=function(e,t){return function(a){var i=a.data;"100"===i.resultCode?e(i):"709"===i.resultCode?(n["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",n["a"].getters.currentUser),r["a"].push("/login")):t(i)}}},"56b6":function(e,t,a){},cc3c:function(e,t,a){"use strict";a("99af"),a("a15b");var n=a("2497"),r=a("bc3a"),i=a.n(r),o=a("c596");t["a"]={queryFleetList:function(e,t,a){i.a.get(o["g"].vehicleMgmt.MarketingCars_queryFleetList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryCarList:function(e,t,a){i.a.get(o["g"].vehicleMgmt.MarketingCars_queryCarList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryDriverList:function(e,t,a){i.a.get(o["g"].vehicleMgmt.MarketingCars_queryDriverList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryMarketingCarsData:function(e,t,a){i.a.get(o["g"].vehicleMgmt.MarketingCars_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryMarketingCarsChart:function(e,t,a){i.a.get(o["g"].vehicleMgmt.MarketingCars_queryChart,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},marketingCarsExport:function(e,t,a){window.open(o["g"].vehicleMgmt.MarketingCars_export+"?fleetName="+e.fleetName+"&type="+e.type+"&summaryMode="+e.summaryMode+"&dateRange="+e.dateRange)},queryCarStateData:function(e,t,a){i.a.get(o["g"].vehicleMgmt.CarState_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},carStateExport:function(e,t,a){window.open(o["g"].vehicleMgmt.CarState_export+"?fleetName="+e.fleetName)},queryAbnormalData:function(e,t,a){i.a.get(o["g"].vehicleMgmt.AbnormalStatistics_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},abnormalExport:function(e,t,a){var n=[];for(var r in e)n.push("".concat(r,"=").concat(e[r]));window.open(o["g"].vehicleMgmt.AbnormalStatistics_export+"?"+n.join("&"))},querySpeed:function(e,t,a){i.a.get(o["g"].vehicleMgmt.CarSpeed_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},querySpeedChart:function(e,t,a){i.a.get(o["g"].vehicleMgmt.CarSpeedChart_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},speedExport:function(e,t,a){window.open(o["g"].vehicleMgmt.CarSpeed_export+"?plateNumber="+e.plateNumber+"&speed="+e.speed+"&dateRange="+e.dateRange)},queryPayment:function(e,t,a){i.a.get(o["g"].vehicleMgmt.CarPayment_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExpenseAnalysis:function(e,t,a){i.a.get(o["g"].vehicleMgmt.CarExpensAnalyze,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExpensePropotion:function(e,t,a){i.a.get(o["g"].vehicleMgmt.CarExpensePropotion,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExpenseYearOnYear:function(e,t,a){i.a.get(o["g"].vehicleMgmt.CarExpenseYearOnYear,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExpenseMonthOnMonth:function(e,t,a){i.a.get(o["g"].vehicleMgmt.CarExpenseMonthOnMonth,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))}}}}]);