(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac9227a8"],{"0943":function(e,t,i){"use strict";var a=i("1fac"),n=i.n(a);n.a},"0b13":function(e,t,i){"use strict";var a=i("4448"),n=i.n(a);n.a},"0cad":function(e,t,i){},"0d49":function(e,t,i){},"13ea8":function(e,t,i){"use strict";var a=i("e092"),n=i.n(a);n.a},1928:function(e,t,i){},"1bb6":function(e,t,i){},"1fac":function(e,t,i){},"20ba":function(e,t,i){"use strict";var a=i("cd95"),n=i.n(a);n.a},2497:function(e,t,i){"use strict";var a=i("4360"),n=i("a18c");t["a"]=function(e,t){return function(i){var o=i.data;"100"===o.resultCode?e(o):"709"===o.resultCode?(a["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",a["a"].getters.currentUser),n["a"].push("/login")):t(o)}}},2863:function(e,t,i){"use strict";var a=i("2497"),n=i("bc3a"),o=i.n(n),r=i("c596");t["a"]={query:function(e,t,i){o.a.get(r["g"].customerService.CSGroup,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryExcutiveList:function(e,t,i){o.a.get(r["g"].customerService.CSList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},add:function(e,t,i){o.a.post(r["g"].customerService.CSGroup,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},update:function(e,t,i){o.a.put(r["g"].customerService.CSGroup,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))}}},"292f":function(e,t,i){},"2bb3":function(e,t,i){"use strict";var a=i("2497"),n=i("bc3a"),o=i.n(n),r=i("c596");t["a"]={getNavInfo:function(e,t,i){o.a.get(r["g"].customerService.queryNavInfo,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryList:function(e,t,i){o.a.get(r["g"].customerService.WorkSheetList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryBaseInfo:function(e,t,i){o.a.get(r["g"].customerService.WorkSheetBaseInfo,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},updateBaseInfo:function(e,t,i){o.a.put(r["g"].customerService.WorkSheetBaseInfo,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},createBaseInfo:function(e,t,i){o.a.post(r["g"].customerService.WorkSheetBaseInfo,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},deleteBaseInfo:function(e,t,i){o.a.delete(r["g"].customerService.WorkSheetBaseInfo,{data:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},querySponsorList:function(e,t,i){o.a.get(r["g"].customerService.WorkSheetSponsorList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},querySponsorGroupList:function(e,t,i){o.a.get(r["g"].customerService.WorkSheetSponsorGroupList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryMemberList:function(e,t,i){o.a.get(r["g"].customerService.WorkSheetMemberList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryKpi:function(e,t,i){o.a.get(r["g"].customerService.WorkSheetKpi,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))}}},3605:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"session-online"},[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"w-left"},[i("current-user-info"),i("user-list",{on:{"choose-room":e.chooseRoom}})],1),i("div",{staticClass:"w-right"},[e.activatedRoom?i("im-content",{on:{product:e.onProduct}}):e._e()],1)]),i("biz-popup-tabs",{attrs:{open:e.open},on:{close:e.onClose},model:{value:e.tabSelection,callback:function(t){e.tabSelection=t},expression:"tabSelection"}},[i("el-tab-pane",{attrs:{label:"基本信息",name:"baseinfo"}},[i("product-info",{attrs:{id:e.productId,isEdit:!1,open:e.open}})],1)],1)],1)},n=[],o=i("b85c"),r=i("5530"),s=i("2f62"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cs-c-user-info"},[i("div",{staticClass:"info"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.csData.head||e.DefaultAvatar,alt:""}})]),i("div",{staticClass:"name"},[e._v(e._s(e.currentUser.name))]),i("div",{staticClass:"voice",attrs:{title:"语音提示"},on:{click:e.switchVoice}},[e.playVoice?i("img",{attrs:{src:e.laba}}):i("img",{attrs:{src:e.jingyin}})])]),i("div",{staticClass:"search"},[i("el-input",{attrs:{size:"mini",placeholder:"搜索联系人"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)])},l=[],u=(i("a4d3"),i("e01a"),i("caad"),i("fb6a"),i("b0c0"),i("2532"),i("37c3")),d=i.n(u),p=i("ef20"),m=i("2497"),f=i("bc3a"),h=i.n(f),g=i("c596"),b={getCustomerServiceList:function(e,t,i){h.a.get(g["g"].customerService.CSList,{params:e}).then(Object(m["a"])(t,i)).catch((function(e){console.error(e)}))},getMyGroupList:function(e,t,i){h.a.get(g["g"].customerService.MyCSGroup,{params:e}).then(Object(m["a"])(t,i)).catch((function(e){console.error(e)}))},getEndClientList:function(e,t,i){h.a.get(g["g"].customerService.EndClientList,{params:e}).then(Object(m["a"])(t,i)).catch((function(e){console.error(e)}))},getClient:function(e,t,i){h.a.get(g["g"].customerService.Client,{params:e}).then(Object(m["a"])(t,i)).catch((function(e){console.error(e)}))},getCsInfoByAdmin:function(e,t,i){h.a.get(g["g"].customerService.csInfoByAdmin,{params:e}).then(Object(m["a"])(t,i)).catch((function(e){console.error(e)}))}},v=i("5601"),y=i("e7d0"),w=i.n(y),C=i("e568"),k=i.n(C),S={name:"CurrentUserInfo",data:function(){return{laba:w.a,jingyin:k.a,playVoice:!0,DefaultAvatar:d.a,keyword:""}},created:function(){this.csData.id||this.getCsInfoByAdmin()},components:{},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])(["currentUser"])),Object(s["c"])("SessionOnline",["csData","csList","groupList","onlineList"])),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(s["d"])("SessionOnline",["updateUserKetword","updateCsData","pushRoom","makeAactivatedRoom"])),Object(s["b"])("SessionOnline",["getHistoryList"])),{},{switchVoice:function(){this.playVoice=!this.playVoice,v["a"].switchVoice(this.playVoice)},submit:function(){this.updateUserKetword({userKetword:this.keyword})},getCsInfo:function(){var e={id:this.currentUser.id};p["a"].query(e,(function(e){console.log(e)}),(function(e){console.log(e)}))},getCsInfoByAdmin:function(){var e=this;null===v["a"].socket&&(console.log("IoService.socket === null"),v["a"].connect());var t={id:this.currentUser.id};b.getCsInfoByAdmin(t,(function(t){e.updateCsData({csData:t.data}),e.getHistoryList({cb:function(){e.getCustomerServiceList()}})}),(function(e){console.log(e)}))},getCustomerServiceList:function(){var e=this,t={pageNumber:1,pageSize:999};b.getCustomerServiceList(t,(function(t){if(0===e.csList.length){var i,a=Object(o["a"])(t.content);try{for(a.s();!(i=a.n()).done;){var n=i.value;e.currentUser.id!==n.admin&&e.pushRoom({room:{loading:!1,imType:"cs",activated:!1,isOnline:e.onlineList.csList.includes(n.admin),csgroup:n.csgroup.slice(0),head:n.head,id:n.admin,level:n.level,mobile:n.mobile,name:n.nickname,receptnumber:n.receptnumber,uuid:n.uuid,messageList:[],input:""}})}}catch(r){a.e(r)}finally{a.f()}}e.getCustomerServiceGroupList()}),(function(e){console.log(e)}))},getCustomerServiceGroupList:function(){var e=this,t={pageNumber:1,pageSize:999};b.getMyGroupList(t,(function(t){if(0===e.groupList.length){var i,a=Object(o["a"])(t.data);try{for(a.s();!(i=a.n()).done;){var n=i.value;e.pushRoom({room:{loading:!1,imType:"group",activated:!1,name:n.name,id:n.id,description:n.description,messageList:[],input:""}}),v["a"].joinRoom(n.id)}}catch(r){a.e(r)}finally{a.f()}}}),(function(e){console.log(e)}))}})},M=S,I=(i("20ba"),i("2877")),x=Object(I["a"])(M,c,l,!1,null,null,null),D=x.exports,O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-list"},[i("el-menu",{ref:"menu",staticClass:"el-menu-user-list",attrs:{"background-color":"#fff","text-color":"#353535","active-text-color":"#353535"}},[i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("span",[e._v("客服群组")])]),e._l(e.groupList,(function(t){return i("im-group-item",{key:"group"+t.id,attrs:{index:"group"+t.id,group:t},on:{choose:e.choose}})}))],2),i("el-submenu",{staticClass:"cs-style",attrs:{index:"2"}},[i("template",{slot:"title"},[i("span",[e._v("客服人员")])]),e._l(e.csListOnline,(function(t){return i("im-user-item",{key:"cs"+t.id,attrs:{user:t,index:"cs"+t.id},on:{choose:e.choose}})})),e._l(e.csListNotOnline,(function(t){return i("im-user-item",{key:"cs"+t.id,attrs:{user:t,index:"cs"+t.id},on:{choose:e.choose}})}))],2),i("el-submenu",{staticClass:"cs-style",attrs:{index:"3"}},[i("template",{slot:"title"},[i("span",[e._v("交谈中客户")])]),e._l(e.clientListOnline,(function(t){return i("im-user-item",{key:"client"+t.id,attrs:{user:t,index:"client"+t.id},on:{choose:e.choose}})})),e._l(e.clientListNotOnline,(function(t){return i("im-user-item",{key:"client"+t.id,attrs:{user:t,index:"client"+t.id},on:{choose:e.choose}})}))],2),i("el-submenu",{staticClass:"cs-style",attrs:{index:"4"}},[i("template",{slot:"title"},[i("span",[e._v("会话结束客户")])]),e._l(e.clientEndListOnline,(function(t){return i("im-user-item",{key:"client"+t.id,attrs:{user:t,index:"client"+t.id},on:{choose:e.choose}})})),e._l(e.clientEndListNotOnline,(function(t){return i("im-user-item",{key:"client"+t.id,attrs:{user:t,index:"client"+t.id},on:{choose:e.choose}})}))],2)],1)],1)},T=[],_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-menu-item",{staticClass:"im-user-item",class:e.csClass,attrs:{index:e.index},on:{click:e.choose}},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.user.head||e.DefaultAvatar,alt:""}})]),i("div",{staticClass:"name"},[e._v(e._s(e.user.name.length>13?e.user.name.slice(0,10)+"...":e.user.name))]),i("div",{staticClass:"message-part",domProps:{innerHTML:e._s(e.messagePart)}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.unreadCount>0,expression:"unreadCount>0"}],staticClass:"unread-count"},[i("div",{staticClass:"count"},[e._v(e._s(e.unreadCount))])])])},P=[],L=i("624d"),j=i.n(L),$={name:"ImUserItem",data:function(){return{DefaultAvatar:j.a}},props:{user:Object,index:String},created:function(){},mounted:function(){},components:{},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["roomList"])),{},{messagePart:function(){var e,t=Object(o["a"])(this.roomList);try{for(t.s();!(e=t.n()).done;){var i=e.value;if("group"!==i.imType&&i.id===this.user.id){if(i.messageList.length>0){var a=i.messageList[i.messageList.length-1].body.type;return"txt"===a?i.messageList[i.messageList.length-1].body.msg.slice(0,10):"img"===a?"图片信息":"video"===a?"视频信息":"loc"===a?"位置信息":"product"===a?"商品信息":""}break}}}catch(n){t.e(n)}finally{t.f()}return""},csClass:function(){var e={online:!1};return this.user.isOnline&&(e.online=!0),e},unreadCount:function(){var e,t=Object(o["a"])(this.roomList);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(i.id===this.user.id){var a,n=0,r=Object(o["a"])(i.messageList);try{for(r.s();!(a=r.n()).done;){var s=a.value;s.isReaded||n++}}catch(c){r.e(c)}finally{r.f()}return n}}}catch(c){t.e(c)}finally{t.f()}return 0}}),methods:{choose:function(){this.$emit("choose",this.user)}}},R=$,N=(i("b54e"),Object(I["a"])(R,_,P,!1,null,null,null)),E=N.exports,B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-menu-item",{staticClass:"im-group-item",attrs:{index:e.index},on:{click:e.choose}},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.group.head||e.DefaultAvatar,alt:""}})]),i("div",{staticClass:"name"},[e._v(" "+e._s(e.group.name.length>13?e.group.name.slice(0,10)+"...":e.group.name)+" ")]),i("div",{staticClass:"message-part",domProps:{innerHTML:e._s(e.messagePart)}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.unreadCount>0,expression:"unreadCount>0"}],staticClass:"unread-count"},[i("div",{staticClass:"count"},[e._v(" "+e._s(e.unreadCount)+" ")])])])},z=[],A={name:"ImGroupItem",data:function(){return{DefaultAvatar:j.a}},props:{group:Object,index:String},created:function(){},mounted:function(){},components:{},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["roomList"])),{},{messagePart:function(){var e,t=Object(o["a"])(this.roomList);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(i.imType===this.group.imType&&i.id===this.group.id){if(i.messageList.length>0){var a=i.messageList[i.messageList.length-1].body.type;return"txt"===a?i.messageList[i.messageList.length-1].body.msg.slice(0,10):"img"===a?"图片信息":"video"===a?"视频信息":"loc"===a?"位置信息":""}break}}}catch(n){t.e(n)}finally{t.f()}return""},unreadCount:function(){var e,t=Object(o["a"])(this.roomList);try{for(t.s();!(e=t.n()).done;){var i=e.value;if(i.imType===this.group.imType&&i.id===this.group.id){var a,n=0,r=Object(o["a"])(i.messageList);try{for(r.s();!(a=r.n()).done;){var s=a.value;s.isReaded||n++}}catch(c){r.e(c)}finally{r.f()}return n}}}catch(c){t.e(c)}finally{t.f()}return 0}}),methods:{choose:function(){this.$emit("choose",this.group)}}},U=A,G=(i("8f78"),Object(I["a"])(U,B,z,!1,null,null,null)),V=G.exports,q={name:"UserList",data:function(){return{}},created:function(){},mounted:function(){var e=this;setTimeout((function(){e.$refs.menu.open("3")}),100)},components:{ImUserItem:E,ImGroupItem:V},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["activatedRoom","groupList","csListOnline","csListNotOnline","clientListOnline","clientListNotOnline","clientEndList","clientEndListOnline","clientEndListNotOnline","csData"])),Object(s["c"])(["currentUser"])),{},{activeIndex:function(){if(this.activatedRoom){if("client"===this.activatedRoom.imType||"clientEnd"===this.activatedRoom.imType)return"client"+this.activatedRoom.id;if("cs"===this.activatedRoom.imType)return"cs"+this.activatedRoom.id;if("group"===this.activatedRoom.imType)return"group"+this.activatedRoom.id}return""}}),watch:{},beforeDestroy:function(){},methods:Object(r["a"])(Object(r["a"])({},Object(s["d"])("SessionOnline",["changeActivatedRoom"])),{},{choose:function(e){e.activated||this.changeActivatedRoom(e)}})},F=q,H=(i("7011"),Object(I["a"])(F,O,T,!1,null,null,null)),W=H.exports,K=W,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"im-content"},[i("im-header"),i("div",{staticClass:"c-bottom"},[i("im-chat-window",{on:{product:e.onProduct}}),i("im-right-sidebar",{ref:"rightSidebar"})],1)],1)},J=[],Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"im-header"},[i("div",{staticClass:"title"},[e._v(" "+e._s(e.activatedRoom.name||"")+" ")])])},X=[],Z={name:"ImHeader",data:function(){return{}},created:function(){},components:{},computed:Object(r["a"])({},Object(s["c"])("SessionOnline",["activatedRoom"])),methods:{}},ee=Z,te=(i("c021"),Object(I["a"])(ee,Q,X,!1,null,null,null)),ie=te.exports,ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"im-chat-window",style:e.style},[i("div",{staticClass:"list-wrapper"},[e._l(e.groupList,(function(t){return i("im-chat-list",{key:"group"+t.id,style:e.chatListStyle(t),attrs:{room:t},on:{product:e.onProduct}})})),e._l(e.csListOnline,(function(t){return i("im-chat-list",{key:"cs"+t.id,style:e.chatListStyle(t),attrs:{room:t},on:{product:e.onProduct}})})),e._l(e.csListNotOnline,(function(t){return i("im-chat-list",{key:"cs"+t.id,style:e.chatListStyle(t),attrs:{room:t},on:{product:e.onProduct}})})),e._l(e.clientListOnline,(function(t){return i("im-chat-list",{key:"client"+t.id,style:e.chatListStyle(t),attrs:{room:t},on:{product:e.onProduct}})})),e._l(e.clientListNotOnline,(function(t){return i("im-chat-list",{key:"client"+t.id,style:e.chatListStyle(t),attrs:{room:t},on:{product:e.onProduct}})})),e._l(e.clientEndListOnline,(function(t){return i("im-chat-list",{key:"client"+t.id,style:e.chatListStyle(t),attrs:{room:t},on:{product:e.onProduct}})})),e._l(e.clientEndListNotOnline,(function(t){return i("im-chat-list",{key:"client"+t.id,style:e.chatListStyle(t),attrs:{room:t},on:{product:e.onProduct}})}))],2),i("im-chat-area")],1)},ne=[],oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"im-chat-list"},[i("div",{ref:"wrapper-ref",staticClass:"wrapper"},[i("infinite-loading",{attrs:{direction:"top"},on:{infinite:e.infiniteHandler}},[i("div",{attrs:{slot:"no-results"},slot:"no-results"}),i("div",{attrs:{slot:"no-more"},slot:"no-more"})]),e._l(e.room.messageList,(function(t){return i("im-chat-item",{key:t.id,attrs:{message:t},on:{product:e.onProduct}})}))],2)])},re=[],se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"im-chat-item",style:e.itemStyle},[i("div",{directives:[{name:"show",rawName:"v-show",value:"session_end"!==e.message.body.type&&"evaluation"!==e.message.body.type&&"roll-out"!==e.message.body.type,expression:"message.body.type !== 'session_end' && message.body.type !== 'evaluation' && message.body.type !== 'roll-out'"}],staticClass:"from-name"},[e._v(e._s(e.name))]),i("div",{staticClass:"container",style:e.containerStyle},["txt"===e.message.body.type?i("div",{staticClass:"container-txt",domProps:{innerHTML:e._s(e.message.body.msg)}}):e._e(),"img"===e.message.body.type?i("div",{staticClass:"image"},[i("img",{attrs:{src:e.message.body.url,alt:"",width:"100",height:"100"},on:{click:function(t){e.dialogVisible=!0}}})]):e._e(),"loc"===e.message.body.type?i("div",{staticClass:"loc"},[i("biz-location-map",{attrs:{value:e.message.body}})],1):e._e(),"video"===e.message.body.type?i("div",{staticClass:"video"},[i("video",{attrs:{src:e.message.body.url,controls:""}})]):e._e(),"product"===e.message.body.type?i("div",{staticClass:"product",on:{click:e.onProduct}},[i("div",{staticClass:"p-image"},[i("img",{attrs:{src:e.productBasicInfo.image}})]),i("div",{staticClass:"p-name"},[e._v(e._s(e.productBasicInfo.name))]),i("div",{staticClass:"price"},[e._v("￥"+e._s(e.productBasicInfo.marketPrice||"价格面议"))])]):e._e(),"session_end"===e.message.body.type?i("div",{staticClass:"session-end"},[e._v(e._s(e.message.body.msg))]):e._e(),"evaluation"===e.message.body.type?i("div",{staticClass:"session-end"},[e._v(e._s(e.message.body.msg))]):e._e(),"roll-out"===e.message.body.type?i("div",{staticClass:"session-end"},[e._v(e._s(e.message.body.msg))]):e._e()]),i("el-dialog",{attrs:{"append-to-body":"",visible:e.dialogVisible,title:"",width:"800px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{src:e.message.body.url,width:"100%"}})])],1)},ce=[],le=(i("a9e3"),i("efa7")),ue=i("f3ac"),de=i.n(ue),pe=i("392e"),me={name:"ImChatItem",data:function(){return{DefaultImg:de.a,dialogVisible:!1,productBasicInfo:{image:"",name:"",marketPrice:""}}},props:{message:Object},created:function(){"product"===this.message.body.type&&this.getProductInfo()},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["activatedRoom"])),{},{itemStyle:function(){return"session_end"===this.message.body.type||"evaluation"===this.message.body.type||"roll-out"===this.message.body.type?{"text-align":"center",color:"#ccc"}:{"text-align":this.message.isMyself?"right":"left"}},containerStyle:function(){return"session_end"===this.message.body.type||"evaluation"===this.message.body.type||"roll-out"===this.message.body.type?{"background-color":"#eff1f5","font-size":"12px"}:{"background-color":this.message.isMyself?"#ffebd4":"#eff1f5"}},name:function(){return this.message.isMyself?this.formatDateTime(this.message.timestamp)+" "+(this.message.fromName||"小V"):this.message.fromName+" "+this.formatDateTime(this.message.timestamp)}}),components:{BizLocationMap:le["a"]},methods:{onProduct:function(){this.$emit("product",this.message.body.id)},formatDateTime:function(e){var t=new Date(Number(e)),i=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var n=t.getDate();n=n<10?"0"+n:n;var o=t.getHours();o=o<10?"0"+o:o;var r=t.getMinutes(),s=t.getSeconds();return r=r<10?"0"+r:r,s=s<10?"0"+s:s,i+"-"+a+"-"+n+" "+o+":"+r+":"+s},getProductInfo:function(){var e=this,t={id:this.message.body.id,shopId:window.top.SHOP_ID||""};pe["a"].queryProductBasicInfo(t,(function(t){e.productBasicInfo=t.productBasicInfoData}),(function(t){console.log("获取商品基本信息失败",e.id)}))}}},fe=me,he=(i("b52f"),Object(I["a"])(fe,se,ce,!1,null,null,null)),ge=he.exports,be=i("e166"),ve=i.n(be),ye={name:"ImChatList",data:function(){return{selfInit:!1,pageSize:20}},props:{room:{required:!0,type:Object}},created:function(){},mounted:function(){var e=this;setTimeout((function(){e.room.scrollWrapper.scrollTop=e.room.scrollWrapper.scrollHeight-e.room.scrollWrapper.clientHeight}),500)},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])(["currentUser"])),{},{chatType:function(){switch(this.room.imType){case"cs":return"0";case"client":return"2";case"clientEnd":return"2";case"group":return"1";default:return""}}}),components:{ImChatItem:ge,InfiniteLoading:ve.a},methods:Object(r["a"])(Object(r["a"])({},Object(s["d"])("SessionOnline",["increasePageNumberAndInit"])),{},{onProduct:function(e){this.$emit("product",e)},infiniteHandler:function(e){this.room.scrollWrapper=this.$refs["wrapper-ref"],this.room.scroll||(this.room.scroll=e),!this.selfInit&&this.room.hasInit&&(this.selfInit=!0,this.room.scroll=e),this.selfInit=!0,this.getMessageList()},getMessageList:function(){var e={chatType:this.chatType,shopId:this.currentUser.shop.id,toId:this.room.id,fromId:"2"===this.chatType?this.room.id:this.currentUser.id,pageNumber:this.room.pageNumber,pageSize:this.pageSize};v["a"].getMessageList(e),this.increasePageNumberAndInit(this.room)}})},we=ye,Ce=(i("5db3"),Object(I["a"])(we,oe,re,!1,null,null,null)),ke=Ce.exports,Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"im-chat-area"},[i("div",{staticClass:"im-edit-toolbar"},[i("div",{staticClass:"left"},[i("el-popover",{ref:"popover",attrs:{width:"430",placement:"top-start",trigger:"click"}},[i("i",{staticClass:"iconfont biz-icon-biaoqing",attrs:{slot:"reference",title:"表情"},slot:"reference"}),i("biz-emoji-picker",{on:{choosed:e.chooseEmoji}})],1),i("i",{staticClass:"iconfont el-icon-picture",attrs:{title:"图片"},on:{click:e.uploadPicture}}),i("i",{staticClass:"iconfont biz-icon-i-web-sp",attrs:{title:"视频"},on:{click:e.uploadVideo}}),i("i",{staticClass:"iconfont biz-icon-shangpin",attrs:{title:"商品"},on:{click:e.sendProduct}}),i("el-upload",{ref:"upload",staticClass:"image-uploader",attrs:{accept:e.accept,action:e.serverUrl,"show-file-list":!1,name:e.name,data:e.fileData0,"on-success":e.uploadSuccess}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"client"===e.activatedRoom.imType,expression:"activatedRoom.imType === 'client'"}],staticClass:"right"},[i("i",{staticClass:"iconfont biz-icon-pingjia",attrs:{title:"邀请评价"},on:{click:e.sendEvaluation}}),i("i",{staticClass:"iconfont biz-icon-jieshu",attrs:{title:"结束会话"},on:{click:e.endSession}}),i("i",{staticClass:"iconfont biz-icon-tag12",attrs:{title:"转出"},on:{click:e.rollOut}}),i("i",{staticClass:"iconfont biz-icon-lahei",attrs:{title:"拉黑"},on:{click:e.defriend}})])]),i("el-input",{ref:"elinput",attrs:{type:"textarea",rows:3,placeholder:"请输入内容",value:e.activatedRoom.input},on:{input:e.typing}}),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.sendText}},[e._v("发送")]),i("el-dialog",{staticClass:"im-chat-black-dialog",attrs:{width:e.dialogWidth,title:"拉黑原因",visible:e.dialogBlackVisible},on:{"update:visible":function(t){e.dialogBlackVisible=t}}},[i("el-form",{ref:"blackRule",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"",prop:"reason","label-width":"150"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入原因"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogBlackVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.createBalck}},[e._v("确 定")])],1)],1),i("select-product",{attrs:{visibility:e.visibility},on:{"update:visibility":function(t){e.visibility=t},select:e.selectProduct}})],1)},Me=[],Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"session-select-product"},[i("biz-dialog-selector",{staticClass:"session-select-product",attrs:{title:"选择商品",visibility:e.visibility,tableData:e.tableData,selectionKeys:e.selectionKeys,pagination:e.pagination,filters:e.dialogFilters},on:{close:e.onClose,pageSizeChange:e.handleSizeChange,currentPageChange:e.handleCurrentChange,confirmed:e.confirmedProduct,selectionChange:e.selectionChange,filterDataChange:e.productFilterDataChange}},[i("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"session-online-column"},[i("img",{staticClass:"product-img",attrs:{src:t.row.image||e.DefaultImg}}),i("div",{staticStyle:{width:"120px"}},[e._v(e._s(t.row.fullName))])])]}}])}),i("el-table-column",{attrs:{width:"150",formatter:e.getType,label:"商品分类"}}),i("el-table-column",{attrs:{width:"150",prop:"price",label:"价格"}}),i("el-table-column",{attrs:{width:"80",prop:"stock",label:"库存"}}),i("el-table-column",{attrs:{width:"80",prop:"sales",label:"销量"}})],1)],1)},xe=[],De=(i("99af"),i("4160"),i("c975"),i("159b"),i("af3f")),Oe=i("1ab1"),Te={name:"session-select-product",components:{BizDialogSelector:De["a"]},props:{visibility:{type:Boolean,default:function(){return!1}}},data:function(){return{DefaultImg:de.a,tableData:[],selectionKeys:[],selectionList:[],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},dialogFilters:[{type:"input",label:"",placeholder:"请输入商品名称",name:"searchValue",value:""}]}},computed:{},watch:{},created:function(){this.getProductList()},methods:{handleSizeChange:function(e){this.pagination.pageSize=e,this.getProductList()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getProductList()},getProductList:function(){var e=this,t={state:"2",shopId:window.top.SHOP_ID||"",searchValue:this.dialogFilters[0].value,pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize};Oe["a"].get(g["g"].commodity.getCommodityList,t).then((function(t){e.tableData=t.content,e.pagination.total=Number(t.total)})).catch((function(e){console.error(e)}))},confirmedProduct:function(e){this.selectionKeys=e.concat(),this.$emit("select",this.selectionKeys)},dialogFilterDataChange:function(e){this.dialogFilters=e,this.pagination.currentPage=1,this.getProductList()},selectionChange:function(e){var t=this;e.forEach((function(e){-1===t.selectionList.indexOf(e)&&t.selectionList.push(e)}))},productFilterDataChange:function(){this.pagination.currentPage=1,this.getProductList()},onClose:function(){this.$emit("update:visibility",!1)},getType:function(e){switch(e.categoryType){case"0":return"整车";case"1":return"车品";case"2":return"服务";default:break}}}},_e=Te,Pe=(i("13ea8"),Object(I["a"])(_e,Ie,xe,!1,null,null,null)),Le=Pe.exports,je=i("e4ab"),$e={name:"ImChatArea",data:function(){return{accept:"",visibility:!1,serverUrl:"/admin/file/uploads.jhtml",fileData0:{type:"0"},name:"file",dialogBlackVisible:!1,dialogWidth:"450px",form:{reason:""},rules:{reason:[{required:!0,message:"请输入原因",trigger:"blur"},{max:120,message:"最多输入120个字",trigger:"change"}]}}},created:function(){},components:{BizEmojiPicker:je["a"],SelectProduct:Le},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["activatedRoom","csData"])),Object(s["c"])(["currentUser"])),methods:Object(r["a"])(Object(r["a"])({},Object(s["d"])("SessionOnline",["updateTabType","updateChatAreaMessage","newMessageToClientList","updateClientSessionState","clearActivateRoomInput"])),{},{sendText:function(){""!==this.activatedRoom.input?(v["a"].sendMessage({to:{id:this.activatedRoom.id},from:{id:this.currentUser.id,name:this.currentUser.name,head:this.csData.head},chat_type:this.getChatType(),chat_with:this.getChatWith(),payload:{body:{msg:this.activatedRoom.input,type:"txt"},ext:{}}}),this.clearActivateRoomInput()):this.$message.warning("不能发空消息")},uploadPicture:function(){var e=this;this.accept="image/*",this.fileData0.type="0",this.$nextTick((function(){e.$refs.upload.$refs["upload-inner"].$refs.input.click()}))},uploadVideo:function(){var e=this;this.accept="video/*",this.fileData0.type="2",this.$nextTick((function(){e.$refs.upload.$refs["upload-inner"].$refs.input.click()}))},selectProduct:function(e){var t,i=Object(o["a"])(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;v["a"].sendMessage({msg_id:"",timestamp:"",direction:"",to:{id:this.activatedRoom.id},from:{id:this.currentUser.id,name:this.currentUser.name,head:this.csData.head},chat_type:this.getChatType(),chat_with:this.getChatWith(),payload:{body:{id:a,type:"product"},ext:{shopId:""}}})}}catch(n){i.e(n)}finally{i.f()}},uploadSuccess:function(e){v["a"].sendMessage({msg_id:"",timestamp:"",direction:"",to:{id:this.activatedRoom.id},from:{id:this.currentUser.id,name:this.currentUser.name,head:this.csData.head},chat_type:this.getChatType(),chat_with:this.getChatWith(),payload:{body:{url:e.fis[0].url,type:"0"===this.fileData0.type?"img":"video"},ext:{shopId:""}}})},sendProduct:function(){this.visibility=!0},sendEvaluation:function(){v["a"].sendEvaluation({to:{id:this.activatedRoom.id},from:{id:this.currentUser.id,name:this.currentUser.name,head:this.csData.head},chat_type:this.getChatType(),chat_with:this.getChatWith(),payload:{body:{msg:"",type:"evaluation"},ext:{}}}),this.$message.success("评价邀请已发送")},typing:function(e){this.updateChatAreaMessage({input:e})},getChatWith:function(){switch(this.activatedRoom.imType){case"cs":return"cs";case"client":return"client";case"clientEnd":return"client";case"group":return"group";default:break}},getChatType:function(){switch(this.activatedRoom.imType){case"cs":return"chat";case"client":return"chat";case"clientEnd":return"chat";case"group":return"groupchat";default:break}},chooseEmoji:function(e){var t=this.$refs.elinput.$refs.textarea.selectionStart,i=this.$refs.elinput.$refs.textarea.selectionEnd;this.updateChatAreaMessage({input:this.activatedRoom.input.slice(0,t)+e+this.activatedRoom.input.slice(i)}),this.$refs.popover.doClose()},endSession:function(){var e=this;this.$confirm("是否确认结束会话?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.newMessageToClientList({isReaded:!0,id:e.activatedRoom.id,fromName:"",body:{msg:"会话已结束，发送消息后重新接入",type:"session_end"},isMyself:!1}),e.updateClientSessionState({clientId:e.activatedRoom.id}),v["a"].dispatcherSession(e.activatedRoom.id)})).catch((function(){}))},defriend:function(){this.dialogBlackVisible=!0},rollOut:function(){this.updateTabType({tabType:"roll-out"})},createBalck:function(){var e=this;this.$refs.blackRule.validate((function(t){t&&p["a"].createBlack({ids:[e.activatedRoom.id],remarks:e.form.reason},(function(t){e.$message({type:"success",message:"创建黑名单成功"}),e.dialogBlackVisible=!1}),(function(t){e.$message({type:"warning",message:t.errorMessage}),e.dialogBlackVisible=!1}))}))}})},Re=$e,Ne=(i("0b13"),Object(I["a"])(Re,Se,Me,!1,null,null,null)),Ee=Ne.exports,Be={name:"ImChatWindow",data:function(){return{}},created:function(){},components:{ImChatArea:Ee,ImChatList:ke},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["activatedRoom","groupList","csListOnline","csListNotOnline","clientListOnline","clientListNotOnline","clientEndListOnline","clientEndListNotOnline","csData"])),{},{style:function(){return this.activatedRoom.id?{}:{visibility:"hidden"}}}),methods:{onProduct:function(e){this.$emit("product",e)},isActivated:function(e){return this.activatedRoom.imType===e.imType&&this.activatedRoom.id===e.id},chatListStyle:function(e){return this.activatedRoom.imType===e.imType&&this.activatedRoom.id===e.id?{}:{position:"absolute",top:"6600px"}}}},ze=Be,Ae=(i("9bc5"),Object(I["a"])(ze,ae,ne,!1,null,null,null)),Ue=Ae.exports,Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"im-right-sidebar"},[i("el-tabs",{attrs:{type:"border-card"},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[i("el-tab-pane",{attrs:{label:"基本信息",name:"base-info"}},[i("PersonInfo")],1),e.isClient?i("el-tab-pane",{attrs:{label:"工单",name:"work-sheet"}},[i("work-sheet")],1):e._e(),e.isClient&&"roll-out"===e.tabType?i("el-tab-pane",{attrs:{label:"转出",name:"zhuanchu"}},[i("roll-out")],1):e._e()],1)],1)},Ve=[],qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"person-info"},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"label-width":"80px",size:"small",disabled:"","inline-message":!0}},[e.isCs||e.isClient?i("el-form-item",{attrs:{label:"用户名"}},[i("el-input",{model:{value:e.userInfo.userName,callback:function(t){e.$set(e.userInfo,"userName",t)},expression:"userInfo.userName"}})],1):e._e(),e.isCs||e.isClient?i("el-form-item",{attrs:{label:"手机号"}},[i("el-input",{model:{value:e.userInfo.mobile,callback:function(t){e.$set(e.userInfo,"mobile",t)},expression:"userInfo.mobile"}})],1):e._e(),e.isCs||e.isClient?i("el-form-item",{attrs:{label:"姓名"}},[i("el-input",{model:{value:e.userInfo.realName,callback:function(t){e.$set(e.userInfo,"realName",t)},expression:"userInfo.realName"}})],1):e._e(),e.isCs||e.isClient?i("el-form-item",{attrs:{label:"昵称"}},[i("el-input",{model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}})],1):e._e(),e.isCs||e.isClient?i("el-form-item",{attrs:{label:"用户来源"}},[i("el-input",{attrs:{value:e.getSource}})],1):e._e(),e.isCs||e.isClient?i("el-form-item",{attrs:{label:"性别"}},[i("el-select",{model:{value:e.userInfo.gender,callback:function(t){e.$set(e.userInfo,"gender",t)},expression:"userInfo.gender"}},[i("el-option",{attrs:{label:"男",value:"0"}}),i("el-option",{attrs:{label:"女",value:"1"}}),i("el-option",{attrs:{label:"保密",value:"2"}})],1)],1):e._e(),e.isGroup?i("el-form-item",{attrs:{label:"群组"}},[i("el-input",{model:{value:e.groupInfo.name,callback:function(t){e.$set(e.groupInfo,"name",t)},expression:"groupInfo.name"}})],1):e._e(),e.isGroup?i("el-form-item",{attrs:{label:"群主"}},[i("el-input",{model:{value:e.groupInfo.groupOwner.name,callback:function(t){e.$set(e.groupInfo.groupOwner,"name",t)},expression:"groupInfo.groupOwner.name"}})],1):e._e()],1)],1)},Fe=[],He=i("2863"),We={name:"PersonInfo",data:function(){return{loading:!1,userInfo:{userSource:"",realName:"",userName:"",mobile:"",nickname:"",gender:"0"},groupInfo:{name:"",groupOwner:{name:""}}}},props:{},created:function(){},components:{},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["activatedRoom"])),{},{isCs:function(){return"cs"===this.activatedRoom.imType},isClient:function(){return"client"===this.activatedRoom.imType||"clientEnd"===this.activatedRoom.imType},isGroup:function(){return"group"===this.activatedRoom.imType},getSource:function(){switch(this.userInfo.userSource){case"0":return"推荐注册";case"1":return"潜客转化";case"2":return"正常注册";case"3":return"后台创建";case"4":return"其他";default:return""}}}),mounted:function(){this.getInfo()},watch:{activatedRoom:function(){this.getInfo()}},methods:{getInfo:function(){"cs"===this.activatedRoom.imType||"client"===this.activatedRoom.imType||"clientEnd"===this.activatedRoom.imType?this.getUserInfo():"group"===this.activatedRoom.imType&&this.getGroupInfo()},getUserInfo:function(){var e=this;this.loading=!0,b.getClient({id:this.activatedRoom.id},(function(t){e.userInfo=t.memberData,e.loading=!1}),(function(t){console.log(t),e.loading=!1}))},getGroupInfo:function(){var e=this;this.loading=!0,He["a"].query({id:this.activatedRoom.id},(function(t){e.groupInfo=Object.assign(e.groupInfo,t.data),e.loading=!1}),(function(t){console.log(t),e.loading=!1}))}}},Ke=We,Ye=(i("9f98"),Object(I["a"])(Ke,qe,Fe,!1,null,null,null)),Je=Ye.exports,Qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("biz-grid",{staticClass:"cs-work-sheet"},[i("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px",size:"small","inline-message":!0}},[i("el-form-item",{attrs:{label:"会员",prop:"member"}},[i("el-input",{attrs:{placeholder:"请选择会员",disabled:!0},model:{value:e.member.name,callback:function(t){e.$set(e.member,"name",t)},expression:"member.name"}})],1),i("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[i("el-input",{attrs:{placeholder:"请输入联系电话",disabled:""},model:{value:e.member.mobile,callback:function(t){e.$set(e.member,"mobile",t)},expression:"member.mobile"}})],1),i("el-form-item",{attrs:{label:"发起人",prop:"sponsor"}},[i("el-select",{attrs:{placeholder:"请选择发起人",value:e.getUser.id,disabled:!0}},e._l(e.currentUserList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"工单优先级",prop:"level"}},[i("el-radio",{attrs:{label:"0"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("低")]),i("el-radio",{attrs:{label:"1"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("中")]),i("el-radio",{attrs:{label:"2"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("高")])],1),i("el-form-item",{attrs:{label:"工单类型",prop:"type"}},[i("el-select",{attrs:{placeholder:"请选择工单类型",disabled:2===e.form.state},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-option",{attrs:{label:"售前",value:"0"}}),i("el-option",{attrs:{label:"售后",value:"1"}}),i("el-option",{attrs:{label:"问题反馈",value:"2"}}),i("el-option",{attrs:{label:"投诉",value:"3"}})],1)],1),i("el-form-item",{staticClass:"work-sheet-content",attrs:{label:"工单内容",prop:"content"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入工单内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}),i("img-uploader",{model:{value:e.imgList,callback:function(t){e.imgList=t},expression:"imgList"}})],1),i("el-form-item",{attrs:{label:"工单状态",prop:"state"}},[i("el-select",{attrs:{placeholder:"请选择工单状态"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[i("el-option",{attrs:{label:"待处理",disabled:e.form.state>0,value:"0"}}),i("el-option",{attrs:{label:"受理中",disabled:e.form.state>1,value:"1"}}),i("el-option",{attrs:{label:"已完成",value:"2"}})],1)],1),i("el-form-item",{staticClass:"handle-type",attrs:{label:"转交"}},[i("div",[""===e.id||"0"===e.form.handleType?i("el-radio",{attrs:{label:"0"},model:{value:e.form.handleType,callback:function(t){e.$set(e.form,"handleType",t)},expression:"form.handleType"}},[e._v(" 受理人 ")]):e._e(),""===e.id||"1"===e.form.handleType?i("el-radio",{attrs:{label:"1"},model:{value:e.form.handleType,callback:function(t){e.$set(e.form,"handleType",t)},expression:"form.handleType"}},[e._v(" 受理组 ")]):e._e()],1),i("el-select",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.handleType,expression:"form.handleType === '0'"}],attrs:{placeholder:"请选择受理人",disabled:2===e.form.state},model:{value:e.form.handler.id,callback:function(t){e.$set(e.form.handler,"id",t)},expression:"form.handler.id"}},e._l(e.handlerList,(function(e){return i("el-option",{key:e.index,attrs:{label:e.name,value:e.id}})})),1),i("el-select",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.handleType,expression:"form.handleType === '1'"}],attrs:{placeholder:"请选择受理组",disabled:2===e.form.state},model:{value:e.form.handleGroup.id,callback:function(t){e.$set(e.form.handleGroup,"id",t)},expression:"form.handleGroup.id"}},e._l(e.handleGroupList,(function(e){return i("el-option",{key:e.index,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"备注",prop:"handleContent"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入转交备注",autosize:"",disabled:2===e.form.state},model:{value:e.form.handleContent,callback:function(t){e.$set(e.form,"handleContent",t)},expression:"form.handleContent"}})],1)],1)],1)},Xe=[],Ze=(i("d81d"),i("f36f")),et=i("8330"),tt=i("2119"),it=i("2bb3"),at={name:"cs-work-sheet",components:{BizGrid:Ze["a"],BizSaveButton:et["a"],ImgUploader:tt["a"]},props:{},data:function(){return{member:{},imgList:[],id:"",url:"/admin/member/json/list.jhtml",selectedMemberId:[],handlerList:[],handleGroupList:[],showDialog:!1,isCS:!0,rules:{sponsor:[{required:!0,message:"请选择发起人",trigger:"blur"}],level:[{required:!0,message:"请选择优先级",trigger:"blur"}],type:[{required:!0,message:"请选择工单类型",trigger:"blur"}],content:[{required:!0,message:"请填写工单内容",trigger:"blur"}],state:[{required:!0,message:"请选择工单状态",trigger:"blur"}]},operations:[{label:"保存",name:"save",type:"primary"}],loading:!1,form:this.resetForm(),filters:[{type:"input",placeholder:"请输入会员姓名或手机号",name:"searchbar",value:""}],tableData:[],pagination:this.resetPagination()}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(s["c"])(["getUser"])),Object(s["c"])("SessionOnline",["activatedRoom"])),{},{currentCSId:function(){var e,t=Object(o["a"])(this.getUser.roleDatas);try{for(t.s();!(e=t.n()).done;){var i=e.value;if("4"===i.type)return i.refId}}catch(a){t.e(a)}finally{t.f()}return""},currentUserList:function(){return[{id:this.getUser.id,name:this.getUser.name}]}}),watch:{activatedRoom:function(){this.getUserInfo()}},created:function(){this.getUserInfo(),this.querySponsorList(),this.querySponsorGroupList()},methods:{getUserInfo:function(){var e=this,t={id:this.activatedRoom.id};Oe["a"].get(g["g"].customerService.Client,t).then((function(t){e.member=t.memberData}))},resetForm:function(){return{number:"",createDate:"",member:this.member,mobile:"",sponsor:{id:""},level:"0",type:"0",content:"",images:[],state:"0",handleType:"0",handler:{id:""},handleGroup:{id:""},handleContent:""}},updateVisibility:function(){this.showDialog=!1},resetPagination:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}},pageSizeChange:function(e){this.pagination.pageSize=e,this.queryMemberList()},currentPageChange:function(e){this.pagination.currentPage=e,this.queryMemberList()},filterDataChange:function(e){this.filters=e,this.queryMemberList()},operate:function(e){this[e]()},save:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.submit()}))},submit:function(){this.id?this.update():this.create()},create:function(){var e=this;this.form.id=this.member.id,this.form.nickname=this.member.nickname;var t={level:this.form.level,type:this.form.type,state:this.form.state,member:{id:this.member.id,mobile:this.member.mobile},sponsor:{id:this.currentCSId},handler:{id:this.form.handler.id},handleGroup:{id:this.form.handleGroup.id},images:this.formatFormImg(this.imgList),handleType:this.form.handleType,content:this.form.content,handleContent:this.form.handleContent};this.loading=!0,it["a"].createBaseInfo(t,(function(t){e.loading=!1,e.$message.success("操作成功"),e.$emit("created"),e.clear()}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage),console.log("ERR_CREATE: ",t)}))},clear:function(){this.form=this.resetForm()},formatImgList:function(e){var t=e.map((function(e){return{image:e}}));return{images:t}},formatFormImg:function(e){var t=e.map((function(e){return{image:e}}));return t},querySponsorList:function(){var e=this,t={pageSize:200};it["a"].querySponsorList(t,(function(t){e.handlerList=t.content}),(function(e){}))},querySponsorGroupList:function(){var e=this,t={pageSize:200};it["a"].querySponsorGroupList(t,(function(t){e.handleGroupList=t.content}),(function(e){}))}}},nt=at,ot=(i("746e"),Object(I["a"])(nt,Qe,Xe,!1,null,null,null)),rt=ot.exports,st=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cs-roll-out"},[i("div",{staticClass:"cs-list"},[i("div",{staticClass:"cs"},[i("el-radio-group",{model:{value:e.csId,callback:function(t){e.csId=t},expression:"csId"}},e._l(e.csList,(function(t){return i("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1)]),i("el-select",{attrs:{size:"small"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}},e._l(e.reasonOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("div",{staticClass:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmed}},[e._v("确定")])],1)],1)},ct=[],lt={name:"RollOut",data:function(){return{reason:"",csId:"",reasonOptions:[{label:"错拍重拍漏拍",value:"0"},{label:"退款退货问题",value:"1"},{label:"换货问题",value:"2"},{label:"修改地址",value:"3"},{label:"修改发票",value:"4"},{label:"物流问题",value:"5"}]}},props:{},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["csList","activatedRoom"])),Object(s["c"])(["currentUser"])),watch:{},methods:Object(r["a"])(Object(r["a"])({},Object(s["d"])("SessionOnline",["updateTabType","removeRoom"])),{},{cancel:function(){this.updateTabType({tabType:""})},confirmed:function(){var e=this;if(""!==this.reason)if(""!==this.csId){var t,i="",a=Object(o["a"])(this.reasonOptions);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.value===this.reason){i=n.label;break}}}catch(r){a.e(r)}finally{a.f()}v["a"].dispatcherRollOut({reasonValue:this.reason,reasonName:i,head:this.activatedRoom.head,name:this.activatedRoom.name,from:{id:this.currentUser.id,name:this.currentUser.name},csId:this.csId,clientId:this.activatedRoom.id},(function(t){t?(e.$message({showClose:!0,message:"转出成功",type:"success"}),e.updateTabType({tabType:""}),e.$nextTick((function(){e.removeRoom({imType:"client",id:e.activatedRoom.id})}))):e.$message({showClose:!0,message:"转出失败，所选客服不在线",type:"warning"})}))}else this.$message({showClose:!0,message:"请选择转出人",type:"warning"});else this.$message({showClose:!0,message:"请选择原因",type:"warning"})}})},ut=lt,dt=(i("4659"),Object(I["a"])(ut,st,ct,!1,null,null,null)),pt=dt.exports,mt={name:"ImRightSidebar",data:function(){return{tabName:"base-info"}},computed:Object(r["a"])(Object(r["a"])({},Object(s["c"])("SessionOnline",["activatedRoom","tabType"])),{},{isCs:function(){return"cs"===this.activatedRoom.imType},isClient:function(){return"client"===this.activatedRoom.imType||"clientEnd"===this.activatedRoom.imType},isGroup:function(){return"group"===this.activatedRoom.imType}}),watch:{tabType:function(e){var t=this;"roll-out"===e?this.$nextTick((function(){t.tabName="zhuanchu"})):this.$nextTick((function(){t.tabName="base-info"}))}},created:function(){},components:{PersonInfo:Je,WorkSheet:rt,RollOut:pt},methods:{}},ft=mt,ht=(i("dad8"),Object(I["a"])(ft,Ge,Ve,!1,null,null,null)),gt=ht.exports,bt={name:"ImContent",data:function(){return{}},created:function(){},components:{ImHeader:ie,ImChatWindow:Ue,ImRightSidebar:gt},methods:{onProduct:function(e){this.$emit("product",e)}}},vt=bt,yt=(i("f8ce"),Object(I["a"])(vt,Y,J,!1,null,null,null)),wt=yt.exports,Ct=i("7132"),kt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("biz-grid",{staticClass:"add-product-base-info"},[e.isEdit?i("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}):e._e(),i("div",{ref:"form",staticClass:"form-one"},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"productDataForm",attrs:{"label-width":"130px",size:"small",model:e.productDataModel,rules:e.productDataRules,disabled:!e.isEdit,"inline-message":!0}},[i("el-form-item",{attrs:{label:"商品分类：",required:!0}},[i("el-cascader",{attrs:{options:e.categoryOptions,"change-on-select":"","show-all-levels":!1,disabled:!1===e.isCreated},on:{change:e.categoryChange},model:{value:e.productDataModel.categoryId,callback:function(t){e.$set(e.productDataModel,"categoryId",t)},expression:"productDataModel.categoryId"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.isCreated,expression:"isCreated === true"}],staticClass:"tooltip"},[e._v("商品创建后分类不可修改")])],1),i("el-form-item",{attrs:{label:"类型："}},[i("el-select",{attrs:{disabled:!1===e.isCreated,placeholder:"请选择商品类型"},on:{change:e.productTypeChange},model:{value:e.productDataModel.productType,callback:function(t){e.$set(e.productDataModel,"productType",t)},expression:"productDataModel.productType"}},e._l(e.productTypes,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.isCreated,expression:"isCreated === true"}],staticClass:"tooltip"},[e._v("商品创建后类型不可修改")])],1),i("el-form-item",{attrs:{label:"编号："}},[i("el-input",{attrs:{placeholder:e.productDataModel.id?"请输入编号":"创建成功后自动生成",readonly:!0,disabled:!0},model:{value:e.productDataModel.sn,callback:function(t){e.$set(e.productDataModel,"sn",t)},expression:"productDataModel.sn"}})],1),i("el-form-item",{attrs:{label:"商品条码：",prop:"barCode"}},[i("el-input",{attrs:{placeholder:"请输入条码"},model:{value:e.productDataModel.barCode,callback:function(t){e.$set(e.productDataModel,"barCode",t)},expression:"productDataModel.barCode"}})],1),i("el-form-item",[i("span",{directives:[{name:"popover",rawName:"v-popover:codePop",arg:"codePop"}],attrs:{slot:"label"},slot:"label"},[e._v(" 关键词 "),i("i",{staticClass:"iconfont el-icon-question",staticStyle:{color:"#ff7300"}}),i("el-popover",{ref:"codePop",attrs:{placement:"left",width:"300",trigger:"hover"}},[i("div",[e._v("填写关键词后，客户可以根据关键词搜索到此商品。使用符合用户习惯的关键词可以有效提高商品被搜索到的概率。")])])],1),i("div",{staticClass:"item-content"},[i("div",{staticClass:"tag-list"},[i("div",{staticClass:"tag-group"},e._l(e.tagGroup,(function(t,a){return i("el-tag",{key:a,attrs:{closable:"",size:"mini"},on:{close:function(t){return e.removeTag(a)}}},[e._v(e._s(t))])})),1),i("div",{staticClass:"toggle-btn",on:{click:function(t){e.showRecommend=!e.showRecommend}}},[i("div",{staticClass:"iconfont biz-icon-i-web-zd1",class:{"rotate-180":e.showRecommend}}),e._v(" "+e._s(e.toggleRecommendTxt)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showRecommend,expression:"showRecommend"}],staticClass:"recommend-group"},[e._l(e.recommendTagGroup,(function(t,a){return i("el-tag",{key:a,attrs:{type:"info",size:"mini"},on:{click:function(i){return e.addRecommendTag(t)}}},[e._v(" "+e._s(t)+" ")])})),e.recommendTagGroup&&!e.recommendTagGroup.length?i("span",{staticStyle:{color:"#bbbbbb"}},[e._v("暂无推荐")]):e._e()],2)])])]),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showPriceRadio,expression:"showPriceRadio"}],attrs:{label:"销售价："}},[i("el-radio",{attrs:{label:"false"},model:{value:e.productDataModel.isPriceNegotiable,callback:function(t){e.$set(e.productDataModel,"isPriceNegotiable",t)},expression:"productDataModel.isPriceNegotiable"}},[e._v("一口价")]),i("el-radio",{attrs:{label:"true"},model:{value:e.productDataModel.isPriceNegotiable,callback:function(t){e.$set(e.productDataModel,"isPriceNegotiable",t)},expression:"productDataModel.isPriceNegotiable"}},[e._v("价格面议")])],1),e.isNeedToShowPrice?i("el-form-item",{attrs:{label:e.priceLabel,prop:"price"}},[i("el-input",{attrs:{placeholder:"请输入一口价"},model:{value:e.productDataModel.price,callback:function(t){e.$set(e.productDataModel,"price",t)},expression:"productDataModel.price"}})],1):e._e(),i("el-form-item",{attrs:{label:"市场指导价：",prop:"marketPrice"}},[i("el-input",{attrs:{placeholder:"请输入市场指导价"},model:{value:e.productDataModel.marketPrice,callback:function(t){e.$set(e.productDataModel,"marketPrice",t)},expression:"productDataModel.marketPrice"}})],1),i("el-form-item",{attrs:{label:"成本价：",prop:"cost"}},[i("el-input",{attrs:{placeholder:"请输入成本价"},model:{value:e.productDataModel.cost,callback:function(t){e.$set(e.productDataModel,"cost",t)},expression:"productDataModel.cost"}})],1),i("el-form-item",{attrs:{label:"商品缩略图：",prop:"image"}},[i("BizAvatarUploaderNew",{model:{value:e.productDataModel.image,callback:function(t){e.$set(e.productDataModel,"image",t)},expression:"productDataModel.image"}})],1),i("el-form-item",{attrs:{label:"库存：",prop:"stock"}},[i("el-input",{attrs:{placeholder:"请输入..."},model:{value:e.productDataModel.stock,callback:function(t){e.$set(e.productDataModel,"stock",t)},expression:"productDataModel.stock"}})],1),i("el-form-item",{attrs:{label:"销量："}},[i("el-input",{attrs:{placeholder:"请输入销量",readonly:!0,disabled:!0},model:{value:e.productDataModel.sales,callback:function(t){e.$set(e.productDataModel,"sales",t)},expression:"productDataModel.sales"}})],1),i("el-form-item",{attrs:{label:"商品重量：",prop:"weight"}},[i("el-input",{attrs:{placeholder:"默认0"},model:{value:e.productDataModel.weight,callback:function(t){e.$set(e.productDataModel,"weight",t)},expression:"productDataModel.weight"}},[i("template",{slot:"append"},[e._v("KG")])],2)],1),e.isNeedToShowTestDrive?i("el-form-item",{attrs:{label:"试驾车辆"}},[i("el-radio",{attrs:{label:"1"},model:{value:e.productDataModel.isSupportTestDrive,callback:function(t){e.$set(e.productDataModel,"isSupportTestDrive",t)},expression:"productDataModel.isSupportTestDrive"}},[e._v("是")]),i("el-radio",{attrs:{label:"0"},model:{value:e.productDataModel.isSupportTestDrive,callback:function(t){e.$set(e.productDataModel,"isSupportTestDrive",t)},expression:"productDataModel.isSupportTestDrive"}},[e._v("否")])],1):e._e(),i("el-form-item",{attrs:{label:"口碑："}},[e._l(e.productDataModel.reputations,(function(t){return i("el-tag",{key:t,attrs:{size:"small",closable:"","disable-transitions":!0,type:"warning"},on:{close:function(i){return e.handleClose(t)}}},[e._v(e._s(t))])})),e.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"请输入1-6字口碑词汇"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+添加")])],2),i("el-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[e._v("营销标签")]),i("div",{staticClass:"item-content"},[i("div",{staticClass:"tag-list"},[i("div",{staticClass:"tag-group"},e._l(e.tags,(function(t,a){return i("el-tag",{key:a,attrs:{closable:"",size:"mini"},on:{close:function(i){return e.removeMarketTag(t.id)}}},[e._v(e._s(t.name))])})),1),i("div",{staticClass:"toggle-btn",on:{click:function(t){e.showMarketRecommend=!e.showMarketRecommend}}},[i("div",{staticClass:"iconfont biz-icon-i-web-zd1",class:{"rotate-180":e.showMarketRecommend}}),e._v(" "+e._s(e.toggleMarketRecommendTxt)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showMarketRecommend,expression:"showMarketRecommend"}],staticClass:"recommend-group"},[e._l(e.recommendMarketTags.slice(0,10),(function(t){return i("el-tag",{key:t.id,attrs:{type:"info",size:"mini"},on:{click:function(i){return e.addRecommendMarketTag(t)}}},[e._v(e._s(t.name))])})),i("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.recommendMarketTags&&e.recommendMarketTags.length>10,expression:"recommendMarketTags&&recommendMarketTags.length > 10"}],staticStyle:{"background-color":"white",border:"none"},attrs:{type:"info",size:"mini"},on:{click:function(t){e.dialogVisibility=!0}}},[e._v(" 更多 "),i("i",{staticClass:"el-icon-d-arrow-right"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.recommendMarketTags&&!e.recommendMarketTags.length,expression:"recommendMarketTags&&!recommendMarketTags.length"}],staticStyle:{color:"#bbbbbb"}},[e._v("暂无推荐")])],2)])])])],1),e.isSubscriptionChecked()?i("el-form",{ref:"subscriptionForm",staticStyle:{width:"70%"},attrs:{"label-width":"120px ",size:"small",model:e.productDataModel,rules:e.subscriptionRules}},[i("el-form-item",{attrs:{label:"订金金额：",prop:"subscription"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入不大于销售价的数字"},model:{value:e.productDataModel.subscription,callback:function(t){e.$set(e.productDataModel,"subscription",t)},expression:"productDataModel.subscription"}})],1),i("el-form-item",{attrs:{label:"订金可退："}},[i("el-radio-group",{model:{value:e.productDataModel.isSubscriptionReturn,callback:function(t){e.$set(e.productDataModel,"isSubscriptionReturn",t)},expression:"productDataModel.isSubscriptionReturn"}},[i("el-radio",{attrs:{label:"true"}},[e._v("是")]),i("el-radio",{attrs:{label:"false"}},[e._v("否")])],1)],1)],1):e._e()],1)],1)},St=[],Mt=(i("4de4"),i("a434"),i("d3b7"),i("ac1f"),i("25f0"),i("6062"),i("3ca3"),i("1276"),i("498a"),i("ddb0"),i("96cf"),i("1da1")),It=i("2909"),xt=i("c17f"),Dt=i("cc55"),Ot=function e(t){var i,a=[],n=Object(o["a"])(t);try{for(n.s();!(i=n.n()).done;){var r=i.value,s={value:r.id,label:r.name};if(r.childrenProductCategoryDataList&&r.childrenProductCategoryDataList.length>0&&(s.children=e(r.childrenProductCategoryDataList)),r.children&&r.children.length>0){s.hasOwnProperty("children")||(s.children=[]);var c,l=Tt(r.childrenProductCategoryDataList),u=Object(o["a"])(l);try{for(u.s();!(c=u.n()).done;){var d=c.value;s.children.push(d)}}catch(p){u.e(p)}finally{u.f()}}a.push(s)}}catch(p){n.e(p)}finally{n.f()}return a},Tt=function(e){var t,i=[],a=Object(o["a"])(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;i.push({label:n.name,value:n.id})}}catch(r){a.e(r)}finally{a.f()}return i},_t={name:"CommodityMgmtBaseInfo",data:function(){var e=this,t=function(t,i,a){e.productDataModel.categoryId&&e.productDataModel.categoryId.length>0?a():a(new Error("请选择分类"))},i=function(t,i,a){e.productDataModel.price&&Number(e.productDataModel.price)>=0?a():a(new Error("销售价必须为数字值"))},a=function(t,i,a){e.productDataModel.marketPrice,Number(e.productDataModel.marketPrice)>=0?a():a(new Error("市场指导价必须为数字值"))},n=function(t,i,a){e.productDataModel.cost,Number(e.productDataModel.cost)>=0?a():a(new Error("成本价必须为数字值"))},o=function(t,i,a){e.productDataModel.beanPercent,Number(e.productDataModel.beanPercent)>=0?(Number(e.productDataModel.beanPercent)>100&&a(new Error("V豆折扣上限(%)不能超过100")),a()):a(new Error("V豆折扣上限(%)必须为数字值"))},r=function(t,i,a){""===e.productDataModel.giftPercent&&(e.productDataModel.giftPercent=0),Number(e.productDataModel.giftPercent)>=0?(Number(e.productDataModel.giftPercent)>100&&a(new Error("V豆赠送上限(%)不能超过100")),a()):a(new Error("V豆赠送上限(%)必须为数字值"))},s=function(t,i,a){""===e.productDataModel.weight&&(e.productDataModel.weight=0),Number(e.productDataModel.weight)>=0?e.productDataModel.weight&&-1!==e.productDataModel.weight.indexOf(".")&&e.productDataModel.weight.split(".")[1].length>2?a(new Error("只允许输入到小数后两位")):a():a(new Error("重量必须为数字值"))},c=function(t,i,a){"undefined"!==typeof e.productDataModel.image?(console.log(e.productDataModel.image)," "!==e.productDataModel.image?a():a(new Error("缩略图必须上传"))):a(new Error("缩略图必须上传"))},l=function(t,i,a){console.log(e.productDataModel.stock),""!==e.productDataModel.stock&&Number(e.productDataModel.stock)>=0&&-1===e.productDataModel.stock.indexOf(".")?a():a(new Error("库存必须为整数值"))},u=function(t,i,a){""!==e.productDataModel.subscription&&Number(e.productDataModel.subscription)>0?(Number(e.productDataModel.subscription)>=Number(e.productDataModel.price)&&a(new Error("请输入不大于销售价的数字")),a()):a(new Error("订金金额必须为大于0数值"))},d=function(t,i,a){"2"===e.productDataModel.productType||"7"===e.productDataModel.productType||e.productDataModel.paymentMethodIds&&e.productDataModel.paymentMethodIds.length>0?a():a(new Error("请至少选择一种支付方式"))},p=function(t,i,a){"7"===e.productDataModel.productType||e.shippingMethodIds.length>0?a():(e.$message.warning("请至少选择一种配送方式"),a(new Error("请至少选择一种配送方式")))},m=function(e,t,i){t&&!/^[A-Z0-9]*$/.test(t)?i(new Error("条码由大写英文字符和数字字符组成")):i()};return{dialogVisibility:!1,newMarketTagName:"",tags:[],recommendMarketTags:[],showMarketRecommend:!1,tagGroup:[],showRecommend:!1,previewDialogOpen:!1,recommendTagGroup:[],recommendMarketTagId:"",newTagName:"",operations:[{label:"保存",name:"save",type:"primary",disabled:!1,auth:["admin:product.edit"]},{label:"预览",name:"preview",type:"primary",class:"hidden"}],productDataRules:{categoryId:[{required:!0,trigger:"blur",validator:t}],price:[{required:!0,trigger:"blur",validator:i}],marketPrice:[{required:!1,trigger:"blur",validator:a}],cost:[{required:!1,trigger:"blur",validator:n}],beanPercent:[{required:!1,trigger:"blur",validator:o}],giftPercent:[{required:!1,trigger:"blur",validator:r}],weight:[{required:!0,trigger:"blur",validator:s}],image:[{required:!1,trigger:"blur",validator:c}],barCode:[{required:!1,trigger:"blur",validator:m}],stock:[{required:!0,trigger:"blur",validator:l}],paymentMethodIds:[{required:!0,trigger:"blur",validator:d}],shippingMethodIds:[{required:!0,trigger:"blur",validator:p}]},subscriptionRules:{subscription:[{required:!0,trigger:"blur",validator:u}]},isCreated:"true",defaultImg:"/resources/admin/images/default/product-default.png",productDataModel:this.getDefaultProductDataModel(),categoryOptions:[],productCategoryManage:[],productTypes:[],payOptions:[],shippingMethods:[],shippingMethodIds:[],setOptions:["是否置顶","是否订金支付"],checkedSet:[],inputVisible:!1,inputValue:"",loading:!1,refreshSign:!0,initializing:!1}},components:{BizGrid:Ze["a"],BizSaveButton:et["a"],BizAvatarUploaderNew:xt["b"]},props:{id:{type:String,default:""},tabSelection:{type:String},baseInfo:{type:Object},open:{type:Boolean},isEdit:{type:Boolean,default:function(){return!0}}},watch:{open:function(e){console.log(e),this.$refs.productDataForm.clearValidate(),e?""!==this.id?(this.operations[1].class="show",this.isCreated=!1):(this.operations[1].class="hidden",this.isCreated=!0,this.refresh()):(this.isCreated=!0,this.productTypes=[],this.payOptions=[],this.shippingMethods=[],this.checkedSet=[],this.recommendTagGroup=[])},id:function(e,t){var i=this;e?(this.$refs.form.scrollTop=0,this.$nextTick((function(){i.refresh()}))):this.productDataModel=this.getDefaultProductDataModel()}},created:function(){this.getDefaultImg(),this.getProductCategoryList()},computed:{toggleRecommendTxt:function(){var e=this.showRecommend;return e?"收起推荐":"展开推荐"},toggleMarketRecommendTxt:function(){var e=this.showMarketRecommend;return e?"收起推荐":"展开推荐"},isNeedToShowPrice:function(){return("0"===this.productDataModel.productType||"1"===this.productDataModel.productType||"7"===this.productDataModel.productType)&&"false"===this.productDataModel.isPriceNegotiable},isNeedToShowPaymentMethod:function(){return"2"!==this.productDataModel.productType&&"7"!==this.productDataModel.productType},isNeedToShowTestDrive:function(){var e=this,t=!1;return this.productCategoryManage.map((function(i){console.log(i.name),i.id===e.productDataModel.categoryId[e.productDataModel.categoryId.length-1]&&"car"===i.type?t=!0:i.childrenProductCategoryDataList&&i.childrenProductCategoryDataList.map((function(i){i.id===e.productDataModel.categoryId[e.productDataModel.categoryId.length-1]&&"car"===i.type&&(t=!0)}))})),t},isCarOrService:function(){var e=this,t=!1;return this.productCategoryManage.map((function(i){console.log(i.name),i.id!==e.productDataModel.categoryId[e.productDataModel.categoryId.length-1]||"car"!==i.type&&"carService"!==i.type?i.childrenProductCategoryDataList&&i.childrenProductCategoryDataList.map((function(i){i.id!==e.productDataModel.categoryId[e.productDataModel.categoryId.length-1]||"car"!==i.type&&"carService"!==i.type||(t=!0)})):t=!0})),t},priceLabel:function(){return"0"===this.productDataModel.productType?"一口价：":"销售价："},showPriceRadio:function(){return"0"===this.productDataModel.productType}},methods:{operate:function(e){this[e]()},preview:function(){this.previewDialogOpen=!0},addRecommendTag:function(e){this.tagGroup.includes(e)?this.$message.warning("该标签已存在，请重新添加"):this.tagGroup=Object(It["a"])(new Set(this.tagGroup.concat(e)))},addNewTag:function(){var e=String(this.newTagName).trim();e&&(this.tagGroup.includes(e)?this.$message.warning("该标签已存在，请重新添加"):this.tagGroup=Object(It["a"])(new Set(this.tagGroup.concat(e))),this.newTagName="")},removeTag:function(e){this.tagGroup=this.tagGroup.slice(0,e).concat(this.tagGroup.slice(e+1)),console.log("tagGroup: ",e,this.tagGroup)},getRecommendTag:function(){var e=this,t="/admin/common/keywords.jhtml",i=this.productDataModel.name,a={content:i};Oe["a"].get(t,a).then((function(t){e.recommendTagGroup=Object(It["a"])(new Set(t.keywords))})).catch((function(e){console.log("ERR_GET_RECOMMEND_TAGS: ",e)}))},categoryChange:function(e){console.log(this.productDataModel.categoryId)},getDefaultImg:function(){var e=this,t={type:"displaySetting"};Oe["a"].get("/admin/settings/settings.jhtml",t).then((function(t){t.settingList.defaultThumbnailProductImage&&(e.defaultImg=t.settingList.defaultThumbnailProductImage)})).catch((function(t){console.log(t),console.log("code错误"),e.$message.warning(t.errorMessage)}))},handleClose:function(e){this.productDataModel.reputations.splice(this.productDataModel.reputations.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){if(this.inputValue.length>6)return this.$message.warning("请输入1-6字口碑词汇"),!1;this.inputVisible=!1,this.inputValue&&(this.productDataModel.reputations.push(this.inputValue),this.inputValue="")},getDefaultProductDataModel:function(){return{shopId:window.top.SHOP_ID||"",id:"",sn:"",categoryId:[],brandId:"",seriesId:"",name:"",typeName:"",image:this.defaultImg,price:"",isPriceNegotiable:"false",cost:"",marketPrice:"",sales:"",stock:"0",isSupportTestDrive:"0",isList:"false",isTop:"false",isSubscription:"false",subscription:"",isSubscriptionReturn:"true",reputations:[],paymentMethodIds:[],productType:"0",bean:"",beanPercent:"",giftPercent:"",weight:"0",wholesalePrice:""}},getSaveProductDataModel:function(){var e=[];if("2"===this.productDataModel.productType){var t,i=Object(o["a"])(this.payOptions);try{for(i.s();!(t=i.n()).done;){var a=t.value;e.push(a.id)}}catch(d){i.e(d)}finally{i.f()}}else{var n,r=Object(o["a"])(this.productDataModel.paymentMethodIds);try{for(r.s();!(n=r.n()).done;){var s=n.value;e.push(s)}}catch(d){r.e(d)}finally{r.f()}}var c,l=Object(o["a"])(this.shippingMethods);try{for(l.s();!(c=l.n()).done;){var u=c.value;u.productValid="0",-1!==this.shippingMethodIds.indexOf(u.shopShippingMethod.id)&&(u.productValid="1")}}catch(d){l.e(d)}finally{l.f()}return{shopId:this.productDataModel.shopId,id:this.productDataModel.id,sn:this.productDataModel.sn,categoryId:this.productDataModel.categoryId[this.productDataModel.categoryId.length-1],brandId:this.productDataModel.brandId,seriesId:this.productDataModel.seriesId,name:this.productDataModel.name,image:this.productDataModel.image,price:this.productDataModel.price||"0",cost:this.productDataModel.cost,marketPrice:this.productDataModel.marketPrice,sales:this.productDataModel.sales,stock:this.productDataModel.stock,isSupportTestDrive:this.productDataModel.isSupportTestDrive,isPriceNegotiable:this.productDataModel.isPriceNegotiable,isList:String(this.isListChecked()),isTop:String(this.isTopChecked()),isSubscription:String(this.isSubscriptionChecked()),subscription:this.productDataModel.subscription,isSubscriptionReturn:this.productDataModel.isSubscriptionReturn,reputations:this.productDataModel.reputations,paymentMethodIds:e,shippingMethods:this.shippingMethods,productType:this.productDataModel.productType,bean:this.productDataModel.bean,beanPercent:this.productDataModel.beanPercent,giftPercent:this.productDataModel.giftPercent,weight:this.productDataModel.weight,keyword:this.tagGroup,tags:this.tags,barCode:this.productDataModel.barCode,vin:this.productDataModel.vin,wholesalePrice:this.productDataModel.wholesalePrice}},handleUploadSuccess:function(e){console.log(e),this.productDataModel.image=e},isListChecked:function(){var e,t=Object(o["a"])(this.checkedSet);try{for(t.s();!(e=t.n()).done;){var i=e.value;if("是否列出"===i)return!0}}catch(a){t.e(a)}finally{t.f()}return!1},isTopChecked:function(){var e,t=Object(o["a"])(this.checkedSet);try{for(t.s();!(e=t.n()).done;){var i=e.value;if("是否置顶"===i)return!0}}catch(a){t.e(a)}finally{t.f()}return!1},isSubscriptionChecked:function(){var e,t=Object(o["a"])(this.checkedSet);try{for(t.s();!(e=t.n()).done;){var i=e.value;if("是否订金支付"===i)return!0}}catch(a){t.e(a)}finally{t.f()}return!1},isNeedToShowBeanPercent:function(){return"0"===this.productDataModel.productType||"7"===this.productDataModel.productType},getParentCategory:function(e,t){var i=this;this.productDataModel.categoryId=[],e.forEach((function(e,a){if(e.value===t)return i.productDataModel.categoryId.unshift(e.value),!1;e.children&&e.children.forEach((function(a){if(a.value===t)return i.productDataModel.categoryId.unshift(a.value),i.productDataModel.categoryId.unshift(e.value),console.log(i.productDataModel.categoryId),!1;a.children&&a.children.forEach((function(n){if(n.value===t)return i.productDataModel.categoryId.unshift(n.value),i.productDataModel.categoryId.unshift(a.value),i.productDataModel.categoryId.unshift(e.value),!1;n.children&&n.children.forEach((function(o){if(o.value===t)return i.productDataModel.categoryId.unshift(o.value),i.productDataModel.categoryId.unshift(n.value),i.productDataModel.categoryId.unshift(a.value),i.productDataModel.categoryId.unshift(e.value),!1}))}))}))}))},refresh:function(){var e=this;this.initializing=!0,this.loading=!0;var t={id:this.id,shopId:window.top.SHOP_ID||""};this.getRecommendMarketTags(),pe["a"].queryProductBasicInfo(t,(function(t){e.tagGroup=t.productBasicInfoData?t.productBasicInfoData.keyword:[],t.productBasicInfoData?e.tags=t.productBasicInfoData.tags||[]:e.tags=[],e.tagGroup&&e.tagGroup.length?e.showRecommend=!1:e.showRecommend=!0,e.tags&&e.tags.length>0?e.showMarketRecommend=!1:e.showMarketRecommend=!0,e.productTypes=t.productTypes,e.payOptions=t.paymentMethods,e.shippingMethods=t.shippingMethods,e.shippingMethodIds=[];var i,a=Object(o["a"])(e.shippingMethods);try{for(a.s();!(i=a.n()).done;){var n=i.value;"1"===n.productValid&&e.shippingMethodIds.push(n.shopShippingMethod.id)}}catch(u){a.e(u)}finally{a.f()}if(e.refreshSign=!e.refreshSign,e.id)e.productDataModel=e.convert2ProductDataModel(t.productBasicInfoData),e.getParentCategory(e.categoryOptions,e.productDataModel.categoryId[0]),e.getRecommendTag();else{e.productDataModel.image=e.defaultImg;var r,s=Object(o["a"])(e.payOptions);try{for(s.s();!(r=s.n()).done;){var c=r.value;e.productDataModel.paymentMethodIds.push(c.id)}}catch(u){s.e(u)}finally{s.f()}}var l=[];t.productBasicInfoData&&("true"===t.productBasicInfoData.isList&&l.push("是否列出"),"true"===t.productBasicInfoData.isTop&&l.push("是否置顶"),"true"===t.productBasicInfoData.isSubscription&&l.push("是否订金支付")),e.checkedSet=l,e.$nextTick((function(){e.initializing=!1,e.loading=!1}))}),(function(t){""!==t.errorMessage&&e.$message.warning(t.errorMessage),console.log("获取商品基本信息失败",e.id)}))},getRecommendMarketTags:function(){var e=this,t={isIncludeParent:"1",isIncludeTag:"1",shopId:window.top.SHOP_ID||"",categoryType:"商品/商品营销"};Oe["a"].get("/admin/tag/storeTagcategories.jhtml",t).then((function(t){e.recommendMarketTags=t.content[0].tags||[],e.recommendMarketTagId=t.content[0].id}))},addRecommendMarketTag:function(e){if(this.recommendMarketTagId){e=e.id?e:{name:this.newMarketTagName,id:"temp"+Math.random().toString(36).substr(-10)};var t,i=Object(o["a"])(this.tags);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.name===e.name)return void this.$message.warning("该标签已存在，请重新添加")}}catch(n){i.e(n)}finally{i.f()}this.tags.push(e),this.newMarketTagName=""}else this.$message.warning("请新建营销标签")},addRecommendMarketTagByButton:function(e){if(""!==this.newMarketTagName){e=e.id?e:{name:this.newMarketTagName,id:"temp"+Math.random().toString(36).substr(-10)};var t,i=Object(o["a"])(this.tags);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.name===e.name)return void this.$message.warning("该标签已存在，请重新添加")}}catch(n){i.e(n)}finally{i.f()}this.tags.push(e),this.newMarketTagName=""}else this.$message.warning("请输入自定义标签")},removeMarketTag:function(e){for(var t=0;t<this.tags.length;t++){var i=this.tags[t];if(i.id===e)break}this.tags=this.tags.slice(0,t).concat(this.tags.slice(t+1))},saveRecommendMarketTags:function(){var e,t=this.tags.filter((function(e){return-1!==e.id.indexOf("temp")})),i=[],a=Object(o["a"])(t);try{for(a.s();!(e=a.n()).done;){var n=e.value,r={name:n.name,type:"0",description:"",hierarchy:"1",shopId:window.top.SHOP_ID||"",tagCategory:{id:this.recommendMarketTagId}};i.push(Oe["a"].post(g["g"].shopRate.TagGroupTags_tag,r))}}catch(s){a.e(s)}finally{a.f()}return Promise.all(i)},selectedTag:function(e){this.tags=e},convert2ProductDataModel:function(e){return{shopId:e.shopId,id:e.id,sn:e.sn,categoryId:[e.categoryId],brandId:e.brandId,seriesId:e.seriesId,name:e.name,image:e.image,price:e.price,cost:e.cost,marketPrice:e.marketPrice,sales:e.sales,stock:e.stock,isSupportTestDrive:e.isSupportTestDrive,isList:e.isList,isTop:e.isTop,isSubscription:e.isSubscription,subscription:e.subscription,isSubscriptionReturn:e.isSubscriptionReturn||"true",reputations:e.reputations,paymentMethodIds:e.paymentMethodIds,productType:e.productType,bean:e.bean,beanPercent:e.beanPercent,giftPercent:e.giftPercent,isPriceNegotiable:e.isPriceNegotiable,weight:e.weight||0,barCode:e.barCode,vin:e.vin,wholesalePrice:e.wholesalePrice}},save:function(){var e=this;return Object(Mt["a"])(regeneratorRuntime.mark((function t(){var i,a,n,r,s,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.productDataModel.name){t.next=3;break}return e.$message.warning("商品名称不能为空"),t.abrupt("return");case 3:if(""!==e.productDataModel.categoryId[0]){t.next=6;break}return e.$message.warning("商品分类不能为空"),t.abrupt("return");case 6:return t.next=8,e.saveRecommendMarketTags();case 8:i=t.sent,a=e.tags.filter((function(e){return-1!==e.id.indexOf("temp")})),n=Object(o["a"])(a);try{for(n.s();!(r=n.n()).done;){s=r.value,c=Object(o["a"])(i);try{for(c.s();!(l=c.n()).done;)u=l.value,u.data.name===s.name&&(s.id=u.data.id.toString())}catch(d){c.e(d)}finally{c.f()}}}catch(d){n.e(d)}finally{n.f()}e.$refs.productDataForm.validate((function(t){if(!t)return!1;e.isSubscriptionChecked()?e.$refs.subscriptionForm.validate((function(t){if(!t)return!1;e.isCreated?e.createProduct():e.updateProduct()})):e.isCreated?e.createProduct():e.updateProduct()}));case 13:case"end":return t.stop()}}),t)})))()},createProduct:function(){var e=this,t=this.getSaveProductDataModel(),i="7"===this.productDataModel.productType?"creatBenefitsBasicInfo":"creatProductBasicInfo";pe["a"][i](t,(function(t){e.$message.success("添加商品基本信息成功"),e.id=t.id,e.isCreated=!1,e.refresh(),e.$emit("operationSuccess"),e.$emit("createdProductSuccess",t.id,e.productDataModel.productType)}),(function(t){""!==t.errorMessage&&e.$message.warning(t.errorMessage),console.log("添加商品基本信息失败",e.id)}))},updateProduct:function(){var e=this,t=this.getSaveProductDataModel();pe["a"].updateProductBasicInfo(t,(function(t){e.refresh(),e.$message.success("更新商品基本信息成功"),e.$emit("operationSuccess")}),(function(t){""!==t.errorMessage&&e.$message.warning(t.errorMessage),console.log("更新商品基本信息失败",e.id)}))},productTypeChange:function(e){if("7"===e)this.shippingMethodIds=[],this.productDataModel.paymentMethodIds=[];else{var t,i=Object(o["a"])(this.payOptions);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.productDataModel.paymentMethodIds.push(a.id)}}catch(c){i.e(c)}finally{i.f()}var n,r=Object(o["a"])(this.shippingMethods);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.shippingMethodIds.push(s.shopShippingMethod.id)}}catch(c){r.e(c)}finally{r.f()}}"1"!==e&&(this.productDataModel.isPriceNegotiable="false")},getProductCategoryList:function(e){var t=this,i={shopId:e||window.top.SHOP_ID||"",pageNumber:1,pageSize:1e3};Dt["a"].getProductCategoryList(i,(function(e){t.productCategoryManage=e.ProductCategoryManage,t.categoryOptions=Ot(e.ProductCategoryManage),t.loading=!1}),(function(e){console.log(e),t.$message.warning(e.errorMessage),t.loading=!1}))}}},Pt=_t,Lt=(i("cbfd"),Object(I["a"])(Pt,kt,St,!1,null,null,null)),jt=Lt.exports,$t={name:"SessionOnline",data:function(){return{productId:"",tabSelection:"baseinfo",open:!1,isCS:!1,user:{},timer:null}},created:function(){this.getBaseInfo()},components:{ProductInfo:jt,BizPopupTabs:Ct["a"],CurrentUserInfo:D,UserList:K,ImContent:wt},computed:Object(r["a"])({},Object(s["c"])("SessionOnline",["activatedRoom","unReadedMessageList"])),watch:{unReadedMessageList:function(e,t){console.log("unReadedMessageList"),e.length>0?null===this.timer&&(this.timer=setTimeout((function(){window.Notification&&Notification.requestPermission((function(e){"granted"===e&&new Notification("提示",{body:"您有新的客户接入!"})}))}),18e4)):(clearTimeout(this.timer),this.timer=null)}},methods:Object(r["a"])(Object(r["a"])({},Object(s["c"])(["getUser"])),{},{onClose:function(){this.open=!1},onProduct:function(e){this.productId=e,this.open=!0},getBaseInfo:function(){this.user=this.getUser();var e,t=Object(o["a"])(this.user.roleDatas);try{for(t.s();!(e=t.n()).done;){var i=e.value;if("4"===i.type){this.isCS=!0;break}}}catch(a){t.e(a)}finally{t.f()}},chooseRoom:function(e){this.room=e}})},Rt=$t,Nt=(i("7dd7"),Object(I["a"])(Rt,a,n,!1,null,null,null));t["default"]=Nt.exports},"37c3":function(e,t,i){e.exports=i.p+"static/img/default_user1.d9bdb999.png"},"392e":function(e,t,i){"use strict";var a=i("2497"),n=i("bc3a"),o=i.n(n),r=i("c596");t["a"]={queryProductBasicInfo:function(e,t,i){o.a.get(r["g"].commodity.queryProductBasicInfo,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},updateProductBasicInfo:function(e,t,i){o.a.put(r["g"].commodity.updateProductBasicInfo,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},creatProductBasicInfo:function(e,t,i){o.a.post(r["g"].commodity.creatProductBasicInfo,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},creatBenefitsBasicInfo:function(e,t,i){o.a.post("/admin/shopProduct/benefitsProduct/basicInfo.jhtml",e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryProductDetail:function(e,t,i){o.a.get(r["g"].commodity.queryProductDetail,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},updateProductDetail:function(e,t,i){o.a.put(r["g"].commodity.queryProductDetail,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryProductDetail_pm:function(e,t,i){o.a.get(r["g"].commodity.queryProductDetail_pm,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},updateProductDetail_pm:function(e,t,i){o.a.put(r["g"].commodity.updateProductDetail_pm,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))}}},4131:function(e,t,i){},4448:function(e,t,i){},4659:function(e,t,i){"use strict";var a=i("0cad"),n=i.n(a);n.a},"498a":function(e,t,i){"use strict";var a=i("23e7"),n=i("58a8").trim,o=i("c8d2");a({target:"String",proto:!0,forced:o("trim")},{trim:function(){return n(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,i){var a=i("1d80"),n=i("5899"),o="["+n+"]",r=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),c=function(e){return function(t){var i=String(a(t));return 1&e&&(i=i.replace(r,"")),2&e&&(i=i.replace(s,"")),i}};e.exports={start:c(1),end:c(2),trim:c(3)}},"5b8e":function(e,t,i){"use strict";var a=i("9678"),n=i.n(a);n.a},"5db3":function(e,t,i){"use strict";var a=i("b49b"),n=i.n(a);n.a},"697f":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:e.title,visible:e.dialogVisible,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close,open:e.open}},[e._t("top"),i("biz-flex-table",{ref:"table",attrs:{showTable:e.showTable,operations:e.operations,filters:e.filters,tags:e.tags,rowKeys:e.rowKeys,pagination:e.pagination,tableData:e.tableData,rowClassName:e.rowClassName,loading:e.loading,memberIds:e.memberIds,checkable:e.checkable,isDepotOutNew:e.isDepotOutNew,checkedTable:e.checkedTable},on:{operate:e.operate,"row-click":e.rowClick,"filter-data-change":e.filterDataChange,"select-all":e.handleSelectAll,select:e.handleSelectionChange,"size-change":e.pageSizeChange,"current-change":e.currentPageChange,"cascader-change":e.cascaderChange,"active-item-change":e.activeItemChange,"sort-change":e.handleSortChange}},[e._t("default")],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isClear?i("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("清除")]):e._e(),i("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmed}},[e._v("确定")])],1)],2)},n=[],o=(i("99af"),i("4160"),i("c975"),i("a434"),i("a9e3"),i("159b"),i("04d3")),r={name:"BizDialogSelector",components:{BizFlexTable:o["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},max:{type:Number,default:0},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},isClear:{default:!0,type:Boolean},rowClassName:{type:Function,default:function(){return null}},selectionKeys:{type:Array,default:function(){return[]}},memberIds:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},isDepotOut:{type:Boolean,default:function(){return!1}},checkTable:{type:Array,default:function(){return[]}},showTable:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],isDepotOutNew:!1,checkedTable:[],innerSelection:[]}},methods:{rowKeys:function(e){return e.id},generateSelectionKeys:function(e,t){if(e.indexOf(t)>=0)this.innerSelectionKeys.push(t[this.keyField]),this.innerSelection.push(t);else{var i=this.innerSelectionKeys.indexOf(t[this.keyField]);this.innerSelectionKeys.splice(i,1),this.innerSelection.splice(i,1)}},open:function(e){this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(e){this.innerSelectionKeys=[],this.innerSelection=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){if(this.innerSelectionKeys.length>0||!this.showTable){if(!this.showTable&&!/(http|https):\/\/([\w.]+\/?)\S*/.test(this.filters[2].value))return void this.$message.warning("必须以http,https开头,且需符合URL规范,检查格式是否正确");this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1}else this.$message("请选择一项")},clear:function(){var e=this;this.tableData.forEach((function(t){e.$refs.table.toggleRowSelection(t,!1)})),this.innerSelectionKeys=[],this.innerSelection=[]},updateSelection:function(){var e=this;this.$refs&&this.$refs.table&&this.tableData.forEach((function(t){e.innerSelectionKeys.indexOf(t[e.keyField])>=0?(e.$refs.table.toggleRowSelection(t,!0),"single"===e.selectionMode&&(e.$refs.table.$refs.table.setCurrentRow(t),e.innerSelection=[t])):e.$refs.table.toggleRowSelection(t,!1)}))},operate:function(e){this.$emit("operate",e)},filterDataChange:function(e){this.$emit("filterDataChange",e)},handleSelectAll:function(e){var t=this;0===e.length?this.tableData.forEach((function(e){var i=t.innerSelectionKeys.indexOf(e[t.keyField]);i>=0&&t.innerSelectionKeys.splice(i,1)})):this.tableData.forEach((function(e){var i=t.innerSelectionKeys.indexOf(e[t.keyField]);i<0&&t.innerSelectionKeys.push(e[t.keyField])})),this.$emit("selectionChange",e)},handleSelectionChange:function(e,t){this.generateSelectionKeys(e,t),this.$emit("selectionChange",e)},pageSizeChange:function(e){this.$emit("pageSizeChange",e)},currentPageChange:function(e){this.$emit("currentPageChange",e)},cascaderChange:function(e){this.$emit("cascaderChange",e)},activeItemChange:function(e){this.$emit("active-item-change",e)},handleSortChange:function(e){this.$emit("sort-change",e)},rowClick:function(e,t,i){"single"===this.selectionMode&&(this.innerSelectionKeys=[e[this.keyField]],this.innerSelection=[e])}},watch:{visibility:function(e,t){this.dialogVisible=e,this.isDepotOutNew=this.isDepotOut,this.checkedTable=this.checkTable}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){},updated:function(){this.updateSelection()}},s=r,c=(i("0943"),i("2877")),l=Object(c["a"])(s,a,n,!1,null,null,null);t["a"]=l.exports},"6cad":function(e,t,i){"use strict";var a=i("a40d"),n=i.n(a);n.a},"6ce0":function(e,t,i){},7011:function(e,t,i){"use strict";var a=i("b7f7"),n=i.n(a);n.a},7132:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"biz-fade-t"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[i("transition",{attrs:{name:"biz-fade-t-right"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"popup-content",style:e.contentStyle},[e._t("default")],2)])],1)])},n=[],o={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},r=o,s=(i("5b8e"),i("2877")),c=Object(s["a"])(r,a,n,!1,null,null,null),l=c.exports,u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"biz-popup-tabs"},[i("biz-popup",{attrs:{open:e.open,contentStyle:e.contentStyle},on:{close:e.close}},[i("el-tabs",{attrs:{type:"border-card",value:e.value},on:{"tab-click":e.tabClick}},[e._t("default")],2)],1)],1)},d=[],p=(i("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:l},methods:{close:function(){var e=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("close")}))},tabClick:function(e){this.$emit("input",e.name)}}}),m=p,f=(i("d4c2"),Object(s["a"])(m,u,d,!1,null,null,null)),h=f.exports;i.d(t,"a",(function(){return h}))},"746e":function(e,t,i){"use strict";var a=i("b40d"),n=i.n(a);n.a},"7a24":function(e,t,i){},"7d1d":function(e,t,i){"use strict";var a=i("6ce0"),n=i.n(a);n.a},"7dd7":function(e,t,i){"use strict";var a=i("7a24"),n=i.n(a);n.a},"872e":function(e,t,i){},"8f78":function(e,t,i){"use strict";var a=i("1928"),n=i.n(a);n.a},9678:function(e,t,i){},"9bc5":function(e,t,i){"use strict";var a=i("1bb6"),n=i.n(a);n.a},"9f98":function(e,t,i){"use strict";var a=i("292f"),n=i.n(a);n.a},a40d:function(e,t,i){},a9e3:function(e,t,i){"use strict";var a=i("83ab"),n=i("da84"),o=i("94ca"),r=i("6eeb"),s=i("5135"),c=i("c6b6"),l=i("7156"),u=i("c04e"),d=i("d039"),p=i("7c73"),m=i("241c").f,f=i("06cf").f,h=i("9bf2").f,g=i("58a8").trim,b="Number",v=n[b],y=v.prototype,w=c(p(y))==b,C=function(e){var t,i,a,n,o,r,s,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=g(l),t=l.charCodeAt(0),43===t||45===t){if(i=l.charCodeAt(2),88===i||120===i)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+l}for(o=l.slice(2),r=o.length,s=0;s<r;s++)if(c=o.charCodeAt(s),c<48||c>n)return NaN;return parseInt(o,a)}return+l};if(o(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,S=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof S&&(w?d((function(){y.valueOf.call(i)})):c(i)!=b)?l(new v(C(t)),i,S):C(t)},M=a?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;M.length>I;I++)s(v,k=M[I])&&!s(S,k)&&h(S,k,f(v,k));S.prototype=y,y.constructor=S,r(n,b,S)}},af3f:function(e,t,i){"use strict";var a=i("697f");t["a"]=a["a"]},b40d:function(e,t,i){},b49b:function(e,t,i){},b52f:function(e,t,i){"use strict";var a=i("4131"),n=i.n(a);n.a},b54e:function(e,t,i){"use strict";var a=i("0d49"),n=i.n(a);n.a},b7f7:function(e,t,i){},c021:function(e,t,i){"use strict";var a=i("ebc5"),n=i.n(a);n.a},c8d2:function(e,t,i){var a=i("d039"),n=i("5899"),o="​᠎";e.exports=function(e){return a((function(){return!!n[e]()||o[e]()!=o||n[e].name!==e}))}},cbfd:function(e,t,i){"use strict";var a=i("872e"),n=i.n(a);n.a},cc55:function(e,t,i){"use strict";var a=i("2497"),n=i("bc3a"),o=i.n(n),r=i("c596");t["a"]={getProductCategoryList:function(e,t,i){o.a.get(r["g"].commodity.getProductCategoryList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},deleteProductCategory:function(e,t,i){o.a.delete(r["g"].commodity.deleteProductCategory,{data:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},getInputProductCategoryList:function(e,t,i){console.log("[---- dachao ----] [API-从平台导入-get] getInputProductCategoryList() params=",e),o.a.get(r["g"].commodity.getInputProductCategoryList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},saveInputProductCategoryList:function(e,t,i){console.log("[---- dachao ----] [API-从平台导入-post] saveInputProductCategoryList() params=",e),o.a.post(r["g"].commodity.saveInputProductCategoryList,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))}}},cd95:function(e,t,i){},cf13:function(e,t,i){},d4c2:function(e,t,i){"use strict";var a=i("e725"),n=i.n(a);n.a},daa1:function(e,t,i){},dad8:function(e,t,i){"use strict";var a=i("cf13"),n=i.n(a);n.a},e092:function(e,t,i){},e166:function(e,t,i){
/*!
 * vue-infinite-loading v2.4.4
 * (c) 2016-2019 PeachScript
 * MIT License
 */
!function(t,i){e.exports=i()}(0,(function(){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9)}([function(e,t,i){var a=i(6);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,i(3).default)("09280948",a,!0,{})},function(e,t,i){var a=i(8);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),(0,i(3).default)("51e4c3f9",a,!0,{})},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i,a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"==typeof btoa){var o=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),r=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[a].concat(r).concat([o]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(a[o]=!0)}for(n=0;n<e.length;n++){var r=e[n];"number"==typeof r[0]&&a[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}},function(e,t,i){"use strict";function a(e,t){for(var i=[],a={},n=0;n<t.length;n++){var o=t[n],r=o[0],s={id:e+":"+n,css:o[1],media:o[2],sourceMap:o[3]};a[r]?a[r].parts.push(s):i.push(a[r]={id:r,parts:[s]})}return i}i.r(t),i.d(t,"default",(function(){return f}));var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},r=n&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,u=function(){},d=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,i,n){l=i,d=n||{};var r=a(e,t);return h(r),function(t){for(var i=[],n=0;n<r.length;n++){var s=r[n];(c=o[s.id]).refs--,i.push(c)}for(t?h(r=a(e,t)):r=[],n=0;n<i.length;n++){var c;if(0===(c=i[n]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function h(e){for(var t=0;t<e.length;t++){var i=e[t],a=o[i.id];if(a){a.refs++;for(var n=0;n<a.parts.length;n++)a.parts[n](i.parts[n]);for(;n<i.parts.length;n++)a.parts.push(b(i.parts[n]));a.parts.length>i.parts.length&&(a.parts.length=i.parts.length)}else{var r=[];for(n=0;n<i.parts.length;n++)r.push(b(i.parts[n]));o[i.id]={id:i.id,refs:1,parts:r}}}}function g(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function b(e){var t,i,a=document.querySelector("style["+p+'~="'+e.id+'"]');if(a){if(l)return u;a.parentNode.removeChild(a)}if(m){var n=c++;a=s||(s=g()),t=w.bind(null,a,n,!1),i=w.bind(null,a,n,!0)}else a=g(),t=function(e,t){var i=t.css,a=t.media,n=t.sourceMap;if(a&&e.setAttribute("media",a),d.ssrId&&e.setAttribute(p,t.id),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,a),i=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else i()}}var v,y=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function w(e,t,i,a){var n=i?"":a.css;if(e.styleSheet)e.styleSheet.cssText=y(t,n);else{var o=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}},function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(t){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?e.exports=a=function(e){return i(e)}:e.exports=a=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)},a(t)}e.exports=a},function(e,t,i){"use strict";i.r(t);var a=i(0),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t.default=n.a},function(e,t,i){(e.exports=i(2)(!1)).push([e.i,'.loading-wave-dots[data-v-46b20d22]{position:relative}.loading-wave-dots[data-v-46b20d22] .wave-item{position:absolute;top:50%;left:50%;display:inline-block;margin-top:-4px;width:8px;height:8px;border-radius:50%;-webkit-animation:loading-wave-dots-data-v-46b20d22 linear 2.8s infinite;animation:loading-wave-dots-data-v-46b20d22 linear 2.8s infinite}.loading-wave-dots[data-v-46b20d22] .wave-item:first-child{margin-left:-36px}.loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(2){margin-left:-20px;-webkit-animation-delay:.14s;animation-delay:.14s}.loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(3){margin-left:-4px;-webkit-animation-delay:.28s;animation-delay:.28s}.loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(4){margin-left:12px;-webkit-animation-delay:.42s;animation-delay:.42s}.loading-wave-dots[data-v-46b20d22] .wave-item:last-child{margin-left:28px;-webkit-animation-delay:.56s;animation-delay:.56s}@-webkit-keyframes loading-wave-dots-data-v-46b20d22{0%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}10%{-webkit-transform:translateY(-6px);transform:translateY(-6px);background:#999}20%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}to{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}}@keyframes loading-wave-dots-data-v-46b20d22{0%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}10%{-webkit-transform:translateY(-6px);transform:translateY(-6px);background:#999}20%{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}to{-webkit-transform:translateY(0);transform:translateY(0);background:#bbb}}.loading-circles[data-v-46b20d22] .circle-item{width:5px;height:5px;-webkit-animation:loading-circles-data-v-46b20d22 linear .75s infinite;animation:loading-circles-data-v-46b20d22 linear .75s infinite}.loading-circles[data-v-46b20d22] .circle-item:first-child{margin-top:-14.5px;margin-left:-2.5px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(2){margin-top:-11.26px;margin-left:6.26px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(3){margin-top:-2.5px;margin-left:9.5px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(4){margin-top:6.26px;margin-left:6.26px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(5){margin-top:9.5px;margin-left:-2.5px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(6){margin-top:6.26px;margin-left:-11.26px}.loading-circles[data-v-46b20d22] .circle-item:nth-child(7){margin-top:-2.5px;margin-left:-14.5px}.loading-circles[data-v-46b20d22] .circle-item:last-child{margin-top:-11.26px;margin-left:-11.26px}@-webkit-keyframes loading-circles-data-v-46b20d22{0%{background:#dfdfdf}90%{background:#505050}to{background:#dfdfdf}}@keyframes loading-circles-data-v-46b20d22{0%{background:#dfdfdf}90%{background:#505050}to{background:#dfdfdf}}.loading-bubbles[data-v-46b20d22] .bubble-item{background:#666;-webkit-animation:loading-bubbles-data-v-46b20d22 linear .75s infinite;animation:loading-bubbles-data-v-46b20d22 linear .75s infinite}.loading-bubbles[data-v-46b20d22] .bubble-item:first-child{margin-top:-12.5px;margin-left:-.5px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(2){margin-top:-9.26px;margin-left:8.26px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(3){margin-top:-.5px;margin-left:11.5px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(4){margin-top:8.26px;margin-left:8.26px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(5){margin-top:11.5px;margin-left:-.5px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(6){margin-top:8.26px;margin-left:-9.26px}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(7){margin-top:-.5px;margin-left:-12.5px}.loading-bubbles[data-v-46b20d22] .bubble-item:last-child{margin-top:-9.26px;margin-left:-9.26px}@-webkit-keyframes loading-bubbles-data-v-46b20d22{0%{width:1px;height:1px;box-shadow:0 0 0 3px #666}90%{width:1px;height:1px;box-shadow:0 0 0 0 #666}to{width:1px;height:1px;box-shadow:0 0 0 3px #666}}@keyframes loading-bubbles-data-v-46b20d22{0%{width:1px;height:1px;box-shadow:0 0 0 3px #666}90%{width:1px;height:1px;box-shadow:0 0 0 0 #666}to{width:1px;height:1px;box-shadow:0 0 0 3px #666}}.loading-default[data-v-46b20d22]{position:relative;border:1px solid #999;-webkit-animation:loading-rotating-data-v-46b20d22 ease 1.5s infinite;animation:loading-rotating-data-v-46b20d22 ease 1.5s infinite}.loading-default[data-v-46b20d22]:before{content:"";position:absolute;display:block;top:0;left:50%;margin-top:-3px;margin-left:-3px;width:6px;height:6px;background-color:#999;border-radius:50%}.loading-spiral[data-v-46b20d22]{border:2px solid #777;border-right-color:transparent;-webkit-animation:loading-rotating-data-v-46b20d22 linear .85s infinite;animation:loading-rotating-data-v-46b20d22 linear .85s infinite}@-webkit-keyframes loading-rotating-data-v-46b20d22{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading-rotating-data-v-46b20d22{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.loading-bubbles[data-v-46b20d22],.loading-circles[data-v-46b20d22]{position:relative}.loading-bubbles[data-v-46b20d22] .bubble-item,.loading-circles[data-v-46b20d22] .circle-item{position:absolute;top:50%;left:50%;display:inline-block;border-radius:50%}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(2),.loading-circles[data-v-46b20d22] .circle-item:nth-child(2){-webkit-animation-delay:93ms;animation-delay:93ms}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(3),.loading-circles[data-v-46b20d22] .circle-item:nth-child(3){-webkit-animation-delay:.186s;animation-delay:.186s}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(4),.loading-circles[data-v-46b20d22] .circle-item:nth-child(4){-webkit-animation-delay:.279s;animation-delay:.279s}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(5),.loading-circles[data-v-46b20d22] .circle-item:nth-child(5){-webkit-animation-delay:.372s;animation-delay:.372s}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(6),.loading-circles[data-v-46b20d22] .circle-item:nth-child(6){-webkit-animation-delay:.465s;animation-delay:.465s}.loading-bubbles[data-v-46b20d22] .bubble-item:nth-child(7),.loading-circles[data-v-46b20d22] .circle-item:nth-child(7){-webkit-animation-delay:.558s;animation-delay:.558s}.loading-bubbles[data-v-46b20d22] .bubble-item:last-child,.loading-circles[data-v-46b20d22] .circle-item:last-child{-webkit-animation-delay:.651s;animation-delay:.651s}',""])},function(e,t,i){"use strict";i.r(t);var a=i(1),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t.default=n.a},function(e,t,i){(e.exports=i(2)(!1)).push([e.i,".infinite-loading-container[data-v-46b21138]{clear:both;text-align:center}.infinite-loading-container[data-v-46b21138] [class^=loading-]{display:inline-block;margin:5px 0;width:28px;height:28px;font-size:28px;line-height:28px;border-radius:50%}.btn-try-infinite[data-v-46b21138]{margin-top:5px;padding:5px 10px;color:#999;font-size:14px;line-height:1;background:transparent;border:1px solid #ccc;border-radius:3px;outline:none;cursor:pointer}.btn-try-infinite[data-v-46b21138]:not(:active):hover{opacity:.8}",""])},function(e,t,i){"use strict";i.r(t);var a={throttleLimit:50,loopCheckTimeout:1e3,loopCheckMaxCalls:10},n=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e={passive:!0},!0}});window.addEventListener("testpassive",t,t),window.remove("testpassive",t,t)}catch(e){}return e}(),o={STATE_CHANGER:["emit `loaded` and `complete` event through component instance of `$refs` may cause error, so it will be deprecated soon, please use the `$state` argument instead (`$state` just the special `$event` variable):","\ntemplate:",'<infinite-loading @infinite="infiniteHandler"></infinite-loading>',"\nscript:\n...\ninfiniteHandler($state) {\n  ajax('https://www.example.com/api/news')\n    .then((res) => {\n      if (res.data.length) {\n        $state.loaded();\n      } else {\n        $state.complete();\n      }\n    });\n}\n...","","more details: https://github.com/PeachScript/vue-infinite-loading/issues/57#issuecomment-324370549"].join("\n"),INFINITE_EVENT:"`:on-infinite` property will be deprecated soon, please use `@infinite` event instead.",IDENTIFIER:"the `reset` event will be deprecated soon, please reset this component by change the `identifier` property."},r={INFINITE_LOOP:["executed the callback function more than ".concat(a.loopCheckMaxCalls," times for a short time, it looks like searched a wrong scroll wrapper that doest not has fixed height or maximum height, please check it. If you want to force to set a element as scroll wrapper ranther than automatic searching, you can do this:"),'\n\x3c!-- add a special attribute for the real scroll wrapper --\x3e\n<div infinite-wrapper>\n  ...\n  \x3c!-- set force-use-infinite-wrapper --\x3e\n  <infinite-loading force-use-infinite-wrapper></infinite-loading>\n</div>\nor\n<div class="infinite-wrapper">\n  ...\n  \x3c!-- set force-use-infinite-wrapper as css selector of the real scroll wrapper --\x3e\n  <infinite-loading force-use-infinite-wrapper=".infinite-wrapper"></infinite-loading>\n</div>\n    ',"more details: https://github.com/PeachScript/vue-infinite-loading/issues/55#issuecomment-316934169"].join("\n")},s={READY:0,LOADING:1,COMPLETE:2,ERROR:3},c={color:"#666",fontSize:"14px",padding:"10px 0"},l={mode:"development",props:{spinner:"default",distance:100,forceUseInfiniteWrapper:!1},system:a,slots:{noResults:"No results :(",noMore:"No more data :)",error:"Opps, something went wrong :(",errorBtnText:"Retry",spinner:""},WARNINGS:o,ERRORS:r,STATUS:s},u=i(4),d=i.n(u),p={BUBBLES:{render:function(e){return e("span",{attrs:{class:"loading-bubbles"}},Array.apply(Array,Array(8)).map((function(){return e("span",{attrs:{class:"bubble-item"}})})))}},CIRCLES:{render:function(e){return e("span",{attrs:{class:"loading-circles"}},Array.apply(Array,Array(8)).map((function(){return e("span",{attrs:{class:"circle-item"}})})))}},DEFAULT:{render:function(e){return e("i",{attrs:{class:"loading-default"}})}},SPIRAL:{render:function(e){return e("i",{attrs:{class:"loading-spiral"}})}},WAVEDOTS:{render:function(e){return e("span",{attrs:{class:"loading-wave-dots"}},Array.apply(Array,Array(5)).map((function(){return e("span",{attrs:{class:"wave-item"}})})))}}};function m(e,t,i,a,n,o,r,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),a&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=c):n&&(c=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}var f=m({name:"Spinner",computed:{spinnerView:function(){return p[(this.$attrs.spinner||"").toUpperCase()]||this.spinnerInConfig},spinnerInConfig:function(){return l.slots.spinner&&"string"==typeof l.slots.spinner?{render:function(){return this._v(l.slots.spinner)}}:"object"===d()(l.slots.spinner)?l.slots.spinner:p[l.props.spinner.toUpperCase()]||p.DEFAULT}}},(function(){var e=this.$createElement;return(this._self._c||e)(this.spinnerView,{tag:"component"})}),[],!1,(function(e){var t=i(5);t.__inject__&&t.__inject__(e)}),"46b20d22",null);f.options.__file="Spinner.vue";var h=f.exports;function g(e){"production"!==l.mode&&console.warn("[Vue-infinite-loading warn]: ".concat(e))}function b(e){console.error("[Vue-infinite-loading error]: ".concat(e))}var v={timers:[],caches:[],throttle:function(e){var t=this;-1===this.caches.indexOf(e)&&(this.caches.push(e),this.timers.push(setTimeout((function(){e(),t.caches.splice(t.caches.indexOf(e),1),t.timers.shift()}),l.system.throttleLimit)))},reset:function(){this.timers.forEach((function(e){clearTimeout(e)})),this.timers.length=0,this.caches=[]}},y={isChecked:!1,timer:null,times:0,track:function(){var e=this;this.times+=1,clearTimeout(this.timer),this.timer=setTimeout((function(){e.isChecked=!0}),l.system.loopCheckTimeout),this.times>l.system.loopCheckMaxCalls&&(b(r.INFINITE_LOOP),this.isChecked=!0)}},w={key:"_infiniteScrollHeight",getScrollElm:function(e){return e===window?document.documentElement:e},save:function(e){var t=this.getScrollElm(e);t[this.key]=t.scrollHeight},restore:function(e){var t=this.getScrollElm(e);"number"==typeof t[this.key]&&(t.scrollTop=t.scrollHeight-t[this.key]+t.scrollTop),this.remove(t)},remove:function(e){void 0!==e[this.key]&&delete e[this.key]}};function C(e){return e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())}))}function k(e){return e.offsetWidth+e.offsetHeight>0}var S=m({name:"InfiniteLoading",data:function(){return{scrollParent:null,scrollHandler:null,isFirstLoad:!0,status:s.READY,slots:l.slots}},components:{Spinner:h},computed:{isShowSpinner:function(){return this.status===s.LOADING},isShowError:function(){return this.status===s.ERROR},isShowNoResults:function(){return this.status===s.COMPLETE&&this.isFirstLoad},isShowNoMore:function(){return this.status===s.COMPLETE&&!this.isFirstLoad},slotStyles:function(){var e=this,t={};return Object.keys(l.slots).forEach((function(i){var a=C(i);(!e.$slots[a]&&!l.slots[i].render||e.$slots[a]&&!e.$slots[a][0].tag)&&(t[i]=c)})),t}},props:{distance:{type:Number,default:l.props.distance},spinner:String,direction:{type:String,default:"bottom"},forceUseInfiniteWrapper:{type:[Boolean,String],default:l.props.forceUseInfiniteWrapper},identifier:{default:+new Date},onInfinite:Function},watch:{identifier:function(){this.stateChanger.reset()}},mounted:function(){var e=this;this.$watch("forceUseInfiniteWrapper",(function(){e.scrollParent=e.getScrollParent()}),{immediate:!0}),this.scrollHandler=function(t){e.status===s.READY&&(t&&t.constructor===Event&&k(e.$el)?v.throttle(e.attemptLoad):e.attemptLoad())},setTimeout((function(){e.scrollHandler(),e.scrollParent.addEventListener("scroll",e.scrollHandler,n)}),1),this.$on("$InfiniteLoading:loaded",(function(t){e.isFirstLoad=!1,"top"===e.direction&&e.$nextTick((function(){w.restore(e.scrollParent)})),e.status===s.LOADING&&e.$nextTick(e.attemptLoad.bind(null,!0)),t&&t.target===e||g(o.STATE_CHANGER)})),this.$on("$InfiniteLoading:complete",(function(t){e.status=s.COMPLETE,e.$nextTick((function(){e.$forceUpdate()})),e.scrollParent.removeEventListener("scroll",e.scrollHandler,n),t&&t.target===e||g(o.STATE_CHANGER)})),this.$on("$InfiniteLoading:reset",(function(t){e.status=s.READY,e.isFirstLoad=!0,w.remove(e.scrollParent),e.scrollParent.addEventListener("scroll",e.scrollHandler,n),setTimeout((function(){v.reset(),e.scrollHandler()}),1),t&&t.target===e||g(o.IDENTIFIER)})),this.stateChanger={loaded:function(){e.$emit("$InfiniteLoading:loaded",{target:e})},complete:function(){e.$emit("$InfiniteLoading:complete",{target:e})},reset:function(){e.$emit("$InfiniteLoading:reset",{target:e})},error:function(){e.status=s.ERROR,v.reset()}},this.onInfinite&&g(o.INFINITE_EVENT)},deactivated:function(){this.status===s.LOADING&&(this.status=s.READY),this.scrollParent.removeEventListener("scroll",this.scrollHandler,n)},activated:function(){this.scrollParent.addEventListener("scroll",this.scrollHandler,n)},methods:{attemptLoad:function(e){var t=this;this.status!==s.COMPLETE&&k(this.$el)&&this.getCurrentDistance()<=this.distance?(this.status=s.LOADING,"top"===this.direction&&this.$nextTick((function(){w.save(t.scrollParent)})),"function"==typeof this.onInfinite?this.onInfinite.call(null,this.stateChanger):this.$emit("infinite",this.stateChanger),!e||this.forceUseInfiniteWrapper||y.isChecked||y.track()):this.status===s.LOADING&&(this.status=s.READY)},getCurrentDistance:function(){var e;return e="top"===this.direction?"number"==typeof this.scrollParent.scrollTop?this.scrollParent.scrollTop:this.scrollParent.pageYOffset:this.$el.getBoundingClientRect().top-(this.scrollParent===window?window.innerHeight:this.scrollParent.getBoundingClientRect().bottom),e},getScrollParent:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$el;return"string"==typeof this.forceUseInfiniteWrapper&&(e=t.querySelector(this.forceUseInfiniteWrapper)),e||("BODY"===t.tagName?e=window:(!this.forceUseInfiniteWrapper&&["scroll","auto"].indexOf(getComputedStyle(t).overflowY)>-1||t.hasAttribute("infinite-wrapper")||t.hasAttribute("data-infinite-wrapper"))&&(e=t)),e||this.getScrollParent(t.parentNode)}},destroyed:function(){!this.status!==s.COMPLETE&&(v.reset(),w.remove(this.scrollParent),this.scrollParent.removeEventListener("scroll",this.scrollHandler,n))}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"infinite-loading-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSpinner,expression:"isShowSpinner"}],staticClass:"infinite-status-prompt",style:e.slotStyles.spinner},[e._t("spinner",[i("spinner",{attrs:{spinner:e.spinner}})])],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowNoResults,expression:"isShowNoResults"}],staticClass:"infinite-status-prompt",style:e.slotStyles.noResults},[e._t("no-results",[e.slots.noResults.render?i(e.slots.noResults,{tag:"component"}):[e._v(e._s(e.slots.noResults))]])],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowNoMore,expression:"isShowNoMore"}],staticClass:"infinite-status-prompt",style:e.slotStyles.noMore},[e._t("no-more",[e.slots.noMore.render?i(e.slots.noMore,{tag:"component"}):[e._v(e._s(e.slots.noMore))]])],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowError,expression:"isShowError"}],staticClass:"infinite-status-prompt",style:e.slotStyles.error},[e._t("error",[e.slots.error.render?i(e.slots.error,{tag:"component",attrs:{trigger:e.attemptLoad}}):[e._v("\n        "+e._s(e.slots.error)+"\n        "),i("br"),e._v(" "),i("button",{staticClass:"btn-try-infinite",domProps:{textContent:e._s(e.slots.errorBtnText)},on:{click:e.attemptLoad}})]],{trigger:e.attemptLoad})],2)])}),[],!1,(function(e){var t=i(7);t.__inject__&&t.__inject__(e)}),"46b21138",null);S.options.__file="InfiniteLoading.vue";var M=S.exports;function I(e){l.mode=e.config.productionTip?"development":"production"}Object.defineProperty(M,"install",{configurable:!1,enumerable:!1,value:function(e,t){Object.assign(l.props,t&&t.props),Object.assign(l.slots,t&&t.slots),Object.assign(l.system,t&&t.system),e.component("infinite-loading",M),I(e)}}),"undefined"!=typeof window&&window.Vue&&(window.Vue.component("infinite-loading",M),I(window.Vue)),t.default=M}])}))},e4ab:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"emoji-picker"},[i("div",{staticClass:"body"},e._l(e.currentEmojis,(function(t,a){return i("div",{key:a,staticClass:"emoji",on:{click:function(i){return e.choose(t.key)}}},[i("img",{attrs:{src:t.value}})])})),0),i("div",{staticClass:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary",disabled:0===e.index,icon:"el-icon-arrow-left"},on:{click:e.pageUp}}),i("el-button",{attrs:{size:"mini",type:"primary",disabled:e.index+72>109,icon:"el-icon-arrow-right"},on:{click:e.pageDown}})],1)])},n=[],o=(i("fb6a"),i("7624")),r={name:"EmojiPicker",data:function(){return{index:0,emojis:o["a"].emojis}},computed:{currentEmojis:function(){return this.emojis.slice(this.index,this.index+72)}},methods:{pageDown:function(){this.index+=72},pageUp:function(){this.index-=72},choose:function(e){this.$emit("choosed",e)}}},s=r,c=(i("6cad"),i("2877")),l=Object(c["a"])(s,a,n,!1,null,null,null),u=l.exports;i.d(t,"a",(function(){return u}))},e568:function(e,t,i){e.exports=i.p+"static/img/jingyin.0ac3695c.png"},e725:function(e,t,i){},e7d0:function(e,t,i){e.exports=i.p+"static/img/laba.c9116c80.png"},ebc5:function(e,t,i){},ef20:function(e,t,i){"use strict";var a=i("2497"),n=i("bc3a"),o=i.n(n),r=i("c596");t["a"]={queryList:function(e,t,i){o.a.get(r["g"].customerService.CSList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryGroup:function(e,t,i){o.a.get(r["g"].customerService.CSGroupList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},query:function(e,t,i){o.a.get(r["g"].customerService.CSQuery,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},update:function(e,t,i){o.a.put(r["g"].customerService.CSQuery,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},create:function(e,t,i){o.a.post(r["g"].customerService.CSQuery,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},delete:function(e,t,i){o.a.delete(r["g"].customerService.CSQuery,{data:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},getManhour:function(e,t,i){o.a.get(r["g"].customerService.manhour,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},updateManhour:function(e,t,i){o.a.post(r["g"].customerService.manhour,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},createBlack:function(e,t,i){o.a.post(r["g"].customerService.CreateBlack,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},passBlack:function(e,t,i){o.a.post(r["g"].customerService.PassBlack,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},getBlackList:function(e,t,i){o.a.get(r["g"].customerService.BlackList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},recoverBlack:function(e,t,i){o.a.post(r["g"].customerService.RecoverBlack,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))}}},efa7:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"loc-map"},[i("div",{ref:"allmap",staticClass:"allmap"})])},n=[],o=(i("d81d"),{name:"BizMap",components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{markers:[]}},methods:{init:function(){var e=this;this.$BMap=window.BMap,this.map=new this.$BMap.Map(this.$refs.allmap),this.point=new this.$BMap.Point(this.value.lng,this.value.lat);var t=new this.$BMap.Marker(this.point);this.map.addOverlay(t),t.addEventListener("click",(function(t){e.$emit("addClickHandler",e.value),console.log(e.value)}));var i=new this.$BMap.Label(this.value.addr||this.value.address,{offset:new this.$BMap.Size(20,-10)});t.setLabel(i),this.map.centerAndZoom(this.point,5),this.map.enableScrollWheelZoom(!0)},clearOverlays:function(){this.map.clearOverlays()}},mounted:function(){this.init()}}),r=o,s=(i("7d1d"),i("2877")),c=Object(s["a"])(r,a,n,!1,null,null,null),l=c.exports;i.d(t,"a",(function(){return l}))},f3ac:function(e,t,i){e.exports=i.p+"static/img/pic_default_none_100.6603f4ac.png"},f8ce:function(e,t,i){"use strict";var a=i("daa1"),n=i.n(a);n.a}}]);