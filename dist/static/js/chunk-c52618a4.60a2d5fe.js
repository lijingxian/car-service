(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c52618a4"],{1254:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"marketing-statistics-activity-kpi-report"},[a("biz-chart",{attrs:{chartData:e.chartData,filters:e.filters,loading:e.loading,pagination:e.pagination},on:{filterDataChange:e.filterDataChange,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,refreshHandle:e.refreshHandle,exportExcle:e.exportExcle}},[a("div",{attrs:{slot:"list"},slot:"list"},[a("biz-list",{ref:"list",staticStyle:{width:"100%"},attrs:{height:e.height,tableData:e.tableData}},[a("el-table-column",{attrs:{prop:"mobile",label:"会员手机号"}}),a("el-table-column",{attrs:{prop:"enterDate",label:"入会日期"}}),a("el-table-column",{attrs:{prop:"name",label:"会员昵称"}}),a("el-table-column",{attrs:{prop:"fleet",label:"车友会名称"}})],1)],1),a("div",{attrs:{slot:"description"},slot:"description"},[a("p",[e._v("新增成员数：统计期内，新加入车友会成员数量")]),a("p",[e._v("成员留存率：统计期内，新增成员中登录成员数/新增成员数*100%")]),a("p",[e._v("活跃成员数：统计期内，登陆过车友会色回去的的成员数量，根据统计周期有日活、周活、月活")]),a("p",[e._v("成员活跃率：统计期内，活跃成员数/车友会成员累计数*100%")]),a("p",[e._v("累计成员数：统计期内车友会成员数总计")])])])],1)},n=[],s=(a("99af"),a("a15b"),a("a9e3"),a("d3b7"),a("562e")),r=a("7558"),l=a("ce0c"),o=a("c596"),h=a("1ab1"),c={name:"ActivityKpiReport",data:function(){return{today:"",loading:!0,height:"500",beginDate:l["a"].getMonthStartDate(),endDate:l["a"].getMonthEndDate(),viewType:"month",pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},tableData:[],filters:[{type:"select",label:"统计指标",value:"memberIns",options:[{value:"memberIns",label:"新增成员数"},{value:"memberKeepRate",label:"成员留存率"},{value:"activeMemberCnt",label:"活跃成员数"},{value:"activeMemberRate",label:"成员活跃率"},{value:"memberCnt",label:"累计成员数"}]}],kpiName:["当前","同比","环比"],chartData:{}}},methods:{init:function(){var e=this;this.loading=!0;var t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};h["a"].get(o["g"].membersMgmt.statisticsAnalysis.queryMotoristsReport,t).then((function(t){e.chartData=e.dataFormat(t)})).catch((function(t){e.loading=!1,t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(t){e.loading=!1}))},getTable:function(){var e=this,t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};h["a"].get(o["g"].membersMgmt.statisticsAnalysis.queryMotoristsTable,t).then((function(t){e.tableData=t.dataList,e.pagination.total=Number(t.total)})).catch((function(t){e.loading=!1,t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(t){e.loading=!1}))},refreshHandle:function(e){this.viewType=e.viewType,this.beginDate=e.date[0],this.endDate=e.date[1],this.init(),this.getTable()},filterDataChange:function(e){this.filters=e,this.init(),this.getTable()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getTable()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getTable()},exportExcle:function(){var e=this,t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate};h["a"].get(o["g"].membersMgmt.statisticsAnalysis.motoristsExport,t).then().catch((function(a){if(a.errorMessage||"没有符合条件的数据"===a)"没有符合条件的数据"===a?e.$message.warning("没有符合条件的数据"):(e.$message.warning(a.errorMessage),console.log("ERR_EXPORT: ",a));else{var i=[];for(var n in t)i.push("".concat(n,"=").concat(t[n]));var s="".concat(o["g"].membersMgmt.statisticsAnalysis.motoristsExport,"?")+i.join("&");window.open(s)}}))},dataFormat:function(e){for(var t=[],a=0;a<e.indicators.length;a++)t.push({"日期":e.indicators[a].xValue,"当前":e.indicators[a].yValue,"同比":e.indicators[a].yYearOnYear,"环比":e.indicators[a].yMonthOnMonth});var i={type:"histogram",data:{columns:["日期",this.kpiName[0],this.kpiName[1],this.kpiName[2]],rows:t},settings:{showLine:[this.kpiName[1],this.kpiName[2]],yAxisType:"memberKeepRate"===this.filters[0].value||"activeMemberRate"===this.filters[0].value?["percent"]:["normal"],yAxisName:"memberKeepRate"===this.filters[0].value||"activeMemberRate"===this.filters[0].value?["比率"]:"个"}};return i}},computed:{},created:function(){this.init(),this.getTable()},components:{BizChart:s["a"],BizList:r["a"]}},g=c,p=(a("e9cf"),a("2877")),u=Object(p["a"])(g,i,n,!1,null,null,null);t["default"]=u.exports},"30fe":function(e,t,a){},e9cf:function(e,t,a){"use strict";var i=a("30fe"),n=a.n(i);n.a}}]);