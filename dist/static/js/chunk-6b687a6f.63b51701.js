(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b687a6f"],{"2c36":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"marketing-statistics-activity-kpi-report"},[a("biz-chart",{attrs:{chartData:e.chartData,filters:e.filters,loading:e.loading,pagination:e.pagination},on:{filterDataChange:e.filterDataChange,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,refreshHandle:e.refreshHandle,exportExcle:e.exportExcle}},[a("div",{attrs:{slot:"list"},slot:"list"},[a("biz-list",{ref:"list",staticStyle:{width:"100%"},attrs:{height:e.height,tableData:e.tableData}},["comCnt"===e.filters[0].value||"comIns"===e.filters[0].value||"comKeepRate"===e.filters[0].value?a("el-table-column",{attrs:{prop:"companyName",label:"运营商名称"}}):e._e(),"shopCnt"===e.filters[0].value||"shopIns"===e.filters[0].value||"shopKeepRate"===e.filters[0].value?a("el-table-column",{attrs:{prop:"shopName",label:"店铺名称"}}):e._e(),a("el-table-column",{attrs:{prop:"createDate",label:"创建日期"}}),"shopCnt"===e.filters[0].value||"shopIns"===e.filters[0].value||"shopKeepRate"===e.filters[0].value?a("el-table-column",{attrs:{prop:"companyName",label:"所属运营商"}}):e._e(),a("el-table-column",{attrs:{prop:"state",label:"状态"}})],1)],1),a("div",{attrs:{slot:"description"},slot:"description"},[a("p",[e._v("运营商累计数：统计周期内所处联盟中，所有运营商的总数")]),a("p",[e._v("运营商新增数：统计期内，当期运营商累计数-上期运营商累计数")]),a("p",[e._v("留存率：统计期内有登录后台行为的新增运营商数量/运营商新增数*100%")]),a("p",[e._v("店铺累计数：统计周期内所处联盟中，所有店铺数量")]),a("p",[e._v("店铺新增数：统计期内，当期运营商累计数-上期运营商累计数")]),a("p",[e._v("店铺留存率：统计期内，有登录后台行为的新增运营商活跃数/运营商新增数*100%")]),a("p",[e._v("活跃店铺/运营商数：默认连续1月内，有登录平台行为的店铺/运营商，即算作活跃")]),a("p",[e._v("同比数据：即所选统计期（如2018年N月）与去年相同统计期（如2017年N月）数据比")]),a("p",[e._v("环比数据：即所选统计期（如2018年N月）与上一个连续统计期（如2017年N-1月）的数据比")])])])],1)},n=[],s=(a("99af"),a("a15b"),a("a9e3"),a("d3b7"),a("562e")),l=a("7558"),o=a("ce0c"),r=a("c596"),p=a("1ab1"),h={name:"ActivityKpiReport",data:function(){return{today:"",loading:!0,height:"500",beginDate:o["a"].getMonthStartDate(),endDate:o["a"].getMonthEndDate(),viewType:"month",pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},tableData:[],filters:[{type:"select",label:"统计指标",value:"shopCnt",options:[{value:"shopCnt",label:"店铺累计数"},{value:"shopIns",label:"店铺新增数"},{value:"shopKeepRate",label:"店铺留存率"}]}],kpiName:["当前","同比","环比"],chartData:{}}},methods:{init:function(){var e=this;this.loading=!0;var t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};p["a"].get(r["g"].staticAnalisisi.shopGraphKpi,t).then((function(t){e.chartData=e.dataFormat(t)})).catch((function(t){e.loading=!1,t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(t){e.loading=!1}))},getTable:function(){var e=this,t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};p["a"].get(r["g"].staticAnalisisi.shopTableKpi,t).then((function(t){e.tableData=t.dataList,e.pagination.total=Number(t.total)})).catch((function(t){e.loading=!1,t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(t){e.loading=!1}))},refreshHandle:function(e){this.viewType=e.viewType,this.beginDate=e.date[0],this.endDate=e.date[1],this.init(),this.getTable()},filterDataChange:function(e){this.filters=e,this.init(),this.getTable()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getTable()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getTable()},exportExcle:function(){var e=this,t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate};p["a"].get(r["g"].staticAnalisisi.shopExportKpi,t).then().catch((function(a){if(a.errorMessage||"没有符合条件的数据"===a)"没有符合条件的数据"===a?e.$message.warning("没有符合条件的数据"):(e.$message.warning(a.errorMessage),console.log("ERR_EXPORT: ",a));else{var i=[];for(var n in t)i.push("".concat(n,"=").concat(t[n]));var s="".concat(r["g"].staticAnalisisi.shopExportKpi,"?")+i.join("&");window.open(s)}}))},dataFormat:function(e){for(var t=[],a=0;a<e.indicators.length;a++)t.push({"日期":e.indicators[a].xValue,"当前":e.indicators[a].yValue,"同比":e.indicators[a].yYearOnYear,"环比":e.indicators[a].yMonthOnMonth});var i={type:"histogram",data:{columns:["日期",this.kpiName[0],this.kpiName[1],this.kpiName[2]],rows:t},settings:{showLine:[this.kpiName[1],this.kpiName[2]],yAxisType:"comKeepRate"===this.filters[0].value||"shopKeepRate"===this.filters[0].value?["percent"]:["normal"],yAxisName:"comKeepRate"===this.filters[0].value||"shopKeepRate"===this.filters[0].value?["比率"]:["个"]}};return i}},computed:{},created:function(){this.init(),this.getTable()},components:{BizChart:s["a"],BizList:l["a"]}},c=h,g=(a("476b"),a("2877")),u=Object(g["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},"476b":function(e,t,a){"use strict";var i=a("a6b6"),n=a.n(i);n.a},a6b6:function(e,t,a){}}]);