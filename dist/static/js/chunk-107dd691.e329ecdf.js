(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-107dd691"],{"0943":function(e,t,i){"use strict";var a=i("1fac"),n=i.n(a);n.a},"1b28":function(e,t,i){},"1fac":function(e,t,i){},2497:function(e,t,i){"use strict";var a=i("4360"),n=i("a18c");t["a"]=function(e,t){return function(i){var o=i.data;"100"===o.resultCode?e(o):"709"===o.resultCode?(a["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",a["a"].getters.currentUser),n["a"].push("/login")):t(o)}}},2620:function(e,t,i){},2724:function(e,t,i){"use strict";var a=i("2497"),n=i("bc3a"),o=i.n(n),s=i("c596");t["a"]={query:function(e,t,i){o.a.get(s["g"].motoristsClubActivity.ActivityNotification_query,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},update:function(e,t,i){o.a.post(s["g"].motoristsClubActivity.ActivityNotification_update,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},publish:function(e,t,i){o.a.post(s["g"].motoristsClubActivity.ActivityNotification_publish,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryVIPList:function(e,t,i){o.a.get(s["g"].motoristsClubActivity.ActivityNotification_queryVIPList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},queryPeople:function(e,t,i){o.a.get(s["g"].motoristsClubActivity.ActivityNotification_queryPeople,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))}}},"2a8a":function(e,t,i){e.exports=i.p+"static/img/iphone-b.b7d883a0.png"},"2dd2":function(e,t,i){},3630:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"motorists-club-activity"},[i("div",{attrs:{slot:"top"},slot:"top"},[i("biz-header",{attrs:{operations:e.operations,filters:e.filters},on:{operate:e.operate,filterDataChange:e.filterDataChange}})],1),i("activity-card-list",{attrs:{activities:e.activities},on:{deleteItem:e.deleteItem,cardClicked:e.cardClicked,topClicked:e.topClicked}}),i("biz-pagination",{attrs:{slot:"bottom",pagination:e.pagination},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange},slot:"bottom"}),i("biz-popup-tabs",{attrs:{slot:"float",open:e.open},on:{close:function(t){e.open=!1}},slot:"float",model:{value:e.tabSelection,callback:function(t){e.tabSelection=t},expression:"tabSelection"}},[i("el-tab-pane",{attrs:{label:"活动信息",name:"0"}},[i("activity-info",{attrs:{cardId:e.activityInfoModel},on:{operationSuccess:e.operationSuccess}})],1),e.isCreate?e._e():i("el-tab-pane",{attrs:{label:"报名详情",name:"1"}},[i("signup-info",{ref:"signupInfo",attrs:{cardId:e.activityInfoModel}})],1),e._e(),e.isCreate?e._e():i("el-tab-pane",{attrs:{label:"活动通知",name:"3"}},[i("activity-notification",{attrs:{cardId:e.activityInfoModel},on:{operationSuccess:e.operationSuccess}})],1)],1)],1)},n=[],o=(i("4160"),i("b0c0"),i("a9e3"),i("25eb"),i("159b"),i("7132")),s=i("04d3"),r=i("f36f"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"activity-list"},[i("div",{staticClass:"activity-list__content",class:{hide:!(e.activities&&e.activities.length>0)}},[e._l(e.activities,(function(t){return[i("activity-card",{key:t.id,attrs:{model:t},on:{closed:e.deleteItem,cardClicked:e.cardClicked,topClicked:e.topClicked}})]}))],2),0===e.activities.length?i("div",{staticClass:"activity-list-no-data"}):e._e()])},c=[],u=(i("c975"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"activity-card",attrs:{href:"##"},on:{click:e.click}},[i("biz-card",{attrs:{image:e.model.cover}},[i("div",{staticClass:"activity-card__body"},[i("div",{staticClass:"title"},[e._v(e._s(e.model.title))]),i("div",{staticClass:"area"},[e._v(e._s(e.model.address))]),i("div",{staticClass:"area"},[e._v(e._s(e.model.fleet?e.model.fleet.name:""))]),i("div",{staticClass:"time"},[i("div",{staticClass:"time-start"},[e._v("开始时间："+e._s(e.model.beginDate))]),i("div",{staticClass:"time-end"},[e._v("结束时间："+e._s(e.model.endDate))])]),i("div",{staticClass:"signup-count"},[e._v("已报名 "+e._s(e.model.attendNumber)+" 人")]),e.hasAuthDel?i("div",{staticClass:"close",on:{click:e.close}},[i("i",{staticClass:"el-icon-close"})]):e._e(),i("div",{staticClass:"top",class:{"is-top":"1"===e.model.isTop},on:{click:e.topClick}},[e._v("顶")])]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("span",{staticClass:"activity-card__footer",class:{"status-1":"continued"===e.model.state,"status-2":"ended"===e.model.state}},[e._v(e._s(e.statusText))])])])],1)}),d=[],f=(i("caad"),i("2532"),i("5530")),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"biz-card"},[e.$slots.header||e.header?i("div",{staticClass:"biz-card__header"},[e._t("header",[e._v(e._s(e.header))])],2):e._e(),e.$slots.image||e.image?i("div",{staticClass:"biz-card__image"},[e._t("image",[i("img",{attrs:{src:e.image,alt:"Image"}})])],2):e._e(),i("div",{staticClass:"biz-card__body"},[e._t("default")],2),e.$slots.footer||e.footer?i("div",{staticClass:"biz-card__footer"},[e._t("footer",[e._v(e._s(e.footer))])],2):e._e()])},p=[],h={name:"BizCard",props:["header","image","footer"]},g=h,v=(i("89e0"),i("2877")),b=Object(v["a"])(g,m,p,!1,null,null,null),y=b.exports,M=y,C=i("2f62"),w={name:"ActivityCard",props:{model:{type:Object,required:!0}},components:{BizCard:M},methods:{click:function(e){e.preventDefault(),this.$emit("cardClicked",e,this.model)},topClick:function(e){e.preventDefault(),e.stopPropagation(),this.$emit("topClicked",e,this.model)},close:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("closed",e,t.model)}))}},computed:Object(f["a"])(Object(f["a"])({},Object(C["c"])("Authority",["currentAuth"])),{},{hasAuthDel:function(){return this.currentAuth.includes("admin:fleetActivity.delete")},statusText:function(){switch(this.model.state){case"notStart":return"未开始";case"continued":return"进行中";case"ended":return"已结束";case"created":return"已创建 (未发布)"}return""}})},_=w,k=(i("ed34"),Object(v["a"])(_,u,d,!1,null,null,null)),S=k.exports,T={props:["activities"],methods:{deleteItem:function(e,t){this.$emit("deleteItem",e,this.activities.indexOf(t))},cardClicked:function(e,t){this.$emit("cardClicked",e,t)},topClicked:function(e,t){this.$emit("topClicked",e,t)}},components:{ActivityCard:S}},D=T,A=(i("95dd"),Object(v["a"])(D,l,c,!1,null,null,null)),$=A.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"motorists-club-activity__activity-info"},[i("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}),i("el-form",{ref:"form",attrs:{size:"small","label-width":"110px",model:e.formModel,rules:e.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"置顶"}},[i("el-switch",{attrs:{"active-value":"1","inactive-color":"#d9d9d9","active-color":"#87d068","inactive-value":"0"},model:{value:e.formModel.isTop,callback:function(t){e.$set(e.formModel,"isTop",t)},expression:"formModel.isTop"}})],1),i("el-form-item",{attrs:{label:"车友会名称",prop:"fleetId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:!!e.formModel.id},model:{value:e.formModel.fleetId,callback:function(t){e.$set(e.formModel,"fleetId",t)},expression:"formModel.fleetId"}},e._l(e.clubList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"活动封面",prop:"cover"}},[i("biz-avatar-uploader-new",{on:{uploadSuccess:e.uploadSuccess},model:{value:e.formModel.cover,callback:function(t){e.$set(e.formModel,"cover",t)},expression:"formModel.cover"}})],1),i("el-form-item",{attrs:{label:"活动标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入活动标题"},model:{value:e.formModel.title,callback:function(t){e.$set(e.formModel,"title",t)},expression:"formModel.title"}})],1),i("el-form-item",{attrs:{label:"活动地点",prop:"lngBaidu",value:e.formModel.lngBaidu}},[i("biz-map-pointer",{attrs:{address:e.formModel.address},on:{addressChange:e.handleAddressChange},model:{value:e.point,callback:function(t){e.point=t},expression:"point"}})],1),i("el-form-item",{attrs:{label:"活动开始时间",prop:"beginDate"}},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择活动开始时间"},model:{value:e.formModel.beginDate,callback:function(t){e.$set(e.formModel,"beginDate",t)},expression:"formModel.beginDate"}})],1),i("el-form-item",{attrs:{label:"活动结束时间",prop:"endDate"}},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择活动结束时间"},model:{value:e.formModel.endDate,callback:function(t){e.$set(e.formModel,"endDate",t)},expression:"formModel.endDate"}})],1),i("el-form-item",{attrs:{label:"报名截止时间",prop:"deadline"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"请选择报名截止时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.formModel.deadline,callback:function(t){e.$set(e.formModel,"deadline",t)},expression:"formModel.deadline"}})],1),i("el-form-item",{attrs:{label:"活动类型",prop:"type"}},[i("el-radio-group",{model:{value:e.formModel.type,callback:function(t){e.$set(e.formModel,"type",t)},expression:"formModel.type"}},[i("el-radio",{attrs:{label:"0"}},[e._v("免费")]),i("el-radio",{attrs:{label:"1"}},[e._v("收费")])],1)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.formModel.type,expression:"formModel.type === '1'"}],attrs:{label:"活动金额",prop:"amount"}},[i("el-input",{attrs:{placeholder:"请输入活动金额",type:"number",min:0},model:{value:e.formModel.amount,callback:function(t){e.$set(e.formModel,"amount",t)},expression:"formModel.amount"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",{attrs:{label:"限制人数",prop:"limitNumber"}},[i("el-input",{attrs:{placeholder:"请输入内容",type:"number",min:"0"},model:{value:e.formModel.limitNumber,callback:function(t){e.$set(e.formModel,"limitNumber",t)},expression:"formModel.limitNumber"}},[i("template",{slot:"append"},[e._v("人")])],2)],1),i("el-form-item",{attrs:{label:"表单必填",prop:"options",value:e.formModel.options}},[i("tag-manager",{attrs:{removeHandler:e.removeHandler},model:{value:e.formModel.options,callback:function(t){e.$set(e.formModel,"options",t)},expression:"formModel.options"}})],1),i("el-form-item",{attrs:{label:"活动详情",prop:"content",value:e.formModel.content}},[i("biz-editor",{ref:"editor",attrs:{width:"330px",hasVideo:!0},model:{value:e.formModel.content,callback:function(t){e.$set(e.formModel,"content",t)},expression:"formModel.content"}})],1)],1),i("el-dialog",{staticClass:"activity-info__preview",attrs:{slot:"float","append-to-body":"",title:"预览",width:"450px",visible:e.previewDialogOpen},on:{close:e.closePreviewDialog},slot:"float"},[i("div",{staticClass:"bg",style:{background:e.background}},[i("div",{staticClass:"cpreview"},[i("div",{staticClass:"pcontent"},[i("div",{staticClass:"pre-logo"},[i("img",{attrs:{src:e.formModel.cover}})]),i("div",{staticClass:"pre-title"},[e._v(" "+e._s(e.formModel.title)+" ")]),i("div",{staticClass:"pre-info"},[i("div",{staticClass:"pre-info__item"},[i("i",{staticClass:"iconfont biz-icon-shijian1"}),i("div",[e._v(" 活动日期： "),i("span",[e._v(e._s(e.dateTimeConverter(e.formModel.beginDate)+" ~ "+e.dateTimeConverter(e.formModel.endDate)))])])]),i("div",{staticClass:"pre-info__item"},[i("i",{staticClass:"iconfont biz-icon-shijian"}),i("div",[e._v(" 报名截止日期： "),i("span",[e._v(e._s(e.dateTimeConverter(e.formModel.deadline)))])])]),i("div",{staticClass:"pre-info__item"},[i("i",{staticClass:"iconfont biz-icon-feiyong"}),i("div",[e._v(" 活动金额： "),i("span",[e._v("￥"+e._s(e.formModel.amount>0?e.formModel.amount:0))])])]),i("div",{staticClass:"pre-info__item"},[i("i",{staticClass:"iconfont biz-icon-dingwei"}),i("div",[e._v(" 活动地址 "),i("span",[e._v(e._s(e.formModel.address))])])]),i("div",{staticClass:"pre-info__item"},[i("i",{staticClass:"iconfont biz-icon-guanyudianpu"}),i("div",[e._v(" 主办方： "),i("span",[e._v(e._s(e.formModel.fleet?e.formModel.fleet.name:""))])])])]),i("div",{staticClass:"pre-attend"},[e._v(" 已报名 "),i("strong",[e._v(e._s(e.formModel.attendNumber||"0"))]),e._v("人/限额"+e._s(e.formModel.limitNumber)+"人 ")]),i("div",{staticClass:"pre-content",domProps:{innerHTML:e._s(e.formModel.content)}})])])])])],1)},z=[],N=(i("ac1f"),i("1276"),i("8330")),x=i("3f70"),I=i("a99c"),O=i("2497"),R=i("bc3a"),L=i.n(R),F=i("c596"),j={query:function(e,t,i){L.a.get(F["g"].motoristsClubActivity.ActivityInfo_query,{params:e}).then(Object(O["a"])(t,i)).catch((function(e){console.error(e)}))},update:function(e,t,i){L.a.post(F["g"].motoristsClubActivity.ActivityInfo_update,e).then(Object(O["a"])(t,i)).catch((function(e){console.error(e)}))},publish:function(e,t,i){L.a.post(F["g"].motoristsClubActivity.ActivityInfo_publish,e).then(Object(O["a"])(t,i)).catch((function(e){console.error(e)}))},add:function(e,t,i){L.a.post(F["g"].motoristsClubActivity.ActivityInfo_add,e).then(Object(O["a"])(t,i)).catch((function(e){console.error(e)}))},queryClubList:function(e,t,i){L.a.get(F["g"].motoristsClubActivity.ActivityInfo_queryClubList,{params:e}).then(Object(O["a"])(t,i)).catch((function(e){console.error(e)}))}},q=i("c466"),B=i("2a8a"),E=i.n(B),V=i("c17f"),K=i("40ae"),H={name:"ActivityInfo",components:{BizSaveButton:N["a"],BizGrid:r["a"],TagManager:I["a"],BizEditor:K["a"],BizMapPointer:x["a"],BizAvatarUploaderNew:V["b"]},data:function(){var e=this,t=function(e,t,i){t.length>0?i():i(new Error("请输入表单必填项"))},i=function(t,i,a){"0"===e.formModel.type||i>0?a():a(new Error("请输入正确的活动金额"))},a=function(t,i,a){""!==e.formModel.cover||i?a():a(new Error("请输入活动封面"))};return{isSetting:!1,loading:!1,removeHandler:function(t){return"1"!==t.isAttend||(e.$message.warning("该字段已经有人报名使用，无法删除"),!1)},clubList:[],formModel:this.getDefaultModel(),previewDialogOpen:!1,background:"url("+E.a+") no-repeat no-repeat",editorStyle:{height:"300px"},operations:[{label:"发布",name:"publish",type:"primary"},{label:"预览",name:"preview",type:""},{label:"保存",name:"save",type:"primary"}],fileData:{type:"0"},rules:{fleetId:[{required:!0,message:"请选择车友会",trigger:["blur","change"]}],cover:[{required:!0,trigger:["blur","change"],validator:a}],title:[{required:!0,message:"请输入活动标题",trigger:"blur"}],lngBaidu:[{required:!0,message:"请输入正确的地址",trigger:"blur"}],beginDate:[{required:!0,message:"请选择活动开始时间",trigger:"blur"}],endDate:[{required:!0,message:"请选择活动结束时间",trigger:"blur"}],deadline:[{required:!0,message:"请选择报名截止时间",trigger:"blur"}],content:[{required:!0,message:"请输入活动详情",trigger:"blur"}],type:[{required:!0,message:"请选择活动类型",trigger:"blur"}],amount:[{required:!0,trigger:"blur",validator:i}],limitNumber:[{required:!0,message:"请输入限制人数",trigger:"blur"},{pattern:/^\d+$/,message:"格式错误",trigger:"blur"}],options:[{required:!0,trigger:"blur",validator:t}]}}},props:{cardId:{type:Object,default:function(){return{id:""}}}},created:function(){this.queryClubList()},methods:{uploadSuccess:function(){this.$refs.form.clearValidate(["cover"])},dateTimeConverter:function(e){return q["a"].dateTimeConverter(e)},queryClubList:function(){var e=this;j.queryClubList({},(function(t){e.clubList=t.content}),(function(e){console.log(e),console.log("code错误")}))},areaChanged:function(e){this.formModel.area.id=e},operate:function(e){this[e]()},handleAddressChange:function(e){this.$set(this.formModel,"address",e),e?this.$refs.form.clearValidate(["lngBaidu"]):(this.$set(this.formModel,"latBaidu",""),this.$set(this.formModel,"lngBaidu",""))},getDefaultModel:function(){return{isTop:!1,cover:"",type:"0",beginDate:"",endDate:"",deadline:"",content:"",options:[{content:"姓名"},{content:"电话"},{content:"人数"}]}},resetModel:function(){this.formModel=this.getDefaultModel()},closePreviewDialog:function(){this.previewDialogOpen=!1},checkVideo:function(e){this.$message.warning(e)},preview:function(){this.previewDialogOpen=!0},compareTime:function(e,t){var i=e.split(" "),a=i[0].split("-"),n=i[1].split(":"),o=new Date(a[0],a[1]-1,a[2],n[0],n[1],n[2]),s=o.getTime(),r=t.split(" "),l=r[0].split("-"),c=r[1].split(":"),u=new Date(l[0],l[1]-1,l[2],c[0],c[1],c[2]),d=u.getTime();return s>=d},save:function(){var e=this;this.$refs.form.validate((function(t,i){if(!t)return!1;if(e.compareTime(e.formModel.beginDate,e.formModel.endDate))e.$message.warning("活动开始时间不能晚于活动结束时间");else if(e.compareTime(e.formModel.deadline,e.formModel.endDate))e.$message.warning("报名截止时间不能晚于活动结束时间");else{var a={id:e.formModel.id,title:e.formModel.title,cover:e.formModel.cover,areaStr:"地区测试",address:e.formModel.address,beginDate:e.dateTimeConverter(e.formModel.beginDate),endDate:e.dateTimeConverter(e.formModel.endDate),deadline:e.dateTimeConverter(e.formModel.deadline),content:e.formModel.content,state:e.formModel.state,type:e.formModel.type,amount:e.formModel.amount,limitNumber:e.formModel.limitNumber,options:e.formModel.options,isTop:e.formModel.isTop,isPublication:e.formModel.isPublication,fleet:{id:e.formModel.fleetId},lngBaidu:String(e.formModel.lngBaidu),latBaidu:String(e.formModel.latBaidu)};e.formModel.id?j.update(a,(function(t){e.$message.success("保存成功"),e.$emit("operationSuccess")}),(function(t){e.$message.warning(t.errorMessage)})):j.add(a,(function(t){e.publishing?(e.publishing=!1,e.formModel.id=t.id,e.publish()):(e.$message.success("保存成功"),e.$emit("operationSuccess"))}),(function(t){e.$message.warning(t.errorMessage)}))}}))},publish:function(){var e=this;this.formModel.id?j.publish({activityId:this.formModel.id},(function(t){e.$message.success("发布成功"),e.$emit("operationSuccess")}),(function(t){e.$message.warning(t.errorMessage)})):(this.publishing=!0,this.save())}},computed:{point:{get:function(){return{lng:this.formModel.lngBaidu,lat:this.formModel.latBaidu}},set:function(e){e&&(this.formModel.lngBaidu=e.lng,this.formModel.latBaidu=e.lat)}}},watch:{"formModel.options":function(e,t){e&&this.$refs.form.clearValidate("options")},cardId:function(e,t){var i=this;this.operations=[{label:"发布",name:"publish",type:"primary"},{label:"预览",name:"preview",type:"primary"},{label:"保存",name:"save",type:"primary"}],e.id?(this.loading=!0,j.query({activityId:e.id},(function(e){i.isSetting=!0,i.formModel=e.fleetActivity,i.$set(i.formModel,"fleetId",i.formModel.fleet.id),i.$refs.form.resetFields(),"created"!==i.formModel.state&&i.operations.shift({label:"发布",name:"publish",type:"primary"}),i.loading=!1,setTimeout((function(){var e=i.$refs.form.$el.querySelector("input");e.focus(),e.blur()}),500),i.$nextTick((function(){i.isSetting=!1}))}),(function(e){console.log(e),console.log("code错误")}))):(this.isSetting=!0,this.resetModel(),this.$nextTick((function(){i.isSetting=!1})),this.$refs.form.resetFields()),this.publishing=!1}}},Y=H,W=(i("6fb9"),Object(v["a"])(Y,P,z,!1,null,null,null)),G=W.exports,Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("biz-grid",{staticClass:"motorists-club-activity__signup-info"},[i("div",{staticClass:"signup-info__top",attrs:{slot:"top"},slot:"top"},[i("div",{staticClass:"text"},[e._v(" 已报名 "+e._s(e.count)+" 人/限额 "+e._s(e.limit)+" 人 ")]),i("biz-save-button",{attrs:{operations:e.operations},on:{operate:e.operate}})],1),i("biz-flex-table",{ref:"table",attrs:{pagination:e.pagination,tableData:e.tableData,loading:e.loading,checkable:!1},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}},e._l(e.columnData,(function(e){return i("el-table-column",{key:e.id,attrs:{prop:e.id,label:e.content}})})),1)],1)},U=[],J={query:function(e,t,i){L.a.get(F["g"].motoristsClubActivity.SignupInfo_query,{params:e}).then(Object(O["a"])(t,i)).catch((function(e){console.error(e)}))},export:function(e,t,i){window.open(F["g"].motoristsClubActivity.SignupInfo_export+"?activityId="+e.activityId)}},Z={name:"SignupInfo",components:{BizGrid:r["a"],BizFlexTable:s["c"],BizSaveButton:N["a"]},data:function(){return{loading:!1,columnData:[],tableData:[],filters:[],operations:[{label:"导出",name:"export",type:""}],pagination:{pageSize:10,currentPage:1,pageSizes:[10,20,50,100],total:0},count:0,limit:0}},props:{cardId:{type:Object,default:function(){return{id:""}}}},methods:{query:function(){var e=this;this.loading=!0,J.query({activityId:this.cardId.id},(function(t){var i=[];e.columnData=t.optionData,t.content.forEach((function(e){i.push(e.option)})),e.tableData=i,e.$set(e.pagination,"total",Number.parseInt(t.total)),e.$set(e.pagination,"totalPages",Number.parseInt(t.totalPages)),e.count=t.total,e.limit=t.fleetActivity&&t.fleetActivity.limitNumber?Number.parseInt(t.fleetActivity.limitNumber):0,e.limit=0===e.limit?"-":e.limit,e.loading=!1}),(function(e){console.log(e),console.log("code错误")}))},operate:function(e){this[e]()},export:function(){J.export({activityId:this.cardId.id})},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()},pageSizeChange:function(e){this.pagination.pageSize=e,this.query()},currentPageChange:function(e){this.pagination.currentPage=e,this.query()},clearInfo:function(){this.tableData=[],this.count=0,this.limit=0,this.pagination.total=0}},watch:{cardId:function(e,t){e.id?this.query():this.clearInfo()}}},X=Z,ee=(i("7ca5"),Object(v["a"])(X,Q,U,!1,null,null,null)),te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"motorists-club-activity__signin-info"},[i("biz-flex-table",{attrs:{operations:e.operations,tableData:e.tableData,pagination:e.pagination,checkable:e.checkable},on:{operate:e.operate,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[i("el-table-column",{attrs:{prop:"name",label:"姓名",width:"150"}}),i("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),i("el-table-column",{attrs:{prop:"plate",label:"车牌"}}),i("el-table-column",{attrs:{prop:"signin",label:"签到信息",formatter:e.getStatus}})],1)],1)},ae=[],ne={name:"SigninInfo",data:function(){return{tableData:[],filters:[],operations:[],checkable:!1,pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:9}}},props:{cardId:{type:Object,default:function(){return{id:""}}}},created:function(){var e=this;setTimeout((function(){e.tableData=[{name:"张三",mobile:"18686668888",plate:"吉AAA888",signin:"1"},{name:"张三",mobile:"18686668888",plate:"吉AAA888"},{name:"张三",mobile:"18686668888",plate:"吉AAA888",signin:"1"},{name:"张三",mobile:"18686668888",plate:"吉AAA888"},{name:"张三",mobile:"18686668888",plate:"吉AAA888",signin:"1"},{name:"张三",mobile:"18686668888",plate:"吉AAA888",signin:"1"}]}),500)},methods:{operate:function(e){},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()},getStatus:function(e){switch(e.signin){case"0":return"";case"1":return"已签到"}return""}},watch:{},components:{BizFlexTable:s["c"]}},oe=ne,se=Object(v["a"])(oe,ie,ae,!1,null,null,null),re=se.exports,le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"motorists-club-activity__activity-notification"},[i("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}),i("el-form",{ref:"form",attrs:{model:e.formModel,rules:e.rules,size:"small","label-width":"110px"}},[i("el-form-item",{attrs:{label:"发送给",prop:"noticeTarget"}},[i("el-radio-group",{on:{change:e.onTypeChange},model:{value:e.formModel.noticeTarget,callback:function(t){e.$set(e.formModel,"noticeTarget",t)},expression:"formModel.noticeTarget"}},[i("el-radio",{attrs:{label:"ToStore"}},[e._v("所有会员")]),i("el-radio",{attrs:{label:"ToMemberrank"}},[e._v("指定等级会员")]),i("el-radio",{attrs:{label:"ToMember"}},[e._v("指定会员")])],1),"ToStore"===e.formModel.noticeTarget?i("div",[i("span",[e._v("已选中会员"+e._s(e.total)+"人")])]):"ToMemberrank"===e.formModel.noticeTarget?i("div",[i("el-button",{staticClass:"btn-style",attrs:{type:"primary"},on:{click:e.selectRank}},[e._v("选择")]),i("span",[e._v("已选中会员"+e._s(e.rankTotal)+"人")]),e._l(e.selVips,(function(t){return i("div",{key:t.name},[e._v(e._s(t.name+" ("+t.curSel+")"))])}))],2):i("div",[i("el-button",{staticClass:"btn-style",attrs:{type:"primary"},on:{click:e.showPeoplePicker}},[e._v("选择")]),i("span",[e._v("已选中会员"+e._s(e.formModel.noticeMembers.length)+"人")]),i("div",{class:e.isShow?"nick-name-container-show":"nick-name-container"},e._l(e.formModel.noticeMembers,(function(t){return i("div",{key:t.id,staticClass:"nick-name-title"},[e._v(e._s(t.name||t.nickname))])})),0),e.formModel.noticeMembers.length>6&&!e.isShow?i("div",{staticClass:"color",on:{click:e.view}},[e._v("查看全部")]):e._e()],1)],1),i("el-form-item",{attrs:{label:"通知方式",prop:"notifyType"}},[i("div",[i("div",{directives:[{name:"popover",rawName:"v-popover:codePop",arg:"codePop"}]},[i("i",{staticClass:"iconfont el-icon-question",staticStyle:{color:"#ff7300"}}),i("span",[e._v("输入框内支持自定义编辑")])]),i("el-popover",{ref:"codePop",attrs:{placement:"right-end",width:"300",trigger:"hover"}},[i("div",[i("p",[e._v("APP通知，发送后安装了V服爱车APP且登录的会员将在APP收到此消息")]),i("p",[e._v("微信通知，发送后关注了微信公众号且登录的会员将在微信上收到此消息")]),i("p",[e._v("短信通知，发送后将通过短信通知到会员")]),i("p",[e._v("注意：用户没有登录APP/没有关注公众号/关注公众号但没有登录将存在收不到消息的情况。消息发送后可能因为运营商原因存在延迟收到的情况，请知悉")])])])],1),i("div",{staticClass:"notify-type"},[i("div",{staticClass:"item"},[i("el-checkbox",{model:{value:e.formModel.isAppNotice,callback:function(t){e.$set(e.formModel,"isAppNotice",t)},expression:"formModel.isAppNotice"}},[e._v("App消息")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.formModel.isAppNotice,expression:"formModel.isAppNotice"}],staticClass:"preview-content"},[i("el-input",{attrs:{placeholder:"请输入通知内容，不超过100字符",type:"textarea",maxlength:100},model:{value:e.formModel.content,callback:function(t){e.$set(e.formModel,"content",t)},expression:"formModel.content"}})],1)],1),i("div",{staticClass:"item"},[i("el-checkbox",{model:{value:e.formModel.isWechatNotice,callback:function(t){e.$set(e.formModel,"isWechatNotice",t)},expression:"formModel.isWechatNotice"}},[e._v("微信消息")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.formModel.isWechatNotice,expression:"formModel.isWechatNotice"}],staticClass:"preview-content"},[i("el-input",{attrs:{type:"textarea",rows:1,maxlength:100,placeholder:"请输入通知内容，不超过100字符"},model:{value:e.formModel.wechatTitle,callback:function(t){e.$set(e.formModel,"wechatTitle",t)},expression:"formModel.wechatTitle"}}),i("div",[e._v("活动名： "),i("span",{staticClass:"custom-c"},[e._v(e._s(e.formModel.fleetActivity.title))])]),i("div",[e._v("报名人数：限额"+e._s(e.formModel.fleetActivity.limitNumber)+"人")]),i("el-input",{attrs:{type:"textarea",placeholder:"请输入通知内容，不超过100字符",maxlength:100},model:{value:e.formModel.wechatRemark,callback:function(t){e.$set(e.formModel,"wechatRemark",t)},expression:"formModel.wechatRemark"}})],1)],1),i("div",{staticClass:"item"},[i("el-checkbox",{model:{value:e.formModel.isSmsNotice,callback:function(t){e.$set(e.formModel,"isSmsNotice",t)},expression:"formModel.isSmsNotice"}},[e._v("短信消息")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.formModel.isSmsNotice,expression:"formModel.isSmsNotice"}],staticClass:"preview-content"},[e._v(" 【V服平台】亲爱的会员，为感恩长期以来大家对 "),i("span",{staticClass:"custom-c"},[e._v(e._s(e.formModel.fleetActivity.fleet.name))]),e._v(" 的支持，本车友会将举办 "),i("span",{staticClass:"custom-c"},[e._v(e._s(e.formModel.fleetActivity.title))]),e._v(" 活动，活动地址 "),i("span",{staticClass:"custom-c"},[e._v(e._s(e.formModel.fleetActivity.address))]),e._v(" ，名额有限。退订回N ")])],1)])])],1),i("biz-dialog-selector",{attrs:{slot:"float",title:"选择会员",visibility:e.showDialog,appendToBody:!0,keyField:"id",selectionKeys:e.selectionKeys,loading:e.dialogLoading,tableData:e.dialogTableData,pagination:e.dialogPagination,filters:e.dialogFilters},on:{"update:visibility":function(t){e.showDialog=t},confirmed:e.handleConfirmed,open:e.opened,operate:e.dialogOperate,filterDataChange:e.dialogFilterDataChange,pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange,selectionChange:e.selectionChange},slot:"float"},[i("el-table-column",{attrs:{prop:"name",label:"用户名"}}),i("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),i("el-table-column",{attrs:{prop:"createDate",label:"创建日期"}}),i("el-table-column",{attrs:{prop:"enableState",label:"状态",formatter:e.getStatus}}),i("el-table-column",{attrs:{label:"店铺名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",e._l(t.row.shops,(function(t,a){return i("div",{key:a,staticClass:"customer-info"},[e._v(e._s(t.name))])})),0)]}}])}),i("el-table-column",{attrs:{prop:"lastLoginIp",label:"最后登录地址"}}),i("el-table-column",{attrs:{prop:"lastLoginDate",label:"最后登录时间"}})],1),i("el-dialog",{attrs:{title:"选择等级",visible:e.showRankDialog,appendToBody:!0,center:"","custom-class":"rank-dialog"},on:{"update:visible":function(t){e.showRankDialog=t}}},[i("div",{staticClass:"content"},e._l(e.vipRankList,(function(t){return i("div",{key:t.id,staticClass:"memberRank"},[i("div",{staticClass:"vip-name"},[e._v(e._s(t.name))]),i("div",{staticClass:"vip-container"},e._l(t.ranks,(function(t){return i("div",{key:t.id,staticClass:"vip"},[i("el-checkbox",{attrs:{value:t.checked},on:{change:function(i){return e.vipChange(t)}}},[e._v(e._s(t.name))])],1)})),0)])})),0),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showRankDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleRankConfirmed}},[e._v("确认选择")])],1)]),i("el-dialog",{attrs:{title:"通知结果",visible:e.showResultDialog,appendToBody:!0,"custom-class":"promotion-dialog",center:""},on:{"update:visible":function(t){e.showResultDialog=t}}},[i("div",[e._v("共通知会员"+e._s(e.memberCount)+"位，其中送达App"+e._s(e.appCount)+"位，送达微信"+e._s(e.wechatCount)+"位，送达短信"+e._s(e.smsCount)+"位，可能因为运营商原因存在延迟收到的情况，请勿重复发送。")]),i("div",{staticClass:"container"},[i("biz-flex-table",{staticClass:"tabel-style",attrs:{pagination:e.dialogResultPagination,tableData:e.sendResultList,loading:e.resultLoading,checkable:!1},on:{"size-change":e.dialogResultPageSizeChange,"current-change":e.dialogResultCurrentPageChange}},[i("el-table-column",{attrs:{prop:"type",label:"通知方式"}}),i("el-table-column",{attrs:{prop:"member",label:"通知对象"}}),i("el-table-column",{attrs:{prop:"result",label:"结果"}})],1)],1)])],1)},ce=[],ue=(i("99af"),i("4de4"),i("a15b"),i("d81d"),i("a434"),i("d3b7"),i("25f0"),i("5319"),i("b85c")),de=i("af3f"),fe=i("1ab1"),me=i("2724"),pe={name:"ActivityNotification",components:{BizSaveButton:N["a"],BizDialogSelector:de["a"],BizGrid:r["a"],BizFlexTable:s["c"]},data:function(){var e=this;return{selectionList:[],total:0,rankTotal:0,showResultDialog:!1,resultLoading:!1,isShow:!1,selVips:[],sendResultList:[],allResultList:[],showRankDialog:!1,loading:!1,vipList:[],showDialog:!1,formModel:this.getDefaultModel(),memberRankList:[],operations:[{label:"保存",name:"save",type:"primary"},{label:"发送",name:"publish",type:"primary"}],dialogResultPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},rules:{isNeedNotice:[{required:!0,message:"请选择是否通知",trigger:"blur"}],content:[{required:!0,trigger:"blur",validator:function(t,i,a){"0"===e.formModel.isNeedNotice||e.formModel.content?a():a(new Error("请输入通知内容"))}}],noticeTarget:[{required:!0,message:"请选择发送对象",trigger:"blur"}],notifyType:[{required:!0,trigger:"change",validator:function(t,i,a){e.formModel.isAppNotice||e.formModel.isWechatNotice||e.formModel.isSmsNotice?a():a(new Error("请选择通知方式"))}}],notifyVipList:[{trigger:"blur",validator:function(t,i,a){"ToMemberrank"===e.formModel.noticeTarget&&0===i.length?a(new Error("请选择发送对象")):a()}}],selectionKeys:[{validator:function(t,i,a){"ToMember"===e.formModel.noticeTarget&&0===i.length?a(new Error("请选择发送对象")):a()}}]},dialogLoading:!0,dialogTableData:[],dialogPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},dialogFilters:[{type:"input",label:"",placeholder:"请输入姓名/手机号",name:"searchValue",value:""}]}},props:{cardId:{type:Object,default:function(){return{id:""}}}},computed:Object(f["a"])(Object(f["a"])({},Object(C["c"])(["getUser"])),{},{selectionKeys:function(){var e,t=[],i=Object(ue["a"])(this.formModel.noticeMembers);try{for(i.s();!(e=i.n()).done;){var a=e.value;t.push(a.id)}}catch(n){i.e(n)}finally{i.f()}return t},memberCount:function(){var e=Math.max(this.appCount,this.wechatCount,this.smsCount);return e},appCount:function(){var e=0;return this.allResultList.forEach((function(t){"App通知"===t.type&&e++})),e},wechatCount:function(){var e=0;return this.allResultList.forEach((function(t){"微信通知"===t.type&&e++})),e},smsCount:function(){var e=0;return this.allResultList.forEach((function(t){"短信通知"===t.type&&e++})),e},vipRankList:function(){var e,t=this.memberRankList,i=Object(ue["a"])(t);try{for(i.s();!(e=i.n()).done;){var a,n=e.value,o=Object(ue["a"])(n.ranks);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.checked=!1}}catch(g){o.e(g)}finally{o.f()}}}catch(g){i.e(g)}finally{i.f()}var r,l=Object(ue["a"])(t);try{for(l.s();!(r=l.n()).done;){var c,u=r.value,d=Object(ue["a"])(u.ranks);try{for(d.s();!(c=d.n()).done;){var f,m=c.value,p=Object(ue["a"])(this.formModel.noticeMemberRanks);try{for(p.s();!(f=p.n()).done;){var h=f.value;h.id===m.id&&(m.checked=!0)}}catch(g){p.e(g)}finally{p.f()}}}catch(g){d.e(g)}finally{d.f()}}}catch(g){l.e(g)}finally{l.f()}return t}}),created:function(){var e=this;me["a"].queryVIPList({shopId:window.top.SHOP_ID},(function(t){e.vipList=t.memberRanks}),(function(e){console.log(e),console.log("code错误")}))},methods:{operate:function(e){this[e]()},view:function(){this.isShow=!0},addTips:function(){var e,t,i=!1;return this.formModel.isAppNotice&&(e=this.formModel.content.replace(/ /g,""),e.length||(this.$notify({title:"警告",message:"请输入通知内容",type:"warning",duration:1500}),i=!0)),this.formModel.isWechatNotice&&(e=this.formModel.wechatTitle.replace(/ /g,""),t=this.formModel.wechatRemark.replace(/ /g,""),e.length&&t.length||(this.$notify({title:"警告",message:"请输入通知内容",type:"warning",duration:1500}),i=!0)),i},save:function(e){var t=this;this.$refs.form.validate((function(i,a){if(!i)return!1;var n=[];t.formModel.notifyVipList.forEach((function(e){n.push({id:e})}));var o=[];if(t.formModel.selectionKeys.forEach((function(e){o.push({id:e})})),t.clearMemberData(),!t.addTips()){var s={activityId:t.cardId.id,notice:{id:t.formModel.id,content:t.formModel.content,noticeTarget:t.formModel.noticeTarget,isNeedNotice:"1",noticeMemberRanks:t.formModel.noticeMemberRanks,noticeMembers:t.formModel.noticeMembers||[],isAppNotice:t.formModel.isAppNotice?"1":"0",isWechatNotice:t.formModel.isWechatNotice?"1":"0",isSmsNotice:t.formModel.isSmsNotice?"1":"0",wechatTitle:t.formModel.wechatTitle,wechatRemark:t.formModel.wechatRemark}};me["a"].update(s,(function(i){e&&"function"===typeof e?e():t.$message.success("保存成功")}),(function(e){t.$message.warning(e.errorMessage)}))}}))},selectRank:function(){this.showRankDialog=!0},dialogResultPageSizeChange:function(e){this.dialogResultPagination.pageSize=e,this.refreshCurTabel()},dialogResultCurrentPageChange:function(e){this.dialogResultPagination.currentPage=e,this.refreshCurTabel()},refreshCurTabel:function(){this.sendResultList=[];var e=(this.dialogResultPagination.currentPage-1)*this.dialogResultPagination.pageSize,t=this.dialogResultPagination.currentPage*this.dialogResultPagination.pageSize-1;for(e;e<t;e++)this.allResultList[e]&&this.sendResultList.push(this.allResultList[e])},vipChange:function(e){var t=this;e.checked?this.formModel.noticeMemberRanks.forEach((function(i,a){i.id===e.id&&t.formModel.noticeMemberRanks.splice(a,1)})):this.formModel.noticeMemberRanks.push({id:e.id})},handleRankConfirmed:function(e,t){var i;this.showRankDialog=!1,this.selVipList(),i=this.formModel.noticeMemberRanks.map((function(e){return parseInt(e.id)})),i&&i.length&&this.getVipCount(i)},selVipList:function(){var e,t=this;this.selVips=[],this.vipRankList.forEach((function(i){e=[],i.ranks.forEach((function(t){t.checked&&e.push(t.name)})),e.length&&t.selVips.push({name:i.name,curSel:e.join("、")})}))},publish:function(){var e=this;this.save((function(){e.loading=!0,me["a"].publish({activityId:e.cardId.id},(function(t){e.loading=!1,e.$message.success("发送成功"),e.allResultList=t.resultData,e.dialogResultPagination.currentPage=1,e.dialogResultPagination.pageSize=20,e.refreshCurTabel(),e.dialogResultPagination.total=e.allResultList.length,e.showResultDialog=!0;var i=e.allResultList;e.operations[1].label="再次发送",i.forEach((function(e){switch(e.result="已经发送",e.type){case"0":e.type="App通知";break;case"1":e.type="短信通知";break;case"2":e.type="微信通知";break;default:break}}))}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage||"操作出现错误")}))}))},getDefaultModel:function(){return{wechatTitle:"",wechatRemark:"",id:"",content:"",noticeTarget:"ToStore",isNeedNotice:"0",isWechatNotice:!1,isAppNotice:!1,isSmsNotice:!1,notifyType:["0"],notifyVipList:[],notifyMemberList:[],selectionKeys:[],noticeMembers:[],noticeMemberRanks:[],fleetActivity:{fleet:{}}}},resetModel:function(){this.formModel=this.getDefaultModel()},showPeoplePicker:function(e){this.dialogFilters[0].value="",this.showDialog=!0},selectionChange:function(e){var t=this;e.forEach((function(e){-1===t.selectionList.indexOf(e)&&t.selectionList.push(e)}))},handleConfirmed:function(e,t){var i,a=this,n=[],o=Object(ue["a"])(e);try{var s=function(){var e=i.value;a.selectionList.forEach((function(t){t.id===e&&n.push({id:e,name:t.name,nickName:t.nickName})}))};for(o.s();!(i=o.n()).done;)s()}catch(r){o.e(r)}finally{o.f()}this.formModel.noticeMembers.length?n.forEach((function(e){a.containsItem(a.formModel.noticeMembers,e.id)||a.formModel.noticeMembers.push(e)})):this.formModel.noticeMembers=this.formModel.noticeMembers.concat(n),this.formModel.noticeMembers=this.formModel.noticeMembers.filter((function(t){return a.containsItem(e,t.id)}))},containsItem:function(e,t){var i=!1;return e.forEach((function(e){if(e.id){if(e.id===t)return i=!0,!1}else if(e===t)return i=!0,!1})),i},queryPeople:function(e){var t=this;this.dialogLoading=!0,me["a"].queryPeople(e,(function(e){t.dialogTableData=e.content,t.$set(t.dialogPagination,"total",parseInt(e.total)),t.dialogLoading=!1}),(function(e){console.log(e),console.log("code错误")}))},getDialogQueryParams:function(){return{pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage,searchValue:this.dialogFilters[0].value}},opened:function(){this.dialogPagination.currentPage=1,this.dialogPagination.pageSize=20,this.dialogFilters=[{type:"input",label:"",placeholder:"请输入姓名/手机号",name:"searchValue",value:""}],this.queryPeople(this.getDialogQueryParams())},dialogOperate:function(e){},dialogFilterDataChange:function(e){this.dialogPagination.currentPage=1,this.queryPeople(this.getDialogQueryParams())},dialogPageSizeChange:function(e){this.$set(this.dialogPagination,"pageSize",e),this.queryPeople(this.getDialogQueryParams())},dialogCurrentPageChange:function(e){this.$set(this.dialogPagination,"currentPage",e),this.queryPeople(this.getDialogQueryParams())},getStatus:function(e){switch(e.enableState){case"0":return"停用";case"1":return"启用"}return""},clearMemberData:function(){var e;switch(this.formModel.noticeTarget){case"ToStore":e=this.memberRankList;var t,i=Object(ue["a"])(e);try{for(i.s();!(t=i.n()).done;){var a,n=t.value,o=Object(ue["a"])(n.ranks);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.checked=!1}}catch(m){o.e(m)}finally{o.f()}}}catch(m){i.e(m)}finally{i.f()}this.rankTotal=0,this.selVips=[],this.formModel.noticeMembers=[],this.formModel.noticeMemberRanks=[];break;case"ToMemberrank":this.total=0,this.formModel.noticeMembers=[];break;case"ToMember":e=this.memberRankList;var r,l=Object(ue["a"])(e);try{for(l.s();!(r=l.n()).done;){var c,u=r.value,d=Object(ue["a"])(u.ranks);try{for(d.s();!(c=d.n()).done;){var f=c.value;f.checked=!1}}catch(m){d.e(m)}finally{d.f()}}}catch(m){l.e(m)}finally{l.f()}this.total=0,this.rankTotal=0,this.selVips=[],this.formModel.noticeMemberRanks=[];break;default:break}},onTypeChange:function(e){"ToStore"===e&&this.getVipCount()},getVipCount:function(e){var t=this,i={shopId:"",memberRankIds:null};if("ToStore"===this.formModel.noticeTarget)i.shopId=this.getUser.shop.id;else if("ToMemberrank"===this.formModel.noticeTarget){if(!e||!e.length)return;i.memberRankIds=e.toString()}fe["a"].get("admin/member/count.jhtml",i).then((function(e){console.log(e),"ToStore"===t.formModel.noticeTarget?t.total=e.total:"ToMemberrank"===t.formModel.noticeTarget&&(t.rankTotal=e.total)})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))}},watch:{cardId:function(e,t){var i=this;this.$refs.form.resetFields(),e.id?me["a"].query({activityId:e.id},(function(e){var t=Object.assign(i.getDefaultModel(),e.data);t.notifyVipList=[],t.noticeMemberRanks&&t.noticeMemberRanks.forEach((function(e){t.notifyVipList.push(e.id)})),t.notifyType=[],"1"===t.isAppNotice&&t.notifyType.push("0"),"1"===t.isWechatNotice&&t.notifyType.push("1"),"1"===t.isSmsNotice&&t.notifyType.push("2"),0===t.notifyType.length&&t.notifyType.push("0"),t.selectionKeys=[],t.noticeMembers&&t.noticeMembers.length>0&&t.noticeMembers.forEach((function(e){t.selectionKeys.push(e.id)})),t.fleetActivity=Object.assign(i.getDefaultModel().fleetActivity,e.fleetActivity),i.formModel=t,i.formModel.noticeMemberRanks=t.noticeMemberRanks||[],i.formModel.noticeMembers=t.noticeMembers||[],i.formModel.isAppNotice="1"===t.isAppNotice,i.formModel.isWechatNotice="1"===t.isWechatNotice,i.formModel.isSmsNotice="1"===t.isSmsNotice,i.formModel.content=e.data.content?e.data.content:i.formModel.fleetActivity.fleet.name+"发布了"+i.formModel.fleetActivity.title+"，快去报名吧！",i.formModel.wechatTitle=e.data.wechatTitle?e.data.wechatTitle:"您关注的店铺发布了新活动",i.formModel.wechatRemark=e.data.wechatRemark?e.data.wechatRemark:"您可以到V服爱车的近期活动/最新促销查看并参加。",i.memberRankList=e.memberRankList,i.selVipList();var a=i.formModel.noticeMemberRanks.map((function(e){return parseInt(e.id)}));i.getVipCount(a),i.operations[1].label="1"===e.data.isNoticed?"再次发送":"发送","{}"===JSON.stringify(e.data)&&(i.formModel.noticeTarget="ToMember")}),(function(e){console.log(e),console.log("code错误")})):(this.resetModel(),this.$refs.form.resetFields())}}},he=pe,ge=(i("6e1e"),Object(v["a"])(he,le,ce,!1,null,null,null)),ve=ge.exports,be=i("9085"),ye={name:"MotoristsClubActivity",components:{BizPopupTabs:o["a"],BizHeader:s["d"],BizGrid:r["a"],ActivityCardList:$,ActivityInfo:G,SignupInfo:te,SigninInfo:re,ActivityNotification:ve,BizPagination:s["f"]},data:function(){return{loading:!1,isCreate:!1,actiivtyCreated:0,actiivtyNotBegin:0,actiivtyContinue:0,tabSelection:"0",operations:[{label:"添加",name:"add",type:"primary",auth:["admin:fleetActivity.add"]},{label:"刷新",name:"refresh",type:""}],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},filters:[{type:"select",label:"车友会",name:"publisher",value:"",options:[]},{type:"select",label:"状态",name:"status",value:"",options:[{value:"",label:"全部"},{value:"0",label:"未开始"},{value:"1",label:"进行中"},{value:"2",label:"已结束"},{value:"3",label:"已创建 (未发布)"}]},{type:"daterange",label:"创建时间",name:"publishDate",value:[q["a"].lastMonthDate(),q["a"].nowDate()]}],activities:[],activityInfoModel:{},open:!1}},created:function(){this.initDims(),this.queryActivities(),this.queryActivityInfo()},methods:{initDims:function(){var e=this,t={};window.top.SHOP_ID&&(t.shopId=window.top.SHOP_ID),be["a"].getClubList(t,(function(t){t.content.forEach((function(e){e.label=e.name,e.value=e.id})),t.content.unshift({label:"全部",value:""}),e.$set(e.filters[0],"options",t.content)}),(function(t){e.$message.warning(t.errorMessage),console.log(t),console.log("code错误")}))},convertState:function(e){switch(e){case"0":return"notStart";case"1":return"continued";case"2":return"ended";case"3":return"created"}},getQueryParams:function(){var e={beginTimeStr:this.filters[2].value[0],endTimeStr:this.filters[2].value[1],pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize};return this.filters[1].value&&(e.state=this.convertState(this.filters[1].value)),this.filters[0].value&&(e.fleetId=this.filters[0].value),e},queryActivities:function(){var e=this,t=this.getQueryParams();this.loading=!0,be["a"].getActivityList(t,(function(t){e.activities=t.content,e.$set(e.pagination,"total",Number.parseInt(t.total)),e.loading=!1}),(function(t){console.log(t),console.log("code错误"),e.$message.warning(t.errorMessage),e.loading=!1}))},queryActivityInfo:function(){var e=this;be["a"].getActivityInfo(this.getQueryParams(),(function(t){var i="未发布活动 "+t.data.actiivtyCreated+", 未开始活动 "+t.data.actiivtyNotBegin+", 进行中活动 "+t.data.actiivtyContinue+", 已结束活动 "+t.data.actiivtyEnded;e.$message({customClass:"motorists-club-activity__kpi",showClose:!0,message:i,duration:3e3})}),(function(e){console.log(e),console.log("code错误")}))},operationSuccess:function(){this.open=!1,this.pagination.currentPage=1,this.queryActivities()},operate:function(e){this[e]()},filterDataChange:function(){this.pagination.currentPage=1,this.queryActivities()},add:function(){this.isCreate=!0,this.activityInfoModel={},this.tabSelection="0",this.open=!0},refresh:function(){this.queryActivities()},deleteItem:function(e,t){var i=this;be["a"].delete({ids:[this.activities[t].id]},(function(e){i.$message.success("删除成功"),i.pagination.currentPage=1,i.queryActivities()}),(function(e){i.$message.warning(e.errorMessage),console.log(e),console.log("code错误")}))},cardClicked:function(e,t){this.isCreate=!1,this.activityInfoModel=Object.assign({},t),this.tabSelection="0",this.open=!0},topClicked:function(e,t){var i=this;be["a"].swtichTop({activityId:t.id},(function(e){i.pagination.currentPage=1,i.queryActivities()}),(function(e){i.$message.warning(e.errorMessage),console.log(e),console.log("code错误")}))},handleSizeChange:function(e){this.pagination.pageSize=e,this.pagination.currentPage=1,this.queryActivities()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.queryActivities()}},watch:{}},Me=ye,Ce=(i("586e"),Object(v["a"])(Me,a,n,!1,null,null,null));t["default"]=Ce.exports},"3f70":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"biz-map-pointer"},[i("el-popover",{ref:"mapContainer",attrs:{placement:"bottom",width:"600",trigger:"click","popper-class":"map-container"},on:{show:e.showHandler},model:{value:e.showPopper,callback:function(t){e.showPopper=t},expression:"showPopper"}},[i("div",{staticClass:"map-instance",attrs:{id:"map-instance-"+e.randomKey}})]),i("el-input",{attrs:{placeholder:"请输入地址"},on:{input:e.inputHandler},model:{value:e.innerAddress,callback:function(t){e.innerAddress=t},expression:"innerAddress"}}),i("el-button",{directives:[{name:"popover",rawName:"v-popover:mapContainer",arg:"mapContainer"}],attrs:{type:"primary",size:"mini"}},[e._v("选择")])],1)},n=[],o=(i("d81d"),i("d3b7"),i("25f0"),{name:"BizMapPointer",components:{},model:{prop:"value",event:"input"},props:{value:{type:Object,default:function(){return{}}},address:{type:String,default:function(){return""}}},data:function(){return{randomKey:"",innerAddress:"",showPopper:!1}},methods:{init:function(){this.map=new this.$map.Map("map-instance-"+this.randomKey),this.point=new this.$map.Point(116.404,39.915),this.map.centerAndZoom(this.point,13),this.map.addControl(new this.$map.NavigationControl),this.map.enableScrollWheelZoom(!0)},pointToAddress:function(e,t){var i=this;this.Geocoder.getLocation(e,(function(e){e&&(t?i.$emit("addressChange",t,e.addressComponents.city):i.$emit("addressChange",e.address,e.addressComponents.city))}))},addressToPoint:function(e){var t=this;this.Geocoder.getPoint(e,(function(i){i?(t.setPoint(i),t.pointToAddress(i,e)):t.$emit("input",{lng:"",lat:""})}))},inputHandler:function(e){this.addressToPoint(e),this.$emit("addressChange",e)},setMarker:function(e){var t=this;this.marker||(this.marker=new this.$map.Marker(e),this.map.addOverlay(this.marker),this.marker.enableDragging(),this.marker.addEventListener("dragend",(function(){var e=t.marker.getPosition();t.point=e,t.$emit("input",e),t.pointToAddress(e)}))),this.marker.setPosition(e),setTimeout((function(){t.map.centerAndZoom(e,16)}),50)},setPoint:function(e){this.setMarker(e),this.point=e,this.$emit("input",e)},showHandler:function(e){var t=this;this.$message("请直接输入或拖动光标选择地址"),this.address?this.value&&this.value.lat&&this.value.lng?this.setPoint(new this.$map.Point(this.value.lng,this.value.lat)):this.addressToPoint(this.address):this.LocalCity.get((function(e){t.setMarker(e.center),t.$emit("input",e.center),t.pointToAddress(e.center)}))}},created:function(){this.randomKey=(new Date).getTime().toString(),this.LocalCity=new this.$map.LocalCity,this.Geocoder=new this.$map.Geocoder,this.innerAddress=this.address},mounted:function(){this.init()},watch:{address:function(e){this.innerAddress=e}}}),s=o,r=(i("5ac3"),i("2877")),l=Object(r["a"])(s,a,n,!1,null,null,null),c=l.exports;i.d(t,"a",(function(){return c}))},"586e":function(e,t,i){"use strict";var a=i("1b28"),n=i.n(a);n.a},"5a5b":function(e,t,i){"use strict";var a=i("a66e"),n=i.n(a);n.a},"5ac3":function(e,t,i){"use strict";var a=i("655b"),n=i.n(a);n.a},"5b8e":function(e,t,i){"use strict";var a=i("9678"),n=i.n(a);n.a},"64d1":function(e,t,i){"use strict";var a=i("748e"),n=i.n(a);n.a},"655b":function(e,t,i){},"697f":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:e.title,visible:e.dialogVisible,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close,open:e.open}},[e._t("top"),i("biz-flex-table",{ref:"table",attrs:{showTable:e.showTable,operations:e.operations,filters:e.filters,tags:e.tags,rowKeys:e.rowKeys,pagination:e.pagination,tableData:e.tableData,rowClassName:e.rowClassName,loading:e.loading,memberIds:e.memberIds,checkable:e.checkable,isDepotOutNew:e.isDepotOutNew,checkedTable:e.checkedTable},on:{operate:e.operate,"row-click":e.rowClick,"filter-data-change":e.filterDataChange,"select-all":e.handleSelectAll,select:e.handleSelectionChange,"size-change":e.pageSizeChange,"current-change":e.currentPageChange,"cascader-change":e.cascaderChange,"active-item-change":e.activeItemChange,"sort-change":e.handleSortChange}},[e._t("default")],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isClear?i("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("清除")]):e._e(),i("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmed}},[e._v("确定")])],1)],2)},n=[],o=(i("99af"),i("4160"),i("c975"),i("a434"),i("a9e3"),i("159b"),i("04d3")),s={name:"BizDialogSelector",components:{BizFlexTable:o["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},max:{type:Number,default:0},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},isClear:{default:!0,type:Boolean},rowClassName:{type:Function,default:function(){return null}},selectionKeys:{type:Array,default:function(){return[]}},memberIds:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},isDepotOut:{type:Boolean,default:function(){return!1}},checkTable:{type:Array,default:function(){return[]}},showTable:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],isDepotOutNew:!1,checkedTable:[],innerSelection:[]}},methods:{rowKeys:function(e){return e.id},generateSelectionKeys:function(e,t){if(e.indexOf(t)>=0)this.innerSelectionKeys.push(t[this.keyField]),this.innerSelection.push(t);else{var i=this.innerSelectionKeys.indexOf(t[this.keyField]);this.innerSelectionKeys.splice(i,1),this.innerSelection.splice(i,1)}},open:function(e){this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(e){this.innerSelectionKeys=[],this.innerSelection=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){if(this.innerSelectionKeys.length>0||!this.showTable){if(!this.showTable&&!/(http|https):\/\/([\w.]+\/?)\S*/.test(this.filters[2].value))return void this.$message.warning("必须以http,https开头,且需符合URL规范,检查格式是否正确");this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1}else this.$message("请选择一项")},clear:function(){var e=this;this.tableData.forEach((function(t){e.$refs.table.toggleRowSelection(t,!1)})),this.innerSelectionKeys=[],this.innerSelection=[]},updateSelection:function(){var e=this;this.$refs&&this.$refs.table&&this.tableData.forEach((function(t){e.innerSelectionKeys.indexOf(t[e.keyField])>=0?(e.$refs.table.toggleRowSelection(t,!0),"single"===e.selectionMode&&(e.$refs.table.$refs.table.setCurrentRow(t),e.innerSelection=[t])):e.$refs.table.toggleRowSelection(t,!1)}))},operate:function(e){this.$emit("operate",e)},filterDataChange:function(e){this.$emit("filterDataChange",e)},handleSelectAll:function(e){var t=this;0===e.length?this.tableData.forEach((function(e){var i=t.innerSelectionKeys.indexOf(e[t.keyField]);i>=0&&t.innerSelectionKeys.splice(i,1)})):this.tableData.forEach((function(e){var i=t.innerSelectionKeys.indexOf(e[t.keyField]);i<0&&t.innerSelectionKeys.push(e[t.keyField])})),this.$emit("selectionChange",e)},handleSelectionChange:function(e,t){this.generateSelectionKeys(e,t),this.$emit("selectionChange",e)},pageSizeChange:function(e){this.$emit("pageSizeChange",e)},currentPageChange:function(e){this.$emit("currentPageChange",e)},cascaderChange:function(e){this.$emit("cascaderChange",e)},activeItemChange:function(e){this.$emit("active-item-change",e)},handleSortChange:function(e){this.$emit("sort-change",e)},rowClick:function(e,t,i){"single"===this.selectionMode&&(this.innerSelectionKeys=[e[this.keyField]],this.innerSelection=[e])}},watch:{visibility:function(e,t){this.dialogVisible=e,this.isDepotOutNew=this.isDepotOut,this.checkedTable=this.checkTable}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){},updated:function(){this.updateSelection()}},r=s,l=(i("0943"),i("2877")),c=Object(l["a"])(r,a,n,!1,null,null,null);t["a"]=c.exports},"6e1e":function(e,t,i){"use strict";var a=i("73a6"),n=i.n(a);n.a},"6fb9":function(e,t,i){"use strict";var a=i("e13a"),n=i.n(a);n.a},7132:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"biz-fade-t"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[i("transition",{attrs:{name:"biz-fade-t-right"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"popup-content",style:e.contentStyle},[e._t("default")],2)])],1)])},n=[],o={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},s=o,r=(i("5b8e"),i("2877")),l=Object(r["a"])(s,a,n,!1,null,null,null),c=l.exports,u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"biz-popup-tabs"},[i("biz-popup",{attrs:{open:e.open,contentStyle:e.contentStyle},on:{close:e.close}},[i("el-tabs",{attrs:{type:"border-card",value:e.value},on:{"tab-click":e.tabClick}},[e._t("default")],2)],1)],1)},d=[],f=(i("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:c},methods:{close:function(){var e=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("close")}))},tabClick:function(e){this.$emit("input",e.name)}}}),m=f,p=(i("d4c2"),Object(r["a"])(m,u,d,!1,null,null,null)),h=p.exports;i.d(t,"a",(function(){return h}))},"73a6":function(e,t,i){},"748e":function(e,t,i){},"7ca5":function(e,t,i){"use strict";var a=i("bee4"),n=i.n(a);n.a},"89e0":function(e,t,i){"use strict";var a=i("ff6f"),n=i.n(a);n.a},9085:function(e,t,i){"use strict";var a=i("2497"),n=i("bc3a"),o=i.n(n),s=i("c596");t["a"]={getClubList:function(e,t,i){o.a.get(s["g"].motoristsClubActivity.clubList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},getActivityList:function(e,t,i){o.a.get(s["g"].motoristsClubActivity.clubActibityList,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},getActivityInfo:function(e,t,i){o.a.get(s["g"].motoristsClubActivity.clubActivityInfo,{params:e}).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},delete:function(e,t,i){o.a.post(s["g"].motoristsClubActivity.clubActibity_delete,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))},swtichTop:function(e,t,i){o.a.post(s["g"].motoristsClubActivity.clubActibity_switchTop,e).then(Object(a["a"])(t,i)).catch((function(e){console.error(e)}))}}},"95dd":function(e,t,i){"use strict";var a=i("2dd2"),n=i.n(a);n.a},9678:function(e,t,i){},a66e:function(e,t,i){},a99c:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tag-manager"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.rawTags.length>0,expression:"rawTags.length > 0"}],staticClass:"tag-manager__list"},e._l(e.rawTags,(function(t){return i("el-tag",{key:t[e.nameField],attrs:{closable:"1"!==t.isAttend||e.closable,"disable-transitions":!1,type:t.type,size:"small"},on:{close:function(i){return e.handleClose(t,i)}},nativeOn:{click:function(i){return e.handleClick(t,i)}}},[e._v(" "+e._s(t[e.nameField])+" ")])})),1),i("el-input",{attrs:{placeholder:"请输入内容",maxlength:e.maxlength},model:{value:e.tagName,callback:function(t){e.tagName=t},expression:"tagName"}},[i("el-button",{attrs:{slot:"append"},on:{click:e.appendTag},slot:"append"},[e._v("添加")])],1)],1)},n=[],o=(i("c975"),i("a434"),i("a9e3"),i("b85c")),s={name:"TagManager",data:function(){return{tagName:"",rawTags:[]}},props:{value:{type:Array},maxlength:{type:Number,default:function(){return 20}},nameField:{type:String,default:function(){return"content"}},removeHandler:{type:Function,default:function(){return null}},closable:{type:Boolean,default:function(){return!1}}},created:function(){this.rawTags=this.value||[]},methods:{hasOne:function(e){var t,i=Object(o["a"])(this.rawTags);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a[this.nameField]===e)return!0}}catch(n){i.e(n)}finally{i.f()}return!1},resetTagName:function(){this.tagName=""},appendTag:function(){if(this.tagName){if(this.hasOne(this.tagName))return void this.resetTagName();var e={};e[this.nameField]=this.tagName,this.rawTags.push(e),this.resetTagName(),this.$emit("input",this.rawTags)}},handleClose:function(e,t){t.stopPropagation(),console.log(e),this.removeHandler,this.rawTags.splice(this.rawTags.indexOf(e),1),console.log("this.rawTags"+this.rawTags),this.$emit("input",this.rawTags)},handleClick:function(e,t){this.$emit("item-click",e,t)}},watch:{value:function(e){this.rawTags=e||[]}}},r=s,l=(i("5a5b"),i("2877")),c=Object(l["a"])(r,a,n,!1,null,null,null),u=c.exports,d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tag-selector"},e._l(e.options,(function(t){return i("el-tag",{key:t[e.nameField],attrs:{closable:!1,"disable-transitions":!1,type:e.value.includes(t[e.nameField])?"":"info",size:"small"},nativeOn:{click:function(i){return e.handleClick(t,i)}}},[e._v(" "+e._s(t[e.nameField])+" ")])})),1)},f=[],m=(i("99af"),{name:"TagSelector",data:function(){return{}},props:{value:{type:Array},options:{type:Array,default:function(){return[]}},valueField:{type:String,default:function(){return"id"}},nameField:{type:String,default:function(){return"name"}}},created:function(){},methods:{handleClick:function(e,t){console.log(123);var i=[].concat(this.value),a=i.indexOf(e[this.nameField]);a<0?i.push(e[this.nameField]):i.splice(a,1),this.$emit("input",i)}},watch:{}}),p=m,h=(i("64d1"),Object(l["a"])(p,d,f,!1,null,null,null)),g=h.exports;i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return g}))},af3f:function(e,t,i){"use strict";var a=i("697f");t["a"]=a["a"]},bee4:function(e,t,i){},c466:function(e,t,i){"use strict";i("99af"),i("d3b7"),i("ac1f"),i("25f0"),i("5319");t["a"]={nowDate:function(){var e=new Date,t=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i=e.getDate()+1<10?"0"+e.getDate():e.getDate();return e.getFullYear().toString()+"-"+t+"-"+i},getMonthDays:function(e){var t=new Date(Date.parse(e.replace(/-/g,"/"))),i=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,1),n=(a-i)/864e5;return n},halfYearAgo:function(e){var t="";return t=e?new Date(Date.parse(e.replace(/-/g,"/"))):new Date,console.log(t),t.setMonth(t.getMonth()-6),"".concat(t.getFullYear(),"-").concat(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate())},lastMonthDate:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1<10?"0"+e.getMonth():e.getMonth(),a=e.getDate()+1<10?"0"+e.getDate():e.getDate();return"00"===i&&(i="12",t--),t.toString()+"-"+i+"-"+a},nextMonthDate:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),n=parseInt(i)+1;13===n&&(t=parseInt(t)+1,n=1);var o=new Date(t,n,0);return o=o.getDate(),a>o&&(a=o),n<10&&(n="0"+n),t+"-"+n+"-"+a},lastYearDate:function(){var e=new Date,t=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());return t.getFullYear()+"-"+this.convertToFullMode(t.getMonth()+1)+"-"+this.convertToFullMode(t.getDate())},lastTwoYearDate:function(){var e=new Date,t=new Date(e.getFullYear()+2,e.getMonth(),e.getDate());return t.getFullYear()+"-"+this.convertToFullMode(t.getMonth()+1)+"-"+this.convertToFullMode(t.getDate())},lastNYearDate:function(e,t){var i=new Date(e),a=new Date(i.getFullYear()+parseInt(t),i.getMonth(),i.getDate());return a.getFullYear()+"-"+this.convertToFullMode(a.getMonth()+1)+"-"+this.convertToFullMode(a.getDate())},dateConverter:function(e){return e instanceof Date?e.getFullYear()+"-"+this.convertToFullMode(e.getMonth()+1)+"-"+this.convertToFullMode(e.getDate()):e},timeConverter:function(e){return e instanceof Date?this.convertToFullMode(e.getHours())+":"+this.convertToFullMode(e.getMinutes())+":"+this.convertToFullMode(e.getSeconds()):e},shortTimeConverter:function(e){return e instanceof Date?this.convertToFullMode(e.getHours())+":"+this.convertToFullMode(e.getMinutes()):e},dateTimeConverter:function(e){return e instanceof Date?this.dateConverter(e)+" "+this.timeConverter(e):e},convertToFullMode:function(e){return e=e.toString(),1===e.length?"0"+e:e}}},d4c2:function(e,t,i){"use strict";var a=i("e725"),n=i.n(a);n.a},e13a:function(e,t,i){},e725:function(e,t,i){},ed34:function(e,t,i){"use strict";var a=i("2620"),n=i.n(a);n.a},ff6f:function(e,t,i){}}]);