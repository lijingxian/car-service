(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8da47a2"],{"2ab8":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"distributor-mgmt"},[i("biz-flex-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{tableData:e.tableData,pagination:e.pagination,checkable:!1},on:{"row-click":e.rowClick,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[i("el-table-column",{attrs:{prop:"name",label:"名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[i("div",{staticClass:"biz-customcol"},[e._v(e._s(t.row.name))])])}}])}),i("el-table-column",{attrs:{prop:"price",label:"配送费用",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"price"},["1"===t.row.isNeedDelivery?i("div",[i("div",[e._v("首重："+e._s(t.row.firstPrice)+"元/"+e._s(t.row.firstWeight)+"KG")]),i("div",[e._v("续重："+e._s(t.row.continuePrice)+"元/"+e._s(t.row.continueWeight)+"KG")])]):i("div",[e._v(e._s(t.row.freight)+"元")])])]}}])}),i("el-table-column",{attrs:{prop:"description",label:"介绍"}}),i("el-table-column",{attrs:{prop:"name",label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[i("div",{staticClass:"biz-customcol"},[e._v(e._s("1"===t.row.isValid?"启用":"停用"))])])}}])}),i("el-table-column",{attrs:{width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"biz-customcol"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){i.stopPropagation(),t.row.id!==e.tableData[0].id&&e.moveUp(t.row)}}},[e._v("上移")]),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){i.stopPropagation(),t.row.id!==e.tableData[e.tableData.length-1].id&&e.moveDown(t.row)}}},[e._v("下移")])],1)]}}])})],1),i("biz-popup-tabs",{attrs:{open:e.open},on:{close:function(t){e.open=!1}},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[i("el-tab-pane",{attrs:{label:"配送方式",name:"shippingMethodInfo"}},[i("distributor-info",{attrs:{obj:e.distributorObj},on:{refresh:e.getList}})],1)],1)],1)},n=[],a=(i("a4d3"),i("e01a"),i("c975"),i("d81d"),i("a9e3"),i("d3b7"),i("ac1f"),i("5319"),i("b85c")),o=i("04d3"),s=i("7132"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"distributor-info"},[i("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}),i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"名称：",prop:"name"}},[i("el-input",{attrs:{disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===e.form.isNeedDelivery,expression:"form.isNeedDelivery==='0'"}],attrs:{label:"配送费用：",prop:"freight"}},[i("el-input",{attrs:{placeholder:"请输入配送费用"},model:{value:e.form.freight,callback:function(t){e.$set(e.form,"freight",t)},expression:"form.freight"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.isNeedDelivery,expression:"form.isNeedDelivery==='1'"}],attrs:{label:"首重费用：",rules:[{required:!0}],error:e.firstError}},[i("div",{staticClass:"cus-first"},[i("el-input",{on:{input:e.verifiesFirstPrice},model:{value:e.form.firstPrice,callback:function(t){e.$set(e.form,"firstPrice",t)},expression:"form.firstPrice"}},[i("template",{slot:"append"},[e._v("元")])],2),i("el-input",{on:{input:e.verifiesFirstPrice},model:{value:e.form.firstWeight,callback:function(t){e.$set(e.form,"firstWeight",t)},expression:"form.firstWeight"}},[i("template",{slot:"append"},[e._v("KG")])],2)],1)]),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.isNeedDelivery,expression:"form.isNeedDelivery==='1'"}],attrs:{label:"续重费用：",rules:[{required:!0}],error:e.continueError}},[i("div",{staticClass:"cus-first"},[i("el-input",{on:{input:e.verifiesContinuePrice},model:{value:e.form.continuePrice,callback:function(t){e.$set(e.form,"continuePrice",t)},expression:"form.continuePrice"}},[i("template",{slot:"append"},[e._v("元")])],2),i("el-input",{on:{input:e.verifiesContinuePrice},model:{value:e.form.continueWeight,callback:function(t){e.$set(e.form,"continueWeight",t)},expression:"form.continueWeight"}},[i("template",{slot:"append"},[e._v("KG")])],2)],1)]),i("el-form-item",{attrs:{label:"启用：",prop:"isValid"}},[i("el-switch",{attrs:{value:e.isValid,"active-color":"#87d068"},on:{input:e.updateIsValid}})],1),i("el-form-item",{attrs:{label:"介绍："}},[i("el-input",{attrs:{type:"textarea",disabled:!0,value:e.description}})],1)],1)],1)},c=[],u=(i("b0c0"),i("4d63"),i("25f0"),i("8330")),f=i("f36f"),d=i("1ab1"),p=i("c596"),m=function(e){var t=new RegExp(/^[0-9]+([.]{1}[0-9]{1,2})?$/);return t.test(e)},h=function(e){var t=new RegExp(/^[0-9]+([.]{1}[0-9]{1,2})?$/);return t.test(e)},b={name:"SistributorInfo",components:{BizSaveButton:u["a"],BizGrid:f["a"]},props:{obj:Object},data:function(){var e=this,t=function(t,i,r){var n=new RegExp(/^[0-9]+([.]{1}[0-9]{1,2})?$/);""!==e.form.freight&&(n.test(e.form.freight)?r():r(new Error("请输入正整数或两位小数"))),r()},i=function(t,i,r){var n=new RegExp("^(([1-9]*[1-9][0-9]*)|(0))$");""!==e.form.order&&(n.test(e.form.order)?r():r(new Error("必须为正整数或零"))),r()};return{firstError:"",continueError:"",loading:!1,operations:[{label:"保存",name:"save",type:"primary"}],form:{name:"",isValid:"1",isNeedDelivery:"0",isNeedReceiver:"1",continuePrice:"3",continueWeight:"1",firstPrice:"10",firstWeight:"1",freight:"30",order:"0",description:""},rules:{freight:[{required:!0,message:"请输入配送费用",trigger:"blur"},{required:!0,trigger:"blur",validator:t}],order:[{required:!0,message:"请输入排序",trigger:"blur"},{required:!0,trigger:"blur",validator:i}]}}},computed:{description:function(){var e=/<\/?.+?\/?>/g;return this.form.description.replace(e,"")},isValid:function(){return"1"===this.form.isValid}},watch:{obj:function(){this.refresh()}},created:function(){},methods:{verifiesFirstPrice:function(){h(this.form.firstPrice)&&h(this.form.firstWeight)?this.firstError="":this.firstError="请输入合理数值"},verifiesContinuePrice:function(){h(this.form.continuePrice)&&h(this.form.continueWeight)?this.continueError="":this.continueError="请输入合理数值"},operate:function(e){this[e]()},updateIsValid:function(e){this.form.isValid=e?"1":"0"},refresh:function(){var e=this,t={id:this.obj.id};this.loading=!0,d["a"].get(p["g"].distributorMgmt.Distributor,t).then((function(t){var i=t.data;e.form.name=i.name,e.form.isValid=i.isValid,e.form.isNeedDelivery=i.isNeedDelivery,e.form.isNeedReceiver=i.isNeedReceiver,e.form.continuePrice=i.continuePrice||"0",e.form.continueWeight=i.continueWeight||"0",e.form.firstPrice=i.firstPrice||"0",e.form.firstWeight=i.firstWeight||"0",e.form.freight=i.freight||"0",e.form.order=i.order,e.form.description=i.description||""})).catch((function(t){e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))},update:function(){var e=this;this.loading=!0;var t={id:this.obj.id,name:this.form.name,description:this.form.description,isNeedDelivery:this.form.isNeedDelivery,isNeedReceiver:this.form.isNeedReceiver,isValid:this.form.isValid,continuePrice:this.form.continuePrice,continueWeight:this.form.continueWeight,firstPrice:this.form.firstPrice,firstWeight:this.form.firstWeight,freight:this.form.freight,order:this.form.order};d["a"].put(p["g"].distributorMgmt.Distributor,t).then((function(t){e.$message.success("操作成功"),e.$emit("refresh")})).catch((function(t){e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))},validParams:function(){return"1"===this.form.isNeedDelivery?!!h(this.form.firstPrice)&&(!!h(this.form.firstWeight)&&(!!h(this.form.continuePrice)&&!!h(this.form.continueWeight))):!("0"===this.form.isNeedDelivery&&!m(this.form.freight))},save:function(){var e=this;this.validParams()?this.$refs.form.validate((function(t){t&&e.update()})):this.$message.warning("请正确填写表单")}}},v=b,g=(i("afd4"),i("2877")),w=Object(g["a"])(v,l,c,!1,null,null,null),D=w.exports,N={name:"DistributorMgmt",components:{BizFlexTable:o["c"],BizPopupTabs:s["a"],DistributorInfo:D},props:{},data:function(){return{distributorObj:{id:""},loading:!1,tableData:[],dataList:[],open:!1,activeTabName:"shippingMethodInfo",pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:1}}},computed:{},watch:{},created:function(){this.getList()},methods:{rowClick:function(e){this.distributorObj={id:e.id},this.open=!0},moveUp:function(e){var t=this;this.loading=!0;var i=e.order;this.tableData.map((function(r){r.id===e.id&&(t.tableData[t.tableData.indexOf(e)].order=t.tableData[t.tableData.indexOf(e)-1].order,t.tableData[t.tableData.indexOf(e)-1].order=i,t.dataList=[t.tableData[t.tableData.indexOf(e)],t.tableData[t.tableData.indexOf(e)-1]],t.order())}))},moveDown:function(e){var t=this;this.loading=!0;var i=e.order;this.dataList=[],this.tableData.map((function(r){r.id===e.id&&(t.tableData[t.tableData.indexOf(e)].order=t.tableData[t.tableData.indexOf(e)+1].order,t.tableData[t.tableData.indexOf(e)+1].order=i,t.dataList=[t.tableData[t.tableData.indexOf(e)],t.tableData[t.tableData.indexOf(e)+1]],t.order())}))},order:function(){var e=this;d["a"].put("/admin/shippingMethod/shippingMethodSort.jhtml",this.dataList).then((function(t){e.getList(),e.loading=!1})).catch((function(t){e.loading=!1,e.$message.warning(t.errorMessage||"操作出现错误")}))},showUp:function(e){return!this.tableData[0]||e.id!==this.tableData[0].id},showDown:function(e){return!this.tableData[0]||e.id!==this.tableData[this.tableData.length-1].id},handleSizeChange:function(){},handleCurrentChange:function(){},getList:function(){var e=this,t={pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize};!0!==this.open&&(this.loading=!0),d["a"].get(p["g"].distributorMgmt.DistributorList,t).then((function(t){var i,r=Object(a["a"])(t.content);try{for(r.s();!(i=r.n()).done;){var n=i.value;n.description=n.description||"";var o=/<\/?.+?\/?>/g;n.description=n.description.replace(o,"")}}catch(s){r.e(s)}finally{r.f()}e.tableData=t.content,e.pagination.total=Number(t.total),setTimeout((function(){e.$refs.table.doLayout()}),500)})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))}}},x=N,y=(i("9afa"),Object(g["a"])(x,r,n,!1,null,null,null));t["default"]=y.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,i){var r=i("1d80"),n=i("5899"),a="["+n+"]",o=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),l=function(e){return function(t){var i=String(r(t));return 1&e&&(i=i.replace(o,"")),2&e&&(i=i.replace(s,"")),i}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5b8e":function(e,t,i){"use strict";var r=i("9678"),n=i.n(r);n.a},7132:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"biz-fade-t"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[i("transition",{attrs:{name:"biz-fade-t-right"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"popup-content",style:e.contentStyle},[e._t("default")],2)])],1)])},n=[],a={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},o=a,s=(i("5b8e"),i("2877")),l=Object(s["a"])(o,r,n,!1,null,null,null),c=l.exports,u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"biz-popup-tabs"},[i("biz-popup",{attrs:{open:e.open,contentStyle:e.contentStyle},on:{close:e.close}},[i("el-tabs",{attrs:{type:"border-card",value:e.value},on:{"tab-click":e.tabClick}},[e._t("default")],2)],1)],1)},f=[],d=(i("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:c},methods:{close:function(){var e=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("close")}))},tabClick:function(e){this.$emit("input",e.name)}}}),p=d,m=(i("d4c2"),Object(s["a"])(p,u,f,!1,null,null,null)),h=m.exports;i.d(t,"a",(function(){return h}))},9678:function(e,t,i){},9891:function(e,t,i){},"9afa":function(e,t,i){"use strict";var r=i("9891"),n=i.n(r);n.a},a1ab:function(e,t,i){},a9e3:function(e,t,i){"use strict";var r=i("83ab"),n=i("da84"),a=i("94ca"),o=i("6eeb"),s=i("5135"),l=i("c6b6"),c=i("7156"),u=i("c04e"),f=i("d039"),d=i("7c73"),p=i("241c").f,m=i("06cf").f,h=i("9bf2").f,b=i("58a8").trim,v="Number",g=n[v],w=g.prototype,D=l(d(w))==v,N=function(e){var t,i,r,n,a,o,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(i=c.charCodeAt(2),88===i||120===i)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+c}for(a=c.slice(2),o=a.length,s=0;s<o;s++)if(l=a.charCodeAt(s),l<48||l>n)return NaN;return parseInt(a,r)}return+c};if(a(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var x,y=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof y&&(D?f((function(){w.valueOf.call(i)})):l(i)!=v)?c(new g(N(t)),i,y):N(t)},_=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;_.length>P;P++)s(g,x=_[P])&&!s(y,x)&&h(y,x,m(g,x));y.prototype=w,w.constructor=y,o(n,v,y)}},afd4:function(e,t,i){"use strict";var r=i("a1ab"),n=i.n(r);n.a},d4c2:function(e,t,i){"use strict";var r=i("e725"),n=i.n(r);n.a},e725:function(e,t,i){}}]);