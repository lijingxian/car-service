(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fb12e8a","chunk-4bb544e8"],{"016c":function(t,e,i){var r=function(){var t=new Date,e=4,i=3,a=2,n=1,o=e,s={setLogLevel:function(t){o=t==this.debug?n:t==this.info?a:t==this.warn?i:(this.error,e)},debug:function(e,i){n>=o&&console.debug("["+r.getDurationString(new Date-t,1e3)+"]","["+e+"]",i)},info:function(e,i){a>=o&&console.info("["+r.getDurationString(new Date-t,1e3)+"]","["+e+"]",i)},warn:function(e,a){i>=o&&console.warn("["+r.getDurationString(new Date-t,1e3)+"]","["+e+"]",a)},error:function(i,a){e>=o&&console.error("["+r.getDurationString(new Date-t,1e3)+"]","["+i+"]",a)}};return s}();r.getDurationString=function(t,e){function i(t,e){var i=""+t,r=i.split(".");while(r[0].length<e)r[0]="0"+r[0];return r.join(".")}var r=e||1,a=t/r,n=Math.floor(a/3600);a-=3600*n;var o=Math.floor(a/60);a-=60*o;var s=1e3*a;return a=Math.floor(a),s-=1e3*a,s=Math.floor(s),n+":"+i(o,2)+":"+i(a,2)+"."+i(s,3)},r.printRanges=function(t){var e=t.length;if(e>0){for(var i="",a=0;a<e;a++)a>0&&(i+=","),i+="["+r.getDurationString(t.start(a))+","+r.getDurationString(t.end(a))+"]";return i}return"(empty)"};var a=function(t){if(!(t instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=t,this.uint8=new Uint8Array(t),this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(t){var e=Math.max(0,Math.min(this.uint8.length,t));this.position=isNaN(e)||!isFinite(e)?0:e},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readUint8=function(){var t;if(this.position+1<=this.uint8.length)return t=this.uint8[this.position],this.position++,t;throw"Not enough bytes in buffer"},a.prototype.readUint16=function(){var t,e,i;if(this.position+2<=this.uint8.length)return t=this.uint8[this.position],this.position++,e=this.uint8[this.position],this.position++,i=t<<8|e,i;throw"Not enough bytes in buffer"},a.prototype.readUint24=function(){var t;if(this.position+3<=this.uint8.length)return t=this.uint8[this.position]<<16,this.position++,t|=this.uint8[this.position]<<8,this.position++,t|=this.uint8[this.position],this.position++,t;throw"Not enough bytes in buffer"},a.prototype.readUint32=function(){var t;if(this.position+4<=this.uint8.length)return t=this.uint8[this.position]<<24,this.position++,t|=this.uint8[this.position]<<16,this.position++,t|=this.uint8[this.position]<<8,this.position++,t|=this.uint8[this.position],this.position++,t;throw"Not enough bytes in buffer"},a.prototype.readUint64=function(){var t;if(this.position+8<=this.uint8.length)return t=this.readUint32()<<32,t|=this.readUint32(),t;throw"Not enough bytes in buffer"},a.prototype.readString=function(t){if(this.position+t<=this.uint8.length){for(var e="",i=0;i<t;i++)e+=String.fromCharCode(this.readUint8());return e}throw"Not enough bytes in buffer"},a.prototype.readCString=function(){var t=[];while(1){var e=this.readUint8();if(0===e)break;t.push(e)}return String.fromCharCode.apply(null,t)},a.prototype.readInt8=function(){return this.readUint8()},a.prototype.readInt16=function(){return this.readUint16()},a.prototype.readInt32=function(){return this.readUint32()},a.prototype.readUint8Array=function(t){for(var e=[],i=0;i<t;i++)e[i]=this.readUint8();return e},a.prototype.readInt16Array=function(t){for(var e=[],i=0;i<t;i++)e[i]=this.readUint16();return e},a.prototype.readUint32Array=function(t){for(var e=[],i=0;i<t;i++)e[i]=this.readUint32();return e},a.prototype.readInt32Array=function(t){for(var e=[],i=0;i<t;i++)e[i]=this.readInt32();return e};var n=function(t,e,i){this._byteOffset=e||0,t instanceof ArrayBuffer?this.buffer=t:"object"==typeof t?(this.dataView=t,e&&(this._byteOffset+=e)):this.buffer=new ArrayBuffer(t||0),this.position=0,this.endianness=null==i?n.LITTLE_ENDIAN:i};n.prototype={},n.prototype.getPosition=function(){return this.position},n.prototype._realloc=function(t){if(this._dynamicSize){var e=this._byteOffset+this.position+t,i=this._buffer.byteLength;if(e<=i)e>this._byteLength&&(this._byteLength=e);else{i<1&&(i=1);while(e>i)i*=2;var r=new ArrayBuffer(i),a=new Uint8Array(this._buffer),n=new Uint8Array(r,0,a.length);n.set(a),this.buffer=r,this._byteLength=e}}},n.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var t=new ArrayBuffer(this._byteLength),e=new Uint8Array(t),i=new Uint8Array(this._buffer,0,e.length);e.set(i),this.buffer=t}},n.BIG_ENDIAN=!1,n.LITTLE_ENDIAN=!0,n.prototype._byteLength=0,Object.defineProperty(n.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(t){this._buffer=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(n.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(t){this._byteOffset=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(n.prototype,"dataView",{get:function(){return this._dataView},set:function(t){this._byteOffset=t.byteOffset,this._buffer=t.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+t.byteLength}}),n.prototype.seek=function(t){var e=Math.max(0,Math.min(this.byteLength,t));this.position=isNaN(e)||!isFinite(e)?0:e},n.prototype.isEof=function(){return this.position>=this._byteLength},n.prototype.mapUint8Array=function(t){this._realloc(1*t);var e=new Uint8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=1*t,e},n.prototype.readInt32Array=function(t,e){t=null==t?this.byteLength-this.position/4:t;var i=new Int32Array(t);return n.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,t*i.BYTES_PER_ELEMENT),n.arrayToNative(i,null==e?this.endianness:e),this.position+=i.byteLength,i},n.prototype.readInt16Array=function(t,e){t=null==t?this.byteLength-this.position/2:t;var i=new Int16Array(t);return n.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,t*i.BYTES_PER_ELEMENT),n.arrayToNative(i,null==e?this.endianness:e),this.position+=i.byteLength,i},n.prototype.readInt8Array=function(t){t=null==t?this.byteLength-this.position:t;var e=new Int8Array(t);return n.memcpy(e.buffer,0,this.buffer,this.byteOffset+this.position,t*e.BYTES_PER_ELEMENT),this.position+=e.byteLength,e},n.prototype.readUint32Array=function(t,e){t=null==t?this.byteLength-this.position/4:t;var i=new Uint32Array(t);return n.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,t*i.BYTES_PER_ELEMENT),n.arrayToNative(i,null==e?this.endianness:e),this.position+=i.byteLength,i},n.prototype.readUint16Array=function(t,e){t=null==t?this.byteLength-this.position/2:t;var i=new Uint16Array(t);return n.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,t*i.BYTES_PER_ELEMENT),n.arrayToNative(i,null==e?this.endianness:e),this.position+=i.byteLength,i},n.prototype.readUint8Array=function(t){t=null==t?this.byteLength-this.position:t;var e=new Uint8Array(t);return n.memcpy(e.buffer,0,this.buffer,this.byteOffset+this.position,t*e.BYTES_PER_ELEMENT),this.position+=e.byteLength,e},n.prototype.readFloat64Array=function(t,e){t=null==t?this.byteLength-this.position/8:t;var i=new Float64Array(t);return n.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,t*i.BYTES_PER_ELEMENT),n.arrayToNative(i,null==e?this.endianness:e),this.position+=i.byteLength,i},n.prototype.readFloat32Array=function(t,e){t=null==t?this.byteLength-this.position/4:t;var i=new Float32Array(t);return n.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,t*i.BYTES_PER_ELEMENT),n.arrayToNative(i,null==e?this.endianness:e),this.position+=i.byteLength,i},n.prototype.readInt32=function(t){var e=this._dataView.getInt32(this.position,null==t?this.endianness:t);return this.position+=4,e},n.prototype.readInt16=function(t){var e=this._dataView.getInt16(this.position,null==t?this.endianness:t);return this.position+=2,e},n.prototype.readInt8=function(){var t=this._dataView.getInt8(this.position);return this.position+=1,t},n.prototype.readUint32=function(t){var e=this._dataView.getUint32(this.position,null==t?this.endianness:t);return this.position+=4,e},n.prototype.readUint16=function(t){var e=this._dataView.getUint16(this.position,null==t?this.endianness:t);return this.position+=2,e},n.prototype.readUint8=function(){var t=this._dataView.getUint8(this.position);return this.position+=1,t},n.prototype.readFloat32=function(t){var e=this._dataView.getFloat32(this.position,null==t?this.endianness:t);return this.position+=4,e},n.prototype.readFloat64=function(t){var e=this._dataView.getFloat64(this.position,null==t?this.endianness:t);return this.position+=8,e},n.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,n.memcpy=function(t,e,i,r,a){var n=new Uint8Array(t,e,a),o=new Uint8Array(i,r,a);n.set(o)},n.arrayToNative=function(t,e){return e==this.endianness?t:this.flipArrayEndianness(t)},n.nativeToEndian=function(t,e){return this.endianness==e?t:this.flipArrayEndianness(t)},n.flipArrayEndianness=function(t){for(var e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=0;i<t.byteLength;i+=t.BYTES_PER_ELEMENT)for(var r=i+t.BYTES_PER_ELEMENT-1,a=i;r>a;r--,a++){var n=e[a];e[a]=e[r],e[r]=n}return t},n.prototype.failurePosition=0,String.fromCharCodeUint8=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return String.fromCharCode.apply(null,e)},n.prototype.readString=function(t,e){return null==e||"ASCII"==e?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(null==t?this.byteLength-this.position:t)]):new TextDecoder(e).decode(this.mapUint8Array(t))},n.prototype.readCString=function(t){var e=this.byteLength-this.position,i=new Uint8Array(this._buffer,this._byteOffset+this.position),r=e;null!=t&&(r=Math.min(t,e));for(var a=0;a<r&&0!==i[a];a++);var n=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(a)]);return null!=t?this.position+=r-a:a!=e&&(this.position+=1),n};var o=Math.pow(2,32);n.prototype.readUint64=function(){return this.readUint32()*o+this.readUint32()},n.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},e.DataStream=n,n.prototype.save=function(t){var e=new Blob([this.buffer]),i=window.webkitURL||window.URL;if(!i||!i.createObjectURL)throw"DataStream.save: Can't create object URL.";var r=i.createObjectURL(e),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download",t),a.click(),i.revokeObjectURL(r)},n.prototype._dynamicSize=!0,Object.defineProperty(n.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(t){t||this._trimAlloc(),this._dynamicSize=t}}),n.prototype.shift=function(t){var e=new ArrayBuffer(this._byteLength-t),i=new Uint8Array(e),r=new Uint8Array(this._buffer,t,i.length);i.set(r),this.buffer=e,this.position-=t},n.prototype.writeInt32Array=function(t,e){if(this._realloc(4*t.length),t instanceof Int32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt32Array(t.length,e);else for(var i=0;i<t.length;i++)this.writeInt32(t[i],e)},n.prototype.writeInt16Array=function(t,e){if(this._realloc(2*t.length),t instanceof Int16Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt16Array(t.length,e);else for(var i=0;i<t.length;i++)this.writeInt16(t[i],e)},n.prototype.writeInt8Array=function(t){if(this._realloc(1*t.length),t instanceof Int8Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapInt8Array(t.length);else for(var e=0;e<t.length;e++)this.writeInt8(t[e])},n.prototype.writeUint32Array=function(t,e){if(this._realloc(4*t.length),t instanceof Uint32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint32Array(t.length,e);else for(var i=0;i<t.length;i++)this.writeUint32(t[i],e)},n.prototype.writeUint16Array=function(t,e){if(this._realloc(2*t.length),t instanceof Uint16Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint16Array(t.length,e);else for(var i=0;i<t.length;i++)this.writeUint16(t[i],e)},n.prototype.writeUint8Array=function(t){if(this._realloc(1*t.length),t instanceof Uint8Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapUint8Array(t.length);else for(var e=0;e<t.length;e++)this.writeUint8(t[e])},n.prototype.writeFloat64Array=function(t,e){if(this._realloc(8*t.length),t instanceof Float64Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapFloat64Array(t.length,e);else for(var i=0;i<t.length;i++)this.writeFloat64(t[i],e)},n.prototype.writeFloat32Array=function(t,e){if(this._realloc(4*t.length),t instanceof Float32Array&&this.byteOffset+this.position%t.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,t.buffer,0,t.byteLength),this.mapFloat32Array(t.length,e);else for(var i=0;i<t.length;i++)this.writeFloat32(t[i],e)},n.prototype.writeInt32=function(t,e){this._realloc(4),this._dataView.setInt32(this.position,t,null==e?this.endianness:e),this.position+=4},n.prototype.writeInt16=function(t,e){this._realloc(2),this._dataView.setInt16(this.position,t,null==e?this.endianness:e),this.position+=2},n.prototype.writeInt8=function(t){this._realloc(1),this._dataView.setInt8(this.position,t),this.position+=1},n.prototype.writeUint32=function(t,e){this._realloc(4),this._dataView.setUint32(this.position,t,null==e?this.endianness:e),this.position+=4},n.prototype.writeUint16=function(t,e){this._realloc(2),this._dataView.setUint16(this.position,t,null==e?this.endianness:e),this.position+=2},n.prototype.writeUint8=function(t){this._realloc(1),this._dataView.setUint8(this.position,t),this.position+=1},n.prototype.writeFloat32=function(t,e){this._realloc(4),this._dataView.setFloat32(this.position,t,null==e?this.endianness:e),this.position+=4},n.prototype.writeFloat64=function(t,e){this._realloc(8),this._dataView.setFloat64(this.position,t,null==e?this.endianness:e),this.position+=8},n.prototype.writeUCS2String=function(t,e,i){null==i&&(i=t.length);for(var r=0;r<t.length&&r<i;r++)this.writeUint16(t.charCodeAt(r),e);for(;r<i;r++)this.writeUint16(0)},n.prototype.writeString=function(t,e,i){var r=0;if(null==e||"ASCII"==e)if(null!=i){var a=Math.min(t.length,i);for(r=0;r<a;r++)this.writeUint8(t.charCodeAt(r));for(;r<i;r++)this.writeUint8(0)}else for(r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));else this.writeUint8Array(new TextEncoder(e).encode(t.substring(0,i)))},n.prototype.writeCString=function(t,e){var i=0;if(null!=e){var r=Math.min(t.length,e);for(i=0;i<r;i++)this.writeUint8(t.charCodeAt(i));for(;i<e;i++)this.writeUint8(0)}else{for(i=0;i<t.length;i++)this.writeUint8(t.charCodeAt(i));this.writeUint8(0)}},n.prototype.writeStruct=function(t,e){for(var i=0;i<t.length;i+=2){var r=t[i+1];this.writeType(r,e[t[i]],e)}},n.prototype.writeType=function(t,e,i){var r;if("function"==typeof t)return t(this,e);if("object"==typeof t&&!(t instanceof Array))return t.set(this,e,i);var a=null,o="ASCII",s=this.position;switch("string"==typeof t&&/:/.test(t)&&(r=t.split(":"),t=r[0],a=parseInt(r[1])),"string"==typeof t&&/,/.test(t)&&(r=t.split(","),t=r[0],o=parseInt(r[1])),t){case"uint8":this.writeUint8(e);break;case"int8":this.writeInt8(e);break;case"uint16":this.writeUint16(e,this.endianness);break;case"int16":this.writeInt16(e,this.endianness);break;case"uint32":this.writeUint32(e,this.endianness);break;case"int32":this.writeInt32(e,this.endianness);break;case"float32":this.writeFloat32(e,this.endianness);break;case"float64":this.writeFloat64(e,this.endianness);break;case"uint16be":this.writeUint16(e,n.BIG_ENDIAN);break;case"int16be":this.writeInt16(e,n.BIG_ENDIAN);break;case"uint32be":this.writeUint32(e,n.BIG_ENDIAN);break;case"int32be":this.writeInt32(e,n.BIG_ENDIAN);break;case"float32be":this.writeFloat32(e,n.BIG_ENDIAN);break;case"float64be":this.writeFloat64(e,n.BIG_ENDIAN);break;case"uint16le":this.writeUint16(e,n.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(e,n.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(e,n.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(e,n.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(e,n.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(e,n.LITTLE_ENDIAN);break;case"cstring":this.writeCString(e,a);break;case"string":this.writeString(e,o,a);break;case"u16string":this.writeUCS2String(e,this.endianness,a);break;case"u16stringle":this.writeUCS2String(e,n.LITTLE_ENDIAN,a);break;case"u16stringbe":this.writeUCS2String(e,n.BIG_ENDIAN,a);break;default:if(3==t.length){for(var l=t[1],h=0;h<e.length;h++)this.writeType(l,e[h]);break}this.writeStruct(t,e);break}null!=a&&(this.position=s,this._realloc(a),this.position=s+a)},n.prototype.writeUint64=function(t){var e=Math.floor(t/o);this.writeUint32(e),this.writeUint32(4294967295&t)},n.prototype.writeUint24=function(t){this.writeUint8((16711680&t)>>16),this.writeUint8((65280&t)>>8),this.writeUint8(255&t)},n.prototype.adjustUint32=function(t,e){var i=this.position;this.seek(t),this.writeUint32(e),this.seek(i)},n.prototype.mapInt32Array=function(t,e){this._realloc(4*t);var i=new Int32Array(this._buffer,this.byteOffset+this.position,t);return n.arrayToNative(i,null==e?this.endianness:e),this.position+=4*t,i},n.prototype.mapInt16Array=function(t,e){this._realloc(2*t);var i=new Int16Array(this._buffer,this.byteOffset+this.position,t);return n.arrayToNative(i,null==e?this.endianness:e),this.position+=2*t,i},n.prototype.mapInt8Array=function(t){this._realloc(1*t);var e=new Int8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=1*t,e},n.prototype.mapUint32Array=function(t,e){this._realloc(4*t);var i=new Uint32Array(this._buffer,this.byteOffset+this.position,t);return n.arrayToNative(i,null==e?this.endianness:e),this.position+=4*t,i},n.prototype.mapUint16Array=function(t,e){this._realloc(2*t);var i=new Uint16Array(this._buffer,this.byteOffset+this.position,t);return n.arrayToNative(i,null==e?this.endianness:e),this.position+=2*t,i},n.prototype.mapFloat64Array=function(t,e){this._realloc(8*t);var i=new Float64Array(this._buffer,this.byteOffset+this.position,t);return n.arrayToNative(i,null==e?this.endianness:e),this.position+=8*t,i},n.prototype.mapFloat32Array=function(t,e){this._realloc(4*t);var i=new Float32Array(this._buffer,this.byteOffset+this.position,t);return n.arrayToNative(i,null==e?this.endianness:e),this.position+=4*t,i};var s=function(){this.buffers=[],this.bufferIndex=-1};s.prototype=new n(new ArrayBuffer,0,n.BIG_ENDIAN),s.prototype.initialized=function(){var t;return this.bufferIndex>-1||(this.buffers.length>0?(t=this.buffers[0],0===t.fileStart?(this.buffer=t,this.bufferIndex=0,r.debug("MultiBufferStream","Stream ready for parsing"),!0):(r.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(r.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(t,e){r.debug("ArrayBuffer","Trying to create a new buffer of size: "+(t.byteLength+e.byteLength));var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer},s.prototype.reduceBuffer=function(t,e,i){var r;return r=new Uint8Array(i),r.set(new Uint8Array(t,e,i)),r.buffer.fileStart=t.fileStart+e,r.buffer.usedBytes=0,r.buffer},s.prototype.insertBuffer=function(t){for(var e=!0,i=0;i<this.buffers.length;i++){var a=this.buffers[i];if(t.fileStart<=a.fileStart){if(t.fileStart===a.fileStart){if(t.byteLength>a.byteLength){this.buffers.splice(i,1),i--;continue}r.warn("MultiBufferStream","Buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+") already appended, ignoring")}else t.fileStart+t.byteLength<=a.fileStart||(t=this.reduceBuffer(t,0,a.fileStart-t.fileStart)),r.debug("MultiBufferStream","Appending new buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+")"),this.buffers.splice(i,0,t),0===i&&(this.buffer=t);e=!1;break}if(t.fileStart<a.fileStart+a.byteLength){var n=a.fileStart+a.byteLength-t.fileStart,o=t.byteLength-n;if(!(o>0)){e=!1;break}t=this.reduceBuffer(t,n,o)}}e&&(r.debug("MultiBufferStream","Appending new buffer (fileStart: "+t.fileStart+" - Length: "+t.byteLength+")"),this.buffers.push(t),0===i&&(this.buffer=t))},s.prototype.logBufferLevel=function(t){var e,i,a,n,o,s=[],l="";for(a=0,n=0,e=0;e<this.buffers.length;e++)i=this.buffers[e],0===e?(o={},s.push(o),o.start=i.fileStart,o.end=i.fileStart+i.byteLength,l+="["+o.start+"-"):o.end===i.fileStart?o.end=i.fileStart+i.byteLength:(o={},o.start=i.fileStart,l+=s[s.length-1].end-1+"], ["+o.start+"-",o.end=i.fileStart+i.byteLength,s.push(o)),a+=i.usedBytes,n+=i.byteLength;s.length>0&&(l+=o.end-1+"]");var h=t?r.info:r.debug;0===this.buffers.length?h("MultiBufferStream","No more buffer in memory"):h("MultiBufferStream",this.buffers.length+" stored buffer(s) ("+a+"/"+n+" bytes): "+l)},s.prototype.cleanBuffers=function(){var t,e;for(t=0;t<this.buffers.length;t++)e=this.buffers[t],e.usedBytes===e.byteLength&&(r.debug("MultiBufferStream","Removing buffer #"+t),this.buffers.splice(t,1),t--)},s.prototype.mergeNextBuffer=function(){var t;if(this.bufferIndex+1<this.buffers.length){if(t=this.buffers[this.bufferIndex+1],t.fileStart===this.buffer.fileStart+this.buffer.byteLength){var e=this.buffer.byteLength,i=this.buffer.usedBytes,a=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,t),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=i,this.buffer.fileStart=a,r.debug("ISOFile","Concatenating buffer for box parsing (length: "+e+"->"+this.buffer.byteLength+")"),!0}return!1}return!1},s.prototype.findPosition=function(t,e,i){var a,n=null,o=-1;a=!0===t?0:this.bufferIndex;while(a<this.buffers.length){if(n=this.buffers[a],!(n.fileStart<=e))break;o=a,i&&(n.fileStart+n.byteLength<=e?n.usedBytes=n.byteLength:n.usedBytes=e-n.fileStart,this.logBufferLevel()),a++}return-1!==o?(n=this.buffers[o],n.fileStart+n.byteLength>=e?(r.debug("MultiBufferStream","Found position in existing buffer #"+o),o):-1):-1},s.prototype.findEndContiguousBuf=function(t){var e,i,r,a=void 0!==t?t:this.bufferIndex;if(i=this.buffers[a],this.buffers.length>a+1)for(e=a+1;e<this.buffers.length;e++){if(r=this.buffers[e],r.fileStart!==i.fileStart+i.byteLength)break;i=r}return i.fileStart+i.byteLength},s.prototype.getEndFilePositionAfter=function(t){var e=this.findPosition(!0,t,!1);return-1!==e?this.findEndContiguousBuf(e):t},s.prototype.addUsedBytes=function(t){this.buffer.usedBytes+=t,this.logBufferLevel()},s.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},s.prototype.seek=function(t,e,i){var a;return a=this.findPosition(e,t,i),-1!==a?(this.buffer=this.buffers[a],this.bufferIndex=a,this.position=t-this.buffer.fileStart,r.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(r.debug("MultiBufferStream","Position "+t+" not found in buffered data"),!1)},s.prototype.getPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},s.prototype.getLength=function(){return this.byteLength},s.prototype.getEndPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength};var l=function(){var t=3,e=4,i=5,a=6,n=[];n[t]="ES_Descriptor",n[e]="DecoderConfigDescriptor",n[i]="DecoderSpecificInfo",n[a]="SLConfigDescriptor";var o=this,s={};return this.parseOneDescriptor=function(t){var e,i,a,o=0;e=t.readUint8(),a=t.readUint8();while(128&a)o=(127&a)<<7,a=t.readUint8();return o+=127&a,r.debug("MPEG4DescriptorParser","Found "+(n[e]||"Descriptor "+e)+", size "+o+" at position "+t.getPosition()),i=n[e]?new s[n[e]](o):new s.Descriptor(o),i.parse(t),i},s.Descriptor=function(t,e){this.tag=t,this.size=e,this.descs=[]},s.Descriptor.prototype.parse=function(t){this.data=t.readUint8Array(this.size)},s.Descriptor.prototype.findDescriptor=function(t){for(var e=0;e<this.descs.length;e++)if(this.descs[e].tag==t)return this.descs[e];return null},s.Descriptor.prototype.parseRemainingDescriptors=function(t){var e=t.position;while(t.position<e+this.size){var i=o.parseOneDescriptor(t);this.descs.push(i)}},s.ES_Descriptor=function(e){s.Descriptor.call(this,t,e)},s.ES_Descriptor.prototype=new s.Descriptor,s.ES_Descriptor.prototype.parse=function(t){if(this.ES_ID=t.readUint16(),this.flags=t.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=t.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags){var e=t.readUint8();this.URL=t.readString(e),this.size-=e+1}else this.URL=null;32&this.flags?(this.OCR_ES_ID=t.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(t)},s.ES_Descriptor.prototype.getOTI=function(t){var i=this.findDescriptor(e);return i?i.oti:0},s.ES_Descriptor.prototype.getAudioConfig=function(t){var r=this.findDescriptor(e);if(!r)return null;var a=r.findDescriptor(i);return a&&a.data?(248&a.data[0])>>3:null},s.DecoderConfigDescriptor=function(t){s.Descriptor.call(this,e,t)},s.DecoderConfigDescriptor.prototype=new s.Descriptor,s.DecoderConfigDescriptor.prototype.parse=function(t){this.oti=t.readUint8(),this.streamType=t.readUint8(),this.bufferSize=t.readUint24(),this.maxBitrate=t.readUint32(),this.avgBitrate=t.readUint32(),this.size-=13,this.parseRemainingDescriptors(t)},s.DecoderSpecificInfo=function(t){s.Descriptor.call(this,i,t)},s.DecoderSpecificInfo.prototype=new s.Descriptor,s.SLConfigDescriptor=function(t){s.Descriptor.call(this,a,t)},s.SLConfigDescriptor.prototype=new s.Descriptor,this},h={ERR_NOT_ENOUGH_DATA:0,OK:1,boxCodes:["mdat","idat","free","skip","avcC","hvcC","ftyp","styp","payl","vttC","rtp ","sdp ","btrt","frma","trpy","tpyl","totl","tpay","dmed","dimm","drep","nump","npck","maxr","tmin","tmax","dmax","pmax","payt","vmhd","smhd","hmhd","idat","meco","udta","strk","free","skip"],fullBoxCodes:["mvhd","tkhd","mdhd","hdlr","vmhd","smhd","hmhd","nmhd","url ","urn ","ctts","cslg","stco","co64","stsc","stss","stsz","stz2","stts","stsh","mehd","trex","mfhd","tfhd","trun","tfdt","esds","subs","txtC","sidx","emsg","prft","pssh","elst","dref","url ","urn ","sbgp","sgpd","cprt","iods","ssix","tfra","mfro","pdin","tsel","trep","leva","stri","stsg","schm","stvi","padb","stdp","sdtp","saio","saiz","meta","xml ","bxml","iloc","pitm","ipro","iinf","infe","iref","mere","kind","elng"],containerBoxCodes:[["moov",["trak","sidx"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun"]],["vttc"],["tref"],["iref"],["udta"],["mfra"],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp"]],sampleEntryCodes:[{prefix:"Visual",types:["mp4v","avc1","avc2","avc3","avc4","avcp","drac","encv","mjp2","mvc1","mvc2","resv","s263","svc1","vc-1","hvc1","hev1"]},{prefix:"Audio",types:["mp4a","ac-3","alac","dra1","dtsc","dtse",,"dtsh","dtsl","ec-3","enca","g719","g726","m4ae","mlpa","raw ","samr","sawb","sawp","sevc","sqcp","ssmv","twos",".mp3"]},{prefix:"Hint",types:["fdp ","m2ts","pm2t","prtp","rm2t","rrtp","rsrp","rtp ","sm2t","srtp"]},{prefix:"Metadata",types:["metx","mett","urim"]},{prefix:"Subtitle",types:["stpp","wvtt","sbtt","tx3g","stxt"]},{prefix:"System",types:["mp4s"]}],sampleGroupEntryCodes:["roll","prol","alst","rap ","tele","avss","avll","sync","tscl","tsas","stsa","scif","mvif","scnm","dtrt","vipr","tele","rash"],trackGroupTypes:["msrc"],initialize:function(){var t,e,i;for(h.FullBox.prototype=new h.Box,h.ContainerBox.prototype=new h.Box,h.SampleEntry.prototype=new h.FullBox,h.TrackGroupTypeBox.prototype=new h.FullBox,i=h.boxCodes.length,t=0;t<i;t++)h[h.boxCodes[t]+"Box"]=function(t){return function(e){h.Box.call(this,h.boxCodes[t],e)}}(t),h[h.boxCodes[t]+"Box"].prototype=new h.Box;for(i=h.fullBoxCodes.length,t=0;t<i;t++)h[h.fullBoxCodes[t]+"Box"]=function(t){return function(e){h.FullBox.call(this,h.fullBoxCodes[t],e)}}(t),h[h.fullBoxCodes[t]+"Box"].prototype=new h.FullBox;for(i=h.containerBoxCodes.length,t=0;t<i;t++)h[h.containerBoxCodes[t][0]+"Box"]=function(t,e){return function(i){if(h.ContainerBox.call(this,h.containerBoxCodes[t][0],i),e){this.subBoxNames=e;for(var r=e.length,a=0;a<r;a++)this[e[a]+"s"]=[]}}}(t,h.containerBoxCodes[t][1]),h[h.containerBoxCodes[t][0]+"Box"].prototype=new h.ContainerBox;for(i=h.sampleEntryCodes.length,e=0;e<i;e++){var r=h.sampleEntryCodes[e].prefix,a=h.sampleEntryCodes[e].types,n=a.length;for(h[r+"SampleEntry"]=function(t,e){h.SampleEntry.call(this,t,e)},h[r+"SampleEntry"].prototype=new h.SampleEntry,t=0;t<n;t++)h[a[t]+"SampleEntry"]=function(t,e){return function(i){h[h.sampleEntryCodes[t].prefix+"SampleEntry"].call(this,h.sampleEntryCodes[t].types[e],i)}}(e,t),h[a[t]+"SampleEntry"].prototype=new h[r+"SampleEntry"]}for(i=h.sampleGroupEntryCodes.length,t=0;t<i;t++)h[h.sampleGroupEntryCodes[t]+"SampleGroupEntry"]=function(t){return function(e){h.SampleGroupEntry.call(this,h.sampleGroupEntryCodes[t],e)}}(t),h[h.sampleGroupEntryCodes[t]+"SampleGroupEntry"].prototype=new h.SampleGroupEntry;for(i=h.trackGroupTypes.length,t=0;t<i;t++)h[h.trackGroupTypes[t]+"Box"]=function(t){return function(e){h.TrackGroupTypeBox.call(this,h.trackGroupTypes[t],e)}}(t),h[h.trackGroupTypes[t]+"Box"].prototype=new h.TrackGroupTypeBox},Box:function(t,e){this.type=t,this.size=e},FullBox:function(t,e){h.Box.call(this,t,e),this.flags=0,this.version=0},ContainerBox:function(t,e){h.Box.call(this,t,e),this.boxes=[]},SampleEntry:function(t,e,i,r){h.Box.call(this,t,e),this.hdr_size=i,this.start=r,this.boxes=[]},SampleGroupEntry:function(t){this.grouping_type=t},TrackGroupTypeBox:function(t,e){h.FullBox.call(this,t,e)}};h.initialize(),h.TKHD_FLAG_ENABLED=1,h.TKHD_FLAG_IN_MOVIE=2,h.TKHD_FLAG_IN_PREVIEW=4,h.TFHD_FLAG_BASE_DATA_OFFSET=1,h.TFHD_FLAG_SAMPLE_DESC=2,h.TFHD_FLAG_SAMPLE_DUR=8,h.TFHD_FLAG_SAMPLE_SIZE=16,h.TFHD_FLAG_SAMPLE_FLAGS=32,h.TFHD_FLAG_DUR_EMPTY=65536,h.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,h.TRUN_FLAGS_DATA_OFFSET=1,h.TRUN_FLAGS_FIRST_FLAG=4,h.TRUN_FLAGS_DURATION=256,h.TRUN_FLAGS_SIZE=512,h.TRUN_FLAGS_FLAGS=1024,h.TRUN_FLAGS_CTS_OFFSET=2048,e.BoxParser=h,h.SampleEntry.prototype.isVideo=function(){return!1},h.SampleEntry.prototype.isAudio=function(){return!1},h.SampleEntry.prototype.isSubtitle=function(){return!1},h.SampleEntry.prototype.isMetadata=function(){return!1},h.SampleEntry.prototype.isHint=function(){return!1},h.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},h.SampleEntry.prototype.getWidth=function(){return""},h.SampleEntry.prototype.getHeight=function(){return""},h.SampleEntry.prototype.getChannelCount=function(){return""},h.SampleEntry.prototype.getSampleRate=function(){return""},h.SampleEntry.prototype.getSampleSize=function(){return""},h.VisualSampleEntry.prototype.isVideo=function(){return!0},h.VisualSampleEntry.prototype.getWidth=function(){return this.width},h.VisualSampleEntry.prototype.getHeight=function(){return this.height},h.AudioSampleEntry.prototype.isAudio=function(){return!0},h.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},h.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},h.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},h.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},h.MetadataSampleEntry.prototype.isMetadata=function(){return!0},h.decimalToHex=function(t,e){var i=Number(t).toString(16);e="undefined"===typeof e||null===e?e=2:e;while(i.length<e)i="0"+i;return i},h.avc1SampleEntry.prototype.getCodec=function(){var t=h.SampleEntry.prototype.getCodec.call(this);return this.avcC?t+"."+h.decimalToHex(this.avcC.AVCProfileIndication)+h.decimalToHex(this.avcC.profile_compatibility)+h.decimalToHex(this.avcC.AVCLevelIndication):t},h.hvc1SampleEntry.prototype.getCodec=function(){var t,e=h.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(e+=".",this.hvcC.general_profile_space){case 0:e+="";break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break}e+=this.hvcC.general_profile_idc,e+=".";var i=this.hvcC.general_profile_compatibility,r=0;for(t=0;t<32;t++){if(r|=1&i,31==t)break;r<<=1,i>>=1}e+=h.decimalToHex(r,0),e+=".",0===this.hvcC.general_tier_flag?e+="L":e+="H",e+=this.hvcC.general_level_idc;var a=!1,n="";for(t=5;t>=0;t--)(this.hvcC.general_constraint_indicator[t]||a)&&(n="."+h.decimalToHex(this.hvcC.general_constraint_indicator[t],0)+n,a=!0);e+=n}return e},h.mp4aSampleEntry.prototype.getCodec=function(){var t=h.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var e=this.esds.esd.getOTI(),i=this.esds.esd.getAudioConfig();return t+"."+h.decimalToHex(e)+(i?"."+i:"")}return t},h.stxtSampleEntry.prototype.getCodec=function(){var t=h.SampleEntry.prototype.getCodec.call(this);return this.mime_format?t+"."+this.mime_format:t},h.parseOneBox=function(t,e){var i,a,n=t.getPosition(),o=0;if(t.getEndPosition()-n<8)return r.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:h.ERR_NOT_ENOUGH_DATA};var s=t.readUint32(),l=t.readString(4);if(r.debug("BoxParser","Found box of type "+l+" and size "+s+" at position "+n),o=8,"uuid"==l&&(a=t.readUint8Array(16),o+=16),1==s){if(t.getEndPosition()-t.getPosition()<8)return t.seek(n),r.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+l+'" box'),{code:h.ERR_NOT_ENOUGH_DATA};s=t.readUint64(),o+=8}else if(0===s&&"mdat"!==l)throw"Unlimited box size not supported";return n+s>t.getEndPosition()?(t.seek(n),r.warn("BoxParser",'Not enough data in stream to parse the entire "'+l+'" box'),{code:h.ERR_NOT_ENOUGH_DATA,type:l,size:s,hdr_size:o,start:n}):e?{code:h.OK,type:l,size:s,hdr_size:o,start:n}:(h[l+"Box"]?i=new h[l+"Box"](s):("uuid"!==l&&r.warn("BoxParser","Unknown box type: "+l),i=new h.Box(l,s),a&&(i.uuid=a)),i.hdr_size=o,i.start=n,i.write===h.Box.prototype.write&&"mdat"!==i.type&&(r.warn("BoxParser",i.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),i.parseDataAndRewind(t)),i.parse(t),{code:h.OK,box:i,size:s})},h.Box.prototype.parse=function(t){"mdat"!=this.type?this.data=t.readUint8Array(this.size-this.hdr_size):0===this.size?t.seek(t.getEndPosition()):t.seek(this.start+this.size)},h.Box.prototype.parseDataAndRewind=function(t){this.data=t.readUint8Array(this.size-this.hdr_size),t.position-=this.size-this.hdr_size},h.FullBox.prototype.parseDataAndRewind=function(t){this.parseFullHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,t.position-=this.size-this.hdr_size},h.FullBox.prototype.parseFullHeader=function(t){this.version=t.readUint8(),this.flags=t.readUint24(),this.hdr_size+=4},h.FullBox.prototype.parse=function(t){this.parseFullHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size)},h.ContainerBox.prototype.parse=function(t){var e,i;while(t.getPosition()<this.start+this.size)e=h.parseOneBox(t,!1),i=e.box,this.boxes.push(i),this.subBoxNames&&-1!=this.subBoxNames.indexOf(i.type)?this[this.subBoxNames[this.subBoxNames.indexOf(i.type)]+"s"].push(i):this[i.type]=i},h.Box.prototype.parseLanguage=function(t){this.language=t.readUint16();var e=[];e[0]=this.language>>10&31,e[1]=this.language>>5&31,e[2]=31&this.language,this.languageString=String.fromCharCode(e[0]+96,e[1]+96,e[2]+96)},h.TrackGroupTypeBox.prototype.parse=function(t){this.parseFullHeader(t),this.track_group_id=t.readUint32()},h.TrackReferenceTypeBox=function(t,e,i,r){h.Box.call(this,t,e),this.hdr_size=i,this.start=r},h.TrackReferenceTypeBox.prototype=new h.Box,h.TrackReferenceTypeBox.prototype.parse=function(t){this.track_ids=t.readUint32Array((this.size-this.hdr_size)/4)},h.avcCBox.prototype.parse=function(t){var e,i,r,a;for(this.configurationVersion=t.readUint8(),this.AVCProfileIndication=t.readUint8(),this.profile_compatibility=t.readUint8(),this.AVCLevelIndication=t.readUint8(),this.lengthSizeMinusOne=3&t.readUint8(),i=31&t.readUint8(),a=this.size-this.hdr_size-6,this.SPS=new Array(i),e=0;e<i;e++)r=t.readUint16(),this.SPS[e]=t.readUint8Array(r),a-=2+r;for(i=t.readUint8(),a--,this.PPS=new Array(i),e=0;e<i;e++)r=t.readUint16(),this.PPS[e]=t.readUint8Array(r),a-=2+r;a>0&&(this.ext=t.readUint8Array(a))},h.btrtBox.prototype.parse=function(t){this.bufferSizeDB=t.readUint32(),this.maxBitrate=t.readUint32(),this.avgBitrate=t.readUint32()},h.co64Box.prototype.parse=function(t){var e,i;if(this.parseFullHeader(t),e=t.readUint32(),this.chunk_offsets=[],0===this.version)for(i=0;i<e;i++)this.chunk_offsets.push(t.readUint64());else this.data=t.readUint8Array(this.size-this.hdr_size-4)},h.cprtBox.prototype.parse=function(t){this.parseFullHeader(t),this.parseLanguage(t),this.notice=t.readCString(),t.getPosition()>this.start+this.size&&(r.warn("BoxParser","Parsed more than the size of the box (null-terminated string problem?)"),t.seek(this.start+this.size))},h.cslgBox.prototype.parse=function(t){this.parseFullHeader(t),0===this.version?(this.compositionToDTSShift=t.readInt32(),this.leastDecodeToDisplayDelta=t.readInt32(),this.greatestDecodeToDisplayDelta=t.readInt32(),this.compositionStartTime=t.readInt32(),this.compositionEndTime=t.readInt32()):this.data=t.readUint8Array(this.size-this.hdr_size-4)},h.cttsBox.prototype.parse=function(t){var e,i;if(this.parseFullHeader(t),e=t.readUint32(),this.sample_counts=[],this.sample_offsets=[],0===this.version)for(i=0;i<e;i++)this.sample_counts.push(t.readUint32()),this.sample_offsets.push(t.readInt32());else if(1==this.version)for(i=0;i<e;i++)this.sample_counts.push(t.readUint32()),this.sample_offsets.push(t.readInt32());else this.data=t.readUint8Array(this.size-this.hdr_size-4)},h.dimmBox.prototype.parse=function(t){this.bytessent=t.readUint64()},h.dmaxBox.prototype.parse=function(t){this.time=t.readUint32()},h.dmedBox.prototype.parse=function(t){this.bytessent=t.readUint64()},h.drefBox.prototype.parse=function(t){var e,i;this.parseFullHeader(t),this.entries=[];for(var r=t.readUint32(),a=0;a<r;a++)e=h.parseOneBox(t,!1),i=e.box,this.entries.push(i)},h.drepBox.prototype.parse=function(t){this.bytessent=t.readUint64()},h.elngBox.prototype.parse=function(t){this.parseFullHeader(t),this.extended_language=t.readString(this.size-this.hdr_size)},h.elstBox.prototype.parse=function(t){this.parseFullHeader(t),this.entries=[];for(var e=t.readUint32(),i=0;i<e;i++){var r={};this.entries.push(r),1===this.version?(r.segment_duration=t.readUint64(),r.media_time=t.readInt64()):(r.segment_duration=t.readUint32(),r.media_time=t.readInt32()),r.media_rate_integer=t.readInt16(),r.media_rate_fraction=t.readInt16()}},h.emsgBox.prototype.parse=function(t){this.parseFullHeader(t),this.scheme_id_uri=t.readCString(),this.value=t.readCString(),this.timescale=t.readUint32(),this.presentation_time_delta=t.readUint32(),this.event_duration=t.readUint32(),this.id=t.readUint32();var e=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));this.message_data=t.readUint8Array(e)},h.esdsBox.prototype.parse=function(t){this.parseFullHeader(t);var e=t.readUint8Array(this.size-this.hdr_size);if("undefined"!==typeof l){var i=new l;this.esd=i.parseOneDescriptor(new n(e.buffer,0,n.BIG_ENDIAN))}},h.frmaBox.prototype.parse=function(t){this.data_format=t.readString(4)},h.ftypBox.prototype.parse=function(t){var e=this.size-this.hdr_size;this.major_brand=t.readString(4),this.minor_version=t.readUint32(),e-=8,this.compatible_brands=[];var i=0;while(e>=4)this.compatible_brands[i]=t.readString(4),e-=4,i++},h.hdlrBox.prototype.parse=function(t){this.parseFullHeader(t),0===this.version?(t.readUint32(),this.handler=t.readString(4),t.readUint32Array(3),this.name=t.readString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1]&&(this.name=this.name.slice(0,-1))):this.data=t.readUint8Array(this.size-this.hdr_size)},h.hvcCBox.prototype.parse=function(t){var e,i,r,a;this.configurationVersion=t.readUint8(),a=t.readUint8(),this.general_profile_space=a>>6,this.general_tier_flag=(32&a)>>5,this.general_profile_idc=31&a,this.general_profile_compatibility=t.readUint32(),this.general_constraint_indicator=t.readUint8Array(6),this.general_level_idc=t.readUint8(),this.min_spatial_segmentation_idc=4095&t.readUint16(),this.parallelismType=3&t.readUint8(),this.chromaFormat=3&t.readUint8(),this.bitDepthLumaMinus8=7&t.readUint8(),this.bitDepthChromaMinus8=7&t.readUint8(),this.avgFrameRate=t.readUint16(),a=t.readUint8(),this.constantFrameRate=a>>6,this.numTemporalLayers=(13&a)>>3,this.temporalIdNested=(4&a)>>2,this.lengthSizeMinusOne=3&a,this.nalu_arrays=[];var n=t.readUint8();for(e=0;e<n;e++){var o=[];this.nalu_arrays.push(o),a=t.readUint8(),o.completeness=(128&a)>>7,o.nalu_type=63&a;var s=t.readUint16();for(i=0;i<s;i++){var l={};o.push(l),r=t.readUint16(),l.data=t.readUint8Array(r)}}},h.iinfBox.prototype.parse=function(t){var e;this.parseFullHeader(t),0===this.version?this.entry_count=t.readUint16():this.entry_count=t.readUint32(),this.item_infos=[];for(var i=0;i<this.entry_count;i++)e=h.parseOneBox(t,!1),"infe"!==e.box.type&&r.error("BoxParser","Expected 'infe' box, got "+e.box.type),this.item_infos[i]=e.box},h.ilocBox.prototype.parse=function(t){var e;this.parseFullHeader(t),e=t.readUint8(),this.offset_size=e>>4&15,this.length_size=15&e,e=t.readUint8(),this.base_offset_size=e>>4&15,1===this.version||2===this.version?this.index_size=15&e:this.index_size=0,this.items=[];var i=0;if(this.version<2)i=t.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";i=t.readUint32()}for(var r=0;r<i;r++){var a={};if(this.items.push(a),this.version<2)a.item_ID=t.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";a.item_ID=t.readUint16()}switch(1!==this.version&&2!==this.version||(a.construction_method=15&t.readUint16()),a.data_reference_index=t.readUint16(),this.base_offset_size){case 0:a.base_offset=0;break;case 4:a.base_offset=t.readUint32();break;case 8:a.base_offset=t.readUint64();break;default:throw"Error reading base offset size"}var n=t.readUint16();a.extents=[];for(var o=0;o<n;o++){var s={};if(a.extents.push(s),1===this.version||2===this.version)switch(this.index_size){case 0:s.extent_index=0;break;case 4:s.extent_index=t.readUint32();break;case 8:s.extent_index=t.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:s.extent_offset=0;break;case 4:s.extent_offset=t.readUint32();break;case 8:s.extent_offset=t.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:s.extent_length=0;break;case 4:s.extent_length=t.readUint32();break;case 8:s.extent_length=t.readUint64();break;default:throw"Error reading extent index"}}}},h.infeBox.prototype.parse=function(t){if(this.parseFullHeader(t),0!==this.version&&1!==this.version||(this.item_ID=t.readUint16(),this.item_protection_index=t.readUint16(),this.item_name=t.readCString(),this.content_type=t.readCString(),this.content_encoding=t.readCString()),1===this.version)return this.extension_type=t.readString(4),r.warn("BoxParser","Cannot parse extension type"),void t.seek(this.start+this.size);this.version>=2&&(2===this.version?this.item_ID=t.readUint16():3===this.version&&(this.item_ID=t.readUint32()),this.item_protection_index=t.readUint16(),this.item_type=t.readString(4),this.name=t.readCString(),"mime"===this.item_type?(this.content_type=t.readCString(),this.content_encoding=t.readCString()):"uri "===this.item_type&&(this.item_uri_type=t.readCString())),t.getPosition()>this.start+this.size&&(r.warn("BoxParser","Parsed more than the size of the box (null-terminated string problem?)"),t.seek(this.start+this.size))},h.irefBox=function(t){h.FullBox.call(this,"iref",t),this.references=[]},h.irefBox.prototype=new h.FullBox,h.irefBox.prototype.parse=function(t){var e,i;this.parseFullHeader(t);while(t.getPosition()<this.start+this.size)e=h.parseOneBox(t,!0),i=0===this.version?new h.SingleItemTypeReferenceBox(e.type,e.size,e.hdr_size,e.start):new h.SingleItemTypeReferenceBoxLarge(e.type,e.size,e.hdr_size,e.start),i.write===h.Box.prototype.write&&"mdat"!==i.type&&(r.warn("BoxParser",i.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),i.parseDataAndRewind(t)),i.parse(t),this.references.push(i)},h.kindBox=function(t){h.FullBox.call(this,"kind",t),this.schemeURI="",this.value=""},h.kindBox.prototype=new h.FullBox,h.kindBox.prototype.parse=function(t){this.parseFullHeader(t),this.schemeURI=t.readCString(),this.value=t.readCString()},h.levaBox.prototype.parse=function(t){this.parseFullHeader(t);var e=t.readUint8();this.levels=[];for(var i=0;i<e;i++){var a={};this.levels[i]=a,a.track_ID=t.readUint32();var n=t.readUint8();switch(a.padding_flag=n>>7,a.assignment_type=127&n,a.assignment_type){case 0:a.grouping_type=t.readUint32();break;case 1:a.grouping_type=t.readUint32(),a.grouping_type_parameter=t.readUint32();break;case 2:break;case 3:break;case 4:a.sub_track_id=t.readUint32();break;default:r.warn("BoxParser","Unknown leva assignement type")}}},h.maxrBox.prototype.parse=function(t){this.period=t.readUint32(),this.bytes=t.readUint32()},h.mdhdBox.prototype.parse=function(t){this.parseFullHeader(t),1==this.version?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.timescale=t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.timescale=t.readUint32(),this.duration=t.readUint32()),this.parseLanguage(t),t.readUint16()},h.mehdBox.prototype.parse=function(t){this.parseFullHeader(t),1==this.version?this.fragment_duration=t.readUint64():this.fragment_duration=t.readUint32()},h.metaBox.prototype.parse=function(t){this.parseFullHeader(t),this.boxes=[],h.ContainerBox.prototype.parse.call(this,t)},h.mfhdBox.prototype.parse=function(t){this.parseFullHeader(t),this.sequence_number=t.readUint32()},h.mfroBox.prototype.parse=function(t){this.parseFullHeader(t),this.size=t.readUint32()},h.mvhdBox.prototype.parse=function(t){this.flags=0,this.parseFullHeader(t),1==this.version?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.timescale=t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.timescale=t.readUint32(),this.duration=t.readUint32()),this.rate=t.readUint32(),this.volume=t.readUint16()>>8,t.readUint16(),t.readUint32Array(2),this.matrix=t.readUint32Array(9),t.readUint32Array(6),this.next_track_id=t.readUint32()},h.npckBox.prototype.parse=function(t){this.packetssent=t.readUint32()},h.numpBox.prototype.parse=function(t){this.packetssent=t.readUint64()},h.padbBox.prototype.parse=function(t){this.parseFullHeader(t);var e=t.readUint32();this.padbits=[];for(var i=0;i<Math.floor((e+1)/2);i++)this.padbits=t.readUint8()},h.paylBox.prototype.parse=function(t){this.text=t.readString(this.size-this.hdr_size)},h.paytBox.prototype.parse=function(t){this.payloadID=t.readUint32();var e=t.readUint8();this.rtpmap_string=t.readString(e)},h.pdinBox.prototype.parse=function(t){this.parseFullHeader(t);var e=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var i=0;i<e;i++)this.rate[i]=t.readUint32(),this.initial_delay[i]=t.readUint32()},h.pitmBox.prototype.parse=function(t){this.parseFullHeader(t),0===this.version?this.item_id=t.readUint16():this.item_id=t.readUint32()},h.pmaxBox.prototype.parse=function(t){this.bytes=t.readUint32()},h.prftBox.prototype.parse=function(t){this.parseFullHeader(t),this.ref_track_id=t.readUint32(),this.ntp_timestamp=t.readUint64(),0===this.version?this.media_time=t.readUint32():this.media_time=t.readUint64()},h.psshBox.prototype.parse=function(t){if(this.parseFullHeader(t),this.system_id=t.readUint8Array(16),this.version>0){var e=t.readUint32();this.kid=[];for(var i=0;i<e;i++)this.kid[i]=t.readUint8Array(16)}var r=t.readUint32();r>0&&(this.data=t.readUint8Array(r))},h["rtp Box"].prototype.parse=function(t){this.descriptionformat=t.readString(4),this.sdptext=t.readString(this.size-this.hdr_size-4)},h.saioBox.prototype.parse=function(t){this.parseFullHeader(t),1&this.flags&&(this.aux_info_type=t.readUint32(),this.aux_info_type_parameter=t.readUint32());var e=t.readUint32();this.offset=[];for(var i=0;i<e;i++)0===this.version?this.offset[i]=t.readUint32():this.offset[i]=t.readUint64()},h.saizBox.prototype.parse=function(t){this.parseFullHeader(t),1&this.flags&&(this.aux_info_type=t.readUint32(),this.aux_info_type_parameter=t.readUint32()),this.default_sample_info_size=t.readUint8();var e=t.readUint32();if(this.sample_info_size=[],0===this.default_sample_info_size)for(var i=0;i<e;i++)this.sample_info_size[i]=t.readUint32()},h.mettSampleEntry.prototype.parse=function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)},h.metxSampleEntry.prototype.parse=function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.namespace=t.readCString(),this.schema_location=t.readCString(),this.parseFooter(t)},h.SampleEntry.prototype.parseHeader=function(t){t.readUint8Array(6),this.data_reference_index=t.readUint16(),this.hdr_size+=8},h.SampleEntry.prototype.parse=function(t){this.parseHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size)},h.SampleEntry.prototype.parseDataAndRewind=function(t){this.parseHeader(t),this.data=t.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,t.position-=this.size-this.hdr_size},h.SampleEntry.prototype.parseFooter=function(t){var e,i;while(t.getPosition()<this.start+this.size)e=h.parseOneBox(t,!1),i=e.box,this.boxes.push(i),this[i.type]=i},h.VisualSampleEntry.prototype.parse=function(t){this.parseHeader(t),t.readUint16(),t.readUint16(),t.readUint32Array(3),this.width=t.readUint16(),this.height=t.readUint16(),this.horizresolution=t.readUint32(),this.vertresolution=t.readUint32(),t.readUint32(),this.frame_count=t.readUint16(),this.compressorname=t.readString(32),this.depth=t.readUint16(),t.readUint16(),this.parseFooter(t)},h.AudioSampleEntry.prototype.parse=function(t){this.parseHeader(t),t.readUint32Array(2),this.channel_count=t.readUint16(),this.samplesize=t.readUint16(),t.readUint16(),t.readUint16(),this.samplerate=t.readUint32()/65536,this.parseFooter(t)},h.sbttSampleEntry.prototype.parse=function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)},h.stppSampleEntry.prototype.parse=function(t){this.parseHeader(t),this.namespace=t.readCString(),this.schema_location=t.readCString(),this.auxiliary_mime_types=t.readCString(),this.parseFooter(t)},h.stxtSampleEntry.prototype.parse=function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)},h.tx3gSampleEntry.prototype.parse=function(t){this.parseHeader(t),this.displayFlags=t.readUint32(),this.horizontal_justification=t.readInt8(),this.vertical_justification=t.readInt8(),this.bg_color_rgba=t.readUint8Array(4),this.box_record=t.readInt16Array(4),this.style_record=t.readUint8Array(12),this.parseFooter(t)},h.alstSampleGroupEntry.prototype.parse=function(t){var e,i=t.readUint16();for(this.first_output_sample=t.readUint16(),this.sample_offset=[],e=0;e<i;e++)this.sample_offset[e]=t.readUint32();var r=this.description_length-4-4*i;for(this.num_output_samples=[],this.num_total_samples=[],e=0;e<r/4;e++)this.num_output_samples[e]=t.readUint16(),this.num_total_samples[e]=t.readUint16()},h.avllSampleGroupEntry.prototype.parse=function(t){this.layerNumber=t.readUint8(),this.accurateStatisticsFlag=t.readUint8(),this.avgBitRate=t.readUint16(),this.avgFrameRate=t.readUint16()},h.avssSampleGroupEntry.prototype.parse=function(t){this.subSequenceIdentifier=t.readUint16(),this.layerNumber=t.readUint8();var e=t.readUint8();this.durationFlag=e>>7,this.avgRateFlag=e>>6&1,this.durationFlag&&(this.duration=t.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=t.readUint8(),this.avgBitRate=t.readUint16(),this.avgFrameRate=t.readUint16()),this.dependency=[];for(var i=t.readUint8(),r=0;r<i;r++){var a={};this.dependency.push(a),a.subSeqDirectionFlag=t.readUint8(),a.layerNumber=t.readUint8(),a.subSequenceIdentifier=t.readUint16()}},h.dtrtSampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},h.mvifSampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},h.prolSampleGroupEntry.prototype.parse=function(t){this.roll_distance=t.readInt16()},h["rap SampleGroupEntry"].prototype.parse=function(t){var e=t.readUint8();this.num_leading_samples_known=e>>7,this.num_leading_samples=127&e},h.rashSampleGroupEntry.prototype.parse=function(t){if(this.operation_point_count=t.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)r.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=t.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=t.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var e=0;e<this.operation_point_count;e++)this.available_bitrate[e]=t.readUint32(),this.target_rate_share[e]=t.readUint16()}this.maximum_bitrate=t.readUint32(),this.minimum_bitrate=t.readUint32(),this.discard_priority=t.readUint8()}},h.rollSampleGroupEntry.prototype.parse=function(t){this.roll_distance=t.readInt16()},h.SampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=t.readUint8Array(this.description_length)},h.scifSampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},h.scnmSampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},h.stsaSampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},h.syncSampleGroupEntry.prototype.parse=function(t){var e=t.readUint8();this.NAL_unit_type=63&e},h.teleSampleGroupEntry.prototype.parse=function(t){var e=t.readUint8();this.level_independently_decodable=e>>7},h.tsasSampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},h.tsclSampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},h.viprSampleGroupEntry.prototype.parse=function(t){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")},h.sbgpBox.prototype.parse=function(t){this.parseFullHeader(t),this.grouping_type=t.readString(4),1===this.version?this.grouping_type_parameter=t.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var e=t.readUint32(),i=0;i<e;i++){var r={};this.entries.push(r),r.sample_count=t.readInt32(),r.group_description_index=t.readInt32()}},h.schmBox.prototype.parse=function(t){this.parseFullHeader(t),this.scheme_type=t.readString(4),this.scheme_version=t.readUint32(),1&this.flags&&(this.scheme_uri=t.readString(this.size-this.hdr_size-8))},h["sdp Box"].prototype.parse=function(t){this.sdptext=t.readString(this.size-this.hdr_size)},h.sdtpBox.prototype.parse=function(t){var e;this.parseFullHeader(t);var i=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var r=0;r<i;r++)e=t.readUint8(),this.is_leading[r]=e>>6,this.sample_depends_on[r]=e>>4&3,this.sample_is_depended_on[r]=e>>2&3,this.sample_has_redundancy[r]=3&e},h.sgpdBox.prototype.parse=function(t){this.parseFullHeader(t),this.grouping_type=t.readString(4),r.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),1===this.version?this.default_length=t.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=t.readUint32()),this.entries=[];for(var e=t.readUint32(),i=0;i<e;i++){var a;a=h[this.grouping_type+"SampleGroupEntry"]?new h[this.grouping_type+"SampleGroupEntry"](this.grouping_type):new h.SampleGroupEntry(this.grouping_type),this.entries.push(a),1===this.version&&0===this.default_length?a.description_length=t.readUint32():a.description_length=this.default_length,a.write===h.SampleGroupEntry.prototype.write&&(r.warn("BoxParser"," SampleEntry for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),a.data=t.readUint8Array(a.description_length),t.position-=a.description_length),a.parse(t)}},h.sidxBox.prototype.parse=function(t){this.parseFullHeader(t),this.reference_ID=t.readUint32(),this.timescale=t.readUint32(),0===this.version?(this.earliest_presentation_time=t.readUint32(),this.first_offset=t.readUint32()):(this.earliest_presentation_time=t.readUint64(),this.first_offset=t.readUint64()),t.readUint16(),this.references=[];for(var e=t.readUint16(),i=0;i<e;i++){var r={};this.references.push(r);var a=t.readUint32();r.reference_type=a>>31&1,r.referenced_size=2147483647&a,r.subsegment_duration=t.readUint32(),a=t.readUint32(),r.starts_with_SAP=a>>31&1,r.SAP_type=a>>28&7,r.SAP_delta_time=268435455&a}},h.SingleItemTypeReferenceBox=function(t,e,i,r){h.Box.call(this,t,e),this.hdr_size=i,this.start=r},h.SingleItemTypeReferenceBox.prototype=new h.Box,h.SingleItemTypeReferenceBox.prototype.parse=function(t){this.from_item_ID=t.readUint16();var e=t.readUint16();this.references=[];for(var i=0;i<e;i++)this.references[i]=t.readUint16()},h.SingleItemTypeReferenceBoxLarge=function(t,e,i,r){h.Box.call(this,t,e),this.hdr_size=i,this.start=r},h.SingleItemTypeReferenceBoxLarge.prototype=new h.Box,h.SingleItemTypeReferenceBoxLarge.prototype.parse=function(t){this.from_item_ID=t.readUint32();var e=t.readUint16();this.references=[];for(var i=0;i<e;i++)this.references[i]=t.readUint32()},h.ssixBox.prototype.parse=function(t){this.parseFullHeader(t),this.subsegments=[];for(var e=t.readUint32(),i=0;i<e;i++){var r={};this.subsegments.push(r),r.ranges=[];for(var a=t.readUint32(),n=0;n<a;n++){var o={};r.ranges.push(o),o.level=t.readUint8(),o.range_size=t.readUint24()}}},h.stcoBox.prototype.parse=function(t){var e;this.parseFullHeader(t),e=t.readUint32(),0===this.version?this.chunk_offsets=t.readUint32Array(e):this.data=t.readUint8Array(this.size-this.hdr_size-4)},h.stdpBox.prototype.parse=function(t){this.parseFullHeader(t);var e=(this.size-this.hdr_size)/2;this.priority=[];for(var i=0;i<e;i++)this.priority[i]=t.readUint16()},h.striBox.prototype.parse=function(t){this.parseFullHeader(t),this.switch_group=t.readUint16(),this.alternate_group=t.readUint16(),this.sub_track_id=t.readUint32();var e=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var i=0;i<e;i++)this.attribute_list[i]=t.readUint32()},h.stscBox.prototype.parse=function(t){var e,i;if(this.parseFullHeader(t),e=t.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(i=0;i<e;i++)this.first_chunk.push(t.readUint32()),this.samples_per_chunk.push(t.readUint32()),this.sample_description_index.push(t.readUint32());else this.data=t.readUint8Array(this.size-this.hdr_size-4)},h.stsdBox=function(t){h.FullBox.call(this,"stsd",t),this.entries=[]},h.stsdBox.prototype=new h.FullBox,h.stsdBox.prototype.parse=function(t){var e,i,a,n;for(this.parseFullHeader(t),a=t.readUint32(),e=1;e<=a;e++)i=h.parseOneBox(t,!0),h[i.type+"SampleEntry"]?(n=new h[i.type+"SampleEntry"](i.size),n.hdr_size=i.hdr_size,n.start=i.start):(r.warn("BoxParser","Unknown sample entry type: "+i.type),n=new h.SampleEntry(i.type,i.size,i.hdr_size,i.start)),n.write===h.SampleEntry.prototype.write&&(r.warn("BoxParser",n.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),n.parseDataAndRewind(t)),n.parse(t),this.entries.push(n)},h.stsgBox.prototype.parse=function(t){this.parseFullHeader(t),this.grouping_type=t.readUint32();var e=t.readUint16();this.group_description_index=[];for(var i=0;i<e;i++)this.group_description_index[i]=t.readUint32()},h.stshBox.prototype.parse=function(t){var e,i;if(this.parseFullHeader(t),e=t.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(i=0;i<e;i++)this.shadowed_sample_numbers.push(t.readUint32()),this.sync_sample_numbers.push(t.readUint32());else this.data=t.readUint8Array(this.size-this.hdr_size-4)},h.stssBox.prototype.parse=function(t){var e,i;if(this.parseFullHeader(t),i=t.readUint32(),0===this.version)for(this.sample_numbers=[],e=0;e<i;e++)this.sample_numbers.push(t.readUint32());else this.data=t.readUint8Array(this.size-this.hdr_size-4)},h.stszBox.prototype.parse=function(t){var e;if(this.parseFullHeader(t),this.sample_sizes=[],0===this.version)if(this.sample_size=t.readUint32(),this.sample_count=t.readUint32(),0===this.sample_size)this.sample_sizes=t.readUint32Array(this.sample_count);else for(e=0;e<this.sample_count;e++)this.sample_sizes[e]=this.sample_size;else this.data=t.readUint8Array(this.size-this.hdr_size)},h.sttsBox.prototype.parse=function(t){var e,i,a;if(this.parseFullHeader(t),e=t.readUint32(),this.sample_counts=[],this.sample_deltas=[],0===this.version)for(i=0;i<e;i++)this.sample_counts.push(t.readUint32()),a=t.readInt32(),a<0&&(r.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),a=1),this.sample_deltas.push(a);else this.data=t.readUint8Array(this.size-this.hdr_size-4)},h.stviBox.prototype.parse=function(t){this.parseFullHeader(t);var e=t.readUint32();this.single_view_allowed=3&e,this.stereo_scheme=t.readUint32();var i,r,a=t.readUint32();this.stereo_indication_type=t.readString(a),this.boxes=[];while(t.getPosition()<this.start+this.size)i=h.parseOneBox(t,!1),r=i.box,this.boxes.push(r),this[r.type]=r},h.stxtSampleEntry.prototype.parse=function(t){this.parseHeader(t),this.content_encoding=t.readCString(),this.mime_format=t.readCString(),this.parseFooter(t)},h.stypBox.prototype.parse=function(t){h.ftypBox.prototype.parse.call(this,t)},h.stz2Box.prototype.parse=function(t){var e,i;if(this.parseFullHeader(t),this.sample_sizes=[],0===this.version)if(this.reserved=t.readUint24(),this.field_size=t.readUint8(),i=t.readUint32(),4===this.field_size)for(e=0;e<i;e+=2){var a=t.readUint8();this.sample_sizes[e]=a>>4&15,this.sample_sizes[e+1]=15&a}else if(8===this.field_size)for(e=0;e<i;e++)this.sample_sizes[e]=t.readUint8();else if(16===this.field_size)for(e=0;e<i;e++)this.sample_sizes[e]=t.readUint16();else r.error("BoxParser","Error in length field in stz2 box");else this.data=t.readUint8Array(this.size-this.hdr_size)},h.subsBox.prototype.parse=function(t){var e,i,r,a;for(this.parseFullHeader(t),r=t.readUint32(),this.samples=[],e=0;e<r;e++){var n={};if(this.samples[e]=n,n.sample_delta=t.readUint32(),n.subsamples=[],a=t.readUint16(),a>0)for(i=0;i<a;i++){var o={};n.subsamples.push(o),1==this.version?o.size=t.readUint32():o.size=t.readUint16(),o.priority=t.readUint8(),o.discardable=t.readUint8(),o.reserved=t.readUint32()}}},h.tfdtBox.prototype.parse=function(t){this.parseFullHeader(t),1==this.version?this.baseMediaDecodeTime=t.readUint64():this.baseMediaDecodeTime=t.readUint32()},h.tfhdBox.prototype.parse=function(t){var e=0;this.parseFullHeader(t),this.track_id=t.readUint32(),this.size-this.hdr_size>e&&this.flags&h.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=t.readUint64(),e+=8):this.base_data_offset=0,this.size-this.hdr_size>e&&this.flags&h.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=t.readUint32(),e+=4):this.default_sample_description_index=0,this.size-this.hdr_size>e&&this.flags&h.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=t.readUint32(),e+=4):this.default_sample_duration=0,this.size-this.hdr_size>e&&this.flags&h.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=t.readUint32(),e+=4):this.default_sample_size=0,this.size-this.hdr_size>e&&this.flags&h.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=t.readUint32(),e+=4):this.default_sample_flags=0},h.tfraBox.prototype.parse=function(t){this.parseFullHeader(t),this.track_ID=t.readUint32(),t.readUint24();var e=t.readUint8();this.length_size_of_traf_num=e>>4&3,this.length_size_of_trun_num=e>>2&3,this.length_size_of_sample_num=3&e,this.entries=[];for(var i=t.readUint32(),r=0;r<i;r++)1===this.version?(this.time=t.readUint64(),this.moof_offset=t.readUint64()):(this.time=t.readUint32(),this.moof_offset=t.readUint32()),this.traf_number=t["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=t["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=t["readUint"+8*(this.length_size_of_sample_num+1)]()},h.tkhdBox.prototype.parse=function(t){this.parseFullHeader(t),1==this.version?(this.creation_time=t.readUint64(),this.modification_time=t.readUint64(),this.track_id=t.readUint32(),t.readUint32(),this.duration=t.readUint64()):(this.creation_time=t.readUint32(),this.modification_time=t.readUint32(),this.track_id=t.readUint32(),t.readUint32(),this.duration=t.readUint32()),t.readUint32Array(2),this.layer=t.readInt16(),this.alternate_group=t.readInt16(),this.volume=t.readInt16()>>8,t.readUint16(),this.matrix=t.readInt32Array(9),this.width=t.readUint32(),this.height=t.readUint32()},h.tmaxBox.prototype.parse=function(t){this.time=t.readUint32()},h.tminBox.prototype.parse=function(t){this.time=t.readUint32()},h.totlBox.prototype.parse=function(t){this.bytessent=t.readUint32()},h.tpayBox.prototype.parse=function(t){this.bytessent=t.readUint32()},h.tpylBox.prototype.parse=function(t){this.bytessent=t.readUint64()},h.trefBox.prototype.parse=function(t){var e,i;while(t.getPosition()<this.start+this.size)e=h.parseOneBox(t,!0),i=new h.TrackReferenceTypeBox(e.type,e.size,e.hdr_size,e.start),i.write===h.Box.prototype.write&&"mdat"!==i.type&&(r.warn("BoxParser",i.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),i.parseDataAndRewind(t)),i.parse(t),this.boxes.push(i)},h.trepBox.prototype.parse=function(t){this.parseFullHeader(t),this.track_ID=t.readUint32(),this.boxes=[];while(t.getPosition()<this.start+this.size)ret=h.parseOneBox(t,!1),box=ret.box,this.boxes.push(box)},h.trexBox.prototype.parse=function(t){this.parseFullHeader(t),this.track_id=t.readUint32(),this.default_sample_description_index=t.readUint32(),this.default_sample_duration=t.readUint32(),this.default_sample_size=t.readUint32(),this.default_sample_flags=t.readUint32()},h.trpyBox.prototype.parse=function(t){this.bytessent=t.readUint64()},h.trunBox.prototype.parse=function(t){var e=0;if(this.parseFullHeader(t),this.sample_count=t.readUint32(),e+=4,this.size-this.hdr_size>e&&this.flags&h.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=t.readInt32(),e+=4):this.data_offset=0,this.size-this.hdr_size>e&&this.flags&h.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=t.readUint32(),e+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>e)for(var i=0;i<this.sample_count;i++)this.flags&h.TRUN_FLAGS_DURATION&&(this.sample_duration[i]=t.readUint32()),this.flags&h.TRUN_FLAGS_SIZE&&(this.sample_size[i]=t.readUint32()),this.flags&h.TRUN_FLAGS_FLAGS&&(this.sample_flags[i]=t.readUint32()),this.flags&h.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?this.sample_composition_time_offset[i]=t.readUint32():this.sample_composition_time_offset[i]=t.readInt32())},h.tselBox.prototype.parse=function(t){this.parseFullHeader(t),this.switch_group=t.readUint32();var e=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var i=0;i<e;i++)this.attribute_list[i]=t.readUint32()},h.tx3gSampleEntry.prototype.parse=function(t){this.parseHeader(t),this.displayFlags=t.readUint32(),this.horizontal_justification=t.readInt8(),this.vertical_justification=t.readInt8(),this.bg_color_rgba=t.readUint8Array(4),this.box_record=t.readInt16Array(4),this.style_record=t.readUint8Array(12),this.parseFooter(t)},h.txtCBox.prototype.parse=function(t){this.parseFullHeader(t),this.config=t.readCString()},h["url Box"].prototype.parse=function(t){this.parseFullHeader(t),1!==this.flags?this.location=t.readCString():this.size-this.hdr_size&&(r.warn("BoxParser","Invalid urlBox - contains data but flag not set"),this.location=t.readString(this.size-this.hdr_size))},h["urn Box"].prototype.parse=function(t){this.parseFullHeader(t),this.name=t.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=t.readCString())},h.vmhdBox.prototype.parse=function(t){this.parseFullHeader(t),this.graphicsmode=t.readUint16(),this.opcolor=t.readUint16Array(3)},h.vttCBox.prototype.parse=function(t){this.text=t.readString(this.size-this.hdr_size)},h.Box.prototype.writeHeader=function(t,e){this.size+=8,this.size>o&&(this.size+=8),"uuid"===this.type&&(this.size+=16),r.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+t.getPosition()+(e||"")),this.size>o?t.writeUint32(1):(this.sizePosition=t.getPosition(),t.writeUint32(this.size)),t.writeString(this.type,null,4),"uuid"===this.type&&t.writeUint8Array(this.uuid),this.size>o&&t.writeUint64(this.size)},h.FullBox.prototype.writeHeader=function(t){this.size+=4,h.Box.prototype.writeHeader.call(this,t," v="+this.version+" f="+this.flags),t.writeUint8(this.version),t.writeUint24(this.flags)},h.Box.prototype.write=function(t){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(t),t.writeUint8Array(this.data)):(this.size=this.data.length,this.writeHeader(t),t.writeUint8Array(this.data))},h.ContainerBox.prototype.write=function(t){this.size=0,this.writeHeader(t);for(var e=0;e<this.boxes.length;e++)this.boxes[e]&&(this.boxes[e].write(t),this.size+=this.boxes[e].size);r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},h.TrackReferenceTypeBox.prototype.write=function(t){this.size=4*this.track_ids.length,this.writeHeader(t),t.writeUint32Array(this.track_ids)},h.avcCBox.prototype.write=function(t){var e;for(this.size=7,e=0;e<this.SPS.length;e++)this.size+=2+this.SPS[e].length;for(e=0;e<this.PPS.length;e++)this.size+=2+this.PPS[e].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(t),t.writeUint8(this.configurationVersion),t.writeUint8(this.AVCProfileIndication),t.writeUint8(this.profile_compatibility),t.writeUint8(this.AVCLevelIndication),t.writeUint8(this.lengthSizeMinusOne+252),t.writeUint8(this.SPS.length+224),e=0;e<this.SPS.length;e++)t.writeUint16(this.SPS[e].length),t.writeUint8Array(this.SPS[e]);for(t.writeUint8(this.PPS.length),e=0;e<this.PPS.length;e++)t.writeUint16(this.PPS[e].length),t.writeUint8Array(this.PPS[e]);this.ext&&t.writeUint8Array(this.ext)},h.co64Box.prototype.write=function(t){var e;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(t),t.writeUint32(this.chunk_offsets.length),e=0;e<this.chunk_offsets.length;e++)t.writeUint64(this.chunk_offsets[e])},h.cslgBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=20,this.writeHeader(t),t.writeInt32(this.compositionToDTSShift),t.writeInt32(this.leastDecodeToDisplayDelta),t.writeInt32(this.greatestDecodeToDisplayDelta),t.writeInt32(this.compositionStartTime),t.writeInt32(this.compositionEndTime)},h.cttsBox.prototype.write=function(t){var e;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(t),t.writeUint32(this.sample_counts.length),e=0;e<this.sample_counts.length;e++)t.writeUint32(this.sample_counts[e]),1===this.version?t.writeInt32(this.sample_offsets[e]):t.writeUint32(this.sample_offsets[e])},h.drefBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.entries.length);for(var e=0;e<this.entries.length;e++)this.entries[e].write(t),this.size+=this.entries[e].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},h.elngBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(t),t.writeString(this.extended_language)},h.elstBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(t),t.writeUint32(this.entries.length);for(var e=0;e<this.entries.length;e++){var i=this.entries[e];t.writeUint32(i.segment_duration),t.writeInt32(i.media_time),t.writeInt16(i.media_rate_integer),t.writeInt16(i.media_rate_fraction)}},h.emsgBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(t),t.writeCString(this.scheme_id_uri),t.writeCString(this.value),t.writeUint32(this.timescale),t.writeUint32(this.presentation_time_delta),t.writeUint32(this.event_duration),t.writeUint32(this.id),t.writeUint8Array(this.message_data)},h.ftypBox.prototype.write=function(t){this.size=8+4*this.compatible_brands.length,this.writeHeader(t),t.writeString(this.major_brand,null,4),t.writeUint32(this.minor_version);for(var e=0;e<this.compatible_brands.length;e++)t.writeString(this.compatible_brands[e],null,4)},h.hdlrBox.prototype.write=function(t){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(t),t.writeUint32(0),t.writeString(this.handler,null,4),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeCString(this.name)},h.kindBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(t),t.writeCString(this.schemeURI),t.writeCString(this.value)},h.mdhdBox.prototype.write=function(t){this.size=20,this.flags=0,this.version=0,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.timescale),t.writeUint32(this.duration),t.writeUint16(this.language),t.writeUint16(0)},h.mehdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.fragment_duration)},h.mfhdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,this.writeHeader(t),t.writeUint32(this.sequence_number)},h.mvhdBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=96,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.timescale),t.writeUint32(this.duration),t.writeUint32(this.rate),t.writeUint16(this.volume<<8),t.writeUint16(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32Array(this.matrix),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(this.next_track_id)},h.SampleEntry.prototype.writeHeader=function(t){this.size=8,h.Box.prototype.writeHeader.call(this,t),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint8(0),t.writeUint16(this.data_reference_index)},h.SampleEntry.prototype.writeFooter=function(t){for(var e=0;e<this.boxes.length;e++)this.boxes[e].write(t),this.size+=this.boxes[e].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},h.SampleEntry.prototype.write=function(t){this.writeHeader(t),t.writeUint8Array(this.data),this.size+=this.data.length,r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},h.VisualSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=70,t.writeUint16(0),t.writeUint16(0),t.writeUint32(0),t.writeUint32(0),t.writeUint32(0),t.writeUint16(this.width),t.writeUint16(this.height),t.writeUint32(this.horizresolution),t.writeUint32(this.vertresolution),t.writeUint32(0),t.writeUint16(this.frame_count),t.writeString(this.compressorname,null,32),t.writeUint16(this.depth),t.writeInt16(-1),this.writeFooter(t)},h.AudioSampleEntry.prototype.write=function(t){this.writeHeader(t),this.size+=20,t.writeUint32(0),t.writeUint32(0),t.writeUint16(this.channel_count),t.writeUint16(this.samplesize),t.writeUint16(0),t.writeUint16(0),t.writeUint32(this.samplerate<<16),this.writeFooter(t)},h.SampleGroupEntry.prototype.write=function(t){t.writeUint8Array(this.data)},h.sbgpBox.prototype.write=function(t){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(t),t.writeString(this.grouping_type,null,4),t.writeUint32(this.grouping_type_parameter),t.writeUint32(this.entries.length);for(var e=0;e<this.entries.length;e++){var i=this.entries[e];t.writeInt32(i.sample_count),t.writeInt32(i.group_description_index)}},h.sgpdBox.prototype.write=function(t){var e,i;for(this.flags=0,this.size=12,e=0;e<this.entries.length;e++)i=this.entries[e],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=i.data.length);for(this.writeHeader(t),t.writeString(this.grouping_type,null,4),1===this.version&&t.writeUint32(this.default_length),this.version>=2&&t.writeUint32(this.default_sample_description_index),t.writeUint32(this.entries.length),e=0;e<this.entries.length;e++)i=this.entries[e],1===this.version&&0===this.default_length&&t.writeUint32(i.description_length),i.write(t)},h.sidxBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(t),t.writeUint32(this.reference_ID),t.writeUint32(this.timescale),t.writeUint32(this.earliest_presentation_time),t.writeUint32(this.first_offset),t.writeUint16(0),t.writeUint16(this.references.length);for(var e=0;e<this.references.length;e++){var i=this.references[e];t.writeUint32(i.reference_type<<31|i.referenced_size),t.writeUint32(i.subsegment_duration),t.writeUint32(i.starts_with_SAP<<31|i.SAP_type<<28|i.SAP_delta_time)}},h.stcoBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(t),t.writeUint32(this.chunk_offsets.length),t.writeUint32Array(this.chunk_offsets)},h.stscBox.prototype.write=function(t){var e;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(t),t.writeUint32(this.first_chunk.length),e=0;e<this.first_chunk.length;e++)t.writeUint32(this.first_chunk[e]),t.writeUint32(this.samples_per_chunk[e]),t.writeUint32(this.sample_description_index[e])},h.stsdBox.prototype.write=function(t){var e;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(t),t.writeUint32(this.entries.length),this.size+=4,e=0;e<this.entries.length;e++)this.entries[e].write(t),this.size+=this.entries[e].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),t.adjustUint32(this.sizePosition,this.size)},h.stshBox.prototype.write=function(t){var e;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(t),t.writeUint32(this.shadowed_sample_numbers.length),e=0;e<this.shadowed_sample_numbers.length;e++)t.writeUint32(this.shadowed_sample_numbers[e]),t.writeUint32(this.sync_sample_numbers[e])},h.stssBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(t),t.writeUint32(this.sample_numbers.length),t.writeUint32Array(this.sample_numbers)},h.stszBox.prototype.write=function(t){var e,i=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0){e=0;while(e+1<this.sample_sizes.length){if(this.sample_sizes[e+1]!==this.sample_sizes[0]){i=!1;break}e++}}else i=!1;this.size=8,i||(this.size+=4*this.sample_sizes.length),this.writeHeader(t),i?t.writeUint32(this.sample_sizes[0]):t.writeUint32(0),t.writeUint32(this.sample_sizes.length),i||t.writeUint32Array(this.sample_sizes)},h.sttsBox.prototype.write=function(t){var e;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(t),t.writeUint32(this.sample_counts.length),e=0;e<this.sample_counts.length;e++)t.writeUint32(this.sample_counts[e]),t.writeUint32(this.sample_deltas[e])},h.tfdtBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(t),1===this.version?t.writeUint64(this.baseMediaDecodeTime):t.writeUint32(this.baseMediaDecodeTime)},h.tfhdBox.prototype.write=function(t){this.version=0,this.size=4,this.flags&h.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&h.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&h.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&h.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&h.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(t),t.writeUint32(this.track_id),this.flags&h.TFHD_FLAG_BASE_DATA_OFFSET&&t.writeUint64(this.base_data_offset),this.flags&h.TFHD_FLAG_SAMPLE_DESC&&t.writeUint32(this.default_sample_description_index),this.flags&h.TFHD_FLAG_SAMPLE_DUR&&t.writeUint32(this.default_sample_duration),this.flags&h.TFHD_FLAG_SAMPLE_SIZE&&t.writeUint32(this.default_sample_size),this.flags&h.TFHD_FLAG_SAMPLE_FLAGS&&t.writeUint32(this.default_sample_flags)},h.tkhdBox.prototype.write=function(t){this.version=0,this.size=80,this.writeHeader(t),t.writeUint32(this.creation_time),t.writeUint32(this.modification_time),t.writeUint32(this.track_id),t.writeUint32(0),t.writeUint32(this.duration),t.writeUint32(0),t.writeUint32(0),t.writeInt16(this.layer),t.writeInt16(this.alternate_group),t.writeInt16(this.volume<<8),t.writeUint16(0),t.writeInt32Array(this.matrix),t.writeUint32(this.width),t.writeUint32(this.height)},h.trexBox.prototype.write=function(t){this.version=0,this.flags=0,this.size=20,this.writeHeader(t),t.writeUint32(this.track_id),t.writeUint32(this.default_sample_description_index),t.writeUint32(this.default_sample_duration),t.writeUint32(this.default_sample_size),t.writeUint32(this.default_sample_flags)},h.trunBox.prototype.write=function(t){this.version=0,this.size=4,this.flags&h.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&h.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&h.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&h.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&h.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&h.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(t),t.writeUint32(this.sample_count),this.flags&h.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=t.getPosition(),t.writeInt32(this.data_offset)),this.flags&h.TRUN_FLAGS_FIRST_FLAG&&t.writeUint32(this.first_sample_flags);for(var e=0;e<this.sample_count;e++)this.flags&h.TRUN_FLAGS_DURATION&&t.writeUint32(this.sample_duration[e]),this.flags&h.TRUN_FLAGS_SIZE&&t.writeUint32(this.sample_size[e]),this.flags&h.TRUN_FLAGS_FLAGS&&t.writeUint32(this.sample_flags[e]),this.flags&h.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?t.writeUint32(this.sample_composition_time_offset[e]):t.writeInt32(this.sample_composition_time_offset[e]))},h["url Box"].prototype.write=function(t){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(t),this.location&&t.writeCString(this.location)},h["urn Box"].prototype.write=function(t){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(t),t.writeCString(this.name),this.location&&t.writeCString(this.location)},h.vmhdBox.prototype.write=function(t){this.version=0,this.flags=1,this.size=8,this.writeHeader(t),t.writeUint16(this.graphicsmode),t.writeUint16Array(this.opcolor)},h.cttsBox.prototype.unpack=function(t){var e,i,r;for(r=0,e=0;e<this.sample_counts.length;e++)for(i=0;i<this.sample_counts[e];i++)t[r].pts=t[r].dts+this.sample_offsets[e],r++},h.sttsBox.prototype.unpack=function(t){var e,i,r;for(r=0,e=0;e<this.sample_counts.length;e++)for(i=0;i<this.sample_counts[e];i++)t[r].dts=0===r?0:t[r-1].dts+this.sample_deltas[e],r++},h.stcoBox.prototype.unpack=function(t){var e;for(e=0;e<this.chunk_offsets.length;e++)t[e].offset=this.chunk_offsets[e]},h.stscBox.prototype.unpack=function(t){var e,i,r,a,n;for(a=0,n=0,e=0;e<this.first_chunk.length;e++)for(i=0;i<(e+1<this.first_chunk.length?this.first_chunk[e+1]:1/0);i++)for(n++,r=0;r<this.samples_per_chunk[e];r++){if(!t[a])return;t[a].description_index=this.sample_description_index[e],t[a].chunk_index=n,a++}},h.stszBox.prototype.unpack=function(t){var e;for(e=0;e<this.sample_sizes.length;e++)t[e].size=this.sample_sizes[e]};var d=function(){};d.prototype.parseSample=function(t){var e,i,r=new a(t.buffer);e=[];while(!r.isEos())i=h.parseOneBox(r,!1),i.code===h.OK&&"vttc"===i.box.type&&e.push(i.box);return e},d.prototype.getText=function(t,e,i){function r(t,e,i){return i=i||"0",t+="",t.length>=e?t:new Array(e-t.length+1).join(i)+t}function a(t){var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),a=Math.floor(t-3600*e-60*i),n=Math.floor(1e3*(t-3600*e-60*i-a));return r(e,2)+":"+r(i,2)+":"+r(a,2)+"."+r(n,3)}for(var n=this.parseSample(i),o="",s=0;s<n.length;s++){var l=n[s];o+=a(t)+" --\x3e "+a(e)+"\r\n",o+=l.payl.text}return o};var p=function(){};p.prototype.parseSample=function(t){var e,i={};i.resources=[];var r=new a(t.data.buffer);if(t.subsamples&&0!==t.subsamples.length){if(i.documentString=r.readString(t.subsamples[0].size),t.subsamples.length>1)for(e=1;e<t.subsamples.length;e++)i.resources[e]=r.readUint8Array(t.subsamples[e].size)}else i.documentString=r.readString(t.data.length);return i.document=(new DOMParser).parseFromString(i.documentString,"application/xml"),i};var c=function(){};c.prototype.parseSample=function(t){var e,i=new a(t.data.buffer);return e=i.readString(t.data.length),e},c.prototype.parseConfig=function(t){var e,i=new a(t.buffer);return i.readUint32(),e=i.readCString(),e};var u=function(t){this.stream=t,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1};u.prototype.parse=function(){var t,e,i=!1;if(!this.restoreParsePosition||this.restoreParsePosition())while(1){if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}if(this.saveParsePosition&&this.saveParsePosition(),t=h.parseOneBox(this.stream,i),t.code===h.ERR_NOT_ENOUGH_DATA){if(this.processIncompleteBox){if(this.processIncompleteBox(t))continue;return}return}switch(e=t.box,this.boxes.push(e),e.type){case"mdat":this.mdats.push(e);break;case"moof":this.moofs.push(e);break;case"moov":this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[e.type]&&r.warn("ISOFile","Duplicate Box of type: "+e.type+", overriding previous occurrence"),this[e.type]=e;break}this.updateUsedBytes&&this.updateUsedBytes(e,t)}},u.prototype.getBox=function(t){var e=this.getBoxes(t,!0);return e.length?e[0]:null},u.prototype.getBoxes=function(t,e){var i=[];return u._sweep.call(this,t,i,e),i},u._sweep=function(t,e,i){for(var r in this.type&&this.type==t&&e.push(this),this.boxes){if(e.length&&i)return;u._sweep.call(this.boxes[r],t,e,i)}},e.ISOFile=u,u.prototype.lastBoxStartPosition=0,u.prototype.parsingMdat=null,u.prototype.nextParsePosition=0,u.prototype.discardMdatData=!1,u.prototype.processIncompleteBox=function(t){var e,i,r;return"mdat"===t.type?(e=new h[t.type+"Box"](t.size),this.parsingMdat=e,this.boxes.push(e),this.mdats.push(e),e.start=t.start,e.hdr_size=t.hdr_size,this.stream.addUsedBytes(e.hdr_size),this.lastBoxStartPosition=e.start+e.size,r=this.stream.seek(e.start+e.size,!1,this.discardMdatData),r?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=e.start+e.size,!1)):("moov"===t.type&&(this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0)),i=this.stream.mergeNextBuffer(),i?(this.nextParsePosition=this.stream.getEndPosition(),!0):(t.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+t.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},u.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},u.prototype.processIncompleteMdat=function(){var t,e;return t=this.parsingMdat,e=this.stream.seek(t.start+t.size,!1,this.discardMdatData),e?(r.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},u.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},u.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},u.prototype.updateUsedBytes=function(t,e){"mdat"===t.type?(this.stream.addUsedBytes(t.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(t.size-t.hdr_size)):this.stream.addUsedBytes(t.size)},u.prototype.lastMoofIndex=0,u.prototype.samplesDataSize=0,u.prototype.resetTables=function(){var t,e,i,r,a,n,o,s;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,t=0;t<this.moov.traks.length;t++){e=this.moov.traks[t],e.tkhd.duration=0,e.mdia.mdhd.duration=0,i=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,i.chunk_offsets=[],r=e.mdia.minf.stbl.stsc,r.first_chunk=[],r.samples_per_chunk=[],r.sample_description_index=[],a=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,a.sample_sizes=[],n=e.mdia.minf.stbl.stts,n.sample_counts=[],n.sample_deltas=[],o=e.mdia.minf.stbl.ctts,o&&(o.sample_counts=[],o.sample_offsets=[]),s=e.mdia.minf.stbl.stss;var l=e.mdia.minf.stbl.boxes.indexOf(s);-1!=l&&(e.mdia.minf.stbl.boxes[l]=null)}},u.prototype.buildSampleLists=function(){var t,e,i,r,a,n,o,s,l,h,d,p,c,u,f,m,g,y,b,v,S,x,w;for(t=0;t<this.moov.traks.length;t++){for(i=this.moov.traks[t],i.samples=[],r=i.mdia.minf.stbl.stco||i.mdia.minf.stbl.co64,a=i.mdia.minf.stbl.stsc,n=i.mdia.minf.stbl.stsz||i.mdia.minf.stbl.stz2,o=i.mdia.minf.stbl.stts,s=i.mdia.minf.stbl.ctts,l=i.mdia.minf.stbl.stss,h=i.mdia.minf.stbl.stsd,d=i.mdia.minf.stbl.subs,g=-1,y=-1,b=-1,v=-1,S=0,x=0,w=0,e=0;e<n.sample_sizes.length;e++){var _={};_.number=e,_.track_id=i.tkhd.track_id,_.timescale=i.mdia.mdhd.timescale,_.alreadyRead=0,i.samples[e]=_,_.size=n.sample_sizes[e],0===e?(c=1,p=0,_.chunk_index=c,_.chunk_run_index=p,m=a.samples_per_chunk[p],f=0,u=p+1<a.first_chunk.length?a.first_chunk[p+1]-1:1/0):e<m?(_.chunk_index=c,_.chunk_run_index=p):(c++,_.chunk_index=c,f=0,c<=u||(p++,u=p+1<a.first_chunk.length?a.first_chunk[p+1]-1:1/0),_.chunk_run_index=p,m+=a.samples_per_chunk[p]),_.description_index=a.sample_description_index[_.chunk_run_index]-1,_.description=h.entries[_.description_index],_.offset=r.chunk_offsets[_.chunk_index-1]+f,f+=_.size,e>g&&(y++,g<0&&(g=0),g+=o.sample_counts[y]),e>0?(i.samples[e-1].duration=o.sample_deltas[y],_.dts=i.samples[e-1].dts+i.samples[e-1].duration):_.dts=0,s?(e>=b&&(v++,b<0&&(b=0),b+=s.sample_counts[v]),_.cts=i.samples[e].dts+s.sample_offsets[v]):_.cts=_.dts,l?e==l.sample_numbers[S]-1?(_.is_rap=!0,S++):_.is_rap=!1:_.is_rap=!0,d&&d.samples[x].sample_delta+w==e&&(_.subsamples=d.samples[x].subsamples,w+=d.samples[x].sample_delta)}e>0&&(i.samples[e-1].duration=Math.max(i.mdia.mdhd.duration-i.samples[e-1].dts,0))}},u.prototype.updateSampleLists=function(){var t,e,i,r,a,n,o,s,l,d,p,c,u,f,m;if(void 0!==this.moov)while(this.lastMoofIndex<this.moofs.length)if(l=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==l.type)for(d=l,t=0;t<d.trafs.length;t++){for(p=d.trafs[t],c=this.getTrackById(p.tfhd.track_id),u=this.getTrexById(p.tfhd.track_id),r=p.tfhd.flags&h.TFHD_FLAG_SAMPLE_DESC?p.tfhd.default_sample_description_index:u?u.default_sample_description_index:1,a=p.tfhd.flags&h.TFHD_FLAG_SAMPLE_DUR?p.tfhd.default_sample_duration:u?u.default_sample_duration:0,n=p.tfhd.flags&h.TFHD_FLAG_SAMPLE_SIZE?p.tfhd.default_sample_size:u?u.default_sample_size:0,o=p.tfhd.flags&h.TFHD_FLAG_SAMPLE_FLAGS?p.tfhd.default_sample_flags:u?u.default_sample_flags:0,e=0;e<p.truns.length;e++){var g=p.truns[e];for(i=0;i<g.sample_count;i++){f={},f.number=c.samples.length,p.first_sample_index=c.samples.length,c.samples.push(f),f.track_id=c.tkhd.track_id,f.timescale=c.mdia.mdhd.timescale,f.description_index=r-1,f.description=c.mdia.minf.stbl.stsd.entries[f.description_index],f.size=n,g.flags&h.TRUN_FLAGS_SIZE&&(f.size=g.sample_size[i]),f.duration=a,g.flags&h.TRUN_FLAGS_DURATION&&(f.duration=g.sample_duration[i]),c.first_traf_merged||i>0?f.dts=c.samples[c.samples.length-2].dts+c.samples[c.samples.length-2].duration:(p.tfdt?f.dts=p.tfdt.baseMediaDecodeTime:f.dts=0,c.first_traf_merged=!0),f.cts=f.dts,g.flags&h.TRUN_FLAGS_CTS_OFFSET&&(f.cts=f.dts+g.sample_composition_time_offset[i]),m=o,g.flags&h.TRUN_FLAGS_FLAGS?m=g.sample_flags[i]:0===i&&g.flags&h.TRUN_FLAGS_FIRST_FLAG&&(m=g.first_sample_flags),f.is_rap=!(m>>16&1);var y=!!(p.tfhd.flags&h.TFHD_FLAG_BASE_DATA_OFFSET),b=!!(p.tfhd.flags&h.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),v=!!(g.flags&h.TRUN_FLAGS_DATA_OFFSET),S=0;S=y?p.tfhd.base_data_offset:b||0===e?d.start:s,f.offset=0===e&&0===i?v?S+g.data_offset:S:s,s=f.offset+f.size}}if(p.subs){var x=p.first_sample_index;for(e=0;e<p.subs.samples.length;e++)x+=p.subs.samples[e].sample_delta,f=c.samples[x-1],f.subsamples=p.subs.samples[e].subsamples}}},u.prototype.getSample=function(t,e){var i,a=t.samples[e];if(!this.moov)return null;if(a.data){if(a.alreadyRead==a.size)return a}else a.data=new Uint8Array(a.size),a.alreadyRead=0,this.samplesDataSize+=a.size,r.debug("ISOFile","Allocating sample #"+e+" on track #"+t.tkhd.track_id+" of size "+a.size+" (total: "+this.samplesDataSize+")");var o=this.stream.findPosition(!0,a.offset+a.alreadyRead,!1);if(o>-1){i=this.stream.buffers[o];var s=i.byteLength-(a.offset+a.alreadyRead-i.fileStart);return a.size-a.alreadyRead<=s?(r.debug("ISOFile","Getting sample #"+e+" data (alreadyRead: "+a.alreadyRead+" offset: "+(a.offset+a.alreadyRead-i.fileStart)+" read size: "+(a.size-a.alreadyRead)+" full size: "+a.size+")"),n.memcpy(a.data.buffer,a.alreadyRead,i,a.offset+a.alreadyRead-i.fileStart,a.size-a.alreadyRead),i.usedBytes+=a.size-a.alreadyRead,this.stream.logBufferLevel(),a.alreadyRead=a.size,a):(r.debug("ISOFile","Getting sample #"+e+" partial data (alreadyRead: "+a.alreadyRead+" offset: "+(a.offset+a.alreadyRead-i.fileStart)+" read size: "+s+" full size: "+a.size+")"),n.memcpy(a.data.buffer,a.alreadyRead,i,a.offset+a.alreadyRead-i.fileStart,s),a.alreadyRead+=s,i.usedBytes+=s,this.stream.logBufferLevel(),null)}return null},u.prototype.releaseSample=function(t,e){var i=t.samples[e];return i.data?(this.samplesDataSize-=i.size,i.data=null,i.alreadyRead=0,i.size):0},u.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},u.prototype.getCodecs=function(){var t,e="";for(t=0;t<this.moov.traks.length;t++){var i=this.moov.traks[t];t>0&&(e+=","),e+=i.mdia.minf.stbl.stsd.entries[0].getCodec()}return e},u.prototype.getTrexById=function(t){var e;if(!this.moov||!this.moov.mvex)return null;for(e=0;e<this.moov.mvex.trexs.length;e++){var i=this.moov.mvex.trexs[e];if(i.track_id==t)return i}return null},u.prototype.getTrackById=function(t){if(void 0===this.moov)return null;for(var e=0;e<this.moov.traks.length;e++){var i=this.moov.traks[e];if(i.tkhd.track_id==t)return i}return null},u.prototype.items=[],u.prototype.itemsDataSize=0,u.prototype.flattenItemInfo=function(){var t,e,i,a=this.items,n=this.meta;if(null!==n&&void 0!==n&&void 0!==n.hdlr&&void 0!==n.iinf){for(t=0;t<n.iinf.item_infos.length;t++)i={},i.id=n.iinf.item_infos[t].item_ID,a[i.id]=i,i.ref_to=[],i.name=n.iinf.item_infos[t].item_name,n.iinf.item_infos[t].protection_index>0&&(i.protection=n.ipro.protections[n.iinf.item_infos[t].protection_index-1]),n.iinf.item_infos[t].item_type?i.type=n.iinf.item_infos[t].item_type:i.type="mime",i.content_type=n.iinf.item_infos[t].content_type,i.content_encoding=n.iinf.item_infos[t].content_encoding;if(n.iloc)for(t=0;t<n.iloc.items.length;t++){var o=n.iloc.items[t];if(i=a[o.item_ID],0!==o.data_reference_index&&(r.warn("Item storage with reference to other files: not supported"),i.source=n.dinf.boxes[o.data_reference_index-1]),void 0!==o.construction_method)switch(r.warn("Item storage with construction_method : not supported"),o.construction_method){case 0:break;case 1:break;case 2:break}else for(i.extents=[],i.size=0,e=0;e<o.extents.length;e++)i.extents[e]={},i.extents[e].offset=o.extents[e].extent_offset+o.base_offset,i.extents[e].length=o.extents[e].extent_length,i.extents[e].alreadyRead=0,i.size+=i.extents[e].length}if(n.pitm&&(a[n.pitm.item_id].primary=!0),n.iref)for(t=0;t<n.iref.references.length;t++){var s=n.iref.references[t];for(e=0;e<s.references.length;e++)a[s.from_item_ID].ref_to.push({type:s.type,id:s.references[e]})}}},u.prototype.getItem=function(t){var e,i;if(!this.meta)return null;if(i=this.items[t],!i.data&&i.size)i.data=new Uint8Array(i.size),i.alreadyRead=0,this.itemsDataSize+=i.size,r.debug("ISOFile","Allocating item #"+t+" of size "+i.size+" (total: "+this.itemsDataSize+")");else if(i.alreadyRead===i.size)return i;for(var a=0;a<i.extents.length;a++){var o=i.extents[a];if(o.alreadyRead!==o.length){var s=this.stream.findPosition(!0,o.offset+o.alreadyRead,!1);if(!(s>-1))return null;e=this.stream.buffers[s];var l=e.byteLength-(o.offset+o.alreadyRead-e.fileStart);if(!(o.length-o.alreadyRead<=l))return r.debug("ISOFile","Getting item #"+t+" extent #"+a+" partial data (alreadyRead: "+o.alreadyRead+" offset: "+(o.offset+o.alreadyRead-e.fileStart)+" read size: "+l+" full extent size: "+o.length+" full item size: "+i.size+")"),n.memcpy(i.data.buffer,i.alreadyRead,e,o.offset+o.alreadyRead-e.fileStart,l),o.alreadyRead+=l,i.alreadyRead+=l,e.usedBytes+=l,this.stream.logBufferLevel(),null;r.debug("ISOFile","Getting item #"+t+" extent #"+a+" data (alreadyRead: "+o.alreadyRead+" offset: "+(o.offset+o.alreadyRead-e.fileStart)+" read size: "+(o.length-o.alreadyRead)+" full extent size: "+o.length+" full item size: "+i.size+")"),n.memcpy(i.data.buffer,i.alreadyRead,e,o.offset+o.alreadyRead-e.fileStart,o.length-o.alreadyRead),e.usedBytes+=o.length-o.alreadyRead,this.stream.logBufferLevel(),o.alreadyRead=o.length,i.alreadyRead+=o.length}}return i.alreadyRead===i.size?i:null},u.prototype.releaseItem=function(t){var e=this.items[t];if(e.data){this.itemsDataSize-=e.size,e.data=null,e.alreadyRead=0;for(var i=0;i<e.extents.length;i++){var r=e.extents[i];r.alreadyRead=0}return e.size}return 0},u.prototype.processItems=function(t){for(var e in this.items){var i=this.items[e];this.getItem(i.id),t&&!i.sent&&(t(i),i.sent=!0,i.data=null)}},u.prototype.hasItem=function(t){for(var e in this.items){var i=this.items[e];if(i.name===t)return i.id}return-1},u.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},u.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},u.prototype.write=function(t){for(var e=0;e<this.boxes.length;e++)this.boxes[e].write(t)},u.writeInitializationSegment=function(t,e,i){var a,o;r.debug("ISOFile","Generating initialization segment");var s=new n;for(s.endianness=n.BIG_ENDIAN,t.mvex=new h.mvexBox,t.boxes.push(t.mvex),e&&(t.mvex.mehd=new h.mehdBox,t.mvex.boxes.push(t.mvex.mehd),t.mvex.mehd.fragment_duration=e),a=0;a<t.traks.length;a++)o=new h.trexBox,t.mvex.boxes.push(o),t.mvex.trexs.push(o),o.track_id=t.traks[a].tkhd.track_id,o.default_sample_description_index=1,o.default_sample_duration=i,o.default_sample_size=0,o.default_sample_flags=65536;return t.write(s),s.buffer};var f=function(t){this.inputStream=new s,this.keepMdatData=void 0===t||t,this.inputIsoFile=new u(this.inputStream),this.inputIsoFile.discardMdatData=!this.keepMdatData,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1};f.prototype.setSegmentOptions=function(t,e,i){var r=this.inputIsoFile.getTrackById(t);if(r){var a={};this.fragmentedTracks.push(a),a.id=t,a.user=e,a.trak=r,r.nextSample=0,a.segmentStream=null,a.nb_samples=1e3,a.rapAlignement=!0,i&&(i.nbSamples&&(a.nb_samples=i.nbSamples),i.rapAlignement&&(a.rapAlignement=i.rapAlignement))}},f.prototype.unsetSegmentOptions=function(t){for(var e=-1,i=0;i<this.fragmentedTracks.length;i++){var r=this.fragmentedTracks[i];r.id==t&&(e=i)}e>-1&&this.fragmentedTracks.splice(e,1)},f.prototype.setExtractionOptions=function(t,e,i){var r=this.inputIsoFile.getTrackById(t);if(r){var a={};this.extractedTracks.push(a),a.id=t,a.user=e,a.trak=r,r.nextSample=0,a.nb_samples=1e3,a.samples=[],i&&i.nbSamples&&(a.nb_samples=i.nbSamples)}},f.prototype.unsetExtractionOptions=function(t){for(var e=-1,i=0;i<this.extractedTracks.length;i++){var r=this.extractedTracks[i];r.id==t&&(e=i)}e>-1&&this.extractedTracks.splice(e,1)},f.prototype.createSingleSampleMoof=function(t){var e=new h.moofBox,i=new h.mfhdBox;i.sequence_number=this.nextMoofNumber,this.nextMoofNumber++,e.boxes.push(i);var r=new h.trafBox;e.boxes.push(r);var a=new h.tfhdBox;r.boxes.push(a),a.track_id=t.track_id,a.flags=h.TFHD_FLAG_DEFAULT_BASE_IS_MOOF;var n=new h.tfdtBox;r.boxes.push(n),n.baseMediaDecodeTime=t.dts;var o=new h.trunBox;return r.boxes.push(o),e.trun=o,o.flags=h.TRUN_FLAGS_DATA_OFFSET|h.TRUN_FLAGS_DURATION|h.TRUN_FLAGS_SIZE|h.TRUN_FLAGS_FLAGS|h.TRUN_FLAGS_CTS_OFFSET,o.data_offset=0,o.first_sample_flags=0,o.sample_count=1,o.sample_duration=[],o.sample_duration[0]=t.duration,o.sample_size=[],o.sample_size[0]=t.size,o.sample_flags=[],o.sample_flags[0]=0,o.sample_composition_time_offset=[],o.sample_composition_time_offset[0]=t.cts-t.dts,e},f.prototype.createFragment=function(t,e,i,a){var o=this.inputIsoFile.getTrackById(e),s=this.inputIsoFile.getSample(o,i);if(null==s)return s=o.samples[i],this.nextSeekPosition?this.nextSeekPosition=Math.min(s.offset+s.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=o.samples[i].offset+s.alreadyRead,null;var l=a||new n;l.endianness=n.BIG_ENDIAN;var d=this.createSingleSampleMoof(s);d.write(l),d.trun.data_offset=d.size+8,r.debug("MP4Box","Adjusting data_offset with new value "+d.trun.data_offset),l.adjustUint32(d.trun.data_offset_position,d.trun.data_offset);var p=new h.mdatBox;return p.data=s.data,p.write(l),l},f.prototype.processSamples=function(){var t,e;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(t=0;t<this.fragmentedTracks.length;t++){var i=this.fragmentedTracks[t];e=i.trak;while(e.nextSample<e.samples.length&&this.sampleProcessingStarted){r.debug("MP4Box","Creating media fragment on track #"+i.id+" for sample "+e.nextSample);var a=this.createFragment(this.inputIsoFile,i.id,e.nextSample,i.segmentStream);if(!a)break;if(i.segmentStream=a,e.nextSample++,(e.nextSample%i.nb_samples===0||e.nextSample>=e.samples.length)&&(r.info("MP4Box","Sending fragmented data on track #"+i.id+" for samples ["+Math.max(0,e.nextSample-i.nb_samples)+","+(e.nextSample-1)+"]"),r.info("MP4Box","Sample data size in memory: "+this.inputIsoFile.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(i.id,i.user,i.segmentStream.buffer,e.nextSample),i.segmentStream=null,i!==this.fragmentedTracks[t]))break}}if(null!==this.onSamples)for(t=0;t<this.extractedTracks.length;t++){var n=this.extractedTracks[t];e=n.trak;while(e.nextSample<e.samples.length&&this.sampleProcessingStarted){r.debug("MP4Box","Exporting on track #"+n.id+" sample #"+e.nextSample);var o=this.inputIsoFile.getSample(e,e.nextSample);if(!o)break;if(e.nextSample++,n.samples.push(o),(e.nextSample%n.nb_samples===0||e.nextSample>=e.samples.length)&&(r.debug("MP4Box","Sending samples on track #"+n.id+" for sample "+e.nextSample),this.onSamples&&this.onSamples(n.id,n.user,n.samples),n.samples=[],n!==this.extractedTracks[t]))break}}}},f.prototype.checkBuffer=function(t){if(null===t||void 0===t)throw"Buffer must be defined and non empty";if(void 0===t.fileStart)throw"Buffer must have a fileStart property";return 0===t.byteLength?(r.warn("MP4Box","Ignoring empty buffer (fileStart: "+t.fileStart+")"),this.inputStream.logBufferLevel(),!1):(r.info("MP4Box","Processing buffer (fileStart: "+t.fileStart+")"),t.usedBytes=0,this.inputStream.insertBuffer(t),this.inputStream.logBufferLevel(),!!this.inputStream.initialized()||(r.warn("MP4Box","Not ready to start parsing"),!1))},f.prototype.appendBuffer=function(t){var e;if(!this.checkBuffer||this.checkBuffer(t))return this.inputIsoFile.parse(),this.inputIsoFile.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.inputIsoFile.moov?(this.processSamples&&(this.sampleListBuilt||(this.inputIsoFile.buildSampleLists(),this.sampleListBuilt=!0),this.inputIsoFile.updateSampleLists()),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples&&this.processSamples(),this.nextSeekPosition?(e=this.nextSeekPosition,this.nextSeekPosition=void 0):e=this.inputIsoFile.nextParsePosition,this.inputStream.getEndFilePositionAfter&&(e=this.inputStream.getEndFilePositionAfter(e))):e=null!==this.inputIsoFile?this.inputIsoFile.nextParsePosition:0,this.inputIsoFile.meta&&(this.inputIsoFile.flattenItemInfo&&!this.itemListBuilt&&(this.inputIsoFile.flattenItemInfo(),this.itemListBuilt=!0),this.inputIsoFile.processItems&&this.inputIsoFile.processItems(this.onItem)),this.inputStream.cleanBuffers&&(r.info("MP4Box","Done processing buffer (fileStart: "+t.fileStart+") - next buffer to fetch should have a fileStart position of "+e),this.inputStream.logBufferLevel(),this.inputStream.cleanBuffers(),this.inputStream.logBufferLevel(!0),r.info("MP4Box","Sample data size in memory: "+this.inputIsoFile.getAllocatedSampleDataSize())),e},f.prototype.getInfo=function(){var t,e,i,r,a,n={},o=new Date(4,0,1,0,0,0,0).getTime();if(this.inputIsoFile.moov)for(n.hasMoov=!0,n.duration=this.inputIsoFile.moov.mvhd.duration,n.timescale=this.inputIsoFile.moov.mvhd.timescale,n.isFragmented=null!=this.inputIsoFile.moov.mvex,n.isFragmented&&this.inputIsoFile.moov.mvex.mehd?n.fragment_duration=this.inputIsoFile.moov.mvex.mehd.fragment_duration:n.fragment_duration=0,n.isProgressive=this.inputIsoFile.isProgressive,n.hasIOD=null!=this.inputIsoFile.moov.iods,n.brands=[],n.brands.push(this.inputIsoFile.ftyp.major_brand),n.brands=n.brands.concat(this.inputIsoFile.ftyp.compatible_brands),n.created=new Date(o+1e3*this.inputIsoFile.moov.mvhd.creation_time),n.modified=new Date(o+1e3*this.inputIsoFile.moov.mvhd.modification_time),n.tracks=[],n.audioTracks=[],n.videoTracks=[],n.subtitleTracks=[],n.metadataTracks=[],n.hintTracks=[],n.otherTracks=[],t=0;t<this.inputIsoFile.moov.traks.length;t++){if(i=this.inputIsoFile.moov.traks[t],a=i.mdia.minf.stbl.stsd.entries[0],r={},n.tracks.push(r),r.id=i.tkhd.track_id,r.references=[],i.tref)for(e=0;e<i.tref.boxes.length;e++)ref={},r.references.push(ref),ref.type=i.tref.boxes[e].type,ref.track_ids=i.tref.boxes[e].track_ids;for(r.created=new Date(o+1e3*i.tkhd.creation_time),r.modified=new Date(o+1e3*i.tkhd.modification_time),r.movie_duration=i.tkhd.duration,r.layer=i.tkhd.layer,r.alternate_group=i.tkhd.alternate_group,r.volume=i.tkhd.volume,r.matrix=i.tkhd.matrix,r.track_width=i.tkhd.width/65536,r.track_height=i.tkhd.height/65536,r.timescale=i.mdia.mdhd.timescale,r.duration=i.mdia.mdhd.duration,r.codec=a.getCodec(),r.kind=i.udta&&i.udta.kinds.length?i.udta.kinds[0]:{schemeURI:"",value:""},r.language=i.mdia.elng?i.mdia.elng.extended_language:i.mdia.mdhd.languageString,r.nb_samples=i.samples.length,r.size=0,e=0;e<r.nb_samples;e++)r.size+=i.samples[e].size;r.bitrate=8*r.size*r.timescale/r.duration,a.isAudio()?(n.audioTracks.push(r),r.audio={},r.audio.sample_rate=a.getSampleRate(),r.audio.channel_count=a.getChannelCount(),r.audio.sample_size=a.getSampleSize()):a.isVideo()?(n.videoTracks.push(r),r.video={},r.video.width=a.getWidth(),r.video.height=a.getHeight()):a.isSubtitle()?n.subtitleTracks.push(r):a.isHint()?n.hintTracks.push(r):a.isMetadata()?n.metadataTracks.push(r):n.otherTracks.push(r)}else n.hasMoov=!1;return n},f.prototype.writeFile=function(){var t=new n;return t.endianness=n.BIG_ENDIAN,this.inputIsoFile.write(t),t.buffer},f.prototype.initializeSegmentation=function(){var t,e,i,a;for(null===this.onSegment&&r.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.inputIsoFile.resetTables()),e=[],t=0;t<this.fragmentedTracks.length;t++){var n=new h.moovBox;n.mvhd=this.inputIsoFile.moov.mvhd,n.boxes.push(n.mvhd),i=this.inputIsoFile.getTrackById(this.fragmentedTracks[t].id),n.boxes.push(i),n.traks.push(i),a={},a.id=i.tkhd.track_id,a.user=this.fragmentedTracks[t].user,a.buffer=u.writeInitializationSegment(n,this.inputIsoFile.moov.mvex&&this.inputIsoFile.moov.mvex.mehd?this.inputIsoFile.moov.mvex.mehd.fragment_duration:void 0,this.inputIsoFile.moov.traks[t].samples.length>0?this.inputIsoFile.moov.traks[t].samples[0].duration:0),e.push(a)}return e},f.prototype.releaseUsedSamples=function(t,e){var i=0,a=this.inputIsoFile.getTrackById(t);a.lastValidSample||(a.lastValidSample=0);for(var n=a.lastValidSample;n<e;n++)i+=this.inputIsoFile.releaseSample(a,n);r.info("MP4Box","Track #"+t+" released samples up to "+e+" (released size: "+i+", remaining: "+this.inputIsoFile.samplesDataSize+")"),a.lastValidSample=e},f.prototype.flush=function(){r.info("MP4Box","Flushing remaining samples"),this.inputIsoFile.updateSampleLists(),this.processSamples(),this.inputStream.cleanBuffers(),this.inputStream.logBufferLevel(!0)},f.prototype.seekTrack=function(t,e,i){var a,n,o,s=1/0,l=0,h=0;if(0===i.samples.length)return r.info("MP4Box","No sample in track, cannot seek! Using time "+r.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(a=0;a<i.samples.length;a++){if(n=i.samples[a],0===a)h=0,o=n.timescale;else if(n.cts>t*n.timescale){h=a-1;break}e&&n.is_rap&&(l=a)}e&&(h=l),t=i.samples[h].cts,i.nextSample=h;while(i.samples[h].alreadyRead===i.samples[h].size)h++;return s=i.samples[h].offset+i.samples[h].alreadyRead,r.info("MP4Box","Seeking to "+(e?"RAP":"")+" sample #"+i.nextSample+" on track "+i.tkhd.track_id+", time "+r.getDurationString(t,o)+" and offset: "+s),{offset:s,time:t/o}},f.prototype.seek=function(t,e){var i,a,n,o=this.inputIsoFile.moov,s={offset:1/0,time:1/0};if(this.inputIsoFile.moov){for(n=0;n<o.traks.length;n++)i=o.traks[n],a=this.seekTrack(t,e,i),a.offset<s.offset&&(s.offset=a.offset),a.time<s.time&&(s.time=a.time);return r.info("MP4Box","Seeking at time "+r.getDurationString(s.time,1)+" needs a buffer with a fileStart position of "+s.offset),s.offset===1/0?s={offset:this.inputIsoFile.nextParsePosition,time:0}:s.offset=this.inputStream.getEndFilePositionAfter(s.offset),r.info("MP4Box","Adjusted seek position (after checking data already in buffer): "+s.offset),s}throw"Cannot seek: moov not received!"},f.prototype.getTrackSamplesInfo=function(t){var e=this.inputIsoFile.getTrackById(t);return e?e.samples:void 0},f.prototype.getTrackSample=function(t,e){var i=this.inputIsoFile.getTrackById(t),r=this.inputIsoFile.getSample(i,e);return r},f.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples()},f.prototype.stop=function(){this.sampleProcessingStarted=!1},e.MP4Box=f},"039e":function(t,e,i){"use strict";var r=i("7ad5"),a=i.n(r);a.a},"093c":function(t,e,i){},"0b25":function(t,e,i){var r=i("a691"),a=i("50c4");t.exports=function(t){if(void 0===t)return 0;var e=r(t),i=a(e);if(e!==i)throw RangeError("Wrong length or index");return i}},"0bb1":function(t,e,i){},"0c7f":function(t,e,i){},1370:function(t,e,i){},"145e":function(t,e,i){"use strict";var r=i("7b0b"),a=i("23cb"),n=i("50c4"),o=Math.min;t.exports=[].copyWithin||function(t,e){var i=r(this),s=n(i.length),l=a(t,s),h=a(e,s),d=arguments.length>2?arguments[2]:void 0,p=o((void 0===d?s:a(d,s))-h,s-l),c=1;h<l&&l<h+p&&(c=-1,h+=p-1,l+=p-1);while(p-- >0)h in i?i[l]=i[h]:delete i[l],l+=c,h+=c;return i}},"170b":function(t,e,i){"use strict";var r=i("ebb5"),a=i("50c4"),n=i("23cb"),o=i("4840"),s=r.aTypedArray,l=r.exportTypedArrayMethod;l("subarray",(function(t,e){var i=s(this),r=i.length,l=n(t,r);return new(o(i,i.constructor))(i.buffer,i.byteOffset+l*i.BYTES_PER_ELEMENT,a((void 0===e?r:n(e,r))-l))}))},1749:function(t,e,i){"use strict";var r=i("47a3"),a=i.n(r);a.a},"182d":function(t,e,i){var r=i("f8cd");t.exports=function(t,e){var i=r(t);if(i%e)throw RangeError("Wrong offset");return i}},"18eb":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"biz-tag-select"},[i("div",{staticClass:"tag-content"},[i("div",{staticClass:"tag-show-eara"},t._l(t.curSelectedTags,(function(e,r){return i("el-tag",{key:r,staticClass:"sel-tag",attrs:{closable:""},on:{close:function(i){return t.onClose(e,r)}}},[t._v(" "+t._s(e.name?e.name:e)+" ")])})),1),i("div",{staticClass:"select-area"},[i("div",{staticClass:"search-container"},[t.bAddTag?i("el-input",{attrs:{placeholder:"请输入关键词，按回车添加新标签"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}}):t._e()],1),t.tagList.length?i("div",{staticClass:"tag-container"},[i("el-checkbox-group",{attrs:{size:"small"},on:{change:t.onChange},model:{value:t.curSelectedTags,callback:function(e){t.curSelectedTags=e},expression:"curSelectedTags"}},t._l(t.curShowTags,(function(e,r){return i("el-checkbox-button",{key:r,staticClass:"tag-column",attrs:{label:e.name}},[t._v(t._s(e.name)+" ")])})),1),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"more-btn",attrs:{small:"",type:"primary"},on:{click:t.onMore}},[t._v("更多...")])],1):i("div",{staticClass:"empty"},[t._v("暂无标签数据")])])])])},a=[],n=(i("4160"),i("d81d"),i("a434"),i("b0c0"),i("ac1f"),i("5319"),i("159b"),i("1ab1")),o=i("c596"),s={name:"biz-tag-select",data:function(){return{curSelectedTags:[],tagName:"",tagCatrgoryId:"",showMore:!1,curShowTags:[]}},props:{tagList:{type:Array},selectedTags:{type:Array},bAddTag:{type:Boolean,default:!0},selectType:{type:String},categoryType:{type:String,default:function(){return""}}},components:{},computed:{},watch:{selectedTags:function(t){this.curSelectedTags=t.map((function(t){return t.name?t.name:t}))},tagList:function(t){var e=this;t&&t.length&&(this.curShowTags.splice(0,this.curShowTags.length),this.tagCatrgoryId=t[0].tagCategory.id,this.showMore=t.length>6,t.forEach((function(t,i){i<6&&e.curShowTags.push(t)})))}},methods:{getCurSelectedTags:function(t){var e,i,r=this;return e=[],this.curSelectedTags.forEach((function(t){r.tagList.forEach((function(r){r.name===t&&(i={},i.id=r.id,i.name=r.name,e.push(i))}))})),e},onChange:function(t){"order"===this.selectType&&this.curSelectedTags.length>1&&(this.curSelectedTags.pop(),this.$message.warning("您已选择标签，如需要变更请先删除之前的选择")),this.$emit("change",t)},onClose:function(t,e){console.log(t),this.curSelectedTags.splice(e,1)},handleInputConfirm:function(){this.tagName=this.tagName.replace(/\s+/g,""),this.tagName&&(this.tagCatrgoryId?this.addTag():"店铺特色"===this.categoryType&&this.getTagCatrgoryId())},getTagCatrgoryId:function(){var t=this,e={categoryType:"店铺特色",isIncludeParent:"1"};n["a"].get(o["g"].systemSetting.storeTagcategories,e).then((function(e){e.content.length&&(t.tagCatrgoryId=e.content[0].id,t.addTag())})).catch((function(t){t.errorMessage&&console.log(t.errorMessage)}))},addTag:function(){var t=this,e={name:this.tagName,hierarchy:"1",tagCategory:{id:this.tagCatrgoryId}};n["a"].post(o["g"].systemSetting.deleteTag,e).then((function(e){t.$emit("addSuccess"),console.log(t.curSelectedTags),t.tagName=""})).catch((function(e){t.$message.warning(e.errorMessage),console.log(e.errorMessage)}))},onMore:function(){"shopProfile"===this.selectType?this.$emit("showMore"):(this.showMore=!1,this.curShowTags=this.tagList)}}},l=s,h=(i("663e"),i("2877")),d=Object(h["a"])(l,r,a,!1,null,null,null),p=d.exports;e["a"]=p},"219c":function(t,e,i){"use strict";var r=i("ebb5"),a=r.aTypedArray,n=r.exportTypedArrayMethod,o=[].sort;n("sort",(function(t){return o.call(a(this),t)}))},"2429f":function(t,e,i){},2497:function(t,e,i){"use strict";var r=i("4360"),a=i("a18c");e["a"]=function(t,e){return function(i){var n=i.data;"100"===n.resultCode?t(n):"709"===n.resultCode?(r["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",r["a"].getters.currentUser),a["a"].push("/login")):e(n)}}},"25a1":function(t,e,i){"use strict";var r=i("ebb5"),a=i("d58f").right,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("reduceRight",(function(t){return a(n(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"25c2":function(t,e,i){},"25eb":function(t,e,i){var r=i("23e7"),a=i("c20d");r({target:"Number",stat:!0,forced:Number.parseInt!=a},{parseInt:a})},2954:function(t,e,i){"use strict";var r=i("ebb5"),a=i("4840"),n=i("d039"),o=r.aTypedArray,s=r.aTypedArrayConstructor,l=r.exportTypedArrayMethod,h=[].slice,d=n((function(){new Int8Array(1).slice()}));l("slice",(function(t,e){var i=h.call(o(this),t,e),r=a(this,this.constructor),n=0,l=i.length,d=new(s(r))(l);while(l>n)d[n]=i[n++];return d}),d)},"2adf":function(t,e,i){},3280:function(t,e,i){"use strict";var r=i("ebb5"),a=i("e58c"),n=r.aTypedArray,o=r.exportTypedArrayMethod;o("lastIndexOf",(function(t){return a.apply(n(this),arguments)}))},"3a7b":function(t,e,i){"use strict";var r=i("ebb5"),a=i("b727").findIndex,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("findIndex",(function(t){return a(n(this),t,arguments.length>1?arguments[1]:void 0)}))},"3c5d":function(t,e,i){"use strict";var r=i("ebb5"),a=i("50c4"),n=i("182d"),o=i("7b0b"),s=i("d039"),l=r.aTypedArray,h=r.exportTypedArrayMethod,d=s((function(){new Int8Array(1).set({})}));h("set",(function(t){l(this);var e=n(arguments.length>1?arguments[1]:void 0,1),i=this.length,r=o(t),s=a(r.length),h=0;if(s+e>i)throw RangeError("Wrong length");while(h<s)this[e+h]=r[h++]}),d)},"3f67":function(t,e,i){},"3f70":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"biz-map-pointer"},[i("el-popover",{ref:"mapContainer",attrs:{placement:"bottom",width:"600",trigger:"click","popper-class":"map-container"},on:{show:t.showHandler},model:{value:t.showPopper,callback:function(e){t.showPopper=e},expression:"showPopper"}},[i("div",{staticClass:"map-instance",attrs:{id:"map-instance-"+t.randomKey}})]),i("el-input",{attrs:{placeholder:"请输入地址"},on:{input:t.inputHandler},model:{value:t.innerAddress,callback:function(e){t.innerAddress=e},expression:"innerAddress"}}),i("el-button",{directives:[{name:"popover",rawName:"v-popover:mapContainer",arg:"mapContainer"}],attrs:{type:"primary",size:"mini"}},[t._v("选择")])],1)},a=[],n=(i("d81d"),i("d3b7"),i("25f0"),{name:"BizMapPointer",components:{},model:{prop:"value",event:"input"},props:{value:{type:Object,default:function(){return{}}},address:{type:String,default:function(){return""}}},data:function(){return{randomKey:"",innerAddress:"",showPopper:!1}},methods:{init:function(){this.map=new this.$map.Map("map-instance-"+this.randomKey),this.point=new this.$map.Point(116.404,39.915),this.map.centerAndZoom(this.point,13),this.map.addControl(new this.$map.NavigationControl),this.map.enableScrollWheelZoom(!0)},pointToAddress:function(t,e){var i=this;this.Geocoder.getLocation(t,(function(t){t&&(e?i.$emit("addressChange",e,t.addressComponents.city):i.$emit("addressChange",t.address,t.addressComponents.city))}))},addressToPoint:function(t){var e=this;this.Geocoder.getPoint(t,(function(i){i?(e.setPoint(i),e.pointToAddress(i,t)):e.$emit("input",{lng:"",lat:""})}))},inputHandler:function(t){this.addressToPoint(t),this.$emit("addressChange",t)},setMarker:function(t){var e=this;this.marker||(this.marker=new this.$map.Marker(t),this.map.addOverlay(this.marker),this.marker.enableDragging(),this.marker.addEventListener("dragend",(function(){var t=e.marker.getPosition();e.point=t,e.$emit("input",t),e.pointToAddress(t)}))),this.marker.setPosition(t),setTimeout((function(){e.map.centerAndZoom(t,16)}),50)},setPoint:function(t){this.setMarker(t),this.point=t,this.$emit("input",t)},showHandler:function(t){var e=this;this.$message("请直接输入或拖动光标选择地址"),this.address?this.value&&this.value.lat&&this.value.lng?this.setPoint(new this.$map.Point(this.value.lng,this.value.lat)):this.addressToPoint(this.address):this.LocalCity.get((function(t){e.setMarker(t.center),e.$emit("input",t.center),e.pointToAddress(t.center)}))}},created:function(){this.randomKey=(new Date).getTime().toString(),this.LocalCity=new this.$map.LocalCity,this.Geocoder=new this.$map.Geocoder,this.innerAddress=this.address},mounted:function(){this.init()},watch:{address:function(t){this.innerAddress=t}}}),o=n,s=(i("5ac3"),i("2877")),l=Object(s["a"])(o,r,a,!1,null,null,null),h=l.exports;i.d(e,"a",(function(){return h}))},"3fcc":function(t,e,i){"use strict";var r=i("ebb5"),a=i("b727").map,n=i("4840"),o=r.aTypedArray,s=r.aTypedArrayConstructor,l=r.exportTypedArrayMethod;l("map",(function(t){return a(o(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(n(t,t.constructor)))(e)}))}))},"40ae":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"biz-editor",style:t.style},[i("div",{staticStyle:{display:"none"}},[i("el-upload",{ref:"imageUploader",attrs:{multiple:"",accept:"image/*",action:t.serverUrl,"show-file-list":!1,name:"file",data:t.fileData0,"on-success":t.uploadSuccess}}),i("el-upload",{ref:"videoUploader",attrs:{accept:"video/*",action:t.serverUrl,"show-file-list":!1,name:"file",data:t.fileData3,"before-upload":t.beforeUpload,"on-progress":t.handleProgress,"on-success":t.uploadSuccess}}),i("video",{ref:"videoTool"})],1),i("toolbar",{ref:"toolbar",class:{disabledStyle:t.disabled},attrs:{toolbars:t.toolbars},on:{"on-editor-execCommand":t.execCommand}}),0!==t.percentage?i("el-progress",{attrs:{slot:"header","text-inside":!0,"stroke-width":18,percentage:t.percentage},slot:"header"}):t._e(),i("editor-body",{attrs:{canPaste:t.canPaste,value:t.value,height:t.height,width:t.width,config:t.config,disabled:t.disabled},on:{input:t.onInput,ready:t.init}})],1)},a=[],n=(i("99af"),i("c975"),i("a15b"),i("baa5"),i("b0c0"),i("a9e3"),i("25eb"),i("d3b7"),i("b85c")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor-body",style:t.style},[i("div",{attrs:{id:t.id}})])},s=[],l=(i("4160"),i("fb6a"),i("b64b"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("159b"),i("96cf"),i("1da1")),h=i("d4ec"),d=i("bee2"),p=i("1ab1"),c=function(){function t(){Object(h["a"])(this,t),this.listeners={}}return Object(d["a"])(t,[{key:"on",value:function(t,e){void 0===this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"emit",value:function(t){this.listeners[t]&&this.listeners[t].forEach((function(t){return t()}))}}]),t}(),u={name:"UeditorWrap",data:function(){return{imgList:[],reg:new RegExp(/<img [^>]* src=['"](http[s]*:\/\/[^'"]+)[^>]*>/g,"i"),id:"editor"+Math.random().toString().slice(-10),editor:null,status:0,initValue:"",defaultConfig:{toolbars:[],initialFrameWidth:null,autoHeightEnabled:!1,initialFrameHeight:300,enableAutoSave:!1,wordCount:!1,elementPathEnabled:!1,scaleEnabled:!1,UEDITOR_HOME_URL:"./static/ueditorh/"}}},props:{canPaste:{type:Boolean,default:function(){return!0}},value:{type:String,default:""},config:{type:Object,default:function(){return{}}},height:{type:String},width:{type:String},toolbar:{type:Array,default:function(){return[]}},disabled:{type:Boolean,defualt:function(){return!1}}},components:{},computed:{mixedConfig:function(){return Object.assign({},this.defaultConfig,this.config)},style:function(){var t={};return this.height&&(t.height=this.height),this.width&&(t.width=this.width),t}},methods:{initEditor:function(){var t=this;this.$nextTick((function(){t.editor=window.UE.getEditor(t.id,t.mixedConfig),t.editor.addListener("ready",(function(){t.status=2,t.editor.setContent(t.initValue),t.$emit("ready",t.editor),t.editor.addListener("contentChange",(function(){t.$emit("input",t.editor.getContent())})),t.editor.addListener("beforepaste",function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(i,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canPaste||(r.html=""),setTimeout((function(){t.getImgList()}),50);case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())}))}))},checkDependencies:function(){var t=this;return new Promise((function(e,i){var r=!!window.UE&&!!window.UEDITOR_CONFIG&&0!==Object.keys(window.UEDITOR_CONFIG).length&&!!window.UE.getEditor;r?e():window.loadEnv?window.loadEnv.on("scriptsLoaded",(function(){e()})):(window.loadEnv=new c,t.loadConfig().then((function(){return t.loadCore()})).then((function(){e(),window.loadEnv.emit("scriptsLoaded")})))}))},loadConfig:function(){var t=this;return new Promise((function(e,i){if(window.UE&&window.UEDITOR_CONFIG&&0!==Object.keys(window.UEDITOR_CONFIG).length)e();else{var r=document.createElement("script");r.type="text/javascript",r.src=t.mixedConfig.UEDITOR_HOME_URL+"ueditor.config.js",document.getElementsByTagName("head")[0].appendChild(r),r.onload=function(){window.UE&&window.UEDITOR_CONFIG&&0!==Object.keys(window.UEDITOR_CONFIG).length?e():console.error("加载ueditor.config.js失败,请检查您的配置地址UEDITOR_HOME_URL填写是否正确!\n",r.src)}}}))},loadCore:function(){var t=this;return new Promise((function(e,i){if(window.UE&&window.UE.getEditor)e();else{var r=document.createElement("script");r.type="text/javascript",r.src=t.mixedConfig.UEDITOR_HOME_URL+"ueditor.all.min.js",document.getElementsByTagName("head")[0].appendChild(r),r.onload=function(){window.UE&&window.UE.getEditor?e():console.error("加载ueditor.all.min.js失败,请检查您的配置地址UEDITOR_HOME_URL填写是否正确!\n",r.src)}}}))},setContent:function(t){t===this.editor.getContent()||this.editor.setContent(t)},getImgList:function(){var t=this.editor.getContent(),e=/<img[^>]* src=['"](http[s]*:\/\/[^'"]+)[^>]*>/g;this.imgList=t.match(e)||[]},setNewImg:function(t){var e=this,i=t.match(/src=['"]?([^'"]*)['"]?/i)[1];i=i.replace(/(\?|#)[^'"]*/,"");var r={url:i};p["a"].post("/admin/file/downloadFromNet.jhtml",r).then((function(i){var r=e.editor.getContent();r=r.replace(t,'<img src="'.concat(i.path,'" style="max-width: 100%;">')),e.$emit("input",r)}))}},beforeDestroy:function(){this.editor&&this.editor.destroy&&this.editor.destroy()},watch:{value:{handler:function(t){var e=this;switch(this.status){case 0:this.status=1,this.initValue=t,this.checkDependencies().then((function(){return e.initEditor()}));break;case 1:this.initValue=t;break;case 2:this.setContent(t),setTimeout((function(){e.getImgList()}),50);break;default:break}},immediate:!0},imgList:function(t){var e,i=Object(n["a"])(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.setNewImg(r)}}catch(a){i.e(a)}finally{i.f()}},disabled:function(t){t?this.editor.setDisabled():this.editor.setEnabled()}}},f=u,m=(i("c708"),i("2877")),g=Object(m["a"])(f,o,s,!1,null,null,null),y=g.exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"biz-editor-toolbar"},t._l(t.toolbars,(function(e,r){return i("div",{key:r,staticClass:"toolbar-row"},t._l(e,(function(e,a){return i("div",{key:a,staticClass:"toolitem"},["toolbtn"===e.type?i("ToolButton",{attrs:{toolbar:e},on:{"on-toolbutton-click":t.handleButtonClick}}):t._e(),"toolcolorpicker"===e.type?i("ToolColorPicker",{ref:"picker",refInFor:!0,attrs:{toolbar:e},on:{"on-toolpicker-click":t.handleButtonClick}}):t._e(),"toolselect"===e.type?i("ToolSelect",{ref:"picker",refInFor:!0,attrs:{toolbar:e},on:{"on-toolselect-click":t.handleButtonClick}}):t._e(),"toolinput"===e.type?i("ToolInput",{ref:"inputPicker",refInFor:!0,attrs:{toolbar:e},on:{"on-toolinput-click":t.handleButtonClick}}):t._e(),"separator"===e.type?i("span",{key:r+"|"+a,staticClass:"toolseparator"}):t._e()],1)})),0)})),0)},v=[],S={bind:function(t,e,i){function r(i){if(t.contains(i.target))return!1;e.expression&&e.value(i)}t.__vueClickOutside__=r,document.addEventListener("click",r)},update:function(){},unbind:function(t,e){document.removeEventListener("click",t.__vueClickOutside__),delete t.__vueClickOutside__}},x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.onListHide,expression:"onListHide"}],class:"editor-toolbar-input toolbar-input-"+t.toolbar.name},[i("el-tooltip",{attrs:{"popper-class":"euditor-tip",effect:"dark",content:t.toolbar.title,placement:"top",enterable:!1}},[i("div",{staticClass:"btn-c",on:{click:t.onListShow}},[i("input",{ref:"input",staticClass:"edui-input",attrs:{type:"text"},domProps:{value:t.toolbar.value},on:{blur:t.checkInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.blur(e)}}}),i("div",{staticClass:"edui-button edui-select"},[i("i",{staticClass:"triangle"})])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"edui-toolbar-selectlist"},[i("ul",t._l(t.options,(function(e,r){return i("li",{key:r,on:{click:function(i){return t.onSelect(e.value)}}},[e.value==t.toolbar.value?i("i",{staticClass:"el-icon-check"}):t._e(),i("span",[t._v(t._s(e.label))])])})),0)])],1)},w=[],_={name:"EToolInput",props:{toolbar:Object},directives:{clickoutside:S},components:{},data:function(){return{visible:!1,options:[{label:"10px",value:"10px"},{label:"11px",value:"11px"},{label:"12px",value:"12px"},{label:"14px",value:"14px"},{label:"16px",value:"16px"},{label:"18px",value:"18px"},{label:"20px",value:"20px"},{label:"24px",value:"24px"},{label:"36px",value:"36px"}]}},methods:{onListShow:function(){this.visible=!this.visible},onListHide:function(){this.visible=!1},onSelect:function(t){this.$emit("on-toolinput-click",this.toolbar.name,t),this.onListHide()},checkInput:function(t){var e=t.target.value;this.$emit("on-toolinput-click",this.toolbar.name,e),this.onListHide()},blur:function(){this.$refs.input.blur()}}},U=_,k=(i("92cd"),Object(m["a"])(U,x,w,!1,null,null,null)),F=k.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"editor-toolbar-btn toolbar-btn-"+t.toolbar.name+t.toolbar.value},[i("el-tooltip",{attrs:{"popper-class":"euditor-tip",effect:"dark",content:t.toolbar.title,placement:"top",enterable:!1}},[i("div",{staticClass:"toolbar-btn",class:{checked:this.checked},attrs:{disabled:t.disabled},on:{click:t.onClick}},[i("i",{staticClass:"weui_edui_icon"})])])],1)},z=[],T={name:"EToolButton",props:{toolbar:Object,imageFloatMask:Boolean},computed:{disabled:function(){return this.toolbar.disabled},checked:function(){return this.toolbar.checked}},methods:{onClick:function(){this.$emit("on-toolbutton-click",this.toolbar.name,this.toolbar.value)}},mounted:function(){}},I=T,A=(i("c820"),Object(m["a"])(I,C,z,!1,null,null,null)),B=A.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.onListHide,expression:"onListHide"}],class:"editor-toolbar-select toolbar-select-"+t.toolbar.name},[i("el-tooltip",{attrs:{"popper-class":"euditor-tip",effect:"dark",content:t.toolbar.title,placement:"top",enterable:!1}},[i("div",{staticClass:"btn-c",on:{click:t.onListShow}},[i("div",{staticClass:"edui-button"},[i("i",{staticClass:"edui-toolbar-icon"})]),i("div",{staticClass:"edui-button edui-select"},[i("i",{staticClass:"triangle"})])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"edui-toolbar-selectlist"},[i("ul",t._l(t.options,(function(e,r){return i("li",{key:r,on:{click:function(i){return t.onSelect(e.value)}}},[e.value==t.toolbar.value?i("i",{staticClass:"el-icon-check"}):t._e(),i("span",[t._v(t._s(e.label))])])})),0)])],1)},L=[],M={name:"EToolSelect",props:{toolbar:Object},directives:{clickoutside:S},components:{},data:function(){return{visible:!1}},computed:{options:function(){return"lineheight"===this.toolbar.name?[{label:"1",value:1},{label:"1.5",value:1.5},{label:"1.75",value:1.75},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}]:"indentboth"===this.toolbar.name?[{label:"无",value:"0px"},{label:"8",value:"8px"},{label:"16",value:"16px"},{label:"32",value:"32px"},{label:"48",value:"48px"}]:[]}},methods:{onListShow:function(){this.visible=!this.visible},onListHide:function(){this.visible=!1},onSelect:function(t){this.onListHide(),this.$emit("on-toolselect-click",this.toolbar.name,t)}}},R=M,N=(i("9056"),Object(m["a"])(R,E,L,!1,null,null,null)),D=N.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.onListHide,expression:"onListHide"}],class:"editor-toolbar-color-picker toolbar-color-picker-"+t.toolbar.name},[i("el-tooltip",{attrs:{"popper-class":"euditor-tip",effect:"dark",content:t.toolbar.title,placement:"top",enterable:!1}},[i("div",{staticClass:"btn-c",on:{click:t.onListShow}},[i("div",{staticClass:"edui-button"},[i("i",{staticClass:"edui-toolbar-icon"}),i("i",{staticClass:"colorbar",style:{backgroundColor:this.toolbar.value}})]),i("div",{staticClass:"edui-button edui-select"},[i("i",{staticClass:"triangle"})])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"edui-toolpicker-panel"},[i("div",{staticClass:"recent_color color_box"},[i("p",{staticClass:"title"},[t._v("最近使用颜色")]),i("div",{}),i("div",{staticClass:"clear",attrs:{title:"清除颜色"},on:{click:t.removeColor}}),i("div",{staticClass:"item-wrapper"},t._l(t.recentColorList,(function(e,r){return i("div",{key:r,staticClass:"b-item",style:{backgroundColor:e},attrs:{title:e},on:{click:function(i){return t.onSelect(e)}}})})),0)]),i("div",{staticClass:"basic_color color_box"},[i("p",{staticClass:"title"},[t._v("基本色")]),i("div",{staticClass:"item-wrapper"},t._l(t.baseColorList,(function(e,r){return i("div",{key:r,staticClass:"b-item",style:{backgroundColor:e},attrs:{title:e},on:{click:function(i){return t.onSelect(e)}}})})),0)]),i("div",{staticClass:"input_color"},[i("div",{staticClass:"preview",style:{backgroundColor:t.toolbar.value},on:{click:function(e){return t.onSelect("#"+t.toolbar.value)}}}),i("div",{staticClass:"input_wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.toolbar.value,expression:"toolbar.value"}],attrs:{type:"text"},domProps:{value:t.toolbar.value},on:{input:function(e){e.target.composing||t.$set(t.toolbar,"value",e.target.value)}}})]),i("div",{staticClass:"js_ok",on:{click:function(e){return t.onSelect(t.toolbar.value)}}},[t._v("确认")])])])],1)},O=[],G=(i("a434"),{name:"EToolColorPicker",props:{toolbar:Object},directives:{clickoutside:S},components:{},data:function(){return{visible:!1,baseColorList:["#ffffff","#ffd7d5","#ffdaa9","#fffed5","#d4fa00","#73fcd6","#a5c8ff","#ffacd5","#ff7faa","#d6d6d6","#ffacaa","#ffb995","#fffb00","#73fa79","#00fcff","#78acfe","#d84fa9","#ff4f79","#b2b2b2","#d7aba9","#ff6827","#ffda51","#00d100","#00d5ff","#0080ff","#ac39ff","#ff2941","#888888","#7a4442","#ff4c00","#ffa900","#3da742","#3daad6","#0052ff","#7a4fd6","#d92142","#000000","#7b0c00","#ff4c41","#d6a841","#407600","#007aaa","#021eaa","#797baa","#ab1942"]}},computed:{recentColorList:function(){var t=window.localStorage.recentColorList;return t=t?JSON.parse(t):[],t}},methods:{onListShow:function(){this.visible=!0},onListHide:function(){this.visible=!1},removeColor:function(){var t="backcolor"===this.toolbar.name?"background-color":"color";this.$emit("on-toolpicker-click","removeformat","",t),this.toolbar.value="#FFFFFF",this.onListHide()},onSelect:function(t){this.$emit("on-toolpicker-click",this.toolbar.name,t),this.onListHide(),this.storeRecentColor(t)},storeRecentColor:function(t){for(var e=this.recentColorList,i=e.unshift(t),r=1;r<i;r++)if(e[r]===t){e.splice(r,1),i--;break}i>8&&(e.length=9),window.localStorage.recentColorList=JSON.stringify(e)}}}),V=G,H=(i("51a1"),Object(m["a"])(V,P,O,!1,null,null,null)),j=H.exports,W={name:"toolbar-component",components:{ToolInput:F,ToolButton:B,ToolSelect:D,ToolColorPicker:j},directives:{clickoutside:S},props:{listVisible:Boolean,imageFloatMask:Boolean,toolbars:{type:Array,default:function(){return[[{name:"undo",title:"撤销",type:"toolbtn",status:"disabled"},{name:"redo",title:"重做",type:"toolbtn",status:"disabled"},{type:"separator"},{name:"fontsize",title:"字号",type:"toolinput"},{name:"blockquote",title:"引用",type:"toolbtn",status:"checked"},{name:"horizontal",title:"分割线",type:"toolbtn",status:""},{name:"removeformat",title:"清除格式",type:"toolbtn",status:""},{name:"formatmatch",title:"格式刷",type:"toolbtn",status:""},{name:"simpleupload",title:"图片上传",type:"toolbtn",status:""},{name:"insertvideo",title:"视频",type:"toolbtn",status:""}],[{name:"bold",title:"加粗",type:"toolbtn",status:"checked"},{name:"italic",title:"斜体",type:"toolbtn",status:"checked"},{name:"underline",title:"下划线",type:"toolbtn",status:""},{name:"forecolor",title:"字体颜色",type:"toolcolorpicker"},{name:"backcolor",title:"背景色",type:"toolcolorpicker"},{type:"separator"},{name:"indent",title:"首行缩进",type:"toolbtn",status:"checked"},{type:"separator"},{name:"justify",title:"居左对齐",type:"toolbtn",value:"left",status:"checked"},{name:"justify",title:"居中对齐",type:"toolbtn",value:"center",status:"checked"},{name:"justify",title:"居右对齐",type:"toolbtn",value:"right",status:"checked"},{name:"justify",title:"两端对齐",type:"toolbtn",value:"justify",status:"checked"},{type:"separator"},{name:"rowspacing",title:"段前距",type:"toolselect",value:"top"},{name:"rowspacing",title:"段后距",type:"toolselect",value:"bottom"},{name:"lineheight",title:"行间距",type:"toolselect"},{type:"separator"},{name:"orderedlist",title:"有序列表",type:"toolselect",prefix:"insert"},{name:"unorderedlist",title:"无序列表",type:"toolselect",prefix:"insert"},{type:"separator"},{name:"imagefloat",title:"默认",type:"toolbtn",value:"none",status:"checked disabled"},{name:"imagefloat",title:"左浮动",type:"toolbtn",value:"left",status:"checked disabled"},{name:"imagefloat",title:"右浮动",type:"toolbtn",value:"right",status:"checked disabled"},{name:"imagefloat",title:"居中",type:"toolbtn",value:"center",status:"checked disabled"},{name:"insertImage",title:"图片",type:"extra-button"}]]}}},data:function(){return{}},methods:{clearVisible:function(){this.$refs.picker.forEach((function(t){t.onListHide()})),this.$refs.inputPicker.forEach((function(t){t.onListHide()}))},handleButtonClick:function(t,e){this.$emit("on-editor-execCommand",t,e)}}},Z=W,Y=(i("6f9b"),Object(m["a"])(Z,b,v,!1,null,null,null)),$=Y.exports,J=i("016c").MP4Box,X={name:"biz-editor",components:{Toolbar:$,EditorBody:y},props:{value:{type:String,default:""},height:{type:String,default:"300px"},width:{type:String,default:"360px"},hasImage:{type:Boolean,default:function(){return!0}},hasVideo:{type:Boolean,default:function(){return!1}},hasLink:{type:Boolean,default:function(){return!1}},canPaste:{type:Boolean,default:function(){return!0}},disabled:{type:Boolean,default:function(){return!1}}},data:function(){return{dataRatio:0,fileData0:{type:"0"},fileData3:{type:"2"},serverUrl:"/admin/file/uploads.jhtml",percentage:0,editor:null,isImage:!1,toolbarsData:[[{name:"fontsize",title:"字号",type:"toolinput",value:"16px"},{name:"bold",title:"加粗",type:"toolbtn",value:"",checked:!1},{name:"italic",title:"斜体",type:"toolbtn",value:"",checked:!1},{name:"underline",title:"下划线",type:"toolbtn",value:"",checked:!1},{type:"separator"},{name:"forecolor",title:"字体颜色",type:"toolcolorpicker",value:"#000000",visible:!0},{name:"backcolor",title:"背景色",type:"toolcolorpicker",value:"#FFFFFF",visible:!0}],[{name:"indent",title:"首行缩进",type:"toolbtn",value:"",checked:!1},{name:"indentboth",title:"两端缩进",type:"toolselect",label:"无",value:"0px"},{name:"justify",title:"居左对齐",type:"toolbtn",value:"left",checked:!1},{name:"justify",title:"居中对齐",type:"toolbtn",value:"center",checked:!1},{name:"justify",title:"居右对齐",type:"toolbtn",value:"right",checked:!1},{name:"justify",title:"两端对齐",type:"toolbtn",value:"justify",checked:!1},{name:"lineheight",title:"行间距",type:"toolselect",label:"1",value:1}]]}},computed:{config:function(){var t={};return t.initialFrameHeight=parseInt(this.height),t},style:function(){var t={};return this.width&&(-1!==this.width.indexOf("%")?t.width=this.width:t.width=parseInt(this.width)+2+"px"),t},toolbars:function(){var t=this.toolbarsData;return this.hasImage&&t[0].push({name:"uploadimage",title:"图片",type:"toolbtn",value:"",checked:!1}),this.hasVideo&&t[0].push({name:"uploadvideo",title:"视频",type:"toolbtn",value:"",checked:!1}),this.hasLink&&t[0].push({name:"link",title:"超链接",type:"toolbtn",value:"",checked:!1}),t}},watch:{},created:function(){},methods:{init:function(t){this.editor=t,this.editor.addListener("selectionchange",this.onSelectionChange),this.onFocus()},onFocus:function(){this.editor.addListener("focus",function(){console.log("focus"),this.$refs.toolbar.clearVisible()}.bind(this)),this.editor.addListener("blur",function(){console.log("blur"),this.$refs.toolbar.clearVisible()}.bind(this))},execCommand:function(t,e){"uploadimage"===t?(this.isImage=!0,this.$refs.imageUploader.$refs["upload-inner"].$refs.input.click()):"uploadvideo"===t?(this.isImage=!1,this.$refs.videoUploader.$refs["upload-inner"].$refs.input.click()):"link"===t?this.$emit("openLink"):this.editor.execCommand(t,e)},execCommandLink:function(t){this.editor.execCommand("link",{href:t})},onInput:function(t){this.$emit("input",t)},onSelectionChange:function(){var t,e=Object(n["a"])(this.toolbars);try{for(e.s();!(t=e.n()).done;){var i,r=t.value,a=Object(n["a"])(r);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=["bold","italic","underline","indent"];if(-1!==s.indexOf(o.name)){var l=this.editor.queryCommandState(o.name);o.checked=1===l||!0===l}var h=["justify"];if(-1!==h.indexOf(o.name)){var d=this.editor.queryCommandValue(o.name);o.checked=!1,o.value===d&&(o.checked=!0)}var p=["forecolor","backcolor","lineheight","fontsize","indentboth"];if(-1!==p.indexOf(o.name)){var c=this.editor.queryCommandValue(o.name);o.value=c}}}catch(u){a.e(u)}finally{a.f()}}}catch(u){e.e(u)}finally{e.f()}},beforeUpload:function(t){var e=this;return t.size/1024/1024>100?(this.$emit("video-oversize",{message:"视频文件过大，最大支持100M",type:"warning"}),!1):"video/ogg"===t.type||"video/webm"===t.type||("video/mp4"===t.type?new Promise((function(i,r){var a="MediaSource"in window,n=function(t){for(var r=[],n=0;n<t.tracks.length;++n)r.push(t.tracks[n].codec);if(a){var o='video/mp4; codecs="'+r.join(", ")+'"';MediaSource.isTypeSupported(o)?i(!0):e.$emit("video-wrong-format",{message:"视频格式不支持,仅支持ogg、webm和部分mp4",type:"warning"})}},o=new FileReader;o.readAsDataURL(t),o.addEventListener("load",(function(){var t=o.result;e.$refs.videoTool.src=t,e.$refs.videoTool.addEventListener("loadedmetadata",(function(){var t=e.$refs.videoTool.videoWidth/e.$refs.videoTool.videoHeight;e.dataRatio=t<1.33?1.33:t}))}));var s=new FileReader;s.readAsArrayBuffer(t),s.addEventListener("loadend",(function(){var t=s.result;t.fileStart=0;var e=new J;e.onReady=n,e.appendBuffer(t)}))})):(this.$emit("video-wrong-format",{message:"视频格式不支持,仅支持ogg、webm和部分mp4",type:"warning"}),!1))},handleProgress:function(t){this.percentage=Number.parseInt(t.percent)},uploadSuccess:function(t,e){this.isImage?this.editor.execCommand("inserthtml",'<img src="'.concat(t.fis[0].url,'" style="max-width: 100%;">')):(this.percentage=0,this.imsertVideo(t))},imsertVideo:function(t){var e=t.fis[0].url.substring(0,t.fis[0].url.lastIndexOf("."))+".jpg",i='<p style="display: none;">0</p></p><p><video poster="'.concat(e,'" style="width:100%;" controls ><source type="video/mp4" src="').concat(t.fis[0].url,'" ></video></p>');this.editor.execCommand("inserthtml",i)}}},q=X,Q=(i("6e0b"),Object(m["a"])(q,r,a,!1,null,null,null)),K=Q.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"biz-eidtor-template",style:t.templateStyle},[i("el-menu",{attrs:{"default-active":"0"},on:{select:t.handleSelect}},[i("el-menu-item",{attrs:{index:"0"}},[i("template",{slot:"title"},[i("span",[t._v("样式")])])],2),i("el-menu-item",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("span",[t._v("模板")])])],2)],1),"0"===t.selectedNav?i("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("el-tab-pane",{attrs:{label:"标题",name:"first"}},t._l(t.styleTitles,(function(e){return i("div",{key:e.index,staticClass:"tab-item",domProps:{innerHTML:t._s(e)},on:{click:function(i){return t.templateSelect(e)}}})})),0),i("el-tab-pane",{attrs:{label:"正文",name:"second"}},t._l(t.styleContents,(function(e){return i("div",{key:e.index,staticClass:"tab-item",domProps:{innerHTML:t._s(e)},on:{click:function(i){return t.templateSelect(e)}}})})),0),i("el-tab-pane",{attrs:{label:"引导",name:"third"}},t._l(t.styleGuides,(function(e){return i("div",{key:e.index,staticClass:"tab-item",domProps:{innerHTML:t._s(e)},on:{click:function(i){return t.templateSelect(e)}}})})),0),i("el-tab-pane",{attrs:{label:"图文",name:"fourth"}},t._l(t.styleImgs,(function(e){return i("div",{key:e.index,staticClass:"tab-item",domProps:{innerHTML:t._s(e)},on:{click:function(i){return t.templateSelect(e)}}})})),0),i("el-tab-pane",{attrs:{label:"布局",name:"fifth"}},t._l(t.styleLayouts,(function(e){return i("div",{key:e.index,staticClass:"tab-item",domProps:{innerHTML:t._s(e)},on:{click:function(i){return t.templateSelect(e)}}})})),0),i("el-tab-pane",{attrs:{label:"行业",name:"sixth"}},t._l(t.styleTrades,(function(e){return i("div",{key:e.index,staticClass:"tab-item",domProps:{innerHTML:t._s(e)},on:{click:function(i){return t.templateSelect(e)}}})})),0)],1):t._e(),"1"===t.selectedNav?i("div",[t._m(0),i("div",{staticClass:"el-tabs__content"},t._l(t.templates,(function(e){return i("div",{key:e.index,staticClass:"tab-item",domProps:{innerHTML:t._s(e)},on:{click:function(i){return t.templateSelect(e)}}})})),0)]):t._e()],1)},et=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-tabs__header is-top"},[i("div",{staticClass:"el-tabs__nav-wrap is-top"},[i("div",{staticClass:"el-tabs__nav-scroll"},[i("div",{staticClass:"el-tabs__nav",staticStyle:{transform:"translateX(0px)"},attrs:{role:"tablist"}},[i("div",{staticClass:"el-tabs__item is-top",staticStyle:{width:"376px","text-align":"center"},attrs:{role:"tab",tabindex:"-1"}},[t._v("系统模板")])])])])])}],it={name:"BizEditorTemplate",props:{templateStyle:{type:Object,default:function(){return{width:"445px",height:"100%"}}}},data:function(){return{selectedNav:"0",activeTab:"first",styleTitles:['<br>\n        <p style="margin: 8px 0px 0px; padding: 0px; font-weight: bold; font-size: 16px; line-height: 28px; max-width: 100%; color: rgb(239, 112, 96); min-height: 32px; border-bottom-width: 2px; border-bottom-style: solid; border-color: rgb(239, 112, 96); text-align: justify;">\n          <span class="autonum" placeholder="1" style="border-radius: 80% 100% 90% 20%; color: #FFFFFF; display: block; float: left; line-height: 20px; margin: 0px 8px 0px 0px; max-width: 100%; padding: 4px 10px; word-wrap: break-word !important; background-color: #EF7060;" data-original-title="" title="">1</span><strong class="brush" data-brushtype="text"></strong>\n        </p>\n        <br>','<br>\n        <div style="clear: both; padding: 0px; border: 0px none; margin:5px 0px;">\n          <div style="border-top-width: 2.5px; border-top-style: solid; border-color: rgb(239, 112, 96); font-size: 1em; font-weight: inherit; text-decoration: inherit; color: rgb(255, 255, 255); box-sizing: border-box;">\n            <div style="border: 0px rgb(239, 112, 96); margin: 2px 0px 0px; overflow: hidden; padding: 0px; color: inherit;">\n              <div style="display: inline-block; font-size: 1em; font-family: inherit; font-weight: inherit; text-align: inherit; text-decoration: inherit; color: inherit; border-color: rgb(239, 112, 96); background-color: transparent;">\n                <div class="brush" data-bcless="darken" data-brushtype="text" style="display: inline-block; line-height: 1.4em; padding: 5px 10px; height: 32px; vertical-align: top; font-size: 16px; font-family: inherit; font-weight: bold; float: left; color: inherit; border-color: rgb(212, 43, 21); box-sizing: border-box !important; background: rgb(239, 112, 96);">\n                  请输入标题\n                </div>\n                <div style="display: inline-block; vertical-align: top; font-size: 16px; width: 0px; height: 0px; border-top-width: 32px; border-top-style: solid; border-top-color: rgb(239, 112, 96); border-right-width: 32px; border-right-style: solid; border-right-color: transparent; border-top-right-radius: 4px; border-bottom-left-radius: 2px; color: inherit; box-sizing: border-box !important;">\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="margin: 0.8em 0 0.5em 0;font-size: 16px;line-height: 32px; font-weight: bold;">\n          <div style="display: inline-block; float: left; min-width: 32px; height: 32px; vertical-align: top; text-align: center;  ">\n            <div style="display: table; width: 100%; color: inherit; border-color: rgb(72, 192, 163);" data-width="100%">\n              <div style="display: table-cell;text-indent: 0; vertical-align: middle; font-style: normal; color: rgb(255, 255, 255); border-color: rgb(72, 192, 163);">\n                <span class="autonum" style="color:#C6C6C7; font-size:50px" data-original-title="" title="">1</span></div>\n              <div style="height: 70px;margin-left: -6px; margin-top:5px;border-left:1px solid rgb(198,198,199);background-color: rgb(254,254,254); box-sizing: border-box;transform: rotate(35deg);-webkit-transform: rotate(35deg);-moz-transform: rotate(35deg);-o-transform: rotate(35deg);"></div>\n            </div>\n          </div>\n          <div style="margin-left: 40px;padding-top:18px; font-style:normal;font-size:30px; color: #737373; border-color: rgb(72, 192, 163);">\n            <span class="brush" data-brushtype="text" style="color:#737373; font-size:20px">请输入标题</span></div>\n        </div>\n        <br>','<br>\n        <div class="" style="border-left:5px solid #666765;font-size: 16px;font-weight:bold; line-height: 32px;color:#666;padding: 5px 10px; margin: 10px 0px;">\n          <p>\n            你在跳一个深坑之前，要知道它有多深才行。当你在这个世界上还有快乐可寻的时候，万不可走绝路，否则不久你也许会觉醒，那时后悔就太迟了。 by 席勒\n          </p>\n        </div>\n        <br>'],styleContents:['<br>\n        <div style="margin-top: 0px; padding: 0px 5px; line-height: 10px; color: inherit; border: 1px solid rgb(226, 121, 97);">\n          <div style="padding: 0px; font-size: 16px; color: inherit; height: 8px; margin: -8px 0px 0px 140px; width: 50%; background-color: rgb(254, 254, 254);" data-width="50%">\n            <div style="width: 8px; height: 8px; border-radius: 100%; line-height: 1; box-sizing: border-box; font-size: 18px; text-decoration: inherit; border-color: rgb(226, 121, 97); display: inline-block; margin: 0px; color: inherit; background-color: rgb(226, 121, 97);"></div>\n          </div>\n          <div class="brush" data-style="text-indent: 2em;" style="padding: 0px; line-height: 2em; color: rgb(62, 62, 62); font-size: 14px; margin: 15px;">\n            <p style="text-indent: 2em;">\n              我这个二十岁的人，一再严肃地反省到自己由于孤儿根性养成的怪脾气，我正因为受不了那种令人窒息的忧郁感，这才走上伊豆的旅程。\n            </p>&#8203;<br>\n            <p style="text-indent: 2em;">\n              ——川端康成《伊豆的舞女》\n            </p>\n          </div>\n          <div style="padding: 0px; background-color: rgb(254, 254, 254); font-size: 16px; color: inherit; text-align: right; height: 10px; margin: 0px 0px -4px 25px; width: 65%;" data-width="65%">\n            <div style="margin: 0px auto 1px; border-radius: 100%; line-height: 1; box-sizing: border-box; text-decoration: inherit; border-color: rgb(226, 121, 97); display: inline-block; height: 8px; width: 8px; color: inherit; background-color: rgb(226, 121, 97);"></div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="color: inherit; font-size: 16px; padding: 5px 10px 0px 35px; margin-left: 27px; border-left-width: 2px; border-left-style: dotted; border-left-color: rgb(228, 228, 228);">\n          <div class="autonum" style="width: 32px; height: 32px; margin-left: -53px; margin-top: 23px; color: rgb(255, 255, 255); text-align: center; line-height: 32px; border-radius: 16px; background: rgb(157, 180, 194);" data-original-title="" title="">\n            1\n          </div>\n          <div class="" style="margin-top: -30px;padding-bottom: 10px; color: inherit;">\n            <p>\n              是真的有过那种，巴不得把自己的生活全盘托出奉献给谁，那人却讪笑着推诿着时远时近的经历，才开始觉得，比起一段风雨飘摇的感情，最该关照的永远是自己。 by 陈大力\n            </p>\n          </div>\n        </div>\n        <br>','<br>\n        <blockquote style="margin: 3px; padding: 10px 15px; border-width: 3px; border-color: rgb(102, 142, 104); border-top-left-radius: 50px; border-bottom-right-radius: 50px; box-shadow: rgb(165, 165, 165) 5px 5px 2px; background-color: rgb(250, 250, 250);">\n          <div class="brush" data-style="margin-top: 15px; margin-bottom: 0px; padding: 0px; color: rgb(107, 77, 64); line-height: 2em; font-size: 20px; border-color: rgb(107, 77, 64);font-size: 18px;font-weight:bold;">\n            <p style="margin-top: 15px; margin-bottom: 0px; padding: 0px; color: rgb(102, 142, 104); line-height: 2em; font-size: 20px; border-color: rgb(102, 142, 104);">\n              <span style="font-size:18px"><strong style="border-color: rgb(102, 142, 104); color: inherit;">读而思</strong></span>\n            </p>\n          </div>\n          <p style="margin-top: -10px; margin-bottom: 0px; padding: 0px; line-height: 2em; min-height: 1.5em; color: inherit;">\n            <span style="font-size:12px"><strong class="brush" data-brushtype="text" style="border-bottom-left-radius: 20px; border-bottom-right-radius: 20px; color: rgb(255, 255, 255); font-size: 13px; padding: 0px 15px; background-color: rgb(102, 142, 104);">duersi</strong></span>\n          </p>\n          <div class="brush" data-style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; font-size: 14px; min-height: 1.5em; color: inherit;">\n            <p>\n              <span style="font-size:14px">编辑完成后，将内容复制粘贴到微信后台素材管理的编辑器中即可。</span>\n            </p>\n            <p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; line-height: 2em; font-size: 16px; min-height: 1.5em; color: inherit;">\n              <br>\n            </p>\n          </div>\n        </blockquote>\n        <br>','<br>\n        <div class="layout" style="margin: 5px auto; border: 3px solid rgb(89, 155, 171); padding: 5px;">\n          <div data-bcless="lighten" style="border: 1px solid rgb(157, 196, 205); padding: 15px; text-align: center; color: inherit;">\n            <p class="title" style="color: inherit;font-size: 12px;">\n              <span class="brush" data-brushtype="text"></span>\n            </p>\n            <p style="color:inherit;">\n              <strong style="color:inherit"><span class="brush" style="color:inherit; font-size:16px">操作方便才是硬道理</span></strong>\n            </p>\n          </div>\n        </div>\n        <br>','<br>\n        <div class="layout" style="border: 0px; margin: 5px auto; box-sizing: border-box; padding: 0px;">\n          <div style="height: 25px; box-sizing: border-box; color: inherit;">\n            <div style="height: 100%; width: 50px; float: left; border-top-width: 2px; border-top-style: solid; border-color: rgb(172, 29, 16); border-left-width: 2px; border-left-style: solid; box-sizing: border-box; color: inherit;"></div>\n            <div style="display: inline-block; color: rgb(172, 29, 16); clear: both; box-sizing: border-box; border-color: rgb(172, 29, 16);"></div>\n          </div>\n          <div class="brush" data-style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;" style="margin: -0.8em 0.3em; padding: 0.8em; box-sizing: border-box; color: inherit;">\n            <p style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;">\n              反正人生不是在此处失败，就是在彼处失败。失败者才不管别的有多重要。任性一回，不然一辈子都憋屈。 by 毛利\n            </p>\n          </div>\n          <div style="height: 25px; box-sizing: border-box; color: inherit;">\n            <div style="height: 100%; width: 50px; float: right; border-bottom-width: 2px; border-bottom-style: solid; border-color: rgb(172, 29, 16); border-right-width: 2px; border-right-style: solid; box-sizing: border-box; color: inherit;"></div>\n          </div>\n        </div>\n        <br>'],styleGuides:['<br>\n        <p style="text-align:center;">\n          <img data-id="87820" data-role="guide-img" title="引导关注" src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei9pYW5xMDNVVVdHbUt6Y2V0amhySjBUaWE5UHhUZFNLcWJWam9HNXNYM3hpYmRGbkdlZ1NSSldhVFRqQzR3d0VhVUxaUWhZT1duVnVsU2liNkJWd3BQOGljV2VRLzA/d3hfZm10PWdpZg==" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei9pYW5xMDNVVVdHbUt6Y2V0amhySjBUaWE5UHhUZFNLcWJWam9HNXNYM3hpYmRGbkdlZ1NSSldhVFRqQzR3d0VhVUxaUWhZT1duVnVsU2liNkJWd3BQOGljV2VRLzA/d3hfZm10PWdpZg==" style="display: inline;width:95%">\n        </p>\n        <br>','<br>\n        <div style="border: none; width: 98%; margin-right: auto; margin-left: auto;" data-width="98%">\n          <div style="width: 100%; border: 1px solid rgb(53, 49, 53); padding-bottom: 3em;box-sizing:border-box;" data-width="100%">\n            <div style="width: 100%; background: rgb(53, 49, 53); height: auto; overflow: hidden; box-sizing: border-box; padding: 3em 2em 6em; text-align: center;" data-width="100%">\n              <div style="margin-right: 8px;width: 100%;font-size: 3em;font-family: arial;color: #fff;line-height: 0.8em;display: inline-block;text-align:center;font-weight: bolder;vertical-align: top;" data-width="100%"></div><br>\n              <div class="brush" style="font-size:1em;line-height:1.5em;color:#fff;">\n                <p>\n                  谁可相依？近处，要有可以依傍的亲人朋友，远处，要有神或者佛；实处，要有金钱，虚处，要有信仰。远近都有，虚实结合，才能填补人生的各种窟窿，抵挡生命中各种不妥，不至于凄云惨雾。 by 韩松落\n                </p>\n              </div>\n            </div>\n            <div style="width: 40%; margin-right: auto; margin-left: auto; overflow: hidden; margin-top: -4em;" data-width="40%">\n              <img style="width:100%;border:1px solid #1F1E20;" src="/resources/admin/images/article/qrcode.jpg" data-ke-src="/resources/admin/images/article/qrcode.jpg" data-width="100%">\n            </div>\n            <div style="width: 100%; font-size: 1.4em; margin-top: 0.2em; margin-bottom: 0.2em; text-align: center;" data-width="100%">\n              V服爱车\n            </div>\n            <div style="width: 100%; font-size: 1em; color: rgb(126, 126, 126); margin-top: 0.2em; margin-bottom: 0.2em; text-align: center;" data-width="100%">\n              长按识别二维码，关注V服爱车\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <p class="brush" style="margin-top: 0px; margin-bottom: 0px; font-size: 15.5556px; padding: 0px; max-width: 100%; min-height: 1.5em; line-height: 2em; word-wrap: break-word; word-break: normal; border-radius: 5px; color: rgb(255, 255, 255); text-align: center; background-color: rgb(128, 177, 53);" data-brushtype="text">\n          ↓↓↓ 点击"阅读原文" 【查看更多信息】 &nbsp;\n        </p>\n        <br>','<br>\n        <div style="border: none; margin: 0.8em 0px 0.3em; box-sizing: border-box; padding: 0px;">\n          <div style="text-align: center; text-decoration: inherit; color: rgb(255, 255, 255); border-color: rgb(123, 154, 181); box-sizing: border-box;">\n            <div style="width: 0px; margin: 0px 0px 0px 90px; border-bottom-width: 0.8em; border-bottom-style: solid; border-bottom-color: rgb(123, 154, 181); border-top-color: rgb(123, 154, 181); box-sizing: border-box; height: 10px; color: inherit; border-left-width: 0.8em !important; border-left-style: solid !important; border-left-color: transparent !important; border-right-width: 0.8em !important; border-right-style: solid !important; border-right-color: transparent !important;"></div>\n            <div class="brush" data-brushtype="text" style="padding: 0.5em; line-height: 1.2em; font-size: 1em; box-sizing: border-box; color: inherit; border-color: rgb(123, 154, 181); border-radius: 4px; background-color: rgb(123, 154, 181);">\n              <strong style="color:inherit">点击标题下「蓝色微信名」可快速关注</strong>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <p style="text-align:center;">\n          <img title="猫抓毛线球引导分享" src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei9jWlYyaFJwdUFQak9qSUVBMU9qU2ljWEhjaWE5TWo5UlFqc09RVTh4R1hpYVlYWWZpYm9Nb0FKbXJyVHpPSjRtWDgxOXZqaGpYaG9EZ0lzZXBBdEs2S3k2OEEvMA==" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei9jWlYyaFJwdUFQak9qSUVBMU9qU2ljWEhjaWE5TWo5UlFqc09RVTh4R1hpYVlYWWZpYm9Nb0FKbXJyVHpPSjRtWDgxOXZqaGpYaG9EZ0lzZXBBdEs2S3k2OEEvMA==" style="display: inline;">\n        </p>\n        <br>'],styleImgs:['<br>\n        <div style="border: 0px; box-sizing: border-box; width: 100%; clear: both; overflow: hidden; padding: 0px;" data-width="100%">\n          <div class="layout" style="box-sizing: border-box; width: 65%; float: left; padding: 0px 0.1em 0px 0px;" data-width="65%">\n            <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUVhUSW9LTkZBN29tSUFCUkRXMlhpYTAzSlNxZU01UFM5Q3loM3JFZXdtVmljYXNZcU5XSWVwMnlBLzA/d3hfZm10PWpwZWc=" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUVhUSW9LTkZBN29tSUFCUkRXMlhpYTAzSlNxZU01UFM5Q3loM3JFZXdtVmljYXNZcU5XSWVwMnlBLzA/d3hfZm10PWpwZWc=" style="box-sizing: border-box; margin: 0px; height: auto !important; visibility: visible !important; width: 100%;" width="100%" height="auto" border="0" opacity="" mapurl="" title="" alt="" data-width="100%">\n          </div>\n          <div class="layout" style="display: inline-block; width: 35%; box-sizing: border-box; float: left; padding: 0px 0px 0px 0.1em;" data-width="35%">\n            <div class="brush" data-brushtype="text" style="box-sizing: border-box; margin-right: 4px; padding: 4px 6px; border-bottom-width: 2px; border-bottom-style: solid; font-size: 1.2em; font-weight: bold;color: rgb(102,97,91); border-color: rgb(102,97,91);">\n              机会论\n            </div>\n            <div class="brush" data-styel="line-height: 2em;" style="box-sizing: border-box; margin-right: 0.3em; padding: 0.3em 0.5em; color: rgb(102,97,91); font-size: 0.9em;">\n              <p style="line-height: 2em;">\n                机会是给有准备的人\n              </p>\n              <p style="line-height: 2em;">\n                但准备的人多了\n              </p>\n              <p style="line-height: 2em;">\n                机会\n              </p>\n              <p style="line-height: 2em;">\n                决定摇号\n              </p>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="text-align:center;">\n          <div style="display:inline-block;text-align:right;">\n            <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUTE0cng2aWJocGdSUWhSYTdpYzBjeWtqSmxoQUFXZlM4aWFkYkx4aDlnMVpzUHBWWUdWT0V3QVRxUS8wP3d4X2ZtdD1qcGVn" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUTE0cng2aWJocGdSUWhSYTdpYzBjeWtqSmxoQUFXZlM4aWFkYkx4aDlnMVpzUHBWWUdWT0V3QVRxUS8wP3d4X2ZtdD1qcGVn" style="border-radius: 50%; display: inline-block; width: 110px; margin: 0px; height: 110px !important;" width="110" height="110" border="0" opacity="" mapurl="" title="" alt="">\n          </div>\n          <div style="border-left-width: 1px; border-left-style: solid; border-color: rgb(173, 167, 105); padding-left: 1em; text-align: left; display: inline-block; height: 6em; vertical-align: top; color: rgb(173, 167, 105); margin-top: 0.5em; margin-left: 10px; padding-top: 5px;">\n            <div class="brush" data-brushtype="text" style="width: 100%; height: 50%; font-size: 1.4em; border-color: rgb(173, 167, 105); color: inherit; margin-bottom: 0.5em;" data-width="100%">\n              计划\n            </div>\n            <div class="brush" data-brushtype="text" style="font-size: 16px; border-color: rgb(173, 167, 105); color: inherit;">\n              = Planning =\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="text-align: center;">\n          <div style="display: inline-block; vertical-align: top; width:50%;" data-width="50%">\n            <div style="width: 8em;display:inline-block;">\n              <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUWFrMHY1Um9SaWNsOWxOcmlheUlyOG83aWF5NFpBekMySGliWkxaRURUOTZON0NWT2dEUHQzajRCSXcvMD93eF9mbXQ9anBlZw==" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUWFrMHY1Um9SaWNsOWxOcmlheUlyOG83aWF5NFpBekMySGliWkxaRURUOTZON0NWT2dEUHQzajRCSXcvMD93eF9mbXQ9anBlZw==" style="border-radius: 50%; width: 8em; margin: 0px; height: auto !important;" width="8em" height="auto" border="0" opacity="" mapurl="" title="" alt="">\n            </div>\n          </div>\n          <div style="display: inline-block; vertical-align: top; border-left-width: 1px;box-sizing:border-box; border-left-style: solid; border-left-color: rgb(139, 162, 176); padding-bottom: 2em; width: 50%; padding-top: 0.5em;" data-width="50%">\n            <div style="border: 1px solid;box-sizing:border-box; color: rgb(255, 255, 255); font-size: 18px; width: 0.8em; height: 0.8em; line-height: 0.8em; margin-left: -0.42em; border-radius: 100%; margin-top: 3em; background-color: rgb(139, 162, 176);"></div>\n            <div style="padding-left: 20px;box-sizing:border-box;margin-top:-4.5em;">\n              <div style="border: 1px solid rgb(139, 162, 176); padding: 10px;box-sizing:border-box;" class="brush">\n                <p style="text-align: left; line-height: 1.75em;">\n                  <span style="font-size: 14px;">一个爱我的人，</span>\n                </p>\n                <p style="text-align: left; line-height: 1.75em;">\n                  <span style="font-size: 14px;">如果爱得讲话结结巴巴，</span>\n                </p>\n                <p style="text-align: left; line-height: 1.75em;">\n                  <span style="font-size: 14px;">语无伦次，</span>\n                </p>\n                <p style="text-align: left; line-height: 1.75em;">\n                  <span style="font-size: 14px;">我就知道他爱我</span>\n                </p>\n                <p style="text-align: left; line-height: 1.75em;">\n                  <span style="font-size: 14px;">——木心</span>\n                </p>\n              </div>\n            </div>\n          </div>\n          <div style="vertical-align: top;box-sizing:border-box; width: 50%; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(139, 162, 176); display: inline-block; margin-right: -2px;" data-width="50%">\n            <div style="padding-right:20px;box-sizing:border-box;">\n              <div style="box-sizing:border-box;border: 1px solid rgb(139, 162, 176); padding: 10px;" class="brush">\n                <p style="text-align: right; line-height: 1.75em;">\n                  <span style="font-size: 14px;">一个爱我的人</span>\n                </p>\n                <p style="text-align: right; line-height: 1.75em;">\n                  <span style="font-size: 14px;">如果爱得讲话结结巴巴</span>\n                </p>\n                <p style="text-align: right; line-height: 1.75em;">\n                  <span style="font-size: 14px;">语无伦次</span>\n                </p>\n                <p style="text-align: right; line-height: 1.75em;">\n                  <span style="font-size: 14px;">我就知道他爱我</span>\n                </p>\n                <p style="text-align: right; line-height: 1.75em;">\n                  <span style="font-size: 14px;">——木心</span>\n                </p>\n              </div>\n            </div>\n          </div>\n          <div style="display: inline-block; vertical-align: top; width: 50%; padding-bottom: 2em;box-sizing:border-box;" data-width="50%">\n            <div style="border: 1px solid; color: rgb(255, 255, 255); font-size: 18px; width: 0.8em; height: 0.8em; line-height: 0.8em; border-radius: 100%; margin-top: 3em; margin-left: -0.34em; background-color: rgb(139, 162, 176);"></div>\n            <div style="width: 8em;display:inline-block;">\n              <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUVFpYmRtZU5wS0tUeGpjWVF1eG9XZ3dFZ0NPZmlhaWE3MEJodTFNZHBpYkFWUEdBTVFDTEpZTWljMGliZy8wP3d4X2ZtdD1qcGVn" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUVFpYmRtZU5wS0tUeGpjWVF1eG9XZ3dFZ0NPZmlhaWE3MEJodTFNZHBpYkFWUEdBTVFDTEpZTWljMGliZy8wP3d4X2ZtdD1qcGVn" style="border-radius: 50%; width: 8em; margin: -64px 0px 0px; height: auto !important;" width="8em" height="auto" border="0" opacity="" mapurl="" title="" alt="">\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="padding:5px;margin:0 auto;text-align:center;">\n          <div style="display:inline-block;">\n            <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei9jWlYyaFJwdUFQamczc3hvVHR5OGRNSDM2U2lhUWxuMG9pY3EzcDRhRTU4aWNSZ0tIUEwyVW9WeFVVTnRkMmNuWm1rT2lhTGtIRUZmelRpYlB4aWFKUG1xSXYwdy8w" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei9jWlYyaFJwdUFQamczc3hvVHR5OGRNSDM2U2lhUWxuMG9pY3EzcDRhRTU4aWNSZ0tIUEwyVW9WeFVVTnRkMmNuWm1rT2lhTGtIRUZmelRpYlB4aWFKUG1xSXYwdy8w" style="width:290px;height:auto !important;" class="assistant">\n          </div>\n          <div style="margin-left: 1%; margin-right: 1%; margin-top: -45px; padding: 15px; color: rgb(123, 123, 111); background: rgb(245, 245, 244);">\n            <div style="border: solid 1px rgb(198,198,198);box-shadow:rgb(220,220,220) 0px 0px 5px;padding:8px;">\n              <img style="width: 100%; margin: 0px;" src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkdObGJjam4yVXd3a21Yc25qU2VqRzJzZnVzUFBNdUliY3Z6RWpXZlBiOGlidTVBdGR4Y1FhbnVqSXlIdzlpYlpHUUYzRktrb2xFYzl6QS8wP3d4X2ZtdD1qcGVn" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkdObGJjam4yVXd3a21Yc25qU2VqRzJzZnVzUFBNdUliY3Z6RWpXZlBiOGlidTVBdGR4Y1FhbnVqSXlIdzlpYlpHUUYzRktrb2xFYzl6QS8wP3d4X2ZtdD1qcGVn" width="100%" height="" border="0" opacity="" mapurl="" title="" alt="" data-width="100%">\n              <div style="margin-top:15px;margin-bottom:5px;" class="brush">\n                <p style="line-height: 1.75; font-size: 14px; color: rgb(112, 112, 112); text-align: justify;">\n                  你是你自己的裁决者。你过去和现在做得有多好，由你自己说了算。别人永远不能审判你，就算是神。\n                </p>\n                <p style="line-height: 1.75; font-size: 14px; color: rgb(112, 112, 112); text-align: right;">\n                  <span style="line-height: 1.75;">——《与神对话》</span>\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="position:relative;width:50%;float:left;" data-width="50%">\n          <div style="width:100%;height:80%;overflow:hidden;" data-width="100%">\n            <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpel9qcGcvemlhZEREUXhiQ0pGYVhuWGZnZjg5anVvSVE1VTF1MWd2M0pJVmpTVHZITFJpYWx4Q2dCM3FEV205azdQc0Frc1NZaHFBcVc5RFFkbGJrRU52ckRiNVYwUS8wP3d4X2ZtdD1qcGVn" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpel9qcGcvemlhZEREUXhiQ0pGYVhuWGZnZjg5anVvSVE1VTF1MWd2M0pJVmpTVHZITFJpYWx4Q2dCM3FEV205azdQc0Frc1NZaHFBcVc5RFFkbGJrRU52ckRiNVYwUS8wP3d4X2ZtdD1qcGVn" style="width: 100%; margin: 0px;" width="100%" height="" border="0" mapurl="" title="" alt="" data-width="100%">\n          </div>\n        </div>\n        <div style="float:left;width:44%;margin-top:3%;margin-left:4%;" data-style="color:rgb(125,125,125);border-bottom:1px dashed rgb(192,192,192);font-size: 12px;line-height:2em;" class="brush" data-width="44%">\n          <p style="color:rgb(125,125,125);border-bottom:1px dashed rgb(192,192,192);font-size: 12px;line-height:2em;" class="brush" data-brushtype="text">\n            在季节的车上，\n          </p>\n          <p style="color:rgb(125,125,125);border-bottom:1px dashed rgb(192,192,192);font-size: 12px;line-height:2em;" class="brush" data-brushtype="text">\n            如果你要提前下车，\n          </p>\n          <p style="color:rgb(125,125,125);border-bottom:1px dashed rgb(192,192,192);font-size: 12px;line-height:2em;" class="brush" data-brushtype="text">\n            请别推醒装睡的我，\n          </p>\n          <p style="color:rgb(125,125,125);border-bottom:1px dashed rgb(192,192,192);font-size: 12px;line-height:2em;" class="brush" data-brushtype="text">\n            这样我可以沉睡到终点，\n          </p>\n          <p style="color:rgb(125,125,125);border-bottom:1px dashed rgb(192,192,192);font-size: 12px;line-height:2em;" class="brush" data-brushtype="text">\n            假装不知道你已经离开。\n          </p>\n          <p style="color:rgb(125,125,125);border-bottom:1px dashed rgb(192,192,192);font-size: 12px;line-height:2em;" class="brush" data-brushtype="text">\n            ——张嘉佳\n          </p>\n        </div>\n        <div style="clear:both;"></div>\n        <br>'],styleLayouts:['<br>\n        <div style="border: 0px none; padding: 0px; position: relative;">\n          <div style="border-color: rgb(157, 180, 194); color: rgb(255, 255, 255); padding: 35px; background-color: rgb(157, 180, 194);">\n            <div class="layout" style="margin: 0px auto; ">\n              <p class="brush" data-brushtype="text" style="font-size: 24px; font-weight: bold; border-color: rgb(157, 180, 194); color: inherit;">\n                纯底色大边距大段内容\n              </p>\n              <div class="brush" style="border-color: rgb(157, 180, 194); color: inherit;">\n                <p style="border-color: rgb(157, 180, 194); color: inherit;">\n                  日本的设计师提出过一个配色黄金比例，是70：25：5，其中的70%为大面积使用的主色，25%为辅助色，5%为点缀色。一般情况下建议画面色彩不超过3种，3种是指的3种色相，比如深红和暗红既可以视为一种色相。\n                </p>\n                <p style="border-color: rgb(157, 180, 194); color: inherit;">\n                  <br>\n                </p>\n                <p style="border-color: rgb(157, 180, 194); color: inherit;">\n                  一般来说颜色用的越少越好，颜色越少画面越简洁，作品会显得更加成熟。\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="margin-right: auto; margin-left: auto; clear: both; position: relative; width: 100%; overflow: hidden;" data-width="100%">\n          <div style="margin: 0.5em 0.5em 1.5em; border: 0px;">\n            <div style="margin-top: 0em; border: 2px solid rgb(0, 0, 0); border-radius: 0.8em; color: rgb(51, 51, 51); font-size: 1em; box-shadow: rgb(189, 189, 189) 0px 3px 5px;">\n              <div class="brush" style="font-size: 14px;padding: 1.4em 5em 1em 1em;line-height: 1.4; text-decoration: inherit;">\n                <p>\n                  有时想想，独居斗室和天涯浪迹好像是一件事情，身处寂寞和身处喧嚣其实也没什么两样，身外的整个世界都是镜子，我们必须自己认得自己。——马良《人间卧底》\n                </p>\n              </div>\n            </div>\n            <div style="margin-top:-3.5em;margin-right: 10px; line-height: 1.4; text-align: right;">\n              <div style="width:50px;display:inline-block;">\n                <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei84ZmJBNmJNVENlSktpYUlZcURSYXAwVGZEcVg5Unh0Z0N6aWFJVXNjZVhLaWJvdExjdmliNlJXUVJZU2liZjNZa1Q0QmlhS21qOHhrdjJMNklhd1hXdFdKbldlZy8wP3d4X2ZtdD1wbmc=" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei84ZmJBNmJNVENlSktpYUlZcURSYXAwVGZEcVg5Unh0Z0N6aWFJVXNjZVhLaWJvdExjdmliNlJXUVJZU2liZjNZa1Q0QmlhS21qOHhrdjJMNklhd1hXdFdKbldlZy8wP3d4X2ZtdD1wbmc=" style="width:100%" data-width="100%">\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="border: 0px none; padding: 0px;">\n          <div class="layout" style="margin:10px auto;width:70%" data-width="70%">\n            <div class="_editor" style="border: 0px none; padding: 0px; margin: 0px; position: relative;">\n              <p class="brush" data-brushtype="text" style="font-size: 16px; margin: 10px 0px; padding: 10px; max-width: 100%; border-top-style: solid; border-top-width: 1px; border-left-width: 0px; border-bottom-style: solid; border-bottom-width: 1px; line-height: 25px; color: rgb(33, 33, 34); text-align: center; border-color: rgb(33, 33, 34);">\n                大边距居中\n              </p>\n            </div>\n            <p style="text-align:right; color: inherit;">\n              自由调整两侧边距\n            </p>\n            <div class="brush" data-style="font-size:14px;text-align:center" style="line-height: 25px; color: inherit;">\n              <p style="color: inherit; text-align: center;">\n                单列居中样式，\n              </p>\n              <p style="color: inherit; text-align: center;">\n                内部嵌套插入其它样式，\n              </p>\n              <p style="color: inherit; text-align: center;">\n                内容宽度的自定义，\n              </p>\n              <p style="color: inherit; text-align: center;">\n                让自己的文章更与众不同。<br>\n              </p>\n              <p style="color: inherit;">\n                <br>\n              </p>\n              <p style="color: inherit; text-align: center;">\n                <span style="color: inherit;"></span><br>\n              </p>\n              <p style="color: inherit; text-align: center;">\n                <span style="line-height: 25px; text-align: center;">缩短</span>您的排版时间，\n              </p>\n              <p style="color: inherit; text-align: center;">\n                提升排版体验，\n              </p>\n              <p style="color: inherit; text-align: center;">\n                工作就应该成为享受！\n              </p>\n              <p>\n                <br>\n              </p>\n              <p>\n                <br>\n              </p>\n              <p style="color: inherit;">\n                <br>\n              </p>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="border: 0px none; padding: 0px; position: relative;">\n          <div style="margin-top:5px;">\n            <div style="width:50%;display:inline-block;box-sizing:border-box;float:left;padding-right:10px" class="layout" data-width="50%">\n              <div style="padding:20px 25px;box-sizing:border-box;border:1px solid #e7e7e7;text-align:center;">\n                <p>\n                  <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUTZTYm1sWlJ3TU9XeWdiaWFFU0dTNHJUb0RpYXFIakN4QzVmZGJXNTNYOFBQRm9LWEd4TmlhTFAyZy8wP3d4X2ZtdD1qcGVn" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUTZTYm1sWlJ3TU9XeWdiaWFFU0dTNHJUb0RpYXFIakN4QzVmZGJXNTNYOFBQRm9LWEd4TmlhTFAyZy8wP3d4X2ZtdD1qcGVn" style="margin: 0px 0px 15px; height: 50px !important;" width="" height="50" border="0" opacity="" mapurl="" title="" alt="">\n                </p>\n                <p class="brush" data-brushtype="text" style="font-size:16px;font-weight:bold;margin:0 0 10px 0;">\n                </p>\n                <div class="brush" data-style="clear:none;">\n                  <p style="clear:none;margin:0 0;line-height:1.5em;">\n                    生而排版\n                  </p>\n                  <p style="clear:none;margin:0 0;line-height:1.5em;">\n                    <span style="text-align:center">为你而美</span>\n                  </p>\n                </div>\n              </div>\n            </div>\n            <div style="padding-left:10px;box-sizing:border-box;width:50%;display:inline-block;text-align:center;" class="layout" data-width="50%">\n              <div style="padding:20px 25px;box-sizing:border-box;border:1px solid #e7e7e7;">\n                <p>\n                  <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUXVtVjNldEJzV2RpYWlhbkljUnFRcURobE1jWHJKN2NVRm1YMGRPQVVjTWgybUtpY1VWbk9yNDhLUS8wP3d4X2ZtdD1qcGVn" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkZTUG9XZ2lhTXNPaGtpYzZ0VGowdXRnUXVtVjNldEJzV2RpYWlhbkljUnFRcURobE1jWHJKN2NVRm1YMGRPQVVjTWgybUtpY1VWbk9yNDhLUS8wP3d4X2ZtdD1qcGVn" style="margin: 0px 0px 15px; height: 50px !important;" width="" height="50" border="0" opacity="" mapurl="" title="" alt="">\n                </p>\n                <p class="brush" data-brushtype="text" style="font-size:16px;font-weight:bold;margin:0 0 10px 0;">\n                  秒刷\n                </p>\n                <div class="brush" data-style="clear:none;margin:0 0;line-height:1.5em;">\n                  <p style="clear:none;margin:0 0;line-height:1.5em;">\n                    一键排版\n                  </p>\n                  <p style="clear:none;margin:0 0;line-height:1.5em;">\n                    珍惜生命\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="margin:2px;text-algin:center;">\n          <div style="border: 2px groove rgb(252, 180, 43); padding-bottom: 1.2em; font-weight: inherit; text-align: center; text-decoration: inherit; box-sizing: border-box; color: inherit; margin: 0px; background-color: transparent;display: inline-block;">\n            <div class="layout" style="width: 40%; float: left; display: inline-block; padding:20px 15px; text-align: left; box-sizing: border-box; color: inherit; margin: 0px;" data-width="40%">\n              <div style="box-sizing: border-box; color: rgb(252, 180, 43); border-color: rgb(252, 180, 43); padding: 0px; margin: 0px;">\n                <div style="border-color: rgb(252, 180, 43); box-sizing: border-box; color: inherit; display: inline-block; font-size: 24px; font-weight: inherit; line-height: 1.5em; text-align: left; text-decoration: inherit; padding: 0px; margin: 0px;">\n                  <span style="box-sizing:border-box; color:#262626; margin:0px; padding:0px"><strong class="brush" data-brushtype="text" style="box-sizing:border-box; color:inherit; margin:0px; padding:0px"></strong></span>\n                </div>\n              </div>\n              <div style="color: rgb(252, 180, 43); margin: 0px; font-size: 1.5em; line-height: 1em; font-weight: inherit; text-align: inherit; text-decoration: inherit; box-sizing: border-box; border-color: rgb(252, 180, 43); padding: 0px;">\n                <div style="box-sizing: border-box; color: inherit; border-color: rgb(252, 180, 43); padding: 0px; margin: 0px;">\n                  <span style="box-sizing:border-box; color:#262626; font-size:24px; margin:0px; padding:0px"><strong style="border-color:rgb(252, 180, 43); box-sizing:border-box; color:inherit; font-size:24px; margin:0px; padding:0px"><span class="brush" data-brushtype="text" style="box-sizing:border-box; color:inherit; font-size:24px; margin:0px; padding:0px">编辑器</span></strong></span>\n                </div>\n              </div>\n            </div>\n            <div class="layout" style="display: inline-block; float: right; border-left-width: 2px; border-left-style: groove; border-color: rgb(252, 180, 43); width: 60%; margin-top: 15px; padding-left: 1.5em; vertical-align: middle; box-sizing: border-box; font-weight: inherit; text-align: left; text-decoration: inherit; color: inherit;" data-width="60%">\n              <div class="brush" data-style="color: inherit; font-size: 14px; margin-bottom:0.8em; box-sizing: border-box; padding: 0px; line-height: 1.2em;font-weight:bold;" style="width: 100%; box-sizing: border-box; color: inherit; padding: 0px; margin:3px 0px;" data-width="100%">\n                <p style="color: inherit; font-size: 24px; margin-bottom:0.8em; box-sizing: border-box; padding: 0px; line-height: 1em;">\n                  <strong style="box-sizing:border-box; color:inherit; margin:0px; padding:0px"><span style="box-sizing:border-box; color:inherit; font-size:14px; line-height:1em; margin:0px; padding:0px">V服编辑器是一款在线编辑工具，为您提供丰富的样式，精美的模板</span></strong>\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>'],styleTrades:['<br>\n        <div style="padding: 20px; color: rgb(255, 255, 255); background-color: rgb(226, 121, 97);">\n          <div style="padding: 10px; color: rgb(255, 255, 255); margin: 0px; border: 2px solid rgba(254, 254, 254, 0.8); background: rgb(226, 121, 97);">\n            <div style="border: 0px; box-sizing: border-box; width: 100%; clear: both;  padding: 0px; text-align: center; color: rgb(255,255,255);height:60px" data-width="100%">\n              <div style="box-sizing: border-box; width: 42%; float: left; padding:3px 0px; text-align: right; color: inherit;" data-width="42%">\n                <div style="color: inherit;padding:0px;">\n                  <p style="box-sizing: border-box; margin-top: 3px; margin-bottom: 0; margin-right: 0.2em; padding: 3px 0px 0px; color: inherit; line-height: 1.3em; text-align: right; font-size: 18px; border-color: rgb(226, 121, 97);">\n                    <strong><span class="sh" data-brushtype="text" style="border-color: #E27961; color: inherit; font-size: 18px;">SAVE</span></strong>\n                  </p>\n                  <p style="box-sizing: border-box; margin-top: 0; margin-bottom: 0; margin-right: 0.2em; padding: 0px 0px 3px; line-height: 1.2em; text-align: right; font-size: 18px; text-indent: 0em; border-color: rgb(226, 121, 97);">\n                    <strong><span class="brush" data-brushtype="text" style="border-color: #E27961; color: inherit; font-size: 18px;">UPTO</span></strong>\n                  </p>\n                </div>\n              </div>\n              <div style="display: inline-block; width: 58%; box-sizing: border-box; float: right; padding: 0px; text-align: left; color: inherit;" data-width="58%">\n                <div style="color: inherit;height:60px">\n                  <p style="box-sizing: border-box; margin-top: 0; margin-bottom: 0; margin-right: 0.2em; padding: 3px 0px; color: inherit; line-height: 3.5em; text-align: left; border-color: rgb(226, 121, 97);">\n                    <span style="color:inherit"><strong><span class="brush" data-brushtype="text" style="border-color: #E27961; color: inherit; font-size: 55px;">50%</span></strong></span>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>','<br>\n        <div style="margin: 16px 0% 8px; text-align: center; position: static;">\n            <div style="padding: 32px 16px 16px; box-sizing:border-box;white-space: normal; background-image: -webkit-repeating-linear-gradient(135deg, transparent, transparent 4px, white 4px, white 12px); background-color: rgb(226, 223, 223);">\n              <div style="width: 32px; margin: -40px auto; font-size: 64px; line-height: 1; color: rgb(226, 223, 223); background: white;">\n                  “\n              </div>\n              <div style="padding: 8px; box-sizing:border-box;background-color: rgb(255, 255, 255);">\n                <div style="margin-top: -35px; margin-right: 0%; margin-left: 0%; position: static;">\n                  <div style="display: inline-block; width: 55%; vertical-align: top; background-color: rgb(254, 255, 255);" data-width="55%">\n                    <div style="position: static;">\n                      <div style="color: rgb(133, 118, 106); font-size: 20px;">\n                        <div>\n                          <p>\n                            全场满100<strong>包邮</strong>\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    <div style="position: static;">\n                      <div style="text-align: left; font-size: 12px; color: rgb(160, 160, 160); letter-spacing: 1px;">\n                        <p style="text-align: center;">\n                          9.22 10:00 - 9.28 10:00\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div style="position: static;margin-top:20px;margin-bottom:10px;">\n                  <div style="display: inline-block; vertical-align: top; width: 50%; padding: 5px;box-sizing:border-box;" data-width="50%">\n                    <div style="position: static;">\n                      <div style="letter-spacing: 1px;">\n                        <div>\n                          <p>\n                            <span style="font-size: 7px;">￥&nbsp;</span><span style="font-size: 35px;"><strong><span style="line-height: 1.6;">10</span></strong></span><span style="font-size: 14px;"><strong><span style="line-height: 1.6;">优惠券</span></strong></span>\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                    <div style="margin-right: 0%; margin-bottom: 8px; margin-left: 0%; position: static;">\n                      <div style="border-top: 1px dotted rgb(11, 11, 11);"></div>\n                    </div>\n                    <div style="position: static;">\n                      <div style="position: static;">\n                        <p style="font-size: 13px;">\n                          订单满150元使用\n                        </p>\n                      </div>\n                    </div>\n                    <div style="position: relative;">\n                      <div style="margin-top: 10px; margin-bottom: 10px; position: static;">\n                        <div class="" style="display: inline-block;border: 2px solid rgb(133, 118, 106);box-sizing:border-box;padding: 0.1em 0.5em;border-radius: 3px;color: rgb(255, 255, 255);font-size: 14px;background-color: rgb(133, 118, 106);">\n                          <p>\n                            抢先领取&gt;&gt;\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div style="display: inline-block; vertical-align: top; width: 50%;" data-width="50%">\n                    <div style="display: inline-block; width: 100%; border-width: 0px 0px 0px 1px; border-style: solid; border-left-color: rgb(226, 223, 223); border-right-color: rgb(226, 223, 223); padding: 5px;box-sizing:border-box;" data-width="100%">\n                      <div style="position: static;">\n                        <div style="letter-spacing: 1px;">\n                          <p>\n                            <span style="font-size: 7px;">￥&nbsp;</span><span style="font-size: 35px;"><strong><span style="line-height: 1.6;">50</span></strong></span><span style="font-size: 14px;"><strong><span style="line-height: 1.6;">优惠券</span></strong><strong><span style="line-height: 1.6;"></span></strong></span>\n                          </p>\n                        </div>\n                      </div>\n                      <div style="position: static;">\n                        <div style="margin-right: 0%; margin-bottom: 8px; margin-left: 0%; position: static;">\n                          <div style="border-top: 1px dotted rgb(11, 11, 11);"></div>\n                        </div>\n                      </div>\n                      <div style="position: static;">\n                        <div style="font-size: 13px;">\n                          <p>\n                            订单满350元使用\n                          </p>\n                        </div>\n                      </div>\n                      <div style="position: static;">\n                        <div style="margin-top: 10px; margin-bottom: 10px; position: static;">\n                          <div style="display: inline-block;border: 2px solid rgb(133, 118, 106);box-sizing:border-box;padding: 0.1em 0.5em;border-radius: 3px;color: rgb(255, 255, 255);font-size: 14px;background-color: rgb(133, 118, 106);">\n                            <p>\n                              抢先领取&gt;&gt;\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <br>','<br>\n        <div style="background-color:#fbfbfb;padding:10px;">\n            <p style="font-family:\'Microsoft Yahei\';color:#333;margin:0;padding:10px;">\n              <strong class="brush" data-brushtype="text">联系我们</strong>\n            </p>\n            <div style="overflow:hidden;border-bottom:1px solid #ddd;font-size:14px;color:#545454;background-color:#fbfbfb;">\n              <span style="background-image:url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkhFRkZpYkdhcjVJZTNVWm95SDdhaWFybGo2aWNkeGtBYkJDT3VJTjVoNjZPUGdPcFhGR3p0WDQ0cUVpY1gydEJnamFSNGZYeGJjY3dUTHhnLzA=);background-position:0 -135px ; background-repeat:no-repeat;display:block;width:24px;height:24px;float:left;margin-top:6px;margin-left:10px;"></span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">电话：</span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">155xxxxxxxx</span><span style="display:block;float:right;margin-right:10px;font-weight:bold;line-height:38px;width:20px;height:36px;background-image:url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkhFRkZpYkdhcjVJZTNVWm95SDdhaWFybGo2aWNkeGtBYkJDT3VJTjVoNjZPUGdPcFhGR3p0WDQ0cUVpY1gydEJnamFSNGZYeGJjY3dUTHhnLzA=);background-repeat:no-repeat;background-position:0 -197px;"></span>\n            </div>\n            <div style="overflow:hidden;border-bottom:1px solid #ddd;font-size:14px;color:#545454;background-color:#fbfbfb;">\n              <span style="background-image:url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkhFRkZpYkdhcjVJZTNVWm95SDdhaWFybGo2aWNkeGtBYkJDT3VJTjVoNjZPUGdPcFhGR3p0WDQ0cUVpY1gydEJnamFSNGZYeGJjY3dUTHhnLzA=);background-position:0 -472px ; background-repeat:no-repeat;display:block;width:24px;height:24px;float:left;margin-top:6px;margin-left:10px;"></span><span style="display:block;float:left;margin-left:11px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">QQ：</span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">25822xxxx</span>\n            </div>\n            <div style="overflow:hidden;border-bottom:1px solid #ddd;font-size:14px;color:#545454;background-color:#fbfbfb;">\n              <span style="background-image:url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkhFRkZpYkdhcjVJZTNVWm95SDdhaWFybGo2aWNkeGtBYkJDT3VJTjVoNjZPUGdPcFhGR3p0WDQ0cUVpY1gydEJnamFSNGZYeGJjY3dUTHhnLzA=);background-position:0 0px ; background-repeat:no-repeat;display:block;width:24px;height:24px;float:left;margin-top:8px;margin-left:10px;"></span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">微信：</span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">xxxx</span>\n            </div>\n            <div style="overflow:hidden;border-bottom:1px solid #ddd;font-size:14px;color:#545454;background-color:#fbfbfb;">\n              <span style="background-image:url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkhFRkZpYkdhcjVJZTNVWm95SDdhaWFybGo2aWNkeGtBYkJDT3VJTjVoNjZPUGdPcFhGR3p0WDQ0cUVpY1gydEJnamFSNGZYeGJjY3dUTHhnLzA=);background-position:0 -270px ; background-repeat:no-repeat;display:block;width:24px;height:24px;float:left;margin-top:6px;margin-left:10px;"></span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">地址：</span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">xx省xx市xx区xx</span><span style="display:block;float:right;margin-right:10px;font-weight:bold;line-height:38px;"></span>\n            </div>\n            <div style="overflow:hidden;border-bottom:1px solid #ddd;font-size:14px;color:#545454;background-color:#fbfbfb;">\n              <span style="background-image:url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei9RS0R4clZZZWhpY2ViZ3d6Y1JkZjlXZmRFWHBWRjFlQkREekc4b3FEdmdYQjBseURNaGljbFlxa21nY295QjkycFF4Y3doOTVGWWlhdlBlZG5raWJuSWlhcEJBLzA/d3hfZm10PXBuZw==);background-position:0 -31px ; background-repeat:no-repeat;display:block;width:24px;height:24px;float:left;margin-top:6px;margin-left:10px;"></span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">官网：</span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">www.135editor.com/</span><span style="display:block;float:right;margin-right:10px;font-weight:bold;line-height:38px;width:20px;height:36px;background-image:url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkhFRkZpYkdhcjVJZTNVWm95SDdhaWFybGo2aWNkeGtBYkJDT3VJTjVoNjZPUGdPcFhGR3p0WDQ0cUVpY1gydEJnamFSNGZYeGJjY3dUTHhnLzA=);background-repeat:no-repeat;background-position:0 -197px;"></span>\n            </div>\n            <div style="overflow:hidden;font-size:14px;border-bottom:1px solid #ddd;color:#545454;background-color:#fbfbfb;">\n              <span style="background-image:url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkhFRkZpYkdhcjVJZTNVWm95SDdhaWFybGo2aWNkeGtBYkJDT3VJTjVoNjZPUGdPcFhGR3p0WDQ0cUVpY1gydEJnamFSNGZYeGJjY3dUTHhnLzA=);background-position:0 -99px ; background-repeat:no-repeat;display:block;width:24px;height:24px;float:left;margin-top:6px;margin-left:10px;"></span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">邮箱：</span><span style="display:block;float:left;margin-left:10px;line-height:38px;font-family:\'Microsoft Yahei\';" class="brush" data-brushtype="text">xxxxx@xxxx.xx</span>\n            </div>\n          </div>\n          <br>','<br>\n        <div style="text-align:center;">\n            <div style="width:280px;height:auto !important;padding:16px 5px;background-image: url(http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkZkVDVTZ2traWJlZGpQcUhtSGd1Z3ZTZERpYmU0ZUJrYlN6aWJEZ3hLTjhkczM1Q1NOdmljQVRBcEdvRGpUeFV0TUZpYlFYNHY4blcxZ1E3US8wP3d4X2ZtdD1wbmc=); background-size:contain; background-repeat: no-repeat;background-position:50% 0;display:inline-block;">\n              <div class="brush" style="margin: 3px auto; padding:5px 16px;color: rgb(62, 62, 62);border:2px solid rgba(254,254,254,0.3);display:inline-block;">\n                <p style="text-align: center; margin-top: 0; margin-bottom: 0;">\n                  <span style=";font-size: 18px;;color: #FFFFFF;">￥5优惠券</span>\n                </p>\n                <div style="padding:6px 50px; font-size: 18px; text-align: center; background-color: rgb(254, 254, 254);display:inline-block;">\n                  <strong><span style="color: #CB254E;" class="brush" data-brushtype="text">立即领取</span></strong>\n                </div>\n                <p style="text-align: center; margin-top: 0; margin-bottom: 0;">\n                  <span style="color: #FFFFFF;" class="brush" data-brushtype="text">（满10元使用）</span>\n                </p>\n              </div>\n            </div>\n          </div>\n          <br>','<br>\n        <div style="display:inline-block;transform: rotate(0deg);-webkit-transform: rotate(0deg);-moz-transform: rotate(0deg);-o-transform: rotate(0deg);">\n            <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkVLS2RKUk1aZWlhREV3Z2RrVGJZb0dhWmlhOGF0c1FpYVRPT2pQNlBER2tIanNNUDY2T2NlcHFYSW0xSGoxVlZIZGdHZEZySWZwQlI2ZEEvMD93eF9mbXQ9cG5n" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkVLS2RKUk1aZWlhREV3Z2RrVGJZb0dhWmlhOGF0c1FpYVRPT2pQNlBER2tIanNNUDY2T2NlcHFYSW0xSGoxVlZIZGdHZEZySWZwQlI2ZEEvMD93eF9mbXQ9cG5n" style="width: 120px !important; height: auto !important;" class="assistant">\n          </div>\n          <div style="color: inherit;margin-top: -5.8em;">\n            <p style="line-height: 1.75em; font-size: 12px; text-align: center;">\n              <img src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkVMZGx6Ym1hYjBZRVF1RFNKcTU1YXAxd3JpYmJKRzFtSlNUWVBYTThwOHlCWk5YUXdMZWVENExkUGlhcFBPSEN5VkEyOWdqSFd3UXNzdy8wP3d4X2ZtdD1qcGVn" data-ke-src="http://image3.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei96aWFkRERReGJDSkVMZGx6Ym1hYjBZRVF1RFNKcTU1YXAxd3JpYmJKRzFtSlNUWVBYTThwOHlCWk5YUXdMZWVENExkUGlhcFBPSEN5VkEyOWdqSFd3UXNzdy8wP3d4X2ZtdD1qcGVn" style="width: 100%; margin: 0px;" width="100%" height="" border="0" opacity="" mapurl="" title="" alt="" data-width="100%">\n            </p>\n            <p style="line-height: 1.75em; font-size: 12px; text-align: center;">\n              <span style="font-size: 14px;" class="brush" data-brushtype="text">渐变色衬衫 ￥140</span>\n            </p>\n          </div>\n          <br>'],templates:['<br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <div>\n            <img src="/resources/admin/images/article/bottom.png" data-ke-src="/resources/admin/images/article/bottom.png" width="100%">\n          </div>\n          <br>','<br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <br>\n          <div>\n            <img src="/resources/admin/images/article/bottom1.png" data-ke-src="/resources/admin/images/article/bottom1.png" width="100%" height="150">\n          </div>\n          <br>']}},components:{},methods:{templateSelect:function(t){this.$emit("templateSelect",t)},handleSelect:function(t,e){this.selectedNav=t}}},rt=it,at=(i("45e8"),Object(m["a"])(rt,tt,et,!1,null,null,null)),nt=at.exports;i.d(e,"a",(function(){return K})),i.d(e,"b",(function(){return nt}))},"443b":function(t,e,i){"use strict";i("4de4");var r=i("c596"),a=i("1ab1"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{"append-to-body":"",visible:t.visible,title:"自定义列","custom-class":"biz-columns",width:"500px"},on:{close:t.onClose}},[i("div",{staticClass:"columns-wrap"},[i("biz-flex-table",{ref:"table",attrs:{checkable:!1,tableData:t.tableData},on:{"selection-change":t.selectionChangeHandler}},[i("el-table-column",{attrs:{type:"selection",width:"50",selectable:t.getSelectable}}),i("el-table-column",{attrs:{label:"信息",prop:"name"}}),i("el-table-column",{attrs:{prop:"tag",label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.$index;return[i("el-button",{attrs:{icon:"el-icon-sort-up",type:"text",disabled:0===r},on:{click:function(e){return t.onUp(r)}}}),i("el-button",{attrs:{icon:"el-icon-sort-down",type:"text",disabled:r===t.tableData.length-1},on:{click:function(e){return t.onBottom(r)}}})]}}])})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.onClose}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确 定")])],1)])},o=[],s=(i("7db0"),i("a434"),i("b85c")),l=i("04d3"),h={name:"biz-columns",components:{BizFlexTable:l["c"]},props:{visible:Boolean,tableId:String},data:function(){return{id:"",tableName:"",selections:[],tableData:[]}},computed:{},watch:{visible:function(t){t?this.makeRowDisplayable():this.saveSelection()},tableId:function(){this.getTableColumns()}},mounted:function(){this.getTableColumns()},methods:{getTableColumns:function(){var t=this;a["a"].get(r["g"].user.columns,{tableId:this.tableId}).then((function(e){t.tableData=e.data.columnDatas,t.id=e.data.id,t.tableName=e.data.tableName}))},getSelectable:function(t){return t.isEditable},selectionChangeHandler:function(t){this.selections=t},saveSelection:function(){var t,e=this,i=Object(s["a"])(this.tableData);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.displayable=!1}}catch(l){i.e(l)}finally{i.f()}var a,n=Object(s["a"])(this.selections);try{var o=function(){var t=a.value;e.tableData.find((function(e){return e.id===t.id})).displayable=!0};for(n.s();!(a=n.n()).done;)o()}catch(l){n.e(l)}finally{n.f()}},onUp:function(t){this.tableData[t]=this.tableData.splice(t-1,1,this.tableData[t])[0]},onBottom:function(t){this.tableData[t]=this.tableData.splice(t+1,1,this.tableData[t])[0]},onClose:function(){this.$emit("update:visible",!1)},update:function(){var t,e=this,i=Object(s["a"])(this.tableData);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.displayable=!1}}catch(p){i.e(p)}finally{i.f()}var o,l=Object(s["a"])(this.selections);try{var h=function(){var t=o.value;e.tableData.find((function(e){return e.id===t.id})).displayable=!0};for(l.s();!(o=l.n()).done;)h()}catch(p){l.e(p)}finally{l.f()}var d={columnDatas:this.tableData,id:this.id,tableId:this.tableId,tableName:this.tableName};console.log(d),a["a"].put(r["g"].user.columns,d).then((function(t){e.$emit("update"),e.$emit("update:visible",!1)}))},makeRowDisplayable:function(){var t=this;setTimeout((function(){var e,i=Object(s["a"])(t.tableData);try{for(i.s();!(e=i.n()).done;){var r=e.value;t.$refs.table.$refs.table.toggleRowSelection(r,r.displayable)}}catch(a){i.e(a)}finally{i.f()}}),20)}}},d=h,p=(i("ec6b"),i("2877")),c=Object(p["a"])(d,n,o,!1,null,null,null),u=c.exports,f=u;e["a"]={components:{BizColumnOperation:l["a"],BizColumns:f},data:function(){return{columnsSettingVisible:!1,columns:[]}},created:function(){this.getTableId(),this.getColumns()},methods:{onCustomColumns:function(){this.columnsSettingVisible=!0},getColumns:function(){var t=this;console.log(12),a["a"].get(r["A"].columns,{tableId:this.tableId}).then((function(e){t.columns=[],setTimeout((function(){t.columns=e.data.columnDatas.filter((function(t){return t.displayable})),t.$refs.table&&setTimeout((function(){t.$refs.table.doLayout()}),50)}),20)})).catch((function(t){t.errorMessage&&console.log(t.errorMessage)}))},getTableId:function(){}}}},"453a":function(t,e,i){},"45e8":function(t,e,i){"use strict";var r=i("6611"),a=i.n(r);a.a},"474c":function(t,e,i){},"47a3":function(t,e,i){},"51a1":function(t,e,i){"use strict";var r=i("453a"),a=i.n(r);a.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var r=i("1d80"),a=i("5899"),n="["+a+"]",o=RegExp("^"+n+n+"*"),s=RegExp(n+n+"*$"),l=function(t){return function(e){var i=String(r(e));return 1&t&&(i=i.replace(o,"")),2&t&&(i=i.replace(s,"")),i}};t.exports={start:l(1),end:l(2),trim:l(3)}},"5ac3":function(t,e,i){"use strict";var r=i("655b"),a=i.n(r);a.a},"5b8e":function(t,e,i){"use strict";var r=i("9678"),a=i.n(r);a.a},"5c9a":function(t,e,i){},"5cc6":function(t,e,i){var r=i("74e8");r("Uint8",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},"5f96":function(t,e,i){"use strict";var r=i("ebb5"),a=r.aTypedArray,n=r.exportTypedArrayMethod,o=[].join;n("join",(function(t){return o.apply(a(this),arguments)}))},"60bd":function(t,e,i){"use strict";var r=i("da84"),a=i("ebb5"),n=i("e260"),o=i("b622"),s=o("iterator"),l=r.Uint8Array,h=n.values,d=n.keys,p=n.entries,c=a.aTypedArray,u=a.exportTypedArrayMethod,f=l&&l.prototype[s],m=!!f&&("values"==f.name||void 0==f.name),g=function(){return h.call(c(this))};u("entries",(function(){return p.call(c(this))})),u("keys",(function(){return d.call(c(this))})),u("values",g,!m),u(s,g,!m)},"621a":function(t,e,i){"use strict";var r=i("da84"),a=i("83ab"),n=i("a981"),o=i("9112"),s=i("e2cc"),l=i("d039"),h=i("19aa"),d=i("a691"),p=i("50c4"),c=i("0b25"),u=i("77a7"),f=i("e163"),m=i("d2bb"),g=i("241c").f,y=i("9bf2").f,b=i("81d5"),v=i("d44e"),S=i("69f3"),x=S.get,w=S.set,_="ArrayBuffer",U="DataView",k="prototype",F="Wrong length",C="Wrong index",z=r[_],T=z,I=r[U],A=I&&I[k],B=Object.prototype,E=r.RangeError,L=u.pack,M=u.unpack,R=function(t){return[255&t]},N=function(t){return[255&t,t>>8&255]},D=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},P=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},O=function(t){return L(t,23,4)},G=function(t){return L(t,52,8)},V=function(t,e){y(t[k],e,{get:function(){return x(this)[e]}})},H=function(t,e,i,r){var a=c(i),n=x(t);if(a+e>n.byteLength)throw E(C);var o=x(n.buffer).bytes,s=a+n.byteOffset,l=o.slice(s,s+e);return r?l:l.reverse()},j=function(t,e,i,r,a,n){var o=c(i),s=x(t);if(o+e>s.byteLength)throw E(C);for(var l=x(s.buffer).bytes,h=o+s.byteOffset,d=r(+a),p=0;p<e;p++)l[h+p]=d[n?p:e-p-1]};if(n){if(!l((function(){z(1)}))||!l((function(){new z(-1)}))||l((function(){return new z,new z(1.5),new z(NaN),z.name!=_}))){T=function(t){return h(this,T),new z(c(t))};for(var W,Z=T[k]=z[k],Y=g(z),$=0;Y.length>$;)(W=Y[$++])in T||o(T,W,z[W]);Z.constructor=T}m&&f(A)!==B&&m(A,B);var J=new I(new T(2)),X=A.setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||s(A,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},{unsafe:!0})}else T=function(t){h(this,T,_);var e=c(t);w(this,{bytes:b.call(new Array(e),0),byteLength:e}),a||(this.byteLength=e)},I=function(t,e,i){h(this,I,U),h(t,T,U);var r=x(t).byteLength,n=d(e);if(n<0||n>r)throw E("Wrong offset");if(i=void 0===i?r-n:p(i),n+i>r)throw E(F);w(this,{buffer:t,byteLength:i,byteOffset:n}),a||(this.buffer=t,this.byteLength=i,this.byteOffset=n)},a&&(V(T,"byteLength"),V(I,"buffer"),V(I,"byteLength"),V(I,"byteOffset")),s(I[k],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return P(H(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return P(H(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return M(H(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return M(H(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){j(this,1,t,R,e)},setUint8:function(t,e){j(this,1,t,R,e)},setInt16:function(t,e){j(this,2,t,N,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){j(this,2,t,N,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){j(this,4,t,D,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){j(this,4,t,D,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){j(this,4,t,O,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){j(this,8,t,G,e,arguments.length>2?arguments[2]:void 0)}});v(T,_),v(I,U),t.exports={ArrayBuffer:T,DataView:I}},6417:function(t,e,i){"use strict";var r=i("0c7f"),a=i.n(r);a.a},"649e":function(t,e,i){"use strict";var r=i("ebb5"),a=i("b727").some,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("some",(function(t){return a(n(this),t,arguments.length>1?arguments[1]:void 0)}))},"64bb":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("biz-grid",{staticClass:"federation-mgmt"},[i("div",{staticClass:"federation-mgmt-header",attrs:{slot:"top"},slot:"top"},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.showMode,callback:function(e){t.showMode=e},expression:"showMode"}},[i("el-radio-button",{attrs:{label:"0"}},[t._v("地图位置")]),i("el-radio-button",{attrs:{label:"1"}},[t._v("列表信息")])],1),i("biz-header",{directives:[{name:"show",rawName:"v-show",value:"1"===t.showMode,expression:"showMode === '1'"}],attrs:{operations:t.operations,filters:t.filters},on:{operate:t.operate,filterDataChange:t.filterDataChange}})],1),i("biz-store-map",{directives:[{name:"show",rawName:"v-show",value:"0"===t.showMode,expression:"showMode === '0'"}],ref:"map",attrs:{value:t.tableData,showMode:t.showMode},on:{addClickHandler:t.rowOperationClickHandler}}),i("expand-table",{directives:[{name:"show",rawName:"v-show",value:"1"===t.showMode,expression:"showMode === '1'"}],ref:"expandTable",staticStyle:{height:"95%","min-height":"95%"},attrs:{data:t.tableData,loading:t.loading,isSearch:t.isSearch},on:{"expand-change":t.expandChange,delete:t.handleDelete,"row-click":t.rowClick,"selection-change":t.handleSelectionChange,addOperator:t.addOperator,addStore:t.addStore}}),i("biz-pagination",{attrs:{pagination:t.pagination}}),i("div",{attrs:{slot:"float"},slot:"float"},[i("biz-popup-tabs",{attrs:{open:t.showStore},on:{close:function(e){t.showStore=!1}},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[i("el-tab-pane",{attrs:{label:"基本信息",name:"federationmgmtInfo"}},[i("FederationMgmtInfo",{ref:"baseInfo",attrs:{itemId:t.itemId,type:t.type,parent:t.parent,parentType:t.parentType},on:{operationSuccess:t.operationSuccess}})],1),t.itemId?i("el-tab-pane",{attrs:{label:"店铺介绍",name:"federationmgmtIntroduce"}},[i("FederationMgmtIntroduce",{attrs:{itemId:t.itemId,type:t.type}})],1):t._e(),t.itemId?i("el-tab-pane",{attrs:{label:"付款方式配置",name:"federationmgmtPayment"}},[i("FederationMgmtPayment",{attrs:{itemId:t.itemId,type:t.type}})],1):t._e(),t.itemId?i("el-tab-pane",{attrs:{label:"店铺展示",name:"federationmgmtVr"}},[i("FederationMgmtVr",{attrs:{itemId:t.itemId,type:t.type}})],1):t._e(),t.itemId?i("el-tab-pane",{attrs:{label:"店铺评级",name:"ShopEvaluation"}},[i("ShopEvaluation",{attrs:{itemId:t.itemIdObj,type:t.type}})],1):t._e(),t.itemId&&"platform"===t.getUser.roleLevel?i("el-tab-pane",{attrs:{label:"金融产品",name:"fince"}},[i("FederationFince",{attrs:{itemId:t.itemIdObj,type:t.type}})],1):t._e()],1),i("biz-popup-tabs",{attrs:{open:t.showOperator},on:{close:function(e){t.showOperator=!1}},model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[i("el-tab-pane",{attrs:{label:"运营商信息",name:"federationmgmtOperatorInfo"}},[i("FederationMgmtOperatorInfo",{ref:"operatorInfo",attrs:{itemId:t.itemId,type:t.type,parent:t.parent,parentType:t.parentType,parentName:t.parentName},on:{operationSuccess:t.operationSuccess}})],1)],1)],1)],1)},a=[],n=(i("4160"),i("b0c0"),i("a9e3"),i("159b"),i("5530")),o=i("04d3"),s=i("7132"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"expandTable",staticClass:"expand-table",staticStyle:{width:"100%","min-height":"100%"},attrs:{size:"small","row-key":"id",height:t.height,border:t.showBorder,data:t.data,"show-header":t.showHeader,"expand-row-keys":t.expandedRowKeys,rowClassName:t.setClassName,"cell-class-name":t.cellClassName},on:{"expand-change":t.expandChangeHandler,"row-click":t.rowClickHandler,"selection-change":t.handleSelectionChange,addOperator:t.addOperator,addStore:t.addStore}},[t.isSearch?i("el-table-column",{attrs:{type:"expand",label:t.maxLevel,width:"100","class-name":"1"===t.hasChild?"cell"+t.layer:"cell0"+t.layer},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.childUsers.length>0?i("expand-table",{staticClass:"expand-table-child",attrs:{height:"auto",layer:t.layer+1,hasChild:e.row.hasChild,data:e.row.childUsers,"show-header":!1,"show-border":!1,"expand-row-keys":t.expandedRowKeys},on:{delete:t.deleteFunction,"expand-change":t.expandChangeHandler,"row-click":t.rowClickHandler,"selection-change":t.handleSelectionChange,addOperator:t.addOperator,addStore:t.addStore}}):t._e()]}}],null,!1,4285775261)}):t._e(),i("el-table-column",{attrs:{label:"运营商/店铺",prop:"name","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{display:"flex",width:"100%"}},["store"===e.row.userType?i("i",{staticClass:"iconfont biz-icon-i-web-dp"}):t._e(),"operator"===e.row.userType?i("i",{staticClass:"iconfont biz-icon-i-web-yys"}):t._e(),i("div",{staticClass:"overflow"},[t._v(t._s(e.row.name))])])]}}])}),i("el-table-column",{attrs:{label:"地址",prop:"address","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{width:"100%"}},[i("div",{staticClass:"overflow"},[t._v(" "+t._s(e.row.address)+" ")])])]}}])}),i("el-table-column",{attrs:{label:"电话",prop:"phone","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{width:"100%"}},[i("div",{staticClass:"overflow"},[t._v(" "+t._s(e.row.phone)+" ")])])]}}])}),i("el-table-column",{attrs:{label:"状态",prop:"isEnabled","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("1"===e.row.isEnabled?"启用":"停用")+" ")]}}])}),i("el-table-column",{attrs:{label:"创建日期",prop:"createDate","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{width:"100%"}},[i("div",{staticClass:"overflow"},[t._v(" "+t._s(e.row.createDate)+" ")])])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("biz-column-operation",{attrs:{row:e.row}},[t.hasAuthDelete?i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),t.deleteFunction(e.row)}}},[t._v(" 删除 ")]):t._e(),t.hasAuthUser?i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),t.adminMgmt(e.row)}}},[t._v(" 用户管理 ")]):t._e(),t.hasAuthAdd?i("el-button",{directives:[{name:"show",rawName:"v-show",value:"operator"===e.row.userType,expression:"scope.row.userType==='operator'"}],attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),t.addOperator(e.row)}}},[t._v(" 添加运营商 ")]):t._e(),t.hasAuthAdd?i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),t.addStore(e.row)}}},[t._v(" 添加店铺 ")]):t._e()],1)]}}])})],1)},h=[],d=(i("cb29"),i("caad"),i("a15b"),i("ac1f"),i("2532"),i("1276"),i("2f62")),p=i("443b"),c={name:"ExpandTable",filters:{formatToMark:function(t){return isNaN(t)?t:Number(t)?"√":"X"}},mixins:[p["a"]],props:{showHeader:{type:Boolean,default:!0},isSearch:{type:Boolean,default:!0},hasChild:{type:String,default:"1"},data:{type:Array,default:function(){return[]}},height:{type:String,default:"100%"},loading:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!1},layer:{type:Number,default:0},expandedRowKeys:{type:Array,default:function(){return[]}}},data:function(){return{maxLevel:"1",currentLevel:1,className:"",selections:[],selectionsChild:[]}},components:{},computed:Object(n["a"])(Object(n["a"])({},Object(d["c"])("Authority",["currentAuth"])),{},{hasAuthEdit:function(){return this.currentAuth.includes("admin:union.manage.edit")},hasAuthDelete:function(){return this.currentAuth.includes("admin:union.manage.delete")},hasAuthAdd:function(){return this.currentAuth.includes("admin:union.manage.add")},hasAuthUser:function(){return this.currentAuth.includes("admin:union.manage.usermanage")}}),watch:{},mounted:function(){var t=document.documentElement.clientHeight||window.innerHeight,e=String(t-205);document.querySelectorAll(".el-table__body-wrapper")[0].style.height=e+"px",document.querySelectorAll(".el-table__body-wrapper")[0].style.overflowX="hidden",document.querySelectorAll(".el-table__body-wrapper")[0].style.overflowY="auto"},updated:function(){this.doLayout()},methods:{setClassName:function(t){var e=t.row;t.index;return e.hasChild>0?"expand":"noexpand"},cellClassName:function(t){var e=t.row;t.column,t.rowIndex,t.columnIndex;return"row"+e.id},doLayout:function(){document.querySelectorAll(".expand-table-child .el-table__body-wrapper").forEach((function(t){t.style.height="auto"})),document.querySelectorAll(".el-table__expand-icon").forEach((function(t){t.children[0].className="iconfont biz-icon-i-web-zk1"}))},formatTreeLayer:function(t,e){var i=[];return e&&(i.push(new Array(e).fill("|").join(" ")),i.push("--")),i.push(t),i.join("")},expandChangeHandler:function(t,e){this.doLayout(),this.className&&this.className.split(".")[1]!=="row"+t.id&&(document.querySelector(this.className).children[0].children[0].style.color="#666666"),this.className=".row"+t.id,document.querySelector(this.className).children[0].children[0].style.color="#ff7300";var i=[];console.log("this.currentLevel"+this.currentLevel),console.log("row.treeLevel"+this.currentLevel),e&&e.length>0?this.currentLevel=t.treeLevel:this.currentLevel=t.treeLevel-1;for(var r=0;r<=this.currentLevel;r++)i.push(r+1);this.maxLevel=i.join(" "),console.log(this.$refs.expandTable),this.$emit("expand-change",t,e)},rowClickHandler:function(t){this.$emit("row-click",t)},deleteFunction:function(t){this.$emit("delete",t)},handleSelectionChange:function(t){this.selections=t,this.$emit("selection-change",t)},addOperator:function(t){this.$emit("addOperator",t)},addStore:function(t){this.$emit("addStore",t)},adminMgmt:function(t){"operator"===t.userType?(window.SHOP_ID="",window.Company_ID=t.id):(window.SHOP_ID=t.id,window.Company_ID=""),this.$router.push({path:"/oa/staff-mgmt/admin",query:{parentId:t.id,type:t.userType}})}}},u=c,f=(i("c8ca"),i("2877")),m=Object(f["a"])(u,l,h,!1,null,null,null),g=m.exports,y=i("f36f"),b=i("e142"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("biz-grid",{staticClass:"fedration-mgmt-info"},[i("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px",size:"small","inline-message":!0}},[i("el-form-item",{attrs:{label:"店铺名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入店铺名称",maxlength:"20",minlength:"1"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.itemId?t._e():i("el-button",{attrs:{type:"primary"},on:{click:t.showStorePicker}},[t._v("选择店铺")])],1),i("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[i("biz-map-pointer",{attrs:{address:t.form.address},on:{addressChange:t.handleAddressChange},model:{value:t.point,callback:function(e){t.point=e},expression:"point"}})],1),i("el-form-item",{attrs:{label:"销售电话",prop:"phone"}},[i("el-input",{attrs:{maxlength:"13",placeholder:"请输入销售电话"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),i("el-form-item",{attrs:{label:"售后电话",prop:"serviceMobile"}},[i("el-input",{attrs:{maxlength:"13",placeholder:"请输入售后电话"},model:{value:t.form.serviceMobile,callback:function(e){t.$set(t.form,"serviceMobile",e)},expression:"form.serviceMobile"}})],1),i("el-form-item",{attrs:{label:"客服电话",prop:"customerMobile"}},[i("el-input",{attrs:{maxlength:"13",placeholder:"请输入客服电话"},model:{value:t.form.customerMobile,callback:function(e){t.$set(t.form,"customerMobile",e)},expression:"form.customerMobile"}})],1),i("el-form-item",{attrs:{label:"救援电话",prop:"rescueMobile"}},[i("el-input",{attrs:{maxlength:"13",placeholder:"请输入救援电话"},model:{value:t.form.rescueMobile,callback:function(e){t.$set(t.form,"rescueMobile",e)},expression:"form.rescueMobile"}})],1),i("el-form-item",{attrs:{label:"店铺logo",prop:"head"}},[i("BizAvatarUploaderNew",{model:{value:t.form.head,callback:function(e){t.$set(t.form,"head",e)},expression:"form.head"}})],1),i("el-form-item",{attrs:{label:"店铺封面",prop:"image"}},[i("BizAvatarUploaderNew",{model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),i("el-form-item",{attrs:{label:"所属运营商"}},[i("label",[t._v(t._s(t.form.operatorName))])]),i("el-form-item",{attrs:{label:"所属上级"}},[i("label",[t._v(t._s(t.form.parentName))])]),i("el-form-item",{attrs:{label:"状态",prop:"isEnabled"}},[i("el-radio-group",{model:{value:t.form.isEnabled,callback:function(e){t.$set(t.form,"isEnabled",e)},expression:"form.isEnabled"}},[i("el-radio",{attrs:{label:"1"}},[t._v("启用")]),i("el-radio",{attrs:{label:"0"}},[t._v("停用")])],1)],1),i("el-form-item",{attrs:{label:"",prop:"communitySilent"}},[i("el-checkbox",{attrs:{label:"社区动态禁言","true-label":"1","false-label":"0"},model:{value:t.form.communitySilent,callback:function(e){t.$set(t.form,"communitySilent",e)},expression:"form.communitySilent"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showUnionType,expression:"showUnionType"}],attrs:{label:"父子店铺关系"}},[i("div",{attrs:{slot:"label"},slot:"label"},[t._v(" 父子店铺关系 "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:UnionType",arg:"UnionType"}],attrs:{type:"text",size:"small"}},[i("i",{staticClass:"iconfont el-icon-question"})]),i("el-popover",{ref:"UnionType",attrs:{placement:"bottom-start",width:"300",trigger:"hover"}},[i("p",[t._v("父子店铺可选择以下几种关系：")]),i("p",[t._v("● 独立 — 不共享任何资源，两个店铺之间没有建立起任何信任关系；")]),i("p",[t._v("● 合作联盟 — 共享商品和营销活动，店铺之间具有良好稳定的合作关系；")]),i("p",[t._v("● 品牌加盟 — 人事和财务独立，协商共享其他资源，常见于总店和子店之间，或者加盟品牌。")]),t._v(" ● 直营连锁 — 人事、财务和资源统一管理，常见于总店和分店之间，或者直营店。 ")])],1),i("el-select",{attrs:{placeholder:"请选择"},on:{change:t.unionTypeChange},model:{value:t.form.unionType,callback:function(e){t.$set(t.form,"unionType",e)},expression:"form.unionType"}},[i("el-option",{attrs:{label:"独立",value:"0"}}),i("el-option",{attrs:{label:"合作联盟",value:"1"}}),i("el-option",{attrs:{label:"品牌加盟",value:"2"}}),i("el-option",{attrs:{label:"直营连锁",value:"3"}}),i("el-option",{attrs:{label:"园区联盟",value:"4"}})],1),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showConfig,expression:"showConfig"}],attrs:{type:"primary"},on:{click:function(e){return t.isShow(t.dialogTableVisible)}}},[t._v("详细配置")])],1),i("el-form-item",{attrs:{label:"店铺二维码",prop:"qrCodePath"}},[i("div",{attrs:{slot:"label"},slot:"label"},[t._v(" 店铺二维码 "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:codePop",arg:"codePop"}],attrs:{type:"text",size:"small"}},[i("i",{staticClass:"iconfont el-icon-question"})]),i("el-popover",{ref:"codePop",attrs:{placement:"bottom-start",width:"300",trigger:"hover",content:"我们将为您创建一个专属的店铺二维码，您的用户可通过扫描该二维码关注快速您的店铺，并成为您店铺的会员哦。"}})],1),t.form.qrCodePath?i("img",{attrs:{src:t.form.qrCodePath,width:"100px"}}):t._e(),t.itemId?i("el-button",{attrs:{type:"primary"},on:{click:t.print}},[t._v("打印")]):t._e(),t.itemId?i("el-button",{attrs:{type:"primary"},on:{click:t.view}},[t._v("查看")]):t._e()],1)],1),i("biz-dialog-selector",{attrs:{title:"选择店铺",visibility:t.showDialog,appendToBody:!0,keyField:"id",selectionKeys:t.selectionKeys,loading:t.dialogLoading,tableData:t.dialogTableData,pagination:t.dialogPagination,selectionMode:"single",filters:t.dialogFilters},on:{"update:visibility":function(e){t.showDialog=e},confirmed:t.handleConfirmed,open:t.opened,operate:t.dialogOperate,filterDataChange:t.dialogFilterDataChange,pageSizeChange:t.dialogPageSizeChange,currentPageChange:t.dialogCurrentPageChange}},[i("el-table-column",{attrs:{prop:"name",label:"店铺名称"},scopedSlots:t._u([{key:"default",fn:function(e){return i("div",{},[i("div",{staticClass:"biz-two-column"},[i("img",{attrs:{src:e.row.head||t.DefaultAvatar}}),i("div",{staticClass:"biz-two-row"},[i("div",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.name))])])])])}}])}),i("el-table-column",{attrs:{prop:"operatorName",label:"所属运营商"}}),i("el-table-column",{attrs:{prop:"address",label:"地址"}})],1),i("el-dialog",{attrs:{title:"父子店铺关系配置",center:"",visible:t.dialogTableVisible,"custom-class":"configList",width:"90%","append-to-body":""},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[i("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:t.unionTypeChange},model:{value:t.form.unionType,callback:function(e){t.$set(t.form,"unionType",e)},expression:"form.unionType"}},[i("el-option",{attrs:{label:"独立",value:"0"}}),i("el-option",{attrs:{label:"合作联盟",value:"1"}}),i("el-option",{attrs:{label:"品牌加盟",value:"2"}}),i("el-option",{attrs:{label:"直营连锁",value:"3"}}),i("el-option",{attrs:{label:"园区联盟",value:"4"}})],1),i("el-radio-group",{attrs:{size:"small"},on:{change:t.relationshipChange},model:{value:t.relationship,callback:function(e){t.relationship=e},expression:"relationship"}},[i("el-radio-button",{attrs:{label:"0"}},[t._v("父→子")]),i("el-radio-button",{attrs:{label:"1"}},[t._v("子→父")])],1),i("el-table",{directives:[{name:"show",rawName:"v-show",value:t.isFather,expression:"isFather"}],attrs:{data:t.form.configList}},[i("el-table-column",{attrs:{label:"资源",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{domProps:{innerHTML:t._s(t.getType(e.row.type))}})]}}])}),i("el-table-column",{attrs:{label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9"},on:{change:function(i){return t.share(e.row.toFatherConfig)}},model:{value:e.row.toFatherConfig.share,callback:function(i){t.$set(e.row.toFatherConfig,"share",i)},expression:"scope.row.toFatherConfig.share"}})]}}])}),i("el-table-column",{attrs:{label:"编辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9",disabled:"0"===e.row.type||"1"===e.row.type},on:{change:function(i){return t.edit(e.row.toFatherConfig)}},model:{value:e.row.toFatherConfig.edit,callback:function(i){t.$set(e.row.toFatherConfig,"edit",i)},expression:"scope.row.toFatherConfig.edit"}})]}}])}),i("el-table-column",{attrs:{label:"审核"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9",disabled:!("3"==e.row.type||"2"==e.row.type)},on:{change:function(i){return t.auditShare(e.row.toFatherConfig)}},model:{value:e.row.toFatherConfig.auditShare,callback:function(i){t.$set(e.row.toFatherConfig,"auditShare",i)},expression:"scope.row.toFatherConfig.auditShare"}})]}}])}),i("el-table-column",{attrs:{label:"复制"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9",disabled:"9"!==e.row.type},on:{change:function(i){return t.copyShare(e.row.toFatherConfig)}},model:{value:e.row.toFatherConfig.copyShare,callback:function(i){t.$set(e.row.toFatherConfig,"copyShare",i)},expression:"scope.row.toFatherConfig.copyShare"}})]}}])})],1),i("el-table",{directives:[{name:"show",rawName:"v-show",value:t.isSon,expression:"isSon"}],attrs:{data:t.form.configList}},[i("el-table-column",{attrs:{label:"资源",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{domProps:{innerHTML:t._s(t.getType(e.row.type))}})]}}])}),i("el-table-column",{attrs:{label:"查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9"},on:{change:function(i){return t.share(e.row.toSonConfig)}},model:{value:e.row.toSonConfig.share,callback:function(i){t.$set(e.row.toSonConfig,"share",i)},expression:"scope.row.toSonConfig.share"}})]}}])}),i("el-table-column",{attrs:{label:"编辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9",disabled:"0"===e.row.type||"1"===e.row.type},on:{change:function(i){return t.edit(e.row.toSonConfig)}},model:{value:e.row.toSonConfig.edit,callback:function(i){t.$set(e.row.toSonConfig,"edit",i)},expression:"scope.row.toSonConfig.edit"}})]}}])}),i("el-table-column",{attrs:{label:"审核"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9",disabled:""},on:{change:function(i){return t.auditShare(e.row.toSonConfig)}},model:{value:e.row.toSonConfig.auditShare,callback:function(i){t.$set(e.row.toSonConfig,"auditShare",i)},expression:"scope.row.toSonConfig.auditShare"}})]}}])}),i("el-table-column",{attrs:{label:"复制"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9",disabled:"9"!==e.row.type},on:{change:function(i){return t.copyShare(e.row.toSonConfig)}},model:{value:e.row.toSonConfig.copyShare,callback:function(i){t.$set(e.row.toSonConfig,"copyShare",i)},expression:"scope.row.toSonConfig.copyShare"}})]}}])})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("保存")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取消")])],1)],1)],1)},S=[],x=i("8330"),w=i("3f70"),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:t.title,visible:t.dialogVisible,"append-to-body":t.appendToBody,"custom-class":"biz-store-dialog-selector"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close,open:t.open}},[i("biz-flex-table",{ref:"table",attrs:{operations:t.operations,filters:t.filters,tags:t.tags,pagination:t.pagination,tableData:t.tableData,loading:t.loading,checkable:t.checkable},on:{operate:t.operate,"row-click":t.rowClick,"filter-data-change":t.filterDataChange,"select-all":t.handleSelectAll,select:t.handleSelectionChange,"size-change":t.pageSizeChange,"current-change":t.currentPageChange}},[t._t("default")],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confirmed}},[t._v("确定")])],1)],1)},U=[],k=(i("99af"),i("c975"),i("a434"),{name:"BizDialogSelector",components:{BizFlexTable:o["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},selectionKeys:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],innerSelection:[]}},methods:{generateSelectionKeys:function(t,e){if(t.indexOf(e)>=0)this.innerSelectionKeys.push(e[this.keyField]);else{var i=this.innerSelectionKeys.indexOf(e[this.keyField]);this.innerSelectionKeys.splice(i,1)}},open:function(t){console.log(this.selectionKeys),this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(t){this.innerSelectionKeys=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){this.innerSelectionKeys.length>0?(this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1):this.$message("请选择一项")},operate:function(t){this.$emit("operate",t)},filterDataChange:function(t){this.$emit("filterDataChange",t)},handleSelectAll:function(t){var e=this;0===t.length?this.tableData.forEach((function(t){var i=e.innerSelectionKeys.indexOf(t[e.keyField]);i>=0&&e.innerSelectionKeys.splice(i,1)})):this.tableData.forEach((function(t){var i=e.innerSelectionKeys.indexOf(t[e.keyField]);i<0&&e.innerSelectionKeys.push(t[e.keyField])}))},handleSelectionChange:function(t,e){this.generateSelectionKeys(t,e)},pageSizeChange:function(t){this.$emit("pageSizeChange",t)},currentPageChange:function(t){this.$emit("currentPageChange",t)},rowClick:function(t,e,i){"single"===this.selectionMode&&(this.innerSelectionKeys=[t[this.keyField]],this.innerSelection=[t])}},watch:{visibility:function(t,e){this.dialogVisible=t}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){}}),F=k,C=(i("d55c"),Object(f["a"])(F,_,U,!1,null,null,null)),z=C.exports,T=i("c17f"),I=i("7e5b"),A=i("1ab1"),B=i("624d"),E=i.n(B),L={"拉萨市":"100","那曲地区":"101","日喀则地区":"102","阿里地区":"103","昆明市":"104","楚雄彝族自治州":"105","玉溪市":"106","红河哈尼族彝族自治州":"107","普洱市":"108","西双版纳傣族自治州":"109","临沧市":"110","大理白族自治州":"111","保山市":"112","怒江傈僳族自治州":"113","丽江市":"114","迪庆藏族自治州":"115","德宏傣族景颇族自治州":"116","张掖市":"117","武威市":"118","东莞市":"119","东沙群岛":"120","三亚市":"121","鄂州市":"122","乌海市":"123","莱芜市":"124","海口市":"125","蚌埠市":"126","河南省直辖县级行政单位":"1277","济源市":"1277","合肥市":"127","阜阳市":"128","芜湖市":"129","安庆市":"130","北京市":"131","重庆市":"132","南平市":"133","泉州市":"134","庆阳市":"135","定西市":"136","韶关市":"137","佛山市":"138","茂名市":"139","珠海市":"140","梅州市":"141","桂林市":"142","河池市":"143","崇左市":"144","钦州市":"145","贵阳市":"146","六盘水市":"147","秦皇岛市":"148","沧州市":"149","石家庄市":"150","邯郸市":"151","新乡市":"152","洛阳市":"153","商丘市":"154","许昌市":"155","襄樊市":"156","荆州市":"157","长沙市":"158","衡阳市":"159","镇江市":"160","南通市":"161","淮安市":"162","南昌市":"163","新余市":"164","通化市":"165","锦州市":"166","大连市":"167","乌兰察布市":"168","巴彦淖尔市":"169","渭南市":"170","宝鸡市":"171","枣庄市":"172","日照市":"173","东营市":"174","威海市":"175","太原市":"176","文山壮族苗族自治州":"177","温州市":"178","杭州市":"179","宁波市":"180","中卫市":"181","临夏回族自治州":"182","辽源市":"183","抚顺市":"184","阿坝藏族羌族自治州":"185","宜宾市":"186","中山市":"187","亳州市":"188","滁州市":"189","宣城市":"190","廊坊市":"191","宁德市":"192","龙岩市":"193","厦门市":"194","莆田市":"195","天水市":"196","清远市":"197","湛江市":"198","阳江市":"199","河源市":"200","潮州市":"201","来宾市":"202","百色市":"203","防城港市":"204","铜仁地区":"205","毕节地区":"206","承德市":"207","衡水市":"208","濮阳市":"209","开封市":"210","焦作市":"211","三门峡市":"212","平顶山市":"213","信阳市":"214","鹤壁市":"215","十堰市":"216","荆门市":"217","武汉市":"218","常德市":"219","岳阳市":"220","娄底市":"221","株洲市":"222","盐城市":"223","苏州市":"224","景德镇市":"225","抚州市":"226","本溪市":"227","盘锦市":"228","包头市":"229","阿拉善盟":"230","榆林市":"231","铜川市":"232","西安市":"233","临沂市":"234","滨州市":"235","青岛市":"236","朔州市":"237","晋中市":"238","巴中市":"239","绵阳市":"240","广安市":"241","资阳市":"242","衢州市":"243","台州市":"244","舟山市":"245","固原市":"246","甘南藏族自治州":"247","内江市":"248","曲靖市":"249","淮南市":"250","巢湖市":"251","黄山市":"252","淮北市":"253","三明市":"254","漳州市":"255","陇南市":"256","广州市":"257","云浮市":"258","揭阳市":"259","贺州市":"260","南宁市":"261","遵义市":"262","安顺市":"263","张家口市":"264","唐山市":"265","邢台市":"266","安阳市":"267","郑州市":"268","驻马店市":"269","宜昌市":"270","黄冈市":"271","益阳市":"272","邵阳市":"273","湘西土家族苗族自治州":"274","郴州市":"275","泰州市":"276","宿迁市":"277","宜春市":"278","鹰潭市":"279","朝阳市":"280","营口市":"281","丹东市":"282","鄂尔多斯市":"283","延安市":"284","商洛市":"285","济宁市":"286","潍坊市":"287","济南市":"288","上海市":"289","晋城市":"290","澳门特别行政区":"2911","香港特别行政区":"2912","南充市":"291","丽水市":"292","绍兴市":"293","湖州市":"294","北海市":"295","海南省直辖县级行政单位":"296","赤峰市":"297","六安市":"298","池州市":"299","福州市":"300","惠州市":"301","江门市":"302","汕头市":"303","梧州市":"304","柳州市":"305","黔南布依族苗族自治州":"306","保定市":"307","周口市":"308","南阳市":"309","孝感市":"310","黄石市":"311","张家界市":"312","湘潭市":"313","永州市":"314","南京市":"315","徐州市":"316","无锡市":"317","吉安市":"318","葫芦岛市":"319","鞍山市":"320","呼和浩特市":"321","吴忠市":"322","咸阳市":"323","安康市":"324","泰安市":"325","烟台市":"326","吕梁市":"327","运城市":"328","广元市":"329","遂宁市":"330","泸州市":"331","天津市":"32","金华市":"333","嘉兴市":"334","石嘴山市":"335","昭通市":"336","铜陵市":"337","肇庆市":"338","汕尾市":"339","嘉峪关市":"33","深圳市":"340","贵港市":"341","黔东南苗族侗族自治州":"342","黔西南布依族苗族自治州":"343","漯河市":"344","湖北省直辖县级行政单位":"345","扬州市":"346","连云港市":"347","常州市":"348","九江市":"349","金昌市":"34","萍乡市":"350","辽阳市":"351","汉中市":"352","菏泽市":"353","淄博市":"354","大同市":"355","长治市":"356","阳泉市":"357","马鞍山市":"358","平凉市":"359","白银市":"35","银川市":"360","玉林市":"361","咸宁市":"362","怀化市":"363","上饶市":"364","赣州市":"365","聊城市":"366","忻州市":"367","临汾市":"368","达州市":"369","兰州市":"36","宿州市":"370","随州市":"371","德州市":"372","恩施土家族苗族自治州":"373","酒泉市":"37","大兴安岭地区":"38","黑河市":"39","伊春市":"40","齐齐哈尔市":"41","佳木斯市":"42","鹤岗市":"43","绥化市":"44","双鸭山市":"45","鸡西市":"46","七台河市":"47","哈尔滨市":"48","牡丹江市":"49","大庆市":"50","白城市":"51","松原市":"52","长春市":"53","延边朝鲜族自治州":"54","吉林市":"55","四平市":"56","白山市":"57","沈阳市":"58","阜新市":"59","铁岭市":"60","呼伦贝尔市":"61","兴安盟":"62","锡林郭勒盟":"63","通辽市":"64","海西蒙古族藏族自治州":"65","西宁市":"66","海北藏族自治州":"67","海南藏族自治州":"68","海东地区":"69","黄南藏族自治州":"70","玉树藏族自治州":"71","果洛藏族自治州":"32","甘孜藏族自治州":"73","德阳市":"74","成都市":"75","雅安市":"76","眉山市":"77","自贡市":"78","乐山市":"79","凉山彝族自治州":"80","攀枝花市":"81","和田地区":"82","喀什地区":"83","克孜勒苏柯尔克孜自治州":"84","阿克苏地区":"85","巴音郭楞蒙古自治州":"86","新疆直辖县级行政单位":"87","新疆维吾尔自治区直辖县级行政单位":"87","博尔塔拉蒙古自治州":"88","吐鲁番地区":"89","伊犁哈萨克自治州":"90","哈密地区":"91","乌鲁木齐市":"92","昌吉回族自治州":"93","塔城地区":"94","克拉玛依市":"95","阿勒泰地区":"96","山南地区":"97","林芝地区":"98","昌都地区":"99"},M=L,R={name:"FederationMgmtInfo",props:{itemId:{type:String},type:{type:String,default:""},parent:{type:String,default:""},parentType:{type:String,default:""}},components:{BizGrid:y["a"],BizSaveButton:x["a"],BizDialogSelector:z,BizMapPointer:w["a"],BizAvatarUploaderNew:T["b"]},computed:Object(n["a"])(Object(n["a"])({},Object(d["c"])(["getUser"])),{},{point:{get:function(){return{lng:this.form.lngBaidu,lat:this.form.latBaidu}},set:function(t){t&&(this.form.lngBaidu=t.lng,this.form.latBaidu=t.lat)}},showConfig:function(){return"shop"!==this.getUser.roleLevel||"store"===this.type&&this.itemId!==this.getUser.shop.id}}),data:function(){return{showSetting:!1,showUnionType:!1,loading:!1,dialogTableVisible:!1,selectionKeys:[],relationship:"0",isSon:!0,DefaultAvatar:E.a,isFather:!1,defaultShopLogo:"/resources/admin/images/shop-logo.png",rules:{name:[{message:"请输入店铺名称",trigger:"blur",required:!0},{pattern:/^[\u4E00-\u9FA5A-Za-z0-9.()-]+$/,message:"店铺名称不能包含除.()-以外的其他字符",trigger:"blur"}],address:[{required:!0,message:"请选择地区",trigger:"blur"}],phone:[{required:!0,message:"销售电话不能少于5位",trigger:"blur",min:5},{pattern:/^[-0-9]*$/,message:"请输入数字",trigger:"blur"}],serviceMobile:[{required:!1,message:"售后电话不能少于5位",trigger:"blur",min:5},{pattern:/^[-0-9]*$/,message:"请输入数字",trigger:"blur"}],customerMobile:[{required:!1,message:"客服电话不能少于5位",trigger:"blur",min:5},{pattern:/^[-0-9]*$/,message:"请输入数字",trigger:"blur"}],rescueMobile:[{required:!1,message:"救援电话不能少于5位",trigger:"blur",min:5},{pattern:/^[-0-9]*$/,message:"请输入数字",trigger:"blur"}]},form:{id:"",name:"",address:"",cityCode:"",phone:"",serviceMobile:"",customerMobile:"",rescueMobile:"",parent:"",parentType:"",head:this.defaultShopLogo,image:"",communitySilent:!1,selectionKeys:[],companyId:"",isEnabled:"1",lngBaidu:"",latBaidu:"",unionType:"0",configList:[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}],operatorName:"",parentName:""},resetForm:{id:"",name:"",address:"",phone:"",serviceMobile:"",customerMobile:"",rescueMobile:"",parent:"",parentType:"",head:this.defaultShopLogo,image:"",communitySilent:!1,selectionKeys:[],companyId:"",isEnabled:"1",lngBaidu:"",latBaidu:"",unionType:"0",configList:[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}],operatorName:"",parentName:""},operations:[{label:"保存",name:"save",type:"primary",auth:["admin:union.manage.edit"]}],dialogLoading:!0,dialogTableData:[],dialogPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},dialogFilters:[{type:"input",label:"",placeholder:"请输入店铺名称",name:"searchValue",value:""}],showDialog:!1,errorMobile:"",errorRole:"",errUserName:"",errName:""}},created:function(){this.itemId||"store"!==this.parentType?this.showUnionType=!1:this.showUnionType=!0,this.itemId&&"store"===this.type&&this.queryStoreOrOperator(),this.getDefaultImg()},watch:{itemId:function(t,e){this.$refs.form.clearValidate(),this.$refs.form.$el.scrollTop=0,this.parentCompanyAndStore(),this.itemId&&"store"===this.type?this.queryStoreOrOperator():this.form=this.defaultMOdel()},parent:function(t,e){this.form=this.defaultMOdel(),this.parentCompanyAndStore()}},mounted:function(){},methods:{operate:function(t){this[t]()},getDefaultImg:function(){var t=this,e={type:"displaySetting"};A["a"].get("/admin/settings/settings.jhtml",e).then((function(e){e.settingList.defaultStoreLogoImage&&(t.defaultShopLogo=e.settingList.defaultStoreLogoImage)})).catch((function(e){console.log(e),console.log("code错误"),t.$message.warning(e.errorMessage)}))},relationshipChange:function(t){"0"===t?(this.isSon=!0,this.isFather=!1):(this.isSon=!1,this.isFather=!0)},share:function(t){},edit:function(t){},auditShare:function(t){},copyShare:function(t){},defaultMOdel:function(){return{id:"",name:"",address:"",phone:"",serviceMobile:"",customerMobile:"",rescueMobile:"",parent:"",parentType:"",head:this.defaultShopLogo,image:"",communitySilent:!1,selectionKeys:[],companyId:"",isEnabled:"1",lngBaidu:"",latBaidu:"",unionType:"0",configList:[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}],operatorName:"",parentName:""}},handleConfirmed:function(t,e){this.form=e[0],this.$set(this.form,"selectionKeys",t),this.form.configList=[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}],this.form.unionType="0",this.$refs.form.clearValidate("name"),this.$refs.form.clearValidate("address")},showNotify:function(t,e){this.$notify({showClose:!0,message:t,type:e})},parentCompanyAndStore:function(){var t=this;I["a"].parentCompanyAndStore({id:this.parent||"",type:this.parentType||""},(function(e){t.form.parentName=e.parentName,t.form.operatorName=e.operatorName,t.loading=!1}),(function(t){console.log(t),console.log("code错误")}))},unionTypeChange:function(t){switch(t){case"0":this.form.configList=[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}];break;case"1":this.form.configList=[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"0",auditShare:"1",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"0",auditShare:"1",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}];break;case"2":this.form.configList=[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}];break;case"3":this.form.configList=[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}];break;case"4":this.form.configList=[{toFather:"0",toSon:"1",type:"5",toFatherConfig:{share:"1",auditShare:"0",edit:"1",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"6",toFatherConfig:{share:"1",auditShare:"0",edit:"1",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"8",toFatherConfig:{share:"1",auditShare:"0",edit:"1",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"3",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"4",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"13",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"14",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"1",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"12",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"7",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"2",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"1",type:"0",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"9",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"1"},toSonConfig:{share:"1",auditShare:"0",edit:"1",copyShare:"1"}},{toFather:"0",toSon:"0",type:"10",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"11",toFatherConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"0",auditShare:"0",edit:"0",copyShare:"0"}},{toFather:"0",toSon:"0",type:"15",toFatherConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"},toSonConfig:{share:"1",auditShare:"0",edit:"0",copyShare:"0"}}];break}},queryStoreOrOperator:function(){var t=this;this.loading=!0,this.itemId&&I["a"].query({id:this.itemId||"",type:this.type||""},(function(e){t.form=e.content,e.content.configList&&e.content.configList.length>0?t.showUnionType=!0:t.showUnionType=!1,t.loading=!1}),(function(t){console.log(t),console.log("code错误")}))},save:function(){var t=this;this.$refs.form.validate((function(e,i){if(e)if(t.loading=!0,t.itemId||t.form.id)I["a"].update(t.getSaveParams(),(function(e){t.$message.success("保存成功"),t.loading=!1,t.$emit("operationSuccess",{id:t.parent,userType:t.parentType}),t.$nextTick((function(){t.parent||t.$emit("operationSuccess",{id:t.itemId,userType:t.type})}))}),(function(e){t.loading=!1,t.$message.warning(e.errorMessage)}));else{if(""===t.form.address)return t.$message.warning("请填写地址"),t.loading=!1,!1;t.loading=!0,I["a"].add(t.getSaveParams(),(function(e){t.$message.success("保存成功"),t.loading=!1,t.$emit("operationSuccess",{id:t.parent,userType:t.parentType}),t.$nextTick((function(){t.parent||t.$emit("operationSuccess",{id:t.itemId,userType:t.type})}))}),(function(e){t.$message.warning(e.errorMessage),t.loading=!1}))}}))},getSaveParams:function(){return{id:this.itemId?this.itemId:this.form.id,name:this.form.name,cityCode:this.form.cityCode,parent:this.itemId?this.form.parent:this.parent,parentType:this.itemId?this.form.parentType:this.parentType,address:this.form.address,latBaidu:this.form.latBaidu,lngBaidu:this.form.lngBaidu,phone:this.form.phone,serviceMobile:this.form.serviceMobile,customerMobile:this.form.customerMobile,rescueMobile:this.form.rescueMobile,head:this.form.head,image:this.form.image,isEnabled:this.form.isEnabled,communitySilent:this.form.communitySilent,unionType:"store"===this.parentType||"store"===this.form.parentType?this.form.unionType:"",configList:"store"===this.parentType||"store"===this.form.parentType?this.form.configList:[]}},isShow:function(t){this.dialogTableVisible=!t},showStorePicker:function(t){this.showDialog=!0},queryStoreList:function(t){var e=this;I["a"].listAdditiveStore(t,(function(t){e.dialogLoading=!1,e.dialogTableData=t.content,e.dialogPagination.total=Number(t.total)}),(function(t){console.log(t),console.log("code错误")}))},handleAddressChange:function(t,e){this.$set(this.form,"address",t),this.$refs.form.clearValidate("address"),this.form.cityCode=M[e]},handleUploadSuccess:function(t){this.$set(this.form,"head",t)},opened:function(){this.dialogPagination.currentPage=1,this.dialogPagination.pageSize=20,this.dialogFilters=[{type:"input",label:"",placeholder:"请输入名称",name:"searchValue",value:""}],this.queryStoreList(this.getDialogQueryParams())},getDialogQueryParams:function(){return{pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage,searchValue:this.dialogFilters[0].value,parentType:this.parentType,parentId:this.parent}},getType:function(t){switch(t){case"0":return"员工&nbsp;&nbsp;&nbsp;&nbsp;|- 员工信息";case"1":return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    |- 财务信息";case"2":return"商品&nbsp;&nbsp;&nbsp;&nbsp|- 商品信息&nbsp;&nbsp;&nbsp;&nbsp|- 电商商品";case"12":return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>|- 进销存商品";case"3":return"营销&nbsp;&nbsp;&nbsp;&nbsp;|- 营销活动";case"4":return"订单&nbsp;&nbsp;&nbsp;&nbsp;|- 会员订单";case"13":return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- 进销存采购订单";case"14":return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- 进销存销售订单";case"5":return"会员&nbsp;&nbsp;&nbsp;&nbsp;|- 会员信息";case"6":return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    |- 会员卡";case"7":return"车辆&nbsp;&nbsp;&nbsp;&nbsp;|- 车队";case"8":return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    |-车友会&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- 车友信息";case"9":return"设备&nbsp;&nbsp;&nbsp;&nbsp;|- 智能到店";case"10":return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    |- 到店设置";case"11":return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    |- 设备管理";case"15":return"仓库&nbsp;&nbsp;&nbsp;&nbsp;|- 仓库信息"}},dialogFilterDataChange:function(t){this.dialogPagination.currentPage=1,this.queryStoreList(this.getDialogQueryParams())},dialogPageSizeChange:function(t){this.$set(this.dialogPagination,"pageSize",t),this.queryStoreList(this.getDialogQueryParams())},dialogCurrentPageChange:function(t){this.$set(this.dialogPagination,"currentPage",t),this.queryStoreList(this.getDialogQueryParams())},print:function(){window.open(document.location.protocol+"//"+window.location.host+"/#/qrcode-print?img="+this.form.qrCodePath+"&shopName="+this.form.name)},view:function(){window.open(document.location.protocol+"//"+window.location.host+this.form.qrCodePath)},dialogOperate:function(t){}}},N=R,D=(i("6417"),Object(f["a"])(N,v,S,!1,null,null,null)),P=D.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("biz-grid",{staticClass:"fedration-mgmt-operator-info"},[i("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px",size:"small","inline-message":!0}},[i("el-form-item",{attrs:{label:"上级运营商"}},[i("el-input",{attrs:{value:t.parentName||t.name,disabled:""}})],1),i("el-form-item",{attrs:{label:"运营商名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入运营商名称",maxlength:"20",minlength:"1"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"地址",prop:"address"}},[i("biz-map-pointer",{attrs:{address:t.form.address},on:{addressChange:t.handleAddressChange},model:{value:t.point,callback:function(e){t.point=e},expression:"point"}})],1),i("el-form-item",{attrs:{label:"电话",prop:"phone"}},[i("el-input",{attrs:{placeholder:"请输入电话"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),i("el-form-item",{attrs:{label:"logo",prop:"head"}},[i("BizAvatarUploaderNew",{model:{value:t.form.head,callback:function(e){t.$set(t.form,"head",e)},expression:"form.head"}})],1),i("el-form-item",{attrs:{label:"状态",prop:"isEnabled"}},[i("el-radio-group",{model:{value:t.form.isEnabled,callback:function(e){t.$set(t.form,"isEnabled",e)},expression:"form.isEnabled"}},[i("el-radio",{attrs:{label:"1"}},[t._v("启用")]),i("el-radio",{attrs:{label:"0"}},[t._v("停用")])],1)],1),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{placeholder:"请输入备注信息"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)},G=[],V={name:"FederationMgmtInfo",props:{itemId:{type:String},type:{type:String,default:""},parent:{type:String,default:""},parentType:{type:String,default:""},parentName:{type:String,default:""}},components:{BizGrid:y["a"],BizSaveButton:x["a"],BizMapPointer:w["a"],BizAvatarUploaderNew:T["b"]},computed:{point:{get:function(){return{lng:this.form.lngBaidu,lat:this.form.latBaidu}},set:function(t){t&&(this.form.lngBaidu=t.lng,this.form.latBaidu=t.lat)}}},data:function(){return{showSetting:!1,showUnionType:!0,name:"",rules:{name:[{max:20,message:"长度不能大于20位",trigger:"blur",required:!0}],address:[{required:!0,message:"请选择地区",trigger:"blur"}],phone:[{required:!0,message:"电话不能少于5位",trigger:"blur",min:5},{pattern:/^[-0-9]*$/,message:"请输入数字",trigger:"blur"}]},form:{id:"",name:"",parent:"",address:"",latBaidu:"",lngBaidu:"",phone:"",head:"",remark:"",isEnabled:"1"},operations:[{label:"保存",name:"save",type:"primary",auth:["admin:union.manage.edit"]}],loading:!1,showDialog:!1,errorMobile:"",errorRole:"",errUserName:"",errName:""}},created:function(){this.itemId&&"operator"===this.type&&this.queryStoreOrOperator()},watch:{itemId:function(t,e){this.$refs.form.clearValidate(),t&&"operator"===this.type?this.queryStoreOrOperator():this.form={id:"",name:"",parent:"",address:"",latBaidu:"",lngBaidu:"",phone:"",head:"",remark:"",isEnabled:"1"}}},mounted:function(){},methods:{operate:function(t){this[t]()},showNotify:function(t,e){this.$notify({showClose:!0,message:t,type:e})},queryStoreOrOperator:function(){var t=this;I["a"].query({id:this.itemId||"",type:"operator"},(function(e){t.form=e.content}),(function(t){console.log(t),console.log("code错误")}))},queryParentOperator:function(t){var e=this;I["a"].query({id:t||"",type:"operator"},(function(t){e.name=t.content.name}),(function(t){e.name="",console.log(t),console.log("code错误")}))},save:function(){var t=this;if(""===this.form.name)return this.$message.warning("请填写运营商名称"),this.loading=!1,!1;this.$refs.form.validate((function(e,i){if(e)if(t.itemId)I["a"].updateOperator(t.getSaveParams(),(function(e){t.$message.success("保存成功"),t.$emit("operationSuccess",{id:t.parent,userType:t.parentType}),t.$nextTick((function(){t.parent||t.$emit("operationSuccess",{id:t.itemId,userType:t.type})}))}),(function(e){t.$message.warning(e.errorMessage)}));else{if(""===t.form.address)return t.$message.warning("请填写地址"),t.loading=!1,!1;I["a"].addOperator(t.getSaveParams(),(function(e){t.$message.success("保存成功"),t.$emit("operationSuccess",{id:t.parent,userType:t.parentType}),t.$nextTick((function(){t.parent||t.$emit("operationSuccess",{id:t.itemId,userType:t.type})}))}),(function(e){t.$message.warning(e.errorMessage),t.loading=!1}))}}))},getSaveParams:function(){return{id:this.itemId,name:this.form.name,parent:this.form.parent||this.parent,address:this.form.address,latBaidu:this.form.latBaidu,lngBaidu:this.form.lngBaidu,phone:this.form.phone,head:this.form.head,remark:this.form.remark,isEnabled:this.form.isEnabled}},isShow:function(t){this.showSetting=!t},showPeoplePicker:function(t){this.showDialog=!0},handleAddressChange:function(t){this.$set(this.form,"address",t),this.$refs.form.clearValidate("address")},handleUploadSuccess:function(t){this.$set(this.form,"head",t)},opened:function(){this.dialogPagination.currentPage=1,this.dialogPagination.pageSize=20,this.dialogFilters=[{type:"input",label:"",placeholder:"请输入姓名/手机号",name:"searchValue",value:""}]},getDialogQueryParams:function(){return{pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage,searchValue:this.dialogFilters[0].value}},dialogFilterDataChange:function(t){},dialogPageSizeChange:function(t){this.$set(this.dialogPagination,"pageSize",t)},dialogCurrentPageChange:function(t){this.$set(this.dialogPagination,"currentPage",t)},print:function(){window.open(document.location.protocol+"//"+window.location.host+"/#/qrcode-print?img="+this.form.qrCodePath+"&shopName="+this.form.name)},view:function(){window.open("http://"+window.location.host+this.form.qrCodePath)},dialogOperate:function(t){}}},H=V,j=(i("c679"),Object(f["a"])(H,O,G,!1,null,null,null)),W=j.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("biz-grid",{staticClass:"fedration-mgmt-introduce"},[i("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}),i("biz-editor",{ref:"editor",attrs:{height:"622",width:"100%",hasVideo:!0},on:{"video-oversize":t.checkVideo,"video-wrong-format":t.checkVideo},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},Y=[],$=i("40ae"),J={name:"FederationMgmtIntroduce",components:{BizGrid:y["a"],BizSaveButton:x["a"],BizEditor:$["a"]},data:function(){return{operations:[{label:"保存",name:"save",type:"primary",auth:["admin:union.manage.edit"]}],isCreated:!1,videoType:"video",shopImg:"/resources/admin/images/default/default-shop.png",content:"",editorStyle:{height:"300px",width:"428px",marginLeft:"10px"}}},props:{itemId:{type:String},type:{type:String}},created:function(){this.itemId&&"operator"!==this.type&&this.queryIntroduce()},watch:{itemId:function(t,e){"operator"!==this.type&&this.queryIntroduce()}},methods:{operate:function(t){this[t]()},checkVideo:function(t){this.$message(t)},queryIntroduce:function(){var t=this;this.isCreated=!0,I["a"].queryIntroduce({storeId:this.itemId},(function(e){e.introduce?t.content=e.introduce:t.content='<img src="'.concat(t.shopImg,'"><br><p>XXXXXXX 4S店是官方授权的XX汽车全系销售、售后服务、零配件供应、信息反馈为一体的4S店。公司占地5000平米，建筑面积3500平米，公司设有各种专业检测维修设备，是拥有XX汽车在全国统一建设标准的4S店。公司以 客户满意度第一作为公司发展目标，力求最大限度地满足客户需求，全心全意为客户提供高品质的服务。公司拥有一支通过国家维修行业和厂家专业培训、考核的高素质、专业化人才队伍，通过我们的努力为工作紧张无暇为爱车维保的都市白领提供方便快捷的特色化服务。我们的一站式高效维修，使您在短暂惬意的等待后，准时拿到维修一新的爱车，继续自己的路程。</p>'),t.$nextTick((function(){t.isCreated=!1}))}),(function(e){console.log(e),t.$message.warning(e.errorMessage),console.log("code错误")}))},save:function(){var t=this;I["a"].updateIntroduce({id:this.itemId,introduce:this.content},(function(e){t.$message.success("保存成功")}),(function(e){console.log(e),t.$message.warning(e.errorMessage),console.log("code错误")}))}}},X=J,q=(i("f7ec"),Object(f["a"])(X,Z,Y,!1,null,null,null)),Q=q.exports,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("biz-grid",{staticClass:"fedration-mgmt-fince"},[i("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}),i("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[i("el-collapse-item",{attrs:{title:"金融方案",name:"1"}},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"方案名称",prop:"name"}}),i("el-table-column",{attrs:{prop:"financialInstitutionName",label:"金融机构"}}),i("el-table-column",{attrs:{prop:"categoryName",label:"方案分类"}})],1)],1),i("el-collapse-item",{attrs:{title:"保险方案",name:"2"}},[i("el-table",{ref:"multipleTableI",staticStyle:{width:"100%"},attrs:{data:t.tableDataI,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChangeI}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"保险方案",prop:"name"}}),i("el-table-column",{attrs:{prop:"financialInstitutionName",label:"金融机构"}}),i("el-table-column",{attrs:{prop:"categoryName",label:"方案分类"}})],1)],1)],1)],1)},tt=[],et=(i("d81d"),{name:"FederationMgmtIntroduce",components:{BizGrid:y["a"],BizSaveButton:x["a"]},data:function(){return{operations:[{label:"保存",name:"save",type:"primary"}],activeNames:["1"],multipleSelection:[],multipleSelectionI:[],storeHasFinancialList:[],storeHasInsuranceList:[],tableData:[],tableDataI:[]}},props:{itemId:{type:Object},type:{type:String}},created:function(){this.itemId&&"operator"!==this.type&&this.query()},watch:{itemId:function(t,e){"operator"!==this.type&&this.query()}},updated:function(){this.updateSelection()},methods:{operate:function(t){this[t]()},updateSelection:function(){var t=this;this.tableData.map((function(e){t.storeHasFinancialList.includes(e.id)&&t.$refs.multipleTable.toggleRowSelection(e,!0)})),this.tableDataI.map((function(e){t.storeHasInsuranceList.includes(e.id)&&t.$refs.multipleTableI.toggleRowSelection(e,!0)}))},query:function(){var t=this,e={shopId:this.itemId.id};A["a"].get("/admin/platformfinancialProductController/financialProductList.jhtml",e).then((function(e){t.tableData=e.financialList,t.tableDataI=e.insuranceList,t.storeHasFinancialList=e.storeHasFinancialList,t.storeHasInsuranceList=e.storeHasInsuranceList})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)}))},save:function(){var t=this,e={shopId:this.itemId.id,financialList:this.multipleSelection.map((function(t){return t.id})),insuranceList:this.multipleSelectionI.map((function(t){return t.id}))};A["a"].post("/admin/platformfinancialProductController/authorizeFinancialProductToStore.jhtml",e).then((function(e){t.$message.success("保存成功")})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)}))},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},toggleSelectionI:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTableI.toggleRowSelection(t)})):this.$refs.multipleTableI.clearSelection()},handleSelectionChange:function(t){console.log(t),this.multipleSelection=t},handleSelectionChangeI:function(t){this.multipleSelectionI=t}}}),it=et,rt=(i("039e"),Object(f["a"])(it,K,tt,!1,null,null,null)),at=rt.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("biz-grid",{staticClass:"fedration-mgmt-payment"},[i("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}),t._l(t.contentData,(function(e){return t.contentData?i("div",{key:e.name,staticClass:"payment-mode-content"},[i("el-checkbox",{attrs:{disabled:e.isDisabled},nativeOn:{change:function(i){return t.changeSelectStatus(e)}},model:{value:e.valid,callback:function(i){t.$set(e,"valid",i)},expression:"paymentMode.valid"}},[t._v(t._s(e.name))]),"在线支付"===e.name?i("el-button",{directives:[{name:"popover",rawName:"v-popover:UnionType",arg:"UnionType"}],attrs:{type:"text",size:"small"}},[i("i",{staticClass:"iconfont el-icon-question"})]):t._e(),"到店支付"===e.name?i("el-button",{directives:[{name:"popover",rawName:"v-popover:UnionType1",arg:"UnionType1"}],attrs:{type:"text",size:"small"}},[i("i",{staticClass:"iconfont el-icon-question"})]):t._e(),"货到付款"===e.name?i("el-button",{directives:[{name:"popover",rawName:"v-popover:UnionType2",arg:"UnionType2"}],attrs:{type:"text",size:"small"}},[i("i",{staticClass:"iconfont el-icon-question"})]):t._e(),i("el-popover",{ref:"在线支付"===e.name?"UnionType":"到店支付"===e.name?"UnionType1":"UnionType2",refInFor:!0,attrs:{placement:"bottom-start",width:"300",trigger:"hover"}},["在线支付"===e.name?i("p",[t._v("开通此支付方式后，用户下订单时可直接付款，付款资金实施到达您的账户中。 目前平台支持会员卡余额支付、支付宝支付、银联支付。会员卡余额支付需要用户先预存才可消费。 支付宝和银联支付您必须先开通这两种商家收银账号，将参数填写到对应处。 ")]):t._e(),"到店支付"===e.name?i("p",[t._v("开通此支付方式后，用户可先下订单，到店消费后由您确认收款金额并进行收款。 此支付方式适用于无法准确定价的服务商品。 ")]):t._e(),"货到付款"===e.name?i("p",[t._v("开通此支付方式后，用户可先下订单，通过快递或自己送达至用户手中后向用户收取商品费用。 ")]):t._e()]),i("label",{staticClass:"demonstration"},[t._v("排序")]),i("el-input-number",{staticClass:"payment-method-order",attrs:{type:"number",min:1,"controls-position":"right",size:"small"},model:{value:e.order,callback:function(i){t.$set(e,"order",i)},expression:"paymentMode.order"}},[t._v("排序")]),t._l(e.paymengTypes,(function(r){return i("div",{key:r.name,staticClass:"payment-method"},[i("div",{staticClass:"inline"},[i("div",[i("el-checkbox",{on:{change:function(i){return t.changeParentSelect(e,r.shopValid,r)}},model:{value:r.shopValid,callback:function(e){t.$set(r,"shopValid",e)},expression:"paymengTypes.shopValid"}}),t._v(t._s(r.name)+" ")],1),i("div",[i("label",{staticClass:"demonstration"},[t._v("排序")]),i("el-input-number",{staticClass:"payment-method-order",attrs:{type:"number",label:"排序",min:1,size:"small","controls-position":"right"},model:{value:r.order,callback:function(e){t.$set(r,"order",e)},expression:"paymengTypes.order"}})],1)]),"0"===r.type&&"0"===e.method?i("div",[i("div",{staticClass:"paymentMode-div"},[i("label",[t._v("商户PID")]),i("div",{staticClass:"demonstration-div"},[i("el-input",{attrs:{type:"text",size:"small",placeholder:"请输入商户PID"},model:{value:r.appId,callback:function(e){t.$set(r,"appId",e)},expression:"paymengTypes.appId"}})],1)]),i("div",{staticClass:"paymentMode-div"},[i("label",[t._v("商户私钥")]),i("div",{staticClass:"demonstration-div"},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入商户私钥"},model:{value:r.privateKey,callback:function(e){t.$set(r,"privateKey",e)},expression:"paymengTypes.privateKey"}})],1)]),i("div",{staticClass:"paymentMode-div"},[i("label",[t._v("支付宝公钥")]),i("div",{staticClass:"demonstration-div"},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入支付宝公钥"},model:{value:r.publicKey,callback:function(e){t.$set(r,"publicKey",e)},expression:"paymengTypes.publicKey"}})],1)])]):t._e()])}))],2):t._e()}))],2)},ot=[],st=(i("4d63"),i("25f0"),i("d3b7"),i("5319"),function(t){var e,i=!1;if(void 0!==t&&null!==t)switch(Object.prototype.toString.apply(t)){case"[object String]":e=t.replace(/(^\s*)|(\s*$)/g,""),""!==e&&"null"!==e.toLowerCase()&&e.length>0&&(i=!0);break;case"[object Number]":i=!0;break;case"[object Boolean]":i=!0;break;case"[object Object]":for(var r in t)r&&(i=!0);break;case"[object Array]":t.length>0&&(i=!0);break}return i}),lt={name:"FederationMgmtIntroduce",components:{BizGrid:y["a"],BizSaveButton:x["a"]},data:function(){return{operations:[{label:"保存",name:"save",type:"primary",auth:["admin:union.manage.edit"]}],contentData:{},pidErr:"",flag:!1,privateKeyErr:"",publicKeyErr:""}},props:{itemId:{type:String},type:{type:String}},created:function(){this.itemId&&"operator"!==this.type&&this.initData()},watch:{itemId:function(t,e){"operator"!==this.type&&this.initData()}},methods:{operate:function(t){this[t]()},showNotify:function(t,e){this.$notify({showClose:!0,message:t,type:e})},changeSelectStatus:function(t){!1===t.valid||"0"===t.valid?t.paymengTypes.map((function(t){t.shopValid=!1})):!0!==t.valid&&"1"!==t.valid||t.paymengTypes.map((function(t){t.shopValid=!0}))},changeParentSelect:function(t,e,i){!0!==e&&"1"!==e||(t.valid=!0)},initData:function(){var t=this;this.loaded=!1,this.saving=!1,this.message="",I["a"].getPayments.bind(this)({shopId:this.itemId||window.top.SHOP_ID},(function(e){t.contentData=e.content}),(function(e){t.$message.warning(e)}))},save:function(){var t=this,e="",i=!1;"0"!==this.contentData[0].valid&&!1!==this.contentData[0].valid||"0"!==this.contentData[1].valid&&!1!==this.contentData[1].valid||"0"!==this.contentData[2].valid&&!1!==this.contentData[2].valid?(this.contentData.map((function(i){!0===i.valid||"1"===i.valid?i.valid=!0:i.valid=!1;var r=i.valid,a=!0,n="",o=new RegExp(/^\+?[1-9][0-9]*$/);if(i.order&&!o.test(i.order)&&(n="的排序格式不正确"),i.paymengTypes.map((function(e){if(e.order<1&&(n="["+e.name+"]的排序不能小于1"),e.order&&!o.test(e.order)&&(n="["+e.name+"]的排序格式不正确"),!0===e.shopValid||"1"===e.shopValid){if(e.shopValid=!0,a=!1,"0"===e.type&&"0"===i.method){if(!st(e.appId))return t.$message.warning("商户PID不能为空"),!1;if(t.pidErr="",!st(e.privateKey))return t.$message.warning("商户私钥不能为空"),!1;if(t.privateKeyErr="",!st(e.publicKey))return t.$message.warning("支付宝公钥不能为空"),!1;t.publicKeyErr=""}}else e.shopValid=!1})),!0===r||"1"===r){if(n)return e=i.name+n,t.$message.warning(e),!1;if(a)return t.$message.warning(e="请选择"+i.name+"的付款方式"),!1}})),st(e)||i||I["a"].editPayments.bind(this)(this.contentData,(function(e){t.$message.success("保存成功")}),(function(e){t.$message.warning(e.errorMessage),console.log("ERR_CREATE:",e)}))):this.$message.warning("至少选择一种支付方式")}}},ht=lt,dt=(i("d795"),Object(f["a"])(ht,nt,ot,!1,null,null,null)),pt=dt.exports,ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"upload-vr-asset-h",attrs:{"element-loading-text":"正在上传,请稍候","element-loading-spinner":"el-icon-loading"}},[i("div",{staticClass:"row"},[i("input",{ref:"vr_file",staticClass:"hide-file",attrs:{type:"file",id:"vr_val"},on:{change:t.uploadVr}}),i("div",{attrs:{id:"qrcode"}}),t.hasAuthEdit?i("div",{staticClass:"handle-btn"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("保存")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addVr}},[t._v("添加")]),i("el-button",{attrs:{disabled:"1"===t.form.sourceType||!t.form.filePath,type:"primary",size:"small"},on:{click:t.playVr}},[t._v("预览")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.deleteOperator}},[t._v("删除")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.uploadUrcode}},[t._v("下载二维码")])],1):t._e(),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px",size:"small","inline-message":!0}},[i("el-form-item",{attrs:{label:"VR资源",prop:"filePath"}},[i("div",{staticClass:"slot",attrs:{slot:"label"},slot:"label"},[t._v(" VR资源 "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:filePath",arg:"filePath"}],attrs:{type:"text",size:"small"}},[i("i",{staticClass:"iconfont el-icon-question"})]),i("el-popover",{ref:"filePath",attrs:{placement:"bottom-start",width:"300",trigger:"hover"}},[t._v(" 您可录制VR展厅资料包并上传至平台，用户可足不出户，身临其境的了解您的店铺，VR资源包限制在200M以内。 ")])],1),i("el-radio-group",{on:{change:t.sourceTypeChange},model:{value:t.form.sourceType,callback:function(e){t.$set(t.form,"sourceType",e)},expression:"form.sourceType"}},[i("el-radio",{attrs:{label:"0"}},[t._v("本地资源包")]),i("el-radio",{attrs:{label:"1"}},[t._v("第三方资源地址")])],1),i("el-input",{attrs:{type:"textarea",disabled:"0"===t.form.sourceType,autosize:{minRows:5,maxRows:8}},model:{value:t.form.filePath,callback:function(e){t.$set(t.form,"filePath",e)},expression:"form.filePath"}})],1),i("el-form-item",{attrs:{label:"VR名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入VR名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"VR封面",prop:"cover"}},[i("BizAvatarUploaderNew",{on:{uploadSuccess:t.uploadSuccess},model:{value:t.form.cover,callback:function(e){t.$set(t.form,"cover",e)},expression:"form.cover"}})],1)],1)],1),i("iframe",{directives:[{name:"show",rawName:"v-show",value:t.show_vr,expression:"show_vr "}],staticClass:"iframe ",attrs:{src:t.zip_upload_url+"/index.html",frameborder:"0 "}})])},ut=[],ft=(i("baa5"),i("fb6a"),i("ace4"),i("3ca3"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),i("bc3a")),mt=i.n(ft),gt=i("d044"),yt=i.n(gt),bt={name:"FederationMgmtVr",components:{BizAvatarUploaderNew:T["b"]},computed:Object(n["a"])(Object(n["a"])({QRCode:yt.a},Object(d["c"])("Authority",["currentAuth"])),{},{hasAuthEdit:function(){return this.currentAuth.includes("admin:union.manage.edit")}}),data:function(){return{isUploading:!1,loading:!1,vr_data:0,dialog:!1,vr_reader:new FileReader,vr_title:"VR资源管理(最大支持200M)",vr_file:[],zip_upload_url:"",shopId:"",sourceType:"",filePath:"",form:{filePath:"",name:"",cover:"",sourceType:"0"},title:"店铺Vr",show_vr:!1,saveBtn:"save-btn",rules:{filePath:[{required:!0,message:"请上传vr资源",trigger:"blur"}],name:[{required:!0,message:"请输入Vr名称",trigger:"blur"}],cover:[{required:!0,message:"请上传封面",trigger:"blur"}]}}},props:{itemId:{type:String},type:{type:String}},created:function(){this.itemId&&"operator"!==this.type&&this.init()},watch:{itemId:function(t,e){"operator"!==this.type&&this.init(),this.show_vr=!1,this.$refs.form.clearValidate()}},mounted:function(){},methods:{sourceTypeChange:function(t){},init:function(){var t=this;this.shopId=this.itemId||window.top.SHOP_ID,I["a"].getVrAsset.bind(this)({shopId:this.shopId},(function(e){e&&"100"===e.resultCode&&(e.data.length>0?(t.form.name=e.data[0].name,t.form.name&&(t.title=t.form.name),e.data[0].filePath&&("0"===e.data[0].sourceType?(t.form.filePath=document.location.protocol+"//"+window.location.host+"/resources/admin/ecStatic/index.html#/icar-channel/vr?title="+t.title+"&url="+e.data[0].filePath,t.filePath=document.location.protocol+"//"+window.location.host+"/resources/admin/ecStatic/index.html#/icar-channel/vr?title="+t.title+"&url="+e.data[0].filePath):(t.form.filePath=e.data[0].filePath,t.filePath=e.data[0].filePath)),t.sourceType=e.data[0].sourceType,t.zip_upload_url=e.data[0].filePath,t.form.name=e.data[0].name,t.form.cover=e.data[0].cover,t.form.sourceType=e.data[0].sourceType,mt.a.get(t.zip_upload_url+"/index.html").then((function(e){t.saveBtn="save-btn"})).catch((function(e){"404"===e.status&&(t.saveBtn="useless-btn")}))):(t.form={filePath:"",name:"",cover:"",sourceType:"0"},t.zip_upload_url=""))}))},uploadSuccess:function(){this.$refs.form.clearValidate("cover")},addVr:function(){document.getElementById("vr_val").click()},uploadUrcode:function(){this.zip_upload_url?(this.form.name&&(this.title=this.form.name),new yt.a(document.getElementById("qrcode"),document.location.protocol+"//"+window.location.host+"/resources/admin/ecStatic/index.html#/icar-channel/vr?title="+this.title+"&url="+this.zip_upload_url),this.exportCanvasAsPNG("qrcode.png",document.getElementById("qrcode").children[0])):this.$message({showClose:!0,message:"请先上传资源",type:"warning"})},base64Img2Blob:function(t){for(var e=t.split(";base64,"),i=e[0].split(":")[1],r=window.atob(e[1]),a=r.length,n=new Uint8Array(a),o=0;o<a;++o)n[o]=r.charCodeAt(o);return new Blob([n],{type:i})},downloadFile:function(t,e){var i=document.createElement("a"),r=this.base64Img2Blob(e),a=document.createEvent("HTMLEvents");console.log(1),a.initEvent("click",!1,!1),i.download=t,i.href=URL.createObjectURL(r),document.execCommand("SaveAs"),i.dispatchEvent(a)},exportCanvasAsPNG:function(t,e){var i="image/png",r=document.createElement("a");r.download=t,r.href=e.toDataURL("image/png"),r.dataset.downloadurl=[i,r.href].join(":"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},uploadVr:function(t){var e=this;this.vr_file.push(t.target.files[0]);var i=t.target.files[0].size;if(i/1024/1024>200)this.$message({showClose:!0,message:"请上传小于200M的文件",type:"warning"});else{var r=this,a=this.$refs.vr_file.value.toLowerCase(),n=a.slice(a.lastIndexOf("."),a.length);".zip"===n?(this.vr_url=this.$refs.vr_file.value,this.loading=!0,I["a"].uploadShopZip.bind(r)({shopId:this.shopId,file:r.vr_file[0]},(function(t){r.zip_upload_url=t.path,e.form.name&&(e.title=e.form.name),r.form.filePath=document.location.protocol+"//"+window.location.host+"/resources/admin/ecStatic/index.html#/icar-channel/vr?title="+e.title+"&url="+t.path,e.zip_upload_url=t.path,e.loading=!1,console.log(r.form.filePath),t.path&&(e.$message({showClose:!0,message:"zip上传成功",type:"success"}),e.saveBtn="useless-btn")})),r.vr_reader.onload=function(t){r.vr_data=t.target.result,console.log(r.vr_data)}):this.$message({showClose:!0,message:"请上传zip格式的文件",type:"warning"})}},delVr:function(){this.dialog=!0},deleteOperator:function(){this.zip_upload_url="",this.form.filePath="",this.show_vr=!1},save:function(){var t=this,e={shopId:this.shopId,vrlist:[]};e.vrlist.push({mediaType:"vr",title:"VR",filePath:"0"===this.form.sourceType?this.zip_upload_url:this.form.filePath,name:this.form.name,cover:this.form.cover,sortSn:1,fileName:"vr",sourceType:this.form.sourceType}),this.$refs.form.validate((function(i,r){i&&("0"===t.form.sourceType&&""!==t.zip_upload_url||"1"===t.form.sourceType?I["a"].uploadShopPictures.bind(t)(e,(function(e){t.$message({showClose:!0,message:"保存成功",type:"success"}),t.urlList=[]})):t.$message({showClose:!0,message:"请上传文件！",type:"warning"}))}))},playVr:function(){"useless-btn"===this.saveBtn?this.$message({showClose:!0,message:"十分钟后可预览",type:"warning"}):(console.log(this.zip_upload_url),""!==this.zip_upload_url?this.show_vr=!this.show_vr:this.$message({showClose:!0,message:"请先上传vr资源压缩包",type:"warning"}))}}},vt=bt,St=(i("e23a"),Object(f["a"])(vt,ct,ut,!1,null,null,null)),xt=St.exports,wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"shop-rate__shop-evaluation"},[i("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operateHandler},slot:"top"}),i("el-form",{ref:"form",attrs:{size:"small","label-width":"110px",model:t.formModel,rules:t.rules}},[i("el-form-item",{attrs:{label:"等级",prop:"gradeId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择等级"},on:{change:t.handleGradeChange},model:{value:t.formModel.gradeId,callback:function(e){t.$set(t.formModel,"gradeId",e)},expression:"formModel.gradeId"}},t._l(t.levelList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"店铺评分"}},[i("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary"},on:{click:function(e){t.configVisible=!t.configVisible}}},[t._v("配置")]),i("el-rate",{staticStyle:{"margin-top":"7px"},attrs:{disabled:""},model:{value:t.formModel.score,callback:function(e){t.$set(t.formModel,"score",e)},expression:"formModel.score"}}),i("fieldset",{directives:[{name:"show",rawName:"v-show",value:t.configVisible,expression:"configVisible"}]},[i("legend",[t._v("评分配置")]),i("div",{staticClass:"group-list"},t._l(t.groups,(function(e,r){return i("div",{key:r,staticClass:"group-item"},[i("div",{staticClass:"title"},[t._v(t._s(e.name)+" "),i("span",{staticClass:"score"},[t._v(t._s(e.score))])]),i("el-checkbox-group",{attrs:{size:"small"},on:{change:t.handleTagChange},model:{value:t.formModel.indicatorItems,callback:function(e){t.$set(t.formModel,"indicatorItems",e)},expression:"formModel.indicatorItems"}},t._l(e.indicatorData.indicatorItems,(function(e,r){return i("el-checkbox",{key:r,attrs:{label:e.id,border:""}},[t._v(t._s(e.name))])})),1)],1)})),0)])],1),i("el-form-item",{attrs:{label:"店铺特色"}},[i("tag-select",{ref:"tagSelect",staticClass:"tag-select-shop",attrs:{tagList:t.tagList,selectedTags:t.selectedTags,categoryType:"店铺特色"},on:{addSuccess:t.onAddSuccess}})],1),i("el-form-item",{attrs:{label:"店铺承诺"}},[i("el-checkbox-group",{staticClass:"terminal-mgmt-class__class-ability-setting__checkbox-group",model:{value:t.formModel.promises,callback:function(e){t.$set(t.formModel,"promises",e)},expression:"formModel.promises"}},t._l(t.promiseList,(function(e){return i("div",{key:e.id,staticClass:"checkbox-item"},[i("el-checkbox",{attrs:{label:e.id}},[t._v(t._s(e.name))])],1)})),0)],1)],1),i("el-dialog",{attrs:{title:"从标签库导入",visible:t.dialogVisible,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"dialogForm",attrs:{size:"small","label-width":"110px",model:t.dialogModel,rules:t.dialogRules}},[i("el-form-item",{attrs:{label:"分类",prop:"classId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.handleClassChange},model:{value:t.dialogModel.classId,callback:function(e){t.$set(t.dialogModel,"classId",e)},expression:"dialogModel.classId"}},t._l(t.classList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"标签组",prop:"groupId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择标签组"},on:{change:t.handleGroupChange},model:{value:t.dialogModel.groupId,callback:function(e){t.$set(t.dialogModel,"groupId",e)},expression:"dialogModel.groupId"}},t._l(t.groupList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("biz-save-button",{staticStyle:{"margin-right":"0"},attrs:{operations:t.dialogOperations},on:{operate:t.operateHandler}})],1)],1)},_t=[],Ut=i("18eb"),kt=i("c596"),Ft=i("2497"),Ct={query:function(t,e,i){mt.a.get(kt["g"].shopRate.ShopEvaluation_shop,{params:t}).then(Object(Ft["a"])(e,i)).catch((function(t){console.error(t)}))},queryClassList:function(t,e,i){mt.a.get(kt["g"].shopRate.TagClassMgmt_query,{params:t}).then(Object(Ft["a"])(e,i)).catch((function(t){console.error(t)}))},queryGroupList:function(t,e,i){mt.a.get(kt["g"].shopRate.TagGroupMgmt_query,{params:t}).then(Object(Ft["a"])(e,i)).catch((function(t){console.error(t)}))},queryTagList:function(t,e,i){mt.a.get(kt["g"].shopRate.IndicatorBaseInfo_queryTagList,{params:t}).then(Object(Ft["a"])(e,i)).catch((function(t){console.error(t)}))},add:function(t,e,i){mt.a.post(kt["g"].shopRate.ShopEvaluation_shop,t).then(Object(Ft["a"])(e,i)).catch((function(t){console.error(t)}))},update:function(t,e,i){mt.a.put(kt["g"].shopRate.ShopEvaluation_shop,t).then(Object(Ft["a"])(e,i)).catch((function(t){console.error(t)}))}},zt=function(){return{gradeId:"",indicatorItems:[],tags:[],promises:[],score:0}},Tt={tagList:[],selectedTags:[],loading:!1,operations:[{label:"保存",name:"save",type:"primary"}],rules:{gradeId:[{required:!0,message:"请选择等级",trigger:"blur"}]},formModel:zt(),levelList:[],promiseList:[],groups:[]},It={getStoreTags:function(){var t=this,e={categoryType:"店铺特色",shopId:window.top.SHOP_ID||""};A["a"].get(kt["g"].systemSetting.storeTags,e).then((function(e){t.tagList=e.content})).catch((function(t){console.log(t.errorMessage)}))},onAddSuccess:function(){this.getStoreTags()},query:function(){var t=this;this.loading=!0,this.selectedTags=[],Ct.query({childrenShopId:this.itemId.id},(function(e){t.levelList=e.unionGrades,t.promiseList=e.unionPromises,t.groups=[];var i=Object.assign(t.getDefaultModel(),e.storeScore);i.score=isNaN(Number(i.score))?0:Number(i.score),i.gradeId=i.grade&&i.grade.id?i.grade.id:"",console.log(i.gradeId),t.changeGrade(i.gradeId),i.tags=t.getAppendingTags(i.tags),t.formModel=i,i.tags.forEach((function(e){t.selectedTags.push(e.name)})),t.recountScore(),t.$refs.form.resetFields(),t.loading=!1}),(function(e){t.loading=!1}))},getSaveParams:function(){return{id:this.formModel.id,score:this.formModel.score,grade:{id:this.formModel.gradeId},indicatorItems:this.formModel.indicatorItems,tags:this.$refs.tagSelect.getCurSelectedTags("shop"),promises:this.formModel.promises,childrenStore:{id:this.itemId.id}}},resetModel:function(){this.formModel=this.getDefaultModel()},getDefaultModel:function(){return zt()},save:function(){var t=this;this.$refs.form.validate((function(e,i){if(!e)return!1;t.loading=!0,Ct.update(t.getSaveParams(),(function(e){t.$message.success("保存成功"),t.$emit("operationSuccess"),t.loading=!1}),(function(e){t.$message.warning(e.errorMessage),t.loading=!1}))}))},changeGrade:function(t){for(var e=0;e<this.levelList.length;e++)this.levelList[e].id===t&&(this.groups=this.levelList[e].indicators)}},At={operateHandler:function(t){this[t]()},handleAddressChange:function(t){this.formModel.address=t},handleUploadSuccess:function(t){this.formModel.logo=t},handleAreaChanged:function(t){this.formModel.area.id=t},handleGradeChange:function(t){this.changeGrade(t),this.$refs.form.clearValidate("gradeId"),this.recountScore()}},Bt=function(){return{classId:"",groupId:""}},Et={dialogVisible:!1,classList:[],groupList:[],dialogModel:Bt(),dialogRules:{classId:[{required:!0,message:"请选择分类",trigger:"blur"}],groupId:[{required:!0,message:"请选择标签组",trigger:"blur"}]},dialogOperations:[{label:"取消",name:"cancelDialog"},{label:"导入",name:"saveDialog",type:"primary"}]},Lt={getDefaultDialogForm:function(){return Bt()},getSaveParamsDialog:function(){return{tagGroupId:this.dialogModel.groupId}},cancelDialog:function(){this.dialogVisible=!1},checkIncluded:function(t,e){var i=!1;return e.forEach((function(e){e.content===t&&(i=!0)})),i},getAppendingTags:function(t){var e=this,i=[];return t.forEach((function(t){e.checkIncluded(t.name,i)||(t.content=t.name,i.push(t))})),i},getImportTags:function(t){var e=this,i=this.formModel.tags;return t.forEach((function(t){e.checkIncluded(t.name,i)||(t.content=t.name,i.push(t))})),i},saveDialog:function(){var t=this;this.$refs.dialogForm.validate((function(e,i){if(!e)return!1;Ct.queryTagList(t.getSaveParamsDialog(),(function(e){t.$message.success("导入成功"),t.$set(t.formModel,"tags",t.getImportTags(e.content)),t.dialogVisible=!1}),(function(e){t.$message.warning(e.errorMessage)}))}))},queryClassList:function(){},queryGroupList:function(t){var e=this;Ct.queryGroupList({tagCategoryId:t},(function(t){e.groupList=t.content}),(function(t){console.log(t),console.log("code错误")}))}},Mt={handleClassChange:function(t){this.queryGroupList(t),this.$set(this.dialogModel,"groupId",""),this.$refs.dialogForm.clearValidate("classId")},handleGroupChange:function(t){this.$refs.dialogForm.clearValidate("groupId")}},Rt={configVisible:!1},Nt={recountScore:function(){var t=this,e=0;console.log(this.groups),this.groups.forEach((function(i){var r=Number(i.indicatorData.baseScore),a=Number(i.weight);a=isNaN(a)?0:a,i.indicatorData.indicatorItems.forEach((function(e){t.formModel.indicatorItems.indexOf(e.id)>=0&&(r+=Number(e.score))})),r<0?r=0:r>5&&(r=5),t.$set(i,"score",r),e+=r*a/100})),e=Math.floor(e),this.$set(this.formModel,"score",e)}},Dt={handleTagChange:function(t){this.recountScore()}},Pt={name:"ShopEvaluation",components:{BizSaveButton:x["a"],BizGrid:y["a"],TagSelect:Ut["a"]},props:{itemId:{type:Object,default:function(){return{id:""}}},type:{type:String,default:function(){return""}}},data:function(){return Object(n["a"])(Object(n["a"])(Object(n["a"])({},Tt),Et),Rt)},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},It),At),Lt),Mt),Nt),Dt),watch:{itemId:function(t,e){t&&t.id?("operator"!==this.type&&this.query(),this.getStoreTags()):(this.resetModel(),this.$refs.form.resetFields())}},created:function(){this.itemId.id&&"operator"!==this.type&&(this.query(),this.getStoreTags()),"operator"!==this.type&&this.queryClassList()}},Ot=Pt,Gt=(i("1749"),Object(f["a"])(Ot,wt,_t,!1,null,null,null)),Vt=Gt.exports,Ht={name:"FederationMgmt",data:function(){return{tabName:"federationmgmtInfo",itemId:"",itemIdObj:{},currentRow:{},type:"",parent:"",parentType:"",parentName:"",showStore:!1,showOperator:!1,isSearch:!0,flag:!1,loading:!1,showMode:"1",selections:[],operations:[{disabled:!1,label:"添加一级运营商",name:"addOperator",type:"primary",auth:["admin:union.manage.add"]},{label:"刷新",name:"refresh",type:""}],filters:[{type:"select",label:"状态",name:"state",value:"",options:[{value:"",label:"全部"},{value:"0",label:"停用"},{value:"1",label:"启用"}]},{type:"input",label:"",placeholder:"请输入名称",name:"searchValue",value:""}],tableData:[],pagination:{pageSize:1e3,pageSizes:[1e3],currentPage:1,total:9}}},components:{BizPopupTabs:s["a"],ExpandTable:g,BizGrid:y["a"],BizStoreMap:b["a"],FederationMgmtInfo:P,FederationMgmtOperatorInfo:W,FederationMgmtIntroduce:Q,FederationMgmtPayment:pt,FederationFince:at,FederationMgmtVr:xt,ShopEvaluation:Vt,BizHeader:o["d"],BizPagination:o["f"]},created:function(){this.getList()},mounted:function(){"shop"===this.getUser.roleLevel?document.querySelectorAll(".biz-header__operation-wrapper .el-button")[0].style.display="none":document.querySelectorAll(".biz-header__operation-wrapper .el-button")[0].style.display=""},computed:Object(n["a"])({},Object(d["c"])(["getUser"])),watch:{showMode:function(t){"0"===t?this.listOperatorOrStoreMap():this.$refs.expandTable.doLayout()},itemId:function(t){this.itemIdObj={id:t}},tabName:function(t){if(this.itemId)switch(t){case"federationmgmtInfo":this.$message({showClose:!0,message:" 此处您可进行店铺名称、地址、电话、Logo等修改"});break;case"federationmgmtIntroduce":this.$message({showClose:!0,message:"您可以编辑店铺信息，越丰富的信息越有助于用户全方面了解您的店铺哦"});break;case"federationmgmtPayment":this.$message({showClose:!0,message:"您可以选择您想要的支付方式，记得别忘了填写相关信息"});break;case"federationmgmtVr":this.$message({showClose:!0,message:"店铺展示可帮助用户更好的了解店铺和产品，快去上传VR资源吧"});break;case"ShopEvaluation":this.$message({showClose:!0,message:"您可以编辑店铺信息，越丰富的信息越有助于用户全方面了解您的店铺哦"});break}}},methods:{operate:function(t){this[t]()},refresh:function(){this.isSearch=!0,this.tableData=[],this.flag=!0,this.$refs.expandTable.maxLevel="1",console.log(this.$refs.expandTable),this.getList()},addStore:function(t){this.parent=t.id,this.parentType=t.userType,this.itemId="",this.itemIdObj={id:""},this.showStore=!0,this.tabName="federationmgmtInfo"},addOperator:function(t){this.parent=t?t.id:"",this.parentType=t?t.userType:"",this.parentName=t?t.name:"",this.itemId="",this.itemIdObj={id:""},this.showOperator=!0,this.tabName="federationmgmtOperatorInfo"},getKpi:function(){var t=this;"shop"===this.getUser.roleLevel?A["a"].get("/admin/store/queryNavigationKpi.jhtml",{shopId:window.top.SHOP_ID||this.itemId||this.parent||""}).then((function(e){var i="共有店铺合计"+e.data.storeCount+"，其中启用状态"+e.data.enableStoreCount;t.$message({customClass:"motorists-club-activity__kpi",showClose:!0,message:i,duration:3e3})})).catch((function(e){t.$message.warning(e.errorMessage||"操作出现错误")})):A["a"].get("/admin/store/queryNavigationKpi.jhtml",{companyId:this.itemId||this.parent||""}).then((function(e){var i="共有运营商合计"+e.data.companyCount+"，其中启用状态"+e.data.enableCompanyCount;t.$message({customClass:"motorists-club-activity__kpi",showClose:!0,message:i,duration:3e3})})).catch((function(e){t.$message.warning(e.errorMessage||"操作出现错误")}))},operationSuccess:function(t){var e=this;this.flag=!0,this.itemId||(this.showStore=!1,this.showOperator=!1);var i={state:this.filters[0].value,searchValue:this.filters[1].value,id:t.id,pageNumber:this.pagination.currentPage,pageSize:500,type:t.userType,orderProperty:this.orderProperty,orderDirection:this.orderDirection};I["a"].list(i,(function(i){t&&t.userType?e.tableData.forEach((function(r){r.id===t.id?(e.$set(r,"hasChild","1"),r.childUsers=i.userList):r.childUsers&&e.setChildren(r.childUsers,t,i.userList)})):(e.tableData=i.userList,e.pagination.total=Number(i.total),e.getKpi()),console.log(e.tableData)}),(function(t){console.log(t)}))},listOperatorOrStoreMap:function(){this.flag=!0,this.getListMap()},getListMap:function(t){var e=this;this.itemId=t?t.id:"",this.itemIdObj={id:this.itemId},this.type=t?t.userType:"",this.parent=t?t.parentId:"",this.parentType=t?t.parentType:"";var i={state:this.filters[0].value,searchValue:this.filters[1].value,id:this.itemId||this.parent,pageNumber:this.pagination.currentPage,pageSize:500,type:this.itemId?this.type:this.parentType,orderProperty:this.orderProperty,orderDirection:this.orderDirection};I["a"].listMap(i,(function(i){t?e.tableData.forEach((function(r){r.id===t.id?r.childUsers=i.userList:r.childUsers&&e.setChildren(r.childUsers,t,i.userList)})):(e.tableData=i.userList,e.getKpi()),console.log(e.tableData)}),(function(t){console.log(t)}))},active:function(t){var e=this;I["a"].active({id:t.id,type:t.userType},(function(t){e.flag=!0,e.$message.success("操作成功"),e.getList()}),(function(t){console.log(t)}))},rowOperationClickHandler:function(t,e,i){i&&"操作"===i.label||(this.itemId=String(t.id),this.type=t.userType,"operator"===t.userType?(this.showOperator=!0,this.showStore=!1,this.tabName="federationmgmtOperatorInfo"):(this.showStore=!0,this.showOperator=!1,this.tabName="federationmgmtInfo"))},adminMgmt:function(t){this.$router.push({path:"/oa/staff-mgmt/admin",query:{parentId:t.id,type:t.userType}})},expandChange:function(t){this.currentRow=t,this.getList(t)},getList:function(t){var e=this;this.itemId=t?t.id:"",this.itemIdObj={id:this.itemId},this.type=t?t.userType:"",this.parent=t?t.parentId:"",this.parentType=t?t.parentType:"";var i={state:this.filters[0].value,searchValue:this.filters[1].value,id:this.itemId||this.parent,pageNumber:this.pagination.currentPage,pageSize:500,type:this.itemId?this.type:this.parentType,orderProperty:this.orderProperty,orderDirection:this.orderDirection};I["a"].list(i,(function(i){t?e.tableData.forEach((function(r){r.id===t.id?(e.$set(r,"hasChild","1"),r.childUsers=i.userList):r.childUsers&&e.setChildren(r.childUsers,t,i.userList)})):(e.tableData=i.userList,e.pagination.total=Number(i.total),e.getKpi()),console.log(e.tableData)}),(function(t){console.log(t)}))},setChildren:function(t,e,i){var r=this;t.forEach((function(t,a){t.id===e.id?(r.$set(t,"hasChild","1"),t.childUsers=i):r.setChildren(t.childUsers,e,i)}))},filterHandler:function(t,e,i){var r=i.property;if("isEnabled"===r)return e[r]===t},filterDataChange:function(t){""===t[1].value?(this.isSearch=!0,this.tableData=[],this.flag=!0,this.$refs.expandTable.maxLevel="1",console.log(this.$refs.expandTable),this.getList()):(this.isSearch=!1,this.tableData=[],this.flag=!0,console.log(this.$refs.expandTable),this.getList())},handleSelectionChange:function(t){this.selections=t},rowClick:function(t){if(this.itemId=String(t.id),this.itemIdObj={id:this.itemId},this.type=t.userType,this.parent=t.parentId,this.parentType=t.parentType,"operator"===t.userType){var e=Math.round(new Date/1e3);window.SHOP_ID="",window.Company_ID=t.id,this.$router.push({path:"/union/federation-mgmt/federation",query:{id:t.id,type:"operator",parent:t.parentId,parentType:t.parentType,timestamp:e}}),this.showOperator=!0,this.showStore=!1,this.tabName="federationmgmtOperatorInfo",this.parentName="",this.$refs.operatorInfo.queryParentOperator(t.parentId)}else{window.SHOP_ID=t.id;var i=Math.round(new Date/1e3);this.$router.push({path:"/union/federation-mgmt/federation",query:{id:t.id,type:"store",parent:t.parentId,parentType:t.parentType,timestamp:i}}),this.showStore=!0,this.showOperator=!1,this.tabName="federationmgmtInfo";var r=" 此处您可进行店铺名称、地址、电话、Logo等修改";this.$message({showClose:!0,message:r})}},handleSortChange:function(t){var e={ascending:"asc",descending:"desc"};this.orderProperty=t.column?t.column.property:"",this.orderDirection=t.order?e[t.order]:"",this.refresh()},handleSizeChange:function(t){this.pagination.pageSize=t,this.refresh()},handleCurrentChange:function(t){this.pagination.currentPage=t,this.refresh()},handleDelete:function(t){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){I["a"].delete({ids:[t.userType+";"+t.id],parentStoreId:e.parent,parentType:e.parentType},(function(i){e.$message.success("删除成功"),e.operationSuccess({id:t.parentId,userType:t.parentType})}),(function(t){e.$message.warning(t.errorMessage)}))}))},delete:function(){var t=this;if(this.selections&&this.selections.length>0){var e=[];this.selections.forEach((function(t){e.push(t.userType+";"+t.id)})),this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){I["a"].delete({ids:e,parentStoreId:t.parent,parentType:t.parentType},(function(e){t.$message.success("删除成功"),t.operationSuccess()}),(function(e){t.$message.warning(e.errorMessage)}))}))}else this.$message("请选择一条数据")},stateColor:function(t){return"1"===t.isEnabled?"#67c23a":"#f56c6c"}}},jt=Ht,Wt=(i("6e8c"),Object(f["a"])(jt,r,a,!1,null,null,null));e["default"]=Wt.exports},"655a":function(t,e,i){},"655b":function(t,e,i){},6611:function(t,e,i){},"663e":function(t,e,i){"use strict";var r=i("3f67"),a=i.n(r);a.a},"6e0b":function(t,e,i){"use strict";var r=i("ff5b"),a=i.n(r);a.a},"6e8c":function(t,e,i){"use strict";var r=i("b720"),a=i.n(r);a.a},"6f9b":function(t,e,i){"use strict";var r=i("b61f"),a=i.n(r);a.a},7132:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"biz-fade-t"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[i("transition",{attrs:{name:"biz-fade-t-right"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"popup-content",style:t.contentStyle},[t._t("default")],2)])],1)])},a=[],n={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},o=n,s=(i("5b8e"),i("2877")),l=Object(s["a"])(o,r,a,!1,null,null,null),h=l.exports,d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"biz-popup-tabs"},[i("biz-popup",{attrs:{open:t.open,contentStyle:t.contentStyle},on:{close:t.close}},[i("el-tabs",{attrs:{type:"border-card",value:t.value},on:{"tab-click":t.tabClick}},[t._t("default")],2)],1)],1)},p=[],c=(i("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:h},methods:{close:function(){var t=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("close")}))},tabClick:function(t){this.$emit("input",t.name)}}}),u=c,f=(i("d4c2"),Object(s["a"])(u,d,p,!1,null,null,null)),m=f.exports;i.d(e,"a",(function(){return m}))},"72f7":function(t,e,i){"use strict";var r=i("ebb5").exportTypedArrayMethod,a=i("d039"),n=i("da84"),o=n.Uint8Array,s=o&&o.prototype||{},l=[].toString,h=[].join;a((function(){l.call({})}))&&(l=function(){return h.call(this)});var d=s.toString!=l;r("toString",l,d)},"735e":function(t,e,i){"use strict";var r=i("ebb5"),a=i("81d5"),n=r.aTypedArray,o=r.exportTypedArrayMethod;o("fill",(function(t){return a.apply(n(this),arguments)}))},"74e8":function(t,e,i){"use strict";var r=i("23e7"),a=i("da84"),n=i("83ab"),o=i("8aa7"),s=i("ebb5"),l=i("621a"),h=i("19aa"),d=i("5c6c"),p=i("9112"),c=i("50c4"),u=i("0b25"),f=i("182d"),m=i("c04e"),g=i("5135"),y=i("f5df"),b=i("861d"),v=i("7c73"),S=i("d2bb"),x=i("241c").f,w=i("a078b"),_=i("b727").forEach,U=i("2626"),k=i("9bf2"),F=i("06cf"),C=i("69f3"),z=i("7156"),T=C.get,I=C.set,A=k.f,B=F.f,E=Math.round,L=a.RangeError,M=l.ArrayBuffer,R=l.DataView,N=s.NATIVE_ARRAY_BUFFER_VIEWS,D=s.TYPED_ARRAY_TAG,P=s.TypedArray,O=s.TypedArrayPrototype,G=s.aTypedArrayConstructor,V=s.isTypedArray,H="BYTES_PER_ELEMENT",j="Wrong length",W=function(t,e){var i=0,r=e.length,a=new(G(t))(r);while(r>i)a[i]=e[i++];return a},Z=function(t,e){A(t,e,{get:function(){return T(this)[e]}})},Y=function(t){var e;return t instanceof M||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},$=function(t,e){return V(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},J=function(t,e){return $(t,e=m(e,!0))?d(2,t[e]):B(t,e)},X=function(t,e,i){return!($(t,e=m(e,!0))&&b(i)&&g(i,"value"))||g(i,"get")||g(i,"set")||i.configurable||g(i,"writable")&&!i.writable||g(i,"enumerable")&&!i.enumerable?A(t,e,i):(t[e]=i.value,t)};n?(N||(F.f=J,k.f=X,Z(O,"buffer"),Z(O,"byteOffset"),Z(O,"byteLength"),Z(O,"length")),r({target:"Object",stat:!0,forced:!N},{getOwnPropertyDescriptor:J,defineProperty:X}),t.exports=function(t,e,i){var n=t.match(/\d+$/)[0]/8,s=t+(i?"Clamped":"")+"Array",l="get"+t,d="set"+t,m=a[s],g=m,y=g&&g.prototype,k={},F=function(t,e){var i=T(t);return i.view[l](e*n+i.byteOffset,!0)},C=function(t,e,r){var a=T(t);i&&(r=(r=E(r))<0?0:r>255?255:255&r),a.view[d](e*n+a.byteOffset,r,!0)},B=function(t,e){A(t,e,{get:function(){return F(this,e)},set:function(t){return C(this,e,t)},enumerable:!0})};N?o&&(g=e((function(t,e,i,r){return h(t,g,s),z(function(){return b(e)?Y(e)?void 0!==r?new m(e,f(i,n),r):void 0!==i?new m(e,f(i,n)):new m(e):V(e)?W(g,e):w.call(g,e):new m(u(e))}(),t,g)})),S&&S(g,P),_(x(m),(function(t){t in g||p(g,t,m[t])})),g.prototype=y):(g=e((function(t,e,i,r){h(t,g,s);var a,o,l,d=0,p=0;if(b(e)){if(!Y(e))return V(e)?W(g,e):w.call(g,e);a=e,p=f(i,n);var m=e.byteLength;if(void 0===r){if(m%n)throw L(j);if(o=m-p,o<0)throw L(j)}else if(o=c(r)*n,o+p>m)throw L(j);l=o/n}else l=u(e),o=l*n,a=new M(o);I(t,{buffer:a,byteOffset:p,byteLength:o,length:l,view:new R(a)});while(d<l)B(t,d++)})),S&&S(g,P),y=g.prototype=v(O)),y.constructor!==g&&p(y,"constructor",g),D&&p(y,D,s),k[s]=g,r({global:!0,forced:g!=m,sham:!N},k),H in g||p(g,H,n),H in y||p(y,H,n),U(s)}):t.exports=function(){}},"77a7":function(t,e){var i=1/0,r=Math.abs,a=Math.pow,n=Math.floor,o=Math.log,s=Math.LN2,l=function(t,e,l){var h,d,p,c=new Array(l),u=8*l-e-1,f=(1<<u)-1,m=f>>1,g=23===e?a(2,-24)-a(2,-77):0,y=t<0||0===t&&1/t<0?1:0,b=0;for(t=r(t),t!=t||t===i?(d=t!=t?1:0,h=f):(h=n(o(t)/s),t*(p=a(2,-h))<1&&(h--,p*=2),t+=h+m>=1?g/p:g*a(2,1-m),t*p>=2&&(h++,p/=2),h+m>=f?(d=0,h=f):h+m>=1?(d=(t*p-1)*a(2,e),h+=m):(d=t*a(2,m-1)*a(2,e),h=0));e>=8;c[b++]=255&d,d/=256,e-=8);for(h=h<<e|d,u+=e;u>0;c[b++]=255&h,h/=256,u-=8);return c[--b]|=128*y,c},h=function(t,e){var r,n=t.length,o=8*n-e-1,s=(1<<o)-1,l=s>>1,h=o-7,d=n-1,p=t[d--],c=127&p;for(p>>=7;h>0;c=256*c+t[d],d--,h-=8);for(r=c&(1<<-h)-1,c>>=-h,h+=e;h>0;r=256*r+t[d],d--,h-=8);if(0===c)c=1-l;else{if(c===s)return r?NaN:p?-i:i;r+=a(2,e),c-=l}return(p?-1:1)*r*a(2,c-e)};t.exports={pack:l,unpack:h}},"7ad5":function(t,e,i){},"7e5b":function(t,e,i){"use strict";i("d81d"),i("ac1f"),i("841c");var r=i("2497"),a=i("bc3a"),n=i.n(a),o=i("c596");e["a"]={getNavInfo:function(t,e,i){n.a.get(o["g"].federationMgmt.nav,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},list:function(t,e,i){n.a.get(o["g"].federationMgmt.List_storeOrOperator,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},listMap:function(t,e,i){n.a.get(o["g"].federationMgmt.List_storeOrOperator_Map,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},parentCompanyAndStore:function(t,e,i){n.a.get(o["g"].federationMgmt.parentCompanyAndStore,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},query:function(t,e,i){n.a.get(o["g"].federationMgmt.storeOrOperatorInfo,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},update:function(t,e,i){n.a.put(o["g"].federationMgmt.storeOrOperatorInfo,t).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},add:function(t,e,i){n.a.post(o["g"].federationMgmt.storeOrOperatorInfo,t).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},active:function(t,e,i){n.a.get(o["g"].federationMgmt.opera,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},updateOperator:function(t,e,i){n.a.put(o["g"].federationMgmt.operator,t).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},addOperator:function(t,e,i){n.a.post(o["g"].federationMgmt.operator,t).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},delete:function(t,e,i){n.a.delete(o["g"].federationMgmt.storeOrOperatorInfo,{data:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},queryIntroduce:function(t,e,i){n.a.get(o["g"].federationMgmt.introduce,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},listAdditiveStore:function(t,e,i){n.a.get(o["g"].federationMgmt.listAdditiveStore,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},updateIntroduce:function(t,e,i){n.a.post(o["g"].federationMgmt.introduce,t).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},getPayments:function(t,e,i){function a(t){return console.log(t),t.content.map((function(t){return t}))}n.a.get(o["g"].federationMgmt.paymentMethodShopList,{params:{shopId:t.shopId||""}}).then(Object(r["a"])(e,i,a)).catch((function(t){console.error(t)}))},editPayments:function(t,e,i){function a(t){return t}var s=new FormData;s.append("paymentMethods",JSON.stringify(t)),n.a.post(o["g"].federationMgmt.updatePaymentShopMethods,s,{}).then(Object(r["a"])(e,i,a)).catch((function(t){console.error(t)}))},getVrAsset:function(t,e,i){n.a.get(o["g"].federationMgmt.search,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},uploadShopPictures:function(t,e,i){var a={medialist:t.vrlist},s={shopId:t.shopId,vrlist:JSON.stringify(a)};n.a.post(o["g"].federationMgmt.uploadPictures,s).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},uploadShopZip:function(t,e,i){var a=this,s=new FormData;s.append("shopId",t.shopId),s.append("multipartFile",t.file),n.a.post(o["g"].federationMgmt.uploadZip,s,{timeout:9e6,progress:function(t){a.vr_data=~~(100*t.loaded/t.total)}}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))},queryKpi:function(t,e,i){n.a.get(o["g"].federationMgmt.statisticsAnalysis,{params:t}).then(Object(r["a"])(e,i)).catch((function(t){console.error(t)}))}}},"81d5":function(t,e,i){"use strict";var r=i("7b0b"),a=i("23cb"),n=i("50c4");t.exports=function(t){var e=r(this),i=n(e.length),o=arguments.length,s=a(o>1?arguments[1]:void 0,i),l=o>2?arguments[2]:void 0,h=void 0===l?i:a(l,i);while(h>s)e[s++]=t;return e}},"82f8":function(t,e,i){"use strict";var r=i("ebb5"),a=i("4d64").includes,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("includes",(function(t){return a(n(this),t,arguments.length>1?arguments[1]:void 0)}))},"8aa7":function(t,e,i){var r=i("da84"),a=i("d039"),n=i("1c7e"),o=i("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,l=r.Int8Array;t.exports=!o||!a((function(){l(1)}))||!a((function(){new l(-1)}))||!n((function(t){new l,new l(null),new l(1.5),new l(t)}),!0)||a((function(){return 1!==new l(new s(2),1,void 0).length}))},9056:function(t,e,i){"use strict";var r=i("25c2"),a=i.n(r);a.a},"92cd":function(t,e,i){"use strict";var r=i("0bb1"),a=i.n(r);a.a},9678:function(t,e,i){},9792:function(t,e,i){"use strict";var r=i("2adf"),a=i.n(r);a.a},"9a8c":function(t,e,i){"use strict";var r=i("ebb5"),a=i("145e"),n=r.aTypedArray,o=r.exportTypedArrayMethod;o("copyWithin",(function(t,e){return a.call(n(this),t,e,arguments.length>2?arguments[2]:void 0)}))},a078b:function(t,e,i){var r=i("7b0b"),a=i("50c4"),n=i("35a1"),o=i("e95a"),s=i("0366"),l=i("ebb5").aTypedArrayConstructor;t.exports=function(t){var e,i,h,d,p,c,u=r(t),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,y=n(u);if(void 0!=y&&!o(y)){p=y.call(u),c=p.next,u=[];while(!(d=c.call(p)).done)u.push(d.value)}for(g&&f>2&&(m=s(m,arguments[2],2)),i=a(u.length),h=new(l(this))(i),e=0;i>e;e++)h[e]=g?m(u[e],e):u[e];return h}},a975:function(t,e,i){"use strict";var r=i("ebb5"),a=i("b727").every,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("every",(function(t){return a(n(this),t,arguments.length>1?arguments[1]:void 0)}))},a981:function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},a9e3:function(t,e,i){"use strict";var r=i("83ab"),a=i("da84"),n=i("94ca"),o=i("6eeb"),s=i("5135"),l=i("c6b6"),h=i("7156"),d=i("c04e"),p=i("d039"),c=i("7c73"),u=i("241c").f,f=i("06cf").f,m=i("9bf2").f,g=i("58a8").trim,y="Number",b=a[y],v=b.prototype,S=l(c(v))==y,x=function(t){var e,i,r,a,n,o,s,l,h=d(t,!1);if("string"==typeof h&&h.length>2)if(h=g(h),e=h.charCodeAt(0),43===e||45===e){if(i=h.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(h.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+h}for(n=h.slice(2),o=n.length,s=0;s<o;s++)if(l=n.charCodeAt(s),l<48||l>a)return NaN;return parseInt(n,r)}return+h};if(n(y,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var w,_=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof _&&(S?p((function(){v.valueOf.call(i)})):l(i)!=y)?h(new b(x(e)),i,_):x(e)},U=r?u(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;U.length>k;k++)s(b,w=U[k])&&!s(_,w)&&m(_,w,f(b,w));_.prototype=v,v.constructor=_,o(a,y,_)}},ace4:function(t,e,i){"use strict";var r=i("23e7"),a=i("d039"),n=i("621a"),o=i("825a"),s=i("23cb"),l=i("50c4"),h=i("4840"),d=n.ArrayBuffer,p=n.DataView,c=d.prototype.slice,u=a((function(){return!new d(2).slice(1,void 0).byteLength}));r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:u},{slice:function(t,e){if(void 0!==c&&void 0===e)return c.call(o(this),t);var i=o(this).byteLength,r=s(t,i),a=s(void 0===e?i:e,i),n=new(h(this,d))(l(a-r)),u=new p(this),f=new p(n),m=0;while(r<a)f.setUint8(m++,u.getUint8(r++));return n}})},b39a:function(t,e,i){"use strict";var r=i("da84"),a=i("ebb5"),n=i("d039"),o=r.Int8Array,s=a.aTypedArray,l=a.exportTypedArrayMethod,h=[].toLocaleString,d=[].slice,p=!!o&&n((function(){h.call(new o(1))})),c=n((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!n((function(){o.prototype.toLocaleString.call([1,2])}));l("toLocaleString",(function(){return h.apply(p?d.call(s(this)):s(this),arguments)}),c)},b547:function(t,e,i){},b61f:function(t,e,i){},b720:function(t,e,i){},baa5:function(t,e,i){var r=i("23e7"),a=i("e58c");r({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},bee2:function(t,e,i){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}i.d(e,"a",(function(){return a}))},c1ac:function(t,e,i){"use strict";var r=i("ebb5"),a=i("b727").filter,n=i("4840"),o=r.aTypedArray,s=r.aTypedArrayConstructor,l=r.exportTypedArrayMethod;l("filter",(function(t){var e=a(o(this),t,arguments.length>1?arguments[1]:void 0),i=n(this,this.constructor),r=0,l=e.length,h=new(s(i))(l);while(l>r)h[r]=e[r++];return h}))},c20d:function(t,e,i){var r=i("da84"),a=i("58a8").trim,n=i("5899"),o=r.parseInt,s=/^[+-]?0[Xx]/,l=8!==o(n+"08")||22!==o(n+"0x16");t.exports=l?function(t,e){var i=a(String(t));return o(i,e>>>0||(s.test(i)?16:10))}:o},c2ba:function(t,e,i){},c679:function(t,e,i){"use strict";var r=i("2429f"),a=i.n(r);a.a},c708:function(t,e,i){"use strict";var r=i("1370"),a=i.n(r);a.a},c820:function(t,e,i){"use strict";var r=i("474c"),a=i.n(r);a.a},c8ca:function(t,e,i){"use strict";var r=i("c2ba"),a=i.n(r);a.a},ca91:function(t,e,i){"use strict";var r=i("ebb5"),a=i("d58f").left,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("reduce",(function(t){return a(n(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},cb29:function(t,e,i){var r=i("23e7"),a=i("81d5"),n=i("44d2");r({target:"Array",proto:!0},{fill:a}),n("fill")},cd26:function(t,e,i){"use strict";var r=i("ebb5"),a=r.aTypedArray,n=r.exportTypedArrayMethod,o=Math.floor;n("reverse",(function(){var t,e=this,i=a(e).length,r=o(i/2),n=0;while(n<r)t=e[n],e[n++]=e[--i],e[i]=t;return e}))},d139:function(t,e,i){"use strict";var r=i("ebb5"),a=i("b727").find,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("find",(function(t){return a(n(this),t,arguments.length>1?arguments[1]:void 0)}))},d4c2:function(t,e,i){"use strict";var r=i("e725"),a=i.n(r);a.a},d4ec:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return r}))},d55c:function(t,e,i){"use strict";var r=i("655a"),a=i.n(r);a.a},d58f:function(t,e,i){var r=i("1c0b"),a=i("7b0b"),n=i("44ad"),o=i("50c4"),s=function(t){return function(e,i,s,l){r(i);var h=a(e),d=n(h),p=o(h.length),c=t?p-1:0,u=t?-1:1;if(s<2)while(1){if(c in d){l=d[c],c+=u;break}if(c+=u,t?c<0:p<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:p>c;c+=u)c in d&&(l=i(l,d[c],c,h));return l}};t.exports={left:s(!1),right:s(!0)}},d5d6:function(t,e,i){"use strict";var r=i("ebb5"),a=i("b727").forEach,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("forEach",(function(t){a(n(this),t,arguments.length>1?arguments[1]:void 0)}))},d795:function(t,e,i){"use strict";var r=i("093c"),a=i.n(r);a.a},e142:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map"},[i("div",{staticClass:"allmap",attrs:{id:"allmap"}})])}],n=(i("d81d"),i("e841")),o=i.n(n),s=i("f606"),l=i.n(s),h={name:"BizMap",components:{},props:{value:{type:Array,default:function(){return[]}},showMode:{type:String,default:function(){return"1"}}},data:function(){return{markers:[]}},watch:{value:{handler:function(t,e){this.markers=[],this.init();for(var i=0;i<this.value.length;i++)if(this.value[i].longitude&&this.value[i].latitude){var r=new this.$BMap.Point(this.value[i].longitude,this.value[i].latitude);if(this.addMarker(r,this.value[i]),this.value[i].childUsers&&this.value[i].childUsers.length>0)for(var a=0;a<this.value[i].childUsers.length;a++)if(this.value[i].childUsers[a].longitude&&this.value[i].childUsers[a].latitude){var n=new this.$BMap.Point(this.value[i].childUsers[a].longitude,this.value[i].childUsers[a].latitude);this.addMarker(n,this.value[i].childUsers[a])}}new window.BMapLib.MarkerClusterer(this.map,{markers:this.markers})},deep:!0},showMode:function(t,e){this.markers=[],this.init();for(var i=0;i<this.value.length;i++)if(this.value[i].longitude&&this.value[i].latitude){var r=new this.$BMap.Point(this.value[i].longitude,this.value[i].latitude);if(this.addMarker(r,this.value[i]),this.value[i].childUsers&&this.value[i].childUsers.length>0)for(var a=0;a<this.value[i].childUsers.length;a++)if(this.value[i].childUsers[a].longitude&&this.value[i].childUsers[a].latitude){var n=new this.$BMap.Point(this.value[i].childUsers[a].longitude,this.value[i].childUsers[a].latitude);this.addMarker(n,this.value[i].childUsers[a])}}new window.BMapLib.MarkerClusterer(this.map,{markers:this.markers})}},methods:{init:function(){this.$BMap=window.BMap,this.map=new this.$BMap.Map("allmap"),this.point=new this.$BMap.Point(116.404,39.915),this.map.centerAndZoom(this.point,11),this.map.enableScrollWheelZoom(!0),this.map.addControl(new this.$BMap.CityListControl({anchor:this.BMAP_ANCHOR_TOP_LEFT,offset:this.$BMap.Size(10,20)})),this.map.addControl(new this.$BMap.PanoramaControl({anchor:this.BMAP_ANCHOR_TOP_RIGHT,offset:this.$BMap.Size(10,20)}))},addMarker:function(t,e){var i="";i="store"===e.userType?new this.$BMap.Icon(l.a,new this.$BMap.Size(32,32)):new this.$BMap.Icon(o.a,new this.$BMap.Size(32,32)),i.setImageSize(new this.$BMap.Size(32,32));var r=new this.$BMap.Marker(t,{icon:i});this.markers.push(r);var a=this;r.addEventListener("click",(function(t){a.$emit("addClickHandler",e)})),this.map.addOverlay(r),this.map.centerAndZoom(t,11)},initCarList:function(){this.markers=[];for(var t=0;t<this.value.length;t++)if(this.value[t].longitude&&this.value[t].latitude){var e=new this.$BMap.Point(this.value[t].longitude,this.value[t].latitude);this.addMarker(e,this.value[t])}this.map.clearOverlays(),new window.BMapLib.MarkerClusterer(this.map,{markers:this.markers})}},mounted:function(){this.init()}},d=h,p=(i("9792"),i("2877")),c=Object(p["a"])(d,r,a,!1,null,null,null),u=c.exports;i.d(e,"a",(function(){return u}))},e1776:function(t,e,i){},e23a:function(t,e,i){"use strict";var r=i("e1776"),a=i.n(r);a.a},e58c:function(t,e,i){"use strict";var r=i("fc6a"),a=i("a691"),n=i("50c4"),o=i("a640"),s=i("ae40"),l=Math.min,h=[].lastIndexOf,d=!!h&&1/[1].lastIndexOf(1,-0)<0,p=o("lastIndexOf"),c=s("indexOf",{ACCESSORS:!0,1:0}),u=d||!p||!c;t.exports=u?function(t){if(d)return h.apply(this,arguments)||0;var e=r(this),i=n(e.length),o=i-1;for(arguments.length>1&&(o=l(o,a(arguments[1]))),o<0&&(o=i+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:h},e725:function(t,e,i){},e841:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMTEtMTRUMTU6MDE6MjIrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA4LTAzVDE5OjA4OjM0KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA4LTAzVDE5OjA4OjM0KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZmNDZkZjhmLWRlZTYtNDYzMi04ZDM4LTQyZTFkMzYxMjczNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2ZjQ2ZGY4Zi1kZWU2LTQ2MzItOGQzOC00MmUxZDM2MTI3MzUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2ZjQ2ZGY4Zi1kZWU2LTQ2MzItOGQzOC00MmUxZDM2MTI3MzUiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjZmNDZkZjhmLWRlZTYtNDYzMi04ZDM4LTQyZTFkMzYxMjczNSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNFQxNTowMToyMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+lofAyQAAAtdJREFUWIXFl09IFHEUxz87zIheJM3I6BCoG4IJYblC2KX8d8iLB7t1iAhZI4hgEJF23SRiIIJoF0kJ6tali5c02UOJYFteCgnbrA6RHpIUQnLm0OE36+7O/pnf1G59Lsu89+b3ffvj/X7zng9JTB0N6AX6gDagEdhnu38AH4Fl4BkwqxmYMuv6JIQPAkHghmyyNhEgphls/HECpk4ICHsUdhLWDMY9JWDqHAOGgOG/FE8RBSY1g3euCZg6XcDzEgk76dYM5gsmYP/zt2UST9GauROKwzlUZvEcjb0dMHXGkax0tWcMTl2Dqlph2NmExTtYc7dkk4hoBqG9BOyjti4lHnwJRzrh/VNYigpjxzA0D8CXBazYadkk6jWDDdV+CEqJ94wK8ekOrA+v0o6VOKo/AJeWUHvGsOYmZJYLAiGffcPtSiUQ/g5r81iPz+f3X3gCDV1Y4f0yywFUKIjrVY6qWkjECvsTsXRdyNGrIO72/0WfAhyXDt/ZhPYi5dIeFDHytCnAUenwxbvQMigKzoHqD0DLoIiRp8ln6vwCKmTfKOExBNhV3WMcJKJQ1yQEmwfS9p/rwucRBdiSCVTrKlFHktA/BZ9fwHRH2vnorLD1T6GOJFHrKmX1t1QgCRwoKu4PwMUF+LSAdbspbbd/rZU4rMSF7XIcrm+jPuzMvqzyk1QQbVRhqhHiqzNYD864LShiVmfEO9Wu4cs+U+ccMFMoQh1JwvY3r8UlirX6UNaO5aFfAWYLLuIPQE2jZ3FAvFPTmPfIZjCb+hreBMZyEriagMMnPYtn8fU11r32fJ6IZhDy/DkuIfWawYYCYLfOkX8oHkm1686e8D6l64QLEdUMrqQenD3hZJnFczSyErC71e4yinc7ZwPnDmD37a2IYaJURBHt+LzT4TaaSXfKRdjrgPMhM5zWIwoz555wYQJRcEWPt2sCGYlkjucngAayx/M14A0ex/Pfeu3Upp1gESsAAAAASUVORK5CYII="},e91f:function(t,e,i){"use strict";var r=i("ebb5"),a=i("4d64").indexOf,n=r.aTypedArray,o=r.exportTypedArrayMethod;o("indexOf",(function(t){return a(n(this),t,arguments.length>1?arguments[1]:void 0)}))},ebb5:function(t,e,i){"use strict";var r,a=i("a981"),n=i("83ab"),o=i("da84"),s=i("861d"),l=i("5135"),h=i("f5df"),d=i("9112"),p=i("6eeb"),c=i("9bf2").f,u=i("e163"),f=i("d2bb"),m=i("b622"),g=i("90e3"),y=o.Int8Array,b=y&&y.prototype,v=o.Uint8ClampedArray,S=v&&v.prototype,x=y&&u(y),w=b&&u(b),_=Object.prototype,U=_.isPrototypeOf,k=m("toStringTag"),F=g("TYPED_ARRAY_TAG"),C=a&&!!f&&"Opera"!==h(o.opera),z=!1,T={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},I=function(t){var e=h(t);return"DataView"===e||l(T,e)},A=function(t){return s(t)&&l(T,h(t))},B=function(t){if(A(t))return t;throw TypeError("Target is not a typed array")},E=function(t){if(f){if(U.call(x,t))return t}else for(var e in T)if(l(T,r)){var i=o[e];if(i&&(t===i||U.call(i,t)))return t}throw TypeError("Target is not a typed array constructor")},L=function(t,e,i){if(n){if(i)for(var r in T){var a=o[r];a&&l(a.prototype,t)&&delete a.prototype[t]}w[t]&&!i||p(w,t,i?e:C&&b[t]||e)}},M=function(t,e,i){var r,a;if(n){if(f){if(i)for(r in T)a=o[r],a&&l(a,t)&&delete a[t];if(x[t]&&!i)return;try{return p(x,t,i?e:C&&y[t]||e)}catch(s){}}for(r in T)a=o[r],!a||a[t]&&!i||p(a,t,e)}};for(r in T)o[r]||(C=!1);if((!C||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},C))for(r in T)o[r]&&f(o[r],x);if((!C||!w||w===_)&&(w=x.prototype,C))for(r in T)o[r]&&f(o[r].prototype,w);if(C&&u(S)!==w&&f(S,w),n&&!l(w,k))for(r in z=!0,c(w,k,{get:function(){return s(this)?this[F]:void 0}}),T)o[r]&&d(o[r],F,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:C,TYPED_ARRAY_TAG:z&&F,aTypedArray:B,aTypedArrayConstructor:E,exportTypedArrayMethod:L,exportTypedArrayStaticMethod:M,isView:I,isTypedArray:A,TypedArray:x,TypedArrayPrototype:w}},ec6b:function(t,e,i){"use strict";var r=i("b547"),a=i.n(r);a.a},f606:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMTEtMTRUMTU6MDE6MjIrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA4LTAzVDE5OjEzOjI1KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA4LTAzVDE5OjEzOjI1KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmQ0NWIyMzUyLWJhMzItNDM5NS1iZTliLTgxMTVhNjk1ODBhNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpkNDViMjM1Mi1iYTMyLTQzOTUtYmU5Yi04MTE1YTY5NTgwYTUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkNDViMjM1Mi1iYTMyLTQzOTUtYmU5Yi04MTE1YTY5NTgwYTUiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQ0NWIyMzUyLWJhMzItNDM5NS1iZTliLTgxMTVhNjk1ODBhNSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xNFQxNTowMToyMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+kgXFvQAAApVJREFUWIXNl09IVFEYxX/vda+roT9C6EYKkqB/kiEYhLRJB6qNbVrYqhbmYMteUIySrnqLFiEOLmoRumnTpo0pBEVQIARG0cLAqNBpUzIW6L1qi3f905s7zzfDG+zAW3x8Z945zH333vM5xITykEAa6ABagEPAXtP+BXwGpoDnwLj0UXHe68QQrgMyQF9cswYDwLD0yVdsQHncrUC4yIj06S/LgPI4AfSYJwnkgJz0eb+tAeVxDphISDiMdukzWdKA8jgKfKiS+DqOSZ+P64UbavZWWbxIY8OA+eCSWvMo9BgtwCyB2WrzNrbofQMNrZVJfX2LHjpdqlsvffLCFBkrpRZoaEUPOrBYpngKxB2FaOtGvxqxMTJAv2NOuGUbQ3SNQt1J9P3jZaqb36ezcOYmum93KUqNS3C82nHkErzIViQOoMcHwRVRlLRLcLbbsarR755u1inzlKqx1NHoEAQXix0h9yK7BoC+5djre6G6rRt2Rf4DLQJoLNn+8wNxexYen4X9p2BVQ+E7orkz6C8VAqHmTlicg8LcZq1+w/khmJ+OMtDoKI8loMbargVxfRb2HIBVBU8uQ/413PgGOPCoLeBdfQkrGkbMx5r5BK6EhS/oBwejdtBytIGtSBF/K8bnLrvAQhzm+nonzF1wgZnYb04eMy5BjNopTLkEGW6nMBF5FAOIa8+gMQ0rars9HYIDM+PohxejSDVC+ijlMYAt+6WAwxcqv4yya1E7YkD6qMjrWHSNQlNXmcohTI+hx67YOvXSJ78RyRJKwHGxkZTDmXCY6qeinPQ380c4Ew5VWbxI4x8DJq22V1G8fWsiLjJgTEwCTQTDRFLIAU3hmQD+19EsZGLnhtOQEdt4vs+0f1LheP4XcCzJ/0nFX0oAAAAASUVORK5CYII="},f7ec:function(t,e,i){"use strict";var r=i("5c9a"),a=i.n(r);a.a},f8cd:function(t,e,i){var r=i("a691");t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},ff5b:function(t,e,i){}}]);