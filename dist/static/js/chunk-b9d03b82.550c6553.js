(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9d03b82"],{"0043":function(t,e,a){"use strict";var i=a("2dc2"),n=a.n(i);n.a},"227c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vehicle-mgmt-car-speed"},[a("biz-grid",[a("biz-header",{attrs:{operations:t.operations,filters:t.filters},on:{operate:t.operate,filterDataChange:t.filterDataChange}}),a("analysis-header",{attrs:{headerData:t.totalData}}),"table"===t.filters[4].value?a("biz-table-body",{ref:"table",attrs:{tableData:t.currentTableData,height:"565",pagination:t.pagination},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),a("el-table-column",{attrs:{prop:"speed",label:"车速(km/h)"}})],1):t._e(),"chart"===t.filters[4].value?a("biz-chart",{attrs:{chartData:t.chartData,showSearch:!1,loading:t.loading,chartHeight:t.chartHeight}}):t._e()],1)],1)},n=[],r=(a("99af"),a("d81d"),a("fb6a"),a("b0c0"),a("a9e3"),a("84fd")),l=a("f36f"),s=a("815c"),o=a("4c91"),c=a("562e"),u=a("cc3c"),h={name:"CarSpeed",data:function(){return{loading:!1,today:"",oldFilterValue:"",oldSwitchValue:"chart",operations:[{label:"搜索",name:"refresh",type:""},{label:"导出",name:"export",type:""}],totalData:{},filters:[{type:"select",label:"车队",name:"fleet",value:"",options:[]},{type:"select",label:"车辆",name:"car",value:"",options:[]},{type:"input",label:"车速(km/h) >=",name:"searchbar",value:"0"},{type:"daterange",label:"日期区间：",value:["2011-11-11","2012-12-12"]},{type:"switch",label:"",activeValue:"table",inactiveValue:"chart",activeText:"列表统计",inactiveText:"图表统计",value:"chart"}],tableData:[],chartData:{type:"histogram",data:{columns:["日期","车速"],rows:[]},settings:{metrics:["车速"],showLine:["车速"],yAxisType:["normal"],yAxisName:["    车速(km/h)"]}},pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},chartHeight:"560px"}},methods:{operate:function(t){this[t]()},export:function(){var t={plateNumber:this.filters[1].value,speed:this.filters[2].value,dateRange:"".concat(this.filters[3].value[0],"-").concat(this.filters[3].value[1])};u["a"].speedExport(t,(function(t){}),(function(t){}))},filterDataChange:function(t){this.oldFilter!==t[0].value&&(this.getCarList(t[0].value),this.oldFilter=t[0].value),this.$set(this.operations[1],"disabled","chart"===t[4].value),this.filters=t},handleSizeChange:function(t){this.pagination.pageSize=t},handleCurrentChange:function(t){this.pagination.currentPage=t},refresh:function(){var t=this;if(this.filters[3].value[0]>this.today||this.filters[3].value[1]>this.today)return this.$message.warning({message:"不能选择将来的时间",showClose:!0}),void this.getFormatDate();var e={treeNodeId:"fleet_".concat(this.filters[0].value),carId:this.filters[1].value,value:this.filters[2].value,beginTimeStr:this.filters[3].value[0],endTimeStr:this.filters[3].value[1]};u["a"].querySpeed(e,(function(e){t.totalData=e.totalData}),(function(t){})),this.querySpeedChart()},querySpeedChart:function(){var t=this;this.loading=!0;var e={treeNodeId:"fleet_".concat(this.filters[0].value),fleetCarId:this.filters[1].value,type:"carSpeed",summaryMode:"date",value:this.filters[2].value||"0",beginTimeStr:this.filters[3].value[0],endTimeStr:this.filters[3].value[1]};u["a"].queryMarketingCarsChart(e,(function(e){t.loading=!1,t.tableData=e.statisticsData,t.pagination.total=Number(e.statisticsData.length),t.chartData.data.rows=[],e.statisticsData.map((function(e){t.chartData.data.rows.push({"日期":e.date,"车速":e.speed})}))}),(function(e){t.loading=!1,console.log("ERR_GET_CHART: ",e)}))},queryCarFleet:function(){var t=this,e={fleetType:"group",pageNumber:"1",pageSize:"200"};u["a"].queryFleetList(e,(function(e){var a=[];e.content.map((function(t){a.push({value:t.id,label:t.name})})),t.$set(t.filters[0],"options",a),t.filters[0].value=t.filters[0].options[0].value,console.log("fleetList: ",t.filters[0])}),(function(t){console.log("ERR_GET_FLEET: ",t)}))},getCarList:function(t){var e=this,a={fleetId:t,pageSize:"200"};u["a"].queryCarList(a,(function(t){var a=[];t.carList.map((function(t){a.push({value:t.id,label:t.plateNumber})})),e.$set(e.filters[1],"options",a),e.filters[1].value="",e.refresh()}),(function(t){}))},getFormatDate:function(){var t=new Date;this.filters[3].value[1]="".concat(t.getFullYear(),"-").concat(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate()),this.today=this.filters[3].value[1];var e=function(){var t=new Date;return t.setDate(1),"".concat(t.getFullYear(),"-").concat(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate())};this.filters[3].value[0]=e()}},mounted:function(){this.queryCarFleet()},created:function(){this.getFormatDate()},watch:{},computed:{currentTableData:function(){return this.tableData.slice((this.pagination.currentPage-1)*this.pagination.pageSize,this.pagination.currentPage*this.pagination.pageSize)}},components:{BizHeader:r["a"],BizTableBody:s["a"],BizChart:c["a"],AnalysisHeader:o["a"],BizGrid:l["a"]}},f=h,d=(a("0043"),a("2877")),g=Object(d["a"])(f,i,n,!1,null,null,null);e["default"]=g.exports},"2dc2":function(t,e,a){}}]);