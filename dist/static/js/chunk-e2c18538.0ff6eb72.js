(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2c18538"],{"359b":function(t,e,a){},"3a87":function(t,e,a){},"5b8e":function(t,e,a){"use strict";var n=a("9678"),o=a.n(n);o.a},7132:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"biz-fade-t"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[a("transition",{attrs:{name:"biz-fade-t-right"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"popup-content",style:t.contentStyle},[t._t("default")],2)])],1)])},o=[],i={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},l=i,s=(a("5b8e"),a("2877")),r=Object(s["a"])(l,n,o,!1,null,null,null),u=r.exports,c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"biz-popup-tabs"},[a("biz-popup",{attrs:{open:t.open,contentStyle:t.contentStyle},on:{close:t.close}},[a("el-tabs",{attrs:{type:"border-card",value:t.value},on:{"tab-click":t.tabClick}},[t._t("default")],2)],1)],1)},f=[],p=(a("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:u},methods:{close:function(){var t=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("close")}))},tabClick:function(t){this.$emit("input",t.name)}}}),d=p,m=(a("d4c2"),Object(s["a"])(d,c,f,!1,null,null,null)),g=m.exports;a.d(e,"a",(function(){return g}))},9678:function(t,e,a){},a70c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"car-fault-code"},[a("biz-flex-table",{ref:"table",attrs:{operations:t.operations,pagination:t.pagination,tableData:t.tableDataHandle,loading:t.loading},on:{operate:t.operate,"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"selection-change":t.selectionChangeHandler,"row-click":t.rowClick}},[a("el-table-column",{attrs:{prop:"faultCode",label:"故障码"}}),a("el-table-column",{attrs:{prop:"faultDescription",label:"故障描述"}}),a("el-table-column",{attrs:{prop:"faultType",label:"故障类型"}}),a("el-table-column",{attrs:{prop:"faultSpn",label:"SPM"}}),a("el-table-column",{attrs:{prop:"faultFmi",label:"FMI"}}),a("el-table-column",{attrs:{prop:"faultDtcm",label:"DTCM"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.deleteHandler(a,e.row)}}},[t._v(" 删除 ")])]}}])})],1),a("car-fault-code-popup",{attrs:{slot:"float",open:t.openPopup,itemId:t.itemId},on:{close:t.closePopup,operationSuccess:t.refresh},slot:"float"})],1)},o=[],i=(a("4160"),a("b0c0"),a("d3b7"),a("159b"),a("04d3")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("biz-popup-tabs",{attrs:{open:t.open},on:{close:t.close},model:{value:t.tabSelection,callback:function(e){t.tabSelection=e},expression:"tabSelection"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("car-fault-code-info",{attrs:{itemId:t.itemId},on:{operationSuccess:t.operationSuccess}})],1)],1)},s=[],r=a("7132"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"car-fault-code-info"},[a("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operateHandler},slot:"top"}),a("el-form",{ref:"form",attrs:{model:t.form,size:"small",rules:t.rules,"label-width":"85px"}},[a("el-form-item",{attrs:{label:"故障码",prop:"faultCode"}},[a("el-input",{staticClass:"code-input",model:{value:t.form.faultCode,callback:function(e){t.$set(t.form,"faultCode",e)},expression:"form.faultCode"}})],1),a("el-form-item",{attrs:{label:"故障类型"}},[a("el-select",{staticClass:"code-input",attrs:{placeholder:"请选择"},on:{change:t.tagTypeChange},model:{value:t.form.faultTypeId,callback:function(e){t.$set(t.form,"faultTypeId",e)},expression:"form.faultTypeId"}},t._l(t.faultTypeList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"SPM"}},[a("el-input",{staticClass:"code-input",model:{value:t.form.faultSpn,callback:function(e){t.$set(t.form,"faultSpn",e)},expression:"form.faultSpn"}})],1),a("el-form-item",{attrs:{label:"FMI"}},[a("el-input",{staticClass:"code-input",model:{value:t.form.faultFmi,callback:function(e){t.$set(t.form,"faultFmi",e)},expression:"form.faultFmi"}})],1),a("el-form-item",{attrs:{label:"DTCM"}},[a("el-input",{staticClass:"code-input",model:{value:t.form.faultDtcm,callback:function(e){t.$set(t.form,"faultDtcm",e)},expression:"form.faultDtcm"}})],1),a("el-form-item",{attrs:{label:"故障描述"}},[a("el-input",{staticClass:"code-input",model:{value:t.form.faultDescription,callback:function(e){t.$set(t.form,"faultDescription",e)},expression:"form.faultDescription"}})],1)],1)],1)},c=[],f=a("f36f"),p=a("8330"),d=a("1ab1"),m=a("c596"),g={name:"car-fault-code-info",data:function(){return{loading:!1,form:{faultCode:"",faultDescription:"",faultTypeId:"",faultSpn:"",faultFmi:"",faultDtcm:""},operations:[{label:"保存",name:"save",type:"primary"}],rules:{faultCode:[{required:!0,message:"请输入故障码",trigger:"blur"}]},faultTypeList:[]}},props:{itemId:{type:Object,default:function(){return{id:""}}}},components:{BizGrid:f["a"],BizSaveButton:p["a"]},computed:{},watch:{itemId:function(t,e){this.resetModel(),t.id?(this.getFaultType(),this.showInfo()):this.getFaultType()}},methods:{tagTypeChange:function(){},resetModel:function(){this.form=this.getDefaultModel(),this.$refs.form.resetFields()},getDefaultModel:function(){return{faultCode:"",faultDescription:"",faultTypeId:"",faultSpn:"",faultFmi:"",faultDtcm:""}},operateHandler:function(){this.itemId.id?this.updateCode():this.addCode()},showInfo:function(){var t=this;this.loading=!0;var e={id:this.itemId.id};d["a"].get(m["g"].systemSetting.carFaultCodeOperate,e).then((function(e){t.loading=!1,console.log(e),t.form.faultCode=e.data.faultCode,t.form.faultDescription=e.data.faultDescription,t.form.faultDtcm=e.data.faultDtcm,t.form.faultFmi=e.data.faultFmi,t.form.faultSpn=e.data.faultSpn,t.faultTypeList.forEach((function(a){if(e.data.faultTypeId===a.id)return t.form.faultTypeId=a.name,!1}))})).catch((function(e){t.loading=!1,t.$message({title:"警告",message:e.errorMessage,type:"warning"})})).finally((function(){}))},addCode:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.loading=!0;var a={faultCode:t.form.faultCode,faultDescription:t.form.faultDescription,faultTypeId:t.form.faultTypeId,faultSpn:t.form.faultSpn,faultFmi:t.form.faultFmi,faultDtcm:t.form.faultDtcm};d["a"].post(m["g"].systemSetting.carFaultCodeOperate,a).then((function(e){console.log(e),t.loading=!1,t.$message.success("创建成功"),t.$emit("operationSuccess")})).catch((function(e){t.loading=!1,t.$message({title:"警告",message:e.errorMessage,type:"warning"})})).finally((function(){}))}}))},updateCode:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.loading=!0;var a={id:t.itemId.id,faultCode:t.form.faultCode,faultDescription:t.form.faultDescription,faultTypeId:t.form.faultTypeId,faultSpn:t.form.faultSpn,faultFmi:t.form.faultFmi,faultDtcm:t.form.faultDtcm};d["a"].put(m["g"].systemSetting.carFaultCodeOperate,a).then((function(e){console.log(e),t.loading=!1,t.$message.success("更新成功"),t.$emit("operationSuccess")})).catch((function(e){t.loading=!1,t.$message({title:"警告",message:e.errorMessage,type:"warning"})})).finally((function(){}))}}))},getFaultType:function(){var t=this;d["a"].get(m["g"].systemSetting.faultType).then((function(e){console.log("故障类型",e),t.faultTypeList=e.faultTypeList,t.refresh()})).catch((function(){})).finally((function(){}))}}},h=g,b=(a("cdd3"),a("2877")),y=Object(b["a"])(h,u,c,!1,null,null,null),C=y.exports,v={name:"car-fault-code-popup",data:function(){return{tabSelection:"0"}},props:{open:{type:Boolean},itemId:{type:Object,default:function(){return{id:""}}}},components:{BizPopupTabs:r["a"],CarFaultCodeInfo:C},computed:{},watch:{open:function(t){var e=this;t&&setTimeout((function(){e.tabSelection="0"}),500)}},methods:{close:function(t){this.$emit("close",t)},operationSuccess:function(t){this.$emit("operationSuccess",t)}}},S=v,T=Object(b["a"])(S,l,s,!1,null,null,null),I=T.exports,D={name:"car-fault-code",data:function(){return{itemId:{id:""},openPopup:!1,loading:!1,tableData:[],selections:[],operations:[{label:"添加",name:"add",type:"primary"},{label:"删除",name:"delete",type:"",disabled:!0},{label:"刷新",name:"refresh",type:""}],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},faultTypeList:[]}},props:{},components:{BizFlexTable:i["c"],CarFaultCodePopup:I},computed:{tableDataHandle:function(){var t=this,e=this.tableData;return e?(e.forEach((function(e){t.faultTypeList.forEach((function(t){e.faultTypeId===t.id&&(e.faultType=t.name)}))})),e):[]}},watch:{},methods:{add:function(){this.itemId={id:""},this.openPopup=!0},delete:function(){if(this.selections&&this.selections.length>0){var t=[];this.selections.forEach((function(e){t.push(e.id)})),this.deleteItem(t)}else this.$message("请选择一个分类")},deleteItem:function(t){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0;var a={ids:t};d["a"].delete(m["g"].systemSetting.carFaultCodeOperate,a).then((function(t){console.log(t),e.loading=!1,e.$message.success("删除成功"),e.refresh()})).catch((function(t){e.loading=!1,e.$message.warning(t.errorMessage)})).finally((function(){}))}))},operate:function(t){this[t]()},deleteHandler:function(t,e){t.stopPropagation(),this.deleteItem([e.id])},refresh:function(){this.getList()},selectionChangeHandler:function(t){this.selections=t,this.operations[1].disabled=!0,t.length>0&&(this.operations[1].disabled=!1)},closePopup:function(){this.openPopup=!1},rowClick:function(t){console.log("rowClick"),this.openPopup=!0,this.itemId={id:t.id}},handleSelectionChange:function(){console.log("handleSelectionChange")},handleSizeChange:function(t){this.pagination.pageSize=t,console.log("handleSizeChange"),this.refresh()},handleCurrentChange:function(t){this.pagination.currentPage=t,console.log("handleCurrentChange"),this.refresh()},getList:function(){var t=this;this.loading=!0;var e={pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize};d["a"].get(m["g"].systemSetting.carFaultCodeList,e).then((function(e){console.log("车辆故障码列表",e),t.tableData=e.content,t.pagination.pageSize=parseInt(e.pageSize),t.pagination.currentPage=parseInt(e.pageNumber),t.pagination.total=parseInt(e.total),t.loading=!1})).catch((function(e){console.log(e),t.loading=!1})).finally((function(){}))},getFaultType:function(){var t=this;d["a"].get(m["g"].systemSetting.faultType).then((function(e){console.log("故障类型",e),t.faultTypeList=e.faultTypeList,t.refresh()})).catch((function(e){t.loading=!1,t.$message({title:"警告",message:e.errorMessage,type:"warning"})})).finally((function(){}))}},created:function(){this.getFaultType()}},$=D,w=(a("b1a3"),Object(b["a"])($,n,o,!1,null,null,null));e["default"]=w.exports},b1a3:function(t,e,a){"use strict";var n=a("359b"),o=a.n(n);o.a},cdd3:function(t,e,a){"use strict";var n=a("3a87"),o=a.n(n);o.a},d4c2:function(t,e,a){"use strict";var n=a("e725"),o=a.n(n);o.a},e725:function(t,e,a){}}]);