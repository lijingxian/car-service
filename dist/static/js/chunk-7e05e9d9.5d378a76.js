(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e05e9d9"],{1064:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"brand-series-mgmt"},[a("biz-flex-table",{ref:"table",attrs:{loading:e.loading,operations:e.operations,tableData:e.tableData,filters:e.filters,pagination:e.pagination},on:{operate:e.operate,"filter-data-change":e.filterDataChange,"selection-change":e.handleSelectionChange,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{width:"260",prop:"Brand",label:"品牌"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticStyle:{position:"relative"},on:{click:function(a){return a.stopPropagation(),e.brandClick(t.row)}}},[a("img",{staticStyle:{width:"50px",height:"50px","vertical-align":"middle",margin:"0px 15px 0px 20px",cursor:"pointer"},attrs:{src:t.row.logo,onerror:e.defaultImg}}),a("span",{staticStyle:{color:"#1a1a1a","font-size":"12px"}},[e._v(e._s(t.row.name))])])}}])}),a("el-table-column",{attrs:{label:"系列",prop:"Brand.seriesDataList"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticStyle:{width:"100%"}},[a("biz-column-table",{attrs:{seriesDataList:t.row.seriesDataList,id:t.row.id},on:{addButtonClick:e.addButtonClick,seriesIconClick:e.seriesIconClick,deleteSeries:e.deleteSeries}})],1)}}])}),a("el-table-column",{attrs:{width:"100",prop:"date",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return e.hasAuthDel?a("div",{},[a("div",{staticClass:"biz-customcol"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return a.stopPropagation(),e.deleteCommodity(t.row.id)}}},[e._v(" 删除 ")])],1)]):e._e()}}],null,!0)})],1),a("biz-popup-tabs",{attrs:{open:e.openBrand},on:{close:function(t){e.openBrand=!1}},model:{value:e.tabName_brand,callback:function(t){e.tabName_brand=t},expression:"tabName_brand"}},[a("el-tab-pane",{attrs:{label:"品牌信息",name:"brandBaseinfo"}},[a("BrandBaseInfo",{ref:"brandBaseInfo",attrs:{id:e.brandId,isEdit:e.isEdit,refreshSign:e.refreshSign},on:{created:e.refresh}})],1)],1),a("biz-popup-tabs",{attrs:{open:e.openSeries},on:{close:function(t){e.openSeries=!1}},model:{value:e.tabName_series,callback:function(t){e.tabName_series=t},expression:"tabName_series"}},[a("el-tab-pane",{attrs:{label:"系列信息",name:"seriesBaseinfo"}},[a("SeriesBaseInfo",{ref:"seriesBaseInfo",attrs:{id:e.seriesId,isEdit:e.isEdit,brandId:e.brandId,refreshSign:e.refreshSign},on:{created:e.refresh}})],1)],1),a("biz-popup-tabs",{attrs:{open:e.open},on:{close:function(t){e.open=!1}},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"导入品牌/系列",name:"import"}},[a("ImportBrandSeries",{ref:"import",attrs:{open:e.open},on:{closePoup:e.closePoup,openPoup:e.openPoup,operationSuccess:e.operationSuccess}})],1)],1)],1)},i=[],r=(a("caad"),a("d81d"),a("b0c0"),a("a9e3"),a("2532"),a("b85c")),s=a("5530"),o=a("7132"),c=a("04d3"),l=a("b019"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{staticClass:"brand-base-info"},[e.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}):e._e(),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px",size:"small",disabled:!e.isEdit}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"name"}},[a("el-autocomplete",{attrs:{"trigger-on-focus":!1,placeholder:"请输入品牌首字母查找品牌","fetch-suggestions":e.querySearchAsync},on:{select:e.handleSelect},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"Logo",prop:"logo"}},[a("BrandSeriesUploader",{on:{handleUploadSuccess:e.handleUploadSuccess},model:{value:e.form.logo,callback:function(t){e.$set(e.form,"logo",t)},expression:"form.logo"}})],1)],1)],1)},u=[],f=(a("96cf"),a("1da1")),m=a("8330"),p=a("f36f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"brand-series-uploader"},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",style:e.avatarStyle,attrs:{"show-file-list":!1,accept:"image/*",name:"file","on-success":e.handleSuccess,action:"/admin/file/uploads.jhtml",data:e.fileData}},[e.value?a("div",{staticClass:"avatar"},[a("img",{attrs:{src:e.value,onerror:e.defaultImg}})]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:e.plusStyle}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"operate",on:{click:function(t){return t.stopPropagation(),e.doThis(t)}}},[a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return t.stopPropagation(),e.zoomIn(t)}}}),a("i",{staticClass:"el-icon-plus",on:{click:e.upload}}),a("i",{staticClass:"el-icon-delete",on:{click:e.remove}})])]),a("el-dialog",{staticClass:"avatar-preview-dialog",attrs:{"append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"review"},[a("img",{attrs:{src:e.value,onerror:e.defaultImg}})])])],1)},g=[],b={name:"BrandSeriesUploader",data:function(){return{dialogVisible:!1,fileData:{type:"0"},avatar:"",defaultImg:'this.src="'+a("b89e")+'"'}},props:{size:{type:Object,default:function(){return{width:120,height:120}}},value:{type:String,default:""}},computed:{plusStyle:function(){return{"line-height":this.size.height+"px"}},avatarStyle:function(){return{height:this.size.height+"px",width:this.size.width+"px"}}},methods:{handleSuccess:function(e){this.$emit("input",e.fis[0].url),this.$emit("handleUploadSuccess",e.fis[0].url)},zoomIn:function(){this.dialogVisible=!0},doThis:function(){},upload:function(){this.$refs.upload.$refs["upload-inner"].$refs.input.click()},remove:function(){this.$emit("input","")}}},v=b,S=(a("2c72"),a("2877")),y=Object(S["a"])(v,h,g,!1,null,null,null),I=y.exports,B=a("f7f7"),w=a("c596"),C=a("bc3a"),_=a.n(C),$={name:"BrandBaseInfo",data:function(){return{isCreated:!0,loading:!1,list:[],operations:[{label:"保存",name:"save",type:"primary",auth:["admin:PurchaseSaleStorage.brand.edit"]}],form:{id:"",name:"",logo:""},rules:{name:[{required:!0,message:"请输入品牌名称",trigger:"blur"}],logo:[{required:!0,message:"请输入品牌Logo",trigger:"blur"}]}}},components:{BizSaveButton:m["a"],BizGrid:p["a"],BrandSeriesUploader:I},props:{id:{type:String,default:""},isEdit:{type:Boolean,default:function(){return!0}},refreshSign:Boolean},watch:{id:function(e){this.$refs.form.clearValidate(),""===e&&(this.isCreated=!0,this.form.name="",this.form.logo="")},refreshSign:function(){this.isCreated=!1,this.refresh()}},created:function(){},computed:{},methods:{operate:function(e){this[e]()},save:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.isCreated?e.createBrand():e.updateBrand()}))},refresh:function(){var e=this,t={id:this.id};B["a"].queryByBrand(t,(function(t){e.form.name=t.brandData.name,e.form.logo=t.brandData.logo}),(function(e){console.log(e)}))},createBrand:function(){var e=this,t={name:this.form.name,logo:this.form.logo,type:"image"};B["a"].createBrand(t,(function(t){e.$message.success("操作成功"),e.$emit("created")}),(function(t){e.$message.warning(t.errorMessage)}))},updateBrand:function(){var e=this,t={id:this.id,name:this.form.name,logo:this.form.logo};B["a"].updateBrand(t,(function(t){e.$message.success("操作成功"),e.$emit("created")}),(function(t){e.$message.warning(t.errorMessage)}))},handleUploadSuccess:function(e){this.form.logo=e,this.$refs.form.clearValidate(["logo"])},querySearchAsync:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={shopId:window.top.SHOP_ID||"",q:t},e.prev=1,e.next=4,_.a.get(w["g"].commodity.queryBrand,{params:n});case 4:i=e.sent,s=Object(r["a"])(i.data.brandNames);try{for(s.s();!(o=s.n()).done;)c=o.value,c.value=c.brand}catch(l){s.e(l)}finally{s.f()}this.list=i.data.brandNames,a(this.list),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t,a){return e.apply(this,arguments)}return t}(),handleSelect:function(e){var t,a=Object(r["a"])(this.list);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.id===e.id&&(this.form.logo=n.logo)}}catch(i){a.e(i)}finally{a.f()}console.log(e)},clear:function(){this.isCreated=!0,this.form={id:"",name:"",logo:""}}}},x=$,O=(a("692b"),Object(S["a"])(x,d,u,!1,null,null,null)),k=O.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{staticClass:"series-base-info"},[e.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}):e._e(),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px",size:"small",disabled:!e.isEdit}},[a("el-form-item",{attrs:{label:"系列名称",prop:"name"}},[a("el-autocomplete",{attrs:{placeholder:"请输入系列名称","fetch-suggestions":e.querySearchAsync},on:{select:e.handleSelect},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"Logo",prop:"image"}},[a("BrandSeriesUploader",{attrs:{title:"建议尺寸3:2"},on:{handleUploadSuccess:e.handleUploadSuccess},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}})],1)],1)],1)},P=[],T={name:"SeriesBaseInfo",data:function(){return{isCreated:!0,loading:!1,list:[],operations:[{label:"保存",name:"save",type:"primary",auth:["admin:PurchaseSaleStorage.brand.edit"]}],form:{id:"",name:"",image:""},rules:{name:[{required:!0,message:"请输入系列名称",trigger:"blur"}],image:[{required:!0,message:"请添加系列Logo",trigger:"blur"}]}}},components:{BizSaveButton:m["a"],BizGrid:p["a"],BrandSeriesUploader:I},props:{id:{type:String,default:""},isEdit:{type:Boolean,default:function(){return!0}},brandId:{type:String,default:""},refreshSign:Boolean},watch:{id:function(e){""===e&&(this.isCreated=!0,this.form.name="",this.form.image="")},refreshSign:function(){this.isCreated=!1,this.$refs.form.clearValidate(),this.refresh()}},created:function(){},computed:{},methods:{operate:function(e){this[e]()},save:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.isCreated?e.createSeries():e.updateSeries()}))},refresh:function(){var e=this,t={id:this.id,shopId:window.top.SHOP_ID||""};B["a"].queryBySeries(t,(function(t){e.form.name=t.seriesData.name,e.form.image=t.seriesData.image,e.brandId=t.brandData.id}),(function(e){console.log(e)}))},createSeries:function(){var e=this,t={brandId:this.brandId,name:this.form.name,image:this.form.image};B["a"].createSeries(t,(function(t){e.$message.success("操作成功"),e.$emit("created")}),(function(t){e.$message.warning(t.errorMessage)}))},updateSeries:function(){var e=this,t={id:this.id,name:this.form.name,image:this.form.image,brandId:this.brandId};B["a"].updateSeries(t,(function(t){e.$message.success("操作成功"),e.$emit("created")}),(function(t){e.$message.warning(t.errorMessage)}))},handleUploadSuccess:function(e){this.form.image=e,this.$refs.form.clearValidate(["image"])},querySearchAsync:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={shopId:window.top.SHOP_ID||"",bid:this.brandId},e.prev=1,e.next=4,_.a.get(w["g"].commodity.querySeries,{params:n});case 4:i=e.sent,s=Object(r["a"])(i.data.seriesData);try{for(s.s();!(o=s.n()).done;)c=o.value,c.value=c.name}catch(t){s.e(t)}finally{s.f()}this.list=i.data.seriesData,a(this.list),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t,a){return e.apply(this,arguments)}return t}(),handleSelect:function(e){var t,a=Object(r["a"])(this.list);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.id===e.id&&(this.form.image=n.image)}}catch(i){a.e(i)}finally{a.f()}console.log(e)},clear:function(){this.isCreated=!0,this.form={id:"",name:"",image:""}}}},j=T,z=(a("a3ab1"),Object(S["a"])(j,N,P,!1,null,null,null)),L=z.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"import-brand-series"},[a("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}),a("el-form",{attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"品牌："}},[a("el-select",{attrs:{placeholder:"请选择品牌",filterable:""},on:{change:e.getSeriesName},model:{value:e.brandId,callback:function(t){e.brandId=t},expression:"brandId"}},e._l(e.brandOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"系列："}},[a("biz-list",{ref:"table",attrs:{height:e.heightList,tableData:e.seriesDataList},on:{handleSelectionChange:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}})],1),a("import-file",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"importFile",staticStyle:{"margin-left":"10px"},attrs:{tableData:e.importResult,importLoading:e.importLoading,total:e.total,disabled:e.disabled,count:e.count,percentage:e.percentage,stepkey:e.stepkey,action:"/admin/shopProduct/importProduct.jhtml",name:"uFile"},on:{clearTimeOut:e.clearTimeOut,restProcess:e.restProcess,"handle-import":e.handleImport}},[a("el-table-column",{attrs:{label:"编号",prop:"line",width:"50"}}),a("el-table-column",{attrs:{label:"消息",prop:"result"}})],1)],1)],1)],1)},D=[],F=a("1ab1"),M=a("5118"),A=a("ccf0"),q={name:"CommodityMgmtBaseInfo",data:function(){return{heightList:"100%",multipleSelection:[],modeList:[],operations:[{label:"确定",name:"save",type:"primary",auth:["admin:PurchaseSaleStorage.brand.edit"]}],rules:{topProductCategoryId:[{required:!0,message:"请选择分类",trigger:"blur"}]},brandOptions:[],brandId:"",seriesId:[],seriesDataList:[],importLoading:!1,importResult:[],disabled:!1,show:!1,total:0,count:0,t:"",percentage:0,stepkey:"",loading:!1}},props:{open:{type:Boolean,default:!1}},watch:{open:function(e){e?this.getBrandName():(this.brandId="",this.brandOptions=[],this.seriesId=[],this.seriesDataList=[],this.importResult=[],this.successCount=0,this.failCount=0)}},components:{BizGrid:p["a"],BizSaveButton:m["a"],BizList:c["e"],ImportFile:A["b"]},created:function(){this.getBrandName()},computed:{},methods:{operate:function(e){this[e]()},handleSelectionChange:function(e){this.multipleSelection=e},clearTimeOut:function(){window.clearTimeout(this.t)},restProcess:function(){this.total=0,this.count=0,this.stepkey="",this.percentage=0},handleImport:function(){var e=this,t="/admin/shopBrand/importProgress.jhtml";F["a"].get(t,{type:"13"}).then((function(t){t.data.total||(e.total=0,e.count=0,e.stepkey="",e.percentage=0),t.data.total&&(e.total=Number(t.data.total||0),e.count=Number(t.data.count||0),e.stepkey=t.data.remark,e.percentage=Number(t.data.rate),e.$refs.importFile.title=t.data.title),t.data&&t.data.rate&&"100"===t.data.rate?(e.clearTimeOut(),e.$refs.importFile.showCurrentInfo=!1,e.$refs.importFile.title="导入完成",e.$refs.importFile.uploadingVisible=!0,t.data&&t.data.results&&t.data.results.length>0&&(e.importResult=t.data.results,e.$refs.importFile.uploadingVisible=!1,e.$refs.importFile.importingVisible=!0,e.$emit("operationSuccess")),e.disabled=!1):t.data&&t.data.rate&&"100"!==t.data.rate?(e.t&&e.clearTimeOut(),e.t=Object(M["setTimeout"])(e.handleImport,2e3),e.$refs.importFile.uploadingVisible=!0,e.$refs.importFile.showCurrentInfo=!0,e.disabled=!0):(e.$refs.importFile.uploadingVisible=!1,e.$emit("openPoup"))})).catch((function(e){console.log(e),console.log("code错误")}))},getUploadProductFileParam:function(e){return{shopId:window.top.SHOP_ID||"",filePath:e}},getBrandName:function(){var e=this;this.brandId="",this.brandOptions=[],this.seriesIds=[],this.seriesDataList=[],F["a"].get("/admin/brand/brandList.jhtml",{}).then((function(t){e.brandOptions=t.dataList})).catch((function(e){console.log(e)}))},getSeriesName:function(){var e=this;this.seriesId=[],this.seriesDataList=[],F["a"].get("/admin/series/seriesList.jhtml",{brandId:this.brandId}).then((function(t){e.seriesDataList=t.dataList})).catch((function(e){console.log(e)}))},save:function(){var e=this,t=[];this.multipleSelection.map((function(e){t.push({id:e.id})}));var a={shopId:window.top.SHOP_ID||"",id:this.brandId,seriesDataList:t};this.operations[0].disabled=!0,this.$emit("closePoup"),Object(M["setTimeout"])((function(){e.handleImport()}),200),F["a"].post("/admin/shopBrand/brandSeries/import.jhtml",a).then((function(t){e.loading=!1,e.operations[0].disabled=!1,e.$emit("operationSuccess")})).catch((function(t){e.loading=!1,e.$refs.importFile.uploadingVisible=!1,e.operations[0].disabled=!1,console.log(t)}))}}},V=q,U=(a("e91e"),Object(S["a"])(V,E,D,!1,null,null,null)),H=U.exports,R=a("a516"),G=a("2f62"),K={name:"CommodityMgmt",data:function(){return{loading:!1,refreshSign:!0,editShopIds:[],isEdit:!0,brandId:"",seriesId:"",tabName:"import",tabName_brand:"brandBaseinfo",tabName_series:"seriesBaseinfo",openBrand:!1,openSeries:!1,open:!1,multipleSelection:[],operations:[{label:"添加品牌",name:"add",type:"primary",auth:["admin:PurchaseSaleStorage.brand.add"]},{disabled:!0,label:"删除",name:"deleteList",type:"",auth:["admin:PurchaseSaleStorage.brand.delete"]},{label:"刷新",name:"refresh",type:""},{label:"导入",name:"import",type:"",auth:["admin:PurchaseSaleStorage.brand.import"]}],filters:[{type:"input",label:"",placeholder:"请输入品牌",name:"searchValue",value:""}],tableData:[],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:9},defaultImg:'this.src="'+a("517a")+'"'}},components:{BizPopupTabs:o["a"],BizFlexTable:c["c"],BrandBaseInfo:k,SeriesBaseInfo:L,BizColumnTable:l["a"],ImportBrandSeries:H},computed:Object(s["a"])(Object(s["a"])({},Object(G["c"])("Authority",["currentAuth"])),{},{hasAuthDel:function(){return this.currentAuth.includes("admin:PurchaseSaleStorage.brand.delete")}}),created:function(){this.getUser(),this.refresh(),this.getKpi(),this.getEditableStores()},mounted:function(){},methods:Object(s["a"])(Object(s["a"])({},Object(G["c"])(["getUser"])),{},{operate:function(e){this[e]()},refresh:function(){this.getList()},import:function(){this.$refs.import.handleImport()},closePoup:function(){this.open=!1},openPoup:function(){this.open=!0},operationSuccess:function(){this.refresh()},getKpi:function(){var e=this;F["a"].get("/admin/product/queryNavigationKpi.jhtml",{}).then((function(t){var a="维护商品所属的品牌信息。已维护品牌"+t.data.shopBrandsCount+"个";e.$message({customClass:"motorists-club-activity__kpi",showClose:!0,message:a,duration:3e3})})).catch((function(t){e.$message.warning(t.errorMessage||"操作出现错误")}))},getEditableStores:function(){var e=this;F["a"].get(w["j"].editableStores,{resourceType:"2"}).then((function(t){e.editShopIds=[],t.dataList.map((function(t){e.editShopIds.push(t.id)}))})).catch((function(e){console.log(e),console.log("code错误")}))},getList:function(){var e=this,t={searchProperty:"name",searchValue:this.filters[0].value,shopId:window.top.SHOP_ID||"",pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize};!0!==this.openBrand&&!0!==this.openSeries&&(this.loading=!0),R["a"].getBrandManageList(t,(function(t){e.tableData=t.Brand,e.pagination.total=Number(t.total),e.loading=!1}),(function(t){console.log(t),e.loading=!1}))},filterDataChange:function(e){this.pagination.currentPage=1,this.refresh()},deleteList:function(){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t,a=[],n=Object(r["a"])(e.multipleSelection);try{for(n.s();!(t=n.n()).done;){var i=t.value;a.push(i.id)}}catch(o){n.e(o)}finally{n.f()}var s={ids:a};R["a"].deleteBrand(s,(function(t){e.$message({type:"success",message:"删除成功!"}),e.refresh()}),(function(t){e.$message.warning(t.errorMessage)}))})).catch((function(){}))},deleteCommodity:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];a.push(e);var n={ids:a};R["a"].deleteBrand(n,(function(e){t.$message({type:"success",message:"删除成功!"}),t.refresh()}),(function(e){t.$message.warning(e.errorMessage)}))})).catch((function(){}))},deleteSeries:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];a.push(e);var n={ids:a};R["a"].deleteSeries(n,(function(e){t.$message({type:"success",message:"删除成功!"}),t.refresh()}),(function(e){t.$message.warning(e.errorMessage)}))})).catch((function(){}))},add:function(){this.openBrand=!0,this.$refs.brandBaseInfo.clear(),this.brandId=""},handleSelectionChange:function(e){this.operations.map((function(t){"deleteList"===t.name&&(t.disabled=!0),e.length>0&&"deleteList"===t.name&&(t.disabled=!1)})),this.multipleSelection=e},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()},typeFilterHandler:function(e,t){return t.type===e},statusFilterHandler:function(e,t){return t.state===e},addButtonClick:function(e){this.openBrand=!1,this.openSeries=!0,this.brandId=e,this.$refs.seriesBaseInfo.clear(),this.seriesId=""},seriesIconClick:function(e,t){this.refreshSign=!this.refreshSign,this.seriesId=t,this.openSeries=!0},brandClick:function(e){this.refreshSign=!this.refreshSign,this.brandId=e.id,this.openBrand=!0}})},J=K,X=(a("d69a"),Object(S["a"])(J,n,i,!1,null,null,null));t["default"]=X.exports},"1e8b":function(e,t,a){},2497:function(e,t,a){"use strict";var n=a("4360"),i=a("a18c");t["a"]=function(e,t){return function(a){var r=a.data;"100"===r.resultCode?e(r):"709"===r.resultCode?(n["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",n["a"].getters.currentUser),i["a"].push("/login")):t(r)}}},"24e9":function(e,t,a){e.exports=a.p+"static/img/add.e60f5d26.svg"},"2c72":function(e,t,a){"use strict";var n=a("c83e"),i=a.n(n);i.a},5118:function(e,t,a){(function(e){var n="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},a("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,a("c8ba"))},"517a":function(e,t,a){e.exports=a.p+"static/img/pic_default_fail_100.b6b0849d.png"},"56b0":function(e,t,a){},"57ae":function(e,t,a){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),i=a("5899"),r="["+i+"]",s=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),c=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},6017:function(e,t,a){(function(e,t){(function(e,a){"use strict";if(!e.setImmediate){var n,i=1,r={},s=!1,o=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?m():p()?h():e.MessageChannel?g():o&&"onreadystatechange"in o.createElement("script")?b():v(),c.setImmediate=l,c.clearImmediate=d}function l(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var s={callback:e,args:t};return r[i]=s,n(i),i++}function d(e){delete r[e]}function u(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(a,n);break}}function f(e){if(s)setTimeout(f,0,e);else{var t=r[e];if(t){s=!0;try{u(t)}finally{d(e),s=!1}}}}function m(){n=function(e){t.nextTick((function(){f(e)}))}}function p(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}function h(){var t="setImmediate$"+Math.random()+"$",a=function(a){a.source===e&&"string"===typeof a.data&&0===a.data.indexOf(t)&&f(+a.data.slice(t.length))};e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(a){e.postMessage(t+a,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;f(t)},n=function(t){e.port2.postMessage(t)}}function b(){var e=o.documentElement;n=function(t){var a=o.createElement("script");a.onreadystatechange=function(){f(t),a.onreadystatechange=null,e.removeChild(a),a=null},e.appendChild(a)}}function v(){n=function(e){setTimeout(f,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,a("c8ba"),a("4362"))},"692b":function(e,t,a){"use strict";var n=a("af92"),i=a.n(n);i.a},"92db":function(e,t,a){},a3ab1:function(e,t,a){"use strict";var n=a("56b0"),i=a.n(n);i.a},a516:function(e,t,a){"use strict";var n=a("2497"),i=a("bc3a"),r=a.n(i),s=a("c596");t["a"]={getBrandManageList:function(e,t,a){r.a.get(s["g"].commodity.getBrandManageList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},deleteBrand:function(e,t,a){r.a.delete(s["g"].commodity.deleteBrand,{data:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},deleteSeries:function(e,t,a){r.a.delete(s["g"].commodity.deleteSeries,{data:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))}}},a9e3:function(e,t,a){"use strict";var n=a("83ab"),i=a("da84"),r=a("94ca"),s=a("6eeb"),o=a("5135"),c=a("c6b6"),l=a("7156"),d=a("c04e"),u=a("d039"),f=a("7c73"),m=a("241c").f,p=a("06cf").f,h=a("9bf2").f,g=a("58a8").trim,b="Number",v=i[b],S=v.prototype,y=c(f(S))==b,I=function(e){var t,a,n,i,r,s,o,c,l=d(e,!1);if("string"==typeof l&&l.length>2)if(l=g(l),t=l.charCodeAt(0),43===t||45===t){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+l}for(r=l.slice(2),s=r.length,o=0;o<s;o++)if(c=r.charCodeAt(o),c<48||c>i)return NaN;return parseInt(r,n)}return+l};if(r(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var B,w=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof w&&(y?u((function(){S.valueOf.call(a)})):c(a)!=b)?l(new v(I(t)),a,w):I(t)},C=n?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;C.length>_;_++)o(v,B=C[_])&&!o(w,B)&&h(w,B,p(v,B));w.prototype=S,S.constructor=w,s(i,b,w)}},af92:function(e,t,a){},b019:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-column"},[a("div",{staticClass:"flex"},[e._l(e.seriesDataList,(function(t,n){return a("div",{key:n,staticClass:"rights_card"},[a("div",{staticClass:"logo"},[a("div",{staticClass:"image"},[a("img",{attrs:{src:t.image,onerror:e.defaultImg},on:{click:function(a){return a.stopPropagation(),e.seriesIconHandeler(e.id,t.id)}}})]),a("i",{staticClass:"el-icon-close",on:{click:function(a){return a.stopPropagation(),e.deleteHandler(t.id)}}})]),a("span",{staticStyle:{color:"#1a1a1a","font-size":"12px","margin-left":"15px"}},[e._v(e._s(t.name))])])})),a("div",{staticClass:"rights_card_add",on:{click:function(t){return t.stopPropagation(),e.addHandeler(e.id)}}},[e._m(0),a("span",{staticClass:"label"},[e._v("添加系列 ")])])],2)])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image"},[n("img",{staticClass:"addImg",attrs:{src:a("24e9"),alt:""}})])}],r=a("24e9"),s=a.n(r),o={name:"brandSeriesMgmtList",props:{seriesDataList:{type:Array,default:function(){return[]}},id:{type:String}},data:function(){return{addButton:s.a,defaultImg:'this.src="'+a("b89e")+'"'}},methods:{deleteHandler:function(e){this.$emit("deleteSeries",e)},addHandeler:function(e){this.$emit("addButtonClick",e)},seriesIconHandeler:function(e,t){this.$emit("seriesIconClick",e,t)}}},c=o,l=(a("c747"),a("2877")),d=Object(l["a"])(c,n,i,!1,null,null,null),u=d.exports;a.d(t,"a",(function(){return u}))},b89e:function(e,t,a){e.exports=a.p+"static/img/pic_default_fail.876971c2.png"},baa5:function(e,t,a){var n=a("23e7"),i=a("e58c");n({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},c747:function(e,t,a){"use strict";var n=a("1e8b"),i=a.n(n);i.a},c83e:function(e,t,a){},d69a:function(e,t,a){"use strict";var n=a("92db"),i=a.n(n);i.a},e58c:function(e,t,a){"use strict";var n=a("fc6a"),i=a("a691"),r=a("50c4"),s=a("a640"),o=a("ae40"),c=Math.min,l=[].lastIndexOf,d=!!l&&1/[1].lastIndexOf(1,-0)<0,u=s("lastIndexOf"),f=o("indexOf",{ACCESSORS:!0,1:0}),m=d||!u||!f;e.exports=m?function(e){if(d)return l.apply(this,arguments)||0;var t=n(this),a=r(t.length),s=a-1;for(arguments.length>1&&(s=c(s,i(arguments[1]))),s<0&&(s=a+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:l},e91e:function(e,t,a){"use strict";var n=a("57ae"),i=a.n(n);i.a},f7f7:function(e,t,a){"use strict";var n=a("2497"),i=a("bc3a"),r=a.n(i),s=a("c596");t["a"]={createBrand:function(e,t,a){r.a.post(s["g"].commodity.createBrand,e).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},updateBrand:function(e,t,a){r.a.put(s["g"].commodity.updateBrand,e).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryByBrand:function(e,t,a){r.a.get(s["g"].commodity.queryByBrand,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},createSeries:function(e,t,a){r.a.post(s["g"].commodity.createSeries,e).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},updateSeries:function(e,t,a){r.a.put(s["g"].commodity.updateSeries,e).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryBySeries:function(e,t,a){r.a.get(s["g"].commodity.queryBySeries,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryBrand:function(e,t,a){r.a.get(s["g"].commodity.queryBrand,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},querySeries:function(e,t,a){r.a.get(s["g"].commodity.querySeries,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))}}}}]);