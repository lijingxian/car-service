(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e035b186"],{"0943":function(e,t,a){"use strict";var n=a("1fac"),i=a.n(n);i.a},"103b":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{staticClass:"work-sheet-base-info"},[a("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px",size:"small","inline-message":!0}},[""!==e.itemId.id?a("el-form-item",{attrs:{label:"工单号",prop:"number"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1):e._e(),""!==e.itemId.id?a("el-form-item",{attrs:{label:"创建时间",prop:"createDate"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.createDate,callback:function(t){e.$set(e.form,"createDate",t)},expression:"form.createDate"}})],1):e._e(),"3"!==e.form.type?a("el-form-item",{attrs:{label:"会员",prop:"member"}},[a("el-input",{attrs:{placeholder:"请选择会员",disabled:""!==e.itemId.id},on:{focus:e.handleSelect},model:{value:e.form.member.nickname,callback:function(t){e.$set(e.form.member,"nickname",t)},expression:"form.member.nickname"}})],1):e._e(),"3"!==e.form.type?a("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",disabled:""},model:{value:e.form.member.mobile,callback:function(t){e.$set(e.form.member,"mobile",t)},expression:"form.member.mobile"}})],1):e._e(),"3"===e.form.type?a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请选择姓名",disabled:""!==e.itemId.id},on:{focus:e.handleSelect},model:{value:e.form.member.name,callback:function(t){e.$set(e.form.member,"name",t)},expression:"form.member.name"}})],1):e._e(),"3"===e.form.type?a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名",disabled:""!==e.itemId.id},model:{value:e.form.member.userName,callback:function(t){e.$set(e.form.member,"userName",t)},expression:"form.member.userName"}})],1):e._e(),"3"===e.form.type?a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",disabled:""},model:{value:e.form.member.mobile,callback:function(t){e.$set(e.form.member,"mobile",t)},expression:"form.member.mobile"}})],1):e._e(),e.form.initiator?a("el-form-item",{attrs:{label:"发起人",prop:"initiator"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.initiator.name,callback:function(t){e.$set(e.form.initiator,"name",t)},expression:"form.initiator.name"}})],1):e._e(),a("el-form-item",{attrs:{label:"工单优先级",prop:"level"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("低")]),a("el-radio",{attrs:{label:"1"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("中")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("高")])],1),a("el-form-item",{attrs:{label:"工单类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择工单类型",disabled:2===e.form.state},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},["shop"===e.getUser().roleLevel?a("el-option",{attrs:{label:"售前",value:"0"}}):e._e(),"shop"===e.getUser().roleLevel?a("el-option",{attrs:{label:"售后",value:"1"}}):e._e(),"shop"===e.getUser().roleLevel?a("el-option",{attrs:{label:"问题反馈",value:"2"}}):e._e(),"shop"===e.getUser().roleLevel?a("el-option",{attrs:{label:"投诉",value:"3"}}):e._e(),"shop"===e.getUser().roleLevel?a("el-option",{attrs:{label:"拉黑",value:"4"}}):e._e(),"shop"!==e.getUser().roleLevel?a("el-option",{attrs:{label:"功能建议",value:"5"}}):e._e(),"shop"!==e.getUser().roleLevel?a("el-option",{attrs:{label:"体验问题",value:"6"}}):e._e()],1)],1),a("el-form-item",{staticClass:"work-sheet-content",attrs:{label:"工单内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入工单内容",maxlength:100},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}),a("img-uploader",{model:{value:e.imgList,callback:function(t){e.imgList=t},expression:"imgList"}}),a("span",{staticStyle:{color:"#666666","font-size":"12px"}},[e._v("当前仅支持.jpeg .jpg .png格式，大小10M以内")])],1),a("el-form-item",{attrs:{label:"工单状态",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择工单状态"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[a("el-option",{attrs:{label:"待受理",disabled:e.disabled1,value:"0"}}),a("el-option",{attrs:{label:"受理中",disabled:e.disabled2,value:"1"}}),a("el-option",{attrs:{label:"已完成",value:"2"}})],1)],1),a("el-form-item",{staticClass:"handle-type",attrs:{label:"转交"}},[a("el-select",{attrs:{placeholder:"请选择受理组",disabled:2===e.form.state},on:{change:e.onGroupChange},model:{value:e.form.handleGroup.id,callback:function(t){e.$set(e.form.handleGroup,"id",t)},expression:"form.handleGroup.id"}},e._l(e.handleGroupList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.name,value:e.id}})})),1),a("el-select",{attrs:{placeholder:"请选择受理人",disabled:2===e.form.state},on:{change:e.onChange},model:{value:e.form.handlerAdmin.id,callback:function(t){e.$set(e.form.handlerAdmin,"id",t)},expression:"form.handlerAdmin.id"}},e._l(e.handlerList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"handleContent"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入转交备注",autosize:"",disabled:2===e.form.state},model:{value:e.form.handleContent,callback:function(t){e.$set(e.form,"handleContent",t)},expression:"form.handleContent"}})],1)],1),a("biz-dialog-selector",{staticClass:"work-sheet-select-member",attrs:{title:"选择会员",selectionMode:"single",isClear:!1,visibility:e.showDialog,tableData:e.tableData,pagination:e.pagination,filters:e.filters,selectionKeys:e.selectedMemberId},on:{"update:visibility":e.updateVisibility,pageSizeChange:e.pageSizeChange,currentPageChange:e.currentPageChange,confirmed:e.confirmSelected,filterDataChange:e.filterDataChange}},[a("el-table-column",{attrs:{property:"nickname",label:"昵称"}}),a("el-table-column",{attrs:{property:"name",label:"姓名"}}),a("el-table-column",{attrs:{property:"mobile",label:"手机号"}})],1)],1)},i=[],o=(a("d81d"),a("b0c0"),a("a9e3"),a("b85c")),r=a("5530"),l=a("f36f"),s=a("8330"),c=a("2119"),u=a("af3f"),d=a("2bb3"),f=a("2863"),m=a("2f62"),h={name:"WorkSheetBaseInfo",props:{itemId:{type:Object,default:function(){return{id:""}}}},data:function(){return{imgList:[],id:"",url:"/admin/member/json/list.jhtml",selectedMemberId:[],handlerList:[],handleGroupList:[],showDialog:!1,disabled1:!1,disabled2:!1,isCS:!0,rules:{member:[{required:!1,trigger:"blur"}],level:[{required:!0,message:"请选择优先级",trigger:"blur"}],type:[{required:!0,message:"请选择工单类型",trigger:"blur"}],content:[{required:!0,message:"请填写工单内容",trigger:"blur"}],state:[{required:!0,message:"请选择工单状态",trigger:"blur"}]},operations:[{label:"保存",name:"save",type:"primary",disabled:!1,auth:["admin:customerServiceScheduling.edit"]}],loading:!1,form:this.resetForm(),filters:[{type:"input",placeholder:"请输入会员姓名或手机号",name:"searchbar",value:""}],tableData:[],pagination:this.resetPagination()}},methods:Object(r["a"])(Object(r["a"])({},Object(m["c"])(["getUser"])),{},{onChange:function(){this.form.creator.id!==this.getUser().id&&"1"!==this.form.state&&(this.form.state="1")},onGroupChange:function(e){this.querySponsorList(e)},getBaseInfo:function(){this.user=this.getUser();var e,t=Object(o["a"])(this.user.roleDatas);try{for(t.s();!(e=t.n()).done;){var a=e.value;if("5"===a.type){this.isCS=!1;break}}}catch(n){t.e(n)}finally{t.f()}},resetForm:function(){return{number:"",createDate:"",member:{id:"",nickname:""},creator:{},mobile:"",level:"0",type:"0",content:"",images:[],state:"0",handleType:"0",handlerAdmin:{id:"",name:""},handleGroup:{id:""},handleContent:""}},updateVisibility:function(){this.showDialog=!1},resetPagination:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}},pageSizeChange:function(e){this.pagination.pageSize=e,this.queryMemberList()},currentPageChange:function(e){this.pagination.currentPage=e,this.queryMemberList()},filterDataChange:function(e){this.pagination.currentPage=1,this.queryMemberList()},operate:function(e){this[e]()},save:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.submit()}))},submit:function(){this.form.id?this.update():this.create()},create:function(){var e=this,t=Object.assign({},this.form,this.formatImgList(this.imgList));this.loading=!0,d["a"].createBaseInfo(t,(function(t){e.loading=!1,e.$message.success("操作成功"),e.$emit("created")}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage),console.log("ERR_CREATE: ",t)}))},update:function(){var e=this,t=Object.assign({},this.form,this.formatImgList(this.imgList));this.loading=!0,d["a"].updateBaseInfo(t,(function(t){e.loading=!1,e.$message.success("更新成功"),e.refresh(),e.$emit("created")}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage),console.log("ERR_UPDATE: ",t)}))},clear:function(){this.form=this.resetForm(),this.imgList=[]},refresh:function(){var e=this;this.clear();var t={id:this.id};d["a"].queryBaseInfo(t,(function(t){e.loading=!1,console.log(t.data),e.form=Object.assign(e.resetForm(),t.data),e.imgList=e.formatFormImg(e.form.images),e.operations[0].disabled=!1,"2"===e.form.state&&(e.operations[0].disabled=!0),e.querySponsorList(),"1"===e.form.state&&(e.disabled1=!0),"2"===e.form.state&&(e.disabled1=!0,e.disabled2=!0)}),(function(t){e.loading=!1,e.$message.warning({message:t.errorMessage,showClose:!0}),console.log("ERR_REFRESH: ",t)}))},formatImgList:function(e){var t=e.map((function(e){return{image:e}}));return{images:t}},formatFormImg:function(e){var t=e.map((function(e){return e.image}));return t},handleSelect:function(){this.showDialog=!0,this.filters[0].value="",this.queryMemberList()},confirmSelected:function(e,t){console.log(e,t),this.showDialog=!1,this.$set(this.form,"member",{nickname:t[0].nickname,id:t[0].id}),this.form.member.mobile=t[0].mobile,this.form.member.userName=t[0].userName,this.form.member.name=t[0].name,this.selectedMemberId=e,this.$refs.form.clearValidate()},queryMemberList:function(){var e=this,t={pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage,searchValue:this.filters[0].value};d["a"].queryMemberList(t,(function(t){e.tableData=[],e.tableData=t.content,e.pagination.total=Number(t.total)}),(function(e){}))},querySponsorList:function(e){var t=this;e||this.form.handleGroup.id||this.handlerList.push({id:this.form.handlerAdmin.id,name:this.form.handlerAdmin.name}),f["a"].query({id:e||this.form.handleGroup.id},(function(e){t.handlerList=e.data.members,t.loading=!1}),(function(e){console.log(e),console.log("code错误"),t.loading=!1}))},querySponsorGroupList:function(){var e=this,t={pageSize:200};d["a"].querySponsorGroupList(t,(function(t){e.handleGroupList=t.content}),(function(e){}))}}),computed:{},watch:{itemId:function(e,t){this.clear(),this.$refs.form.$el.scrollTop=0,e.id?(this.id=this.itemId.id,this.$refs.form.clearValidate(),this.refresh()):this.handlerList=[]},showDialog:function(e,t){e&&(this.pagination=this.resetPagination(),this.queryMemberList())}},mounted:function(){this.querySponsorGroupList()},components:{BizGrid:l["a"],BizSaveButton:s["a"],ImgUploader:c["a"],BizDialogSelector:u["a"]}},p=h,b=(a("3dcd"),a("2877")),g=Object(b["a"])(p,n,i,!1,null,null,null);t["a"]=g.exports},"1fac":function(e,t,a){},2119:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"biz-avatar-uploader-multi"},[a("div",{staticClass:"el-upload-list el-upload-list--picture-card"},[e._l(e.value,(function(t){return a("div",{key:t.index,staticClass:"el-upload-list__item is-success",attrs:{tabindex:"0"}},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(a){return e.handlePictureCardPreview(t)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowDelete,expression:"isShowDelete"}],staticClass:"el-upload-list__item-delete",on:{click:function(a){return e.handleRemove(t)}}},[a("i",{staticClass:"el-icon-delete"})])])])})),e.showUploader?a("el-upload",{ref:"upload",class:e.disabled?"avatar-uploader-disabled":"avatar-uploader",style:e.avatarStyle,attrs:{multiple:"","show-file-list":!1,accept:"image/*",limit:Number(e.limit),"file-list":e.fileList,data:e.fileData,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,name:"file",action:"/admin/file/uploads.jhtml",disabled:e.disabled}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:e.plusStyle})]):e._e()],2),a("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],o=(a("99af"),a("d81d"),a("a434"),a("ac1f"),a("1276"),{name:"ImgUploader",props:{value:{type:Array,default:function(){return[]}},imageForm:{type:Array,default:function(){return[]}},showUploader:{type:Boolean,default:function(){return!0}},size:{type:Object,default:function(){return{width:100,height:100}}},limit:{default:"9"},disabled:{type:Boolean,default:function(){return!1}},isShowDelete:{type:Boolean,default:function(){return!0}}},data:function(){return{fileData:{type:"0"},fileList:[],dialogVisible:!1,dialogImageUrl:""}},methods:{handleSuccess:function(e){var t=this.value.concat(e.fis[0].url);this.$emit("input",t)},handleExceed:function(e,t){this.$message.warning("只能上传".concat(this.limit,"张图片"))},handleRemove:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.removePic(e)}))},removePic:function(e){for(var t=this.value,a=0;a<t.length;a++)t[a]===e&&t.splice(a,1);this.$emit("input",t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e,this.dialogVisible=!0}},computed:{plusStyle:function(){return{"line-height":this.size.height+"px"}},avatarStyle:function(){return{height:this.size.height+"px",width:this.size.width+"px"}}},watch:{value:function(e,t){console.log("value: ",this.value),this.fileList=e.map((function(e){return{name:e.split("/")[e.split("/").length-1],url:e}}))}},components:{}}),r=o,l=(a("d74a"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,null,null);t["a"]=s.exports},"21c5":function(e,t,a){},2474:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"work-order-mgmt"},[a("biz-flex-table",{attrs:{operations:e.operations,filters:e.filters,tableData:e.handleTableData,pagination:e.pagination,loading:e.loading},on:{operate:e.operate,"filter-data-change":e.filterDataChange,"row-click":e.rowClick,"selection-change":e.handleSelectionChange,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"工单","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[e._v(" "+e._s(t.row.number)+" ")]),a("div",{staticClass:"overflow"},[e._v(" 创建日期："+e._s(t.row.createDate)+" ")]),a("div",{staticClass:"overflow"},[e._v(" 状态："+e._s(e.workSheetState(t.row.state))+" ")])])]}}])}),a("el-table-column",{attrs:{label:"工单详情","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[e._v(" 内容："+e._s(t.row.content)+" ")]),a("div",{staticClass:"overflow"},[e._v(" 类型："+e._s(e.workSheetType(t.row.type))+" ")]),a("div",{staticClass:"overflow"},[e._v(" 级别："+e._s(e.workSheetLevel(t.row.level))+" ")])])]}}])}),a("el-table-column",{attrs:{label:"发起人","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[e._v(" "+e._s(t.row.initiator?t.row.initiator.name||t.row.initiator.nickname||t.row.initiator.userName:"")+" ")]),a("div",{staticClass:"overflow"},[e._v(" "+e._s(t.row.initiator?t.row.initiator.mobile:"")+" ")])])]}}])}),a("el-table-column",{attrs:{label:"受理人","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[e._v(" "+e._s(t.row.handleGroup?t.row.handleGroup.name:"")+e._s(t.row.handlerAdmin?t.row.handlerAdmin.name:"")+" ")]),a("div",{staticClass:"overflow"},[e._v(" 更新日期："+e._s(t.row.modifyDate)+" ")])])]}}])}),a("el-table-column",{attrs:{prop:"tag",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return a.stopPropagation(),e.del(t.row.id)}}},[e._v(" 删除 ")])]}}])})],1),a("biz-popup-tabs",{attrs:{open:e.open},on:{close:e.close},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"工单信息",name:"first"}},[a("base-info",{ref:"baseInfo",attrs:{itemId:e.currentRowId},on:{created:e.refresh}})],1)],1),a("biz-columns",{attrs:{visible:e.columnsSettingVisible,tableId:e.tableId},on:{"update:visible":function(t){e.columnsSettingVisible=t},update:e.getColumns}})],1)},i=[],o=(a("99af"),a("4160"),a("d81d"),a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("3ca3"),a("466d"),a("1276"),a("159b"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),r=a("04d3"),l=a("7132"),s=a("103b"),c=a("2bb3"),u=a("443b"),d=a("bc3a"),f=a.n(d),m={name:"WorkSheetMgmt",data:function(){return{tableId:"4",tableData:[],open:!1,currentRowId:{},tabName:"first",line:"-",operations:[{label:"添加",name:"add",type:"primary",auth:["admin:customerServiceScheduling.add"]},{label:"删除",name:"del",type:"",disabled:!0,auth:["admin:customerServiceScheduling.delete"]},{label:"刷新",name:"refresh",type:""},{label:"导出",name:"export",type:""}],filters:[{label:"工单类型",type:"select",placeholder:"请选择工单类型",name:"type",value:"",options:[{value:"",label:"全部"},{value:"0",label:"售前"},{value:"1",label:"售后"},{value:"2",label:"问题反馈"},{value:"3",label:"投诉"},{value:"4",label:"拉黑"},{value:"5",label:"功能建议"},{value:"6",label:"体验问题"}]},{label:"工单状态",type:"select",placeholder:"请选择工单状态",name:"state",value:"",options:[{value:"",label:"全部"},{value:"0",label:"待受理"},{value:"1",label:"受理中"},{value:"2",label:"已完结"}]},{type:"input",placeholder:"请输入工单内容",name:"searchbar",value:""}],originData:[],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},multiSelected:[],loading:!1}},computed:{handleTableData:function(){var e=this.tableData;return e.forEach((function(e){e.handleGroup&&e.handleGroup.name&&e.handlerAdmin.name&&(e.handleGroup.name+="-")})),e}},mixins:[u["a"]],methods:{operate:function(e){this[e]()},close:function(){this.open=!1},export:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={pageSize:e.pagination.pageSize,pageNumber:e.pagination.currentPage,type:e.filters[0].value,state:e.filters[1].value,searchValue:e.filters[2].value},t.prev=1,t.next=4,f.a.post("/admin/cs/exportCSWorkSheet.jhtml",a,{responseType:"blob"});case 4:return n=t.sent,console.log("response => ",n),i=new Blob([n.data],{type:"application/vnd.ms-excel"}),console.log(decodeURI(n.headers["content-disposition"])),o=decodeURI(n.headers["content-disposition"].split("filename=")[1]),r=document.createElement("a"),r.download=o.match(/"(\S*)"/)[1],r.style.display="none",r.href=URL.createObjectURL(i),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r),t.abrupt("return");case 20:throw t.prev=20,t.t0=t["catch"](1),new Error(t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})))()},showMessage:function(e,t){this.$message({showClose:!0,message:e,type:t})},setDone:function(e){},handleSelectionChange:function(e){var t=this;this.multiSelected=[],e.map((function(e){t.multiSelected=t.multiSelected.concat(e.id)})),this.operations[1].disabled=!0,e.length>0&&(this.operations[1].disabled=!1)},handleSizeChange:function(e){this.pagination.pageSize=e,this.tableData=this.tableData.slice(e*this.pagination.currentPage-e,e*this.pagination.currentPage),this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.tableData=this.tableData.slice(this.pagination.pageSize*e-this.pagination.pageSize,this.pagination.pageSize*e),this.refresh()},add:function(){this.currentRowId={id:""},this.open=!0,this.$refs.baseInfo.operations[0].disabled=!1},rowClick:function(e){this.currentRowId={id:e.id},this.open=!0},del:function(e){var t=this,a=e?Array(e):0===this.multiSelected.length?[]:this.multiSelected;0!==a.length?this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e={ids:a};c["a"].deleteBaseInfo(e,(function(e){t.$message.success("操作成功"),t.filterDataChange()}),(function(e){t.$message.warning(e.errorMessage)}))})):this.$message.warning("未选择删除条目")},filterDataChange:function(e){this.pagination.currentPage=1,this.refresh()},refresh:function(){var e=this;this.loading=!0;var t={pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage,type:this.filters[0].value,state:this.filters[1].value,searchValue:this.filters[2].value,shopId:window.top.SHOP_ID||""};c["a"].queryList(t,(function(t){e.loading=!1,e.tableData=t.content,e.pagination.total=Number(t.total)}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage),console.log("ERR_REFRESH: ",t)}))},workSheetLevel:function(e){switch(e){case"0":return"低";case"1":return"中";case"2":return"高"}},workSheetType:function(e){switch(e){case"0":return"售前";case"1":return"售后";case"2":return"问题反馈";case"3":return"投诉";case"4":return"拉黑"}},workSheetState:function(e){switch(e){case"0":return"待受理";case"1":return"受理中";case"2":return"已完结";default:return"待受理"}}},mounted:function(){var e=this,t={pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage,type:this.filters[0].value,state:"0",searchValue:this.filters[2].value,shopId:window.top.SHOP_ID||""};c["a"].queryList(t,(function(t){e.showMessage("待处理工单数：".concat(t.total,"条"),"info")}),(function(t){e.loading=!1})),this.refresh()},components:{BizFlexTable:r["c"],BizPopupTabs:l["a"],BaseInfo:s["a"]}},h=m,p=(a("8f467"),a("2877")),b=Object(p["a"])(h,n,i,!1,null,null,null);t["default"]=b.exports},2497:function(e,t,a){"use strict";var n=a("4360"),i=a("a18c");t["a"]=function(e,t){return function(a){var o=a.data;"100"===o.resultCode?e(o):"709"===o.resultCode?(n["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",n["a"].getters.currentUser),i["a"].push("/login")):t(o)}}},"24c9":function(e,t,a){},2863:function(e,t,a){"use strict";var n=a("2497"),i=a("bc3a"),o=a.n(i),r=a("c596");t["a"]={query:function(e,t,a){o.a.get(r["g"].customerService.CSGroup,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExcutiveList:function(e,t,a){o.a.get(r["g"].customerService.CSList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},add:function(e,t,a){o.a.post(r["g"].customerService.CSGroup,e).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},update:function(e,t,a){o.a.put(r["g"].customerService.CSGroup,e).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))}}},"2bb3":function(e,t,a){"use strict";var n=a("2497"),i=a("bc3a"),o=a.n(i),r=a("c596");t["a"]={getNavInfo:function(e,t,a){o.a.get(r["g"].customerService.queryNavInfo,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryList:function(e,t,a){o.a.get(r["g"].customerService.WorkSheetList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryBaseInfo:function(e,t,a){o.a.get(r["g"].customerService.WorkSheetBaseInfo,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},updateBaseInfo:function(e,t,a){o.a.put(r["g"].customerService.WorkSheetBaseInfo,e).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},createBaseInfo:function(e,t,a){o.a.post(r["g"].customerService.WorkSheetBaseInfo,e).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},deleteBaseInfo:function(e,t,a){o.a.delete(r["g"].customerService.WorkSheetBaseInfo,{data:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},querySponsorList:function(e,t,a){o.a.get(r["g"].customerService.WorkSheetSponsorList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},querySponsorGroupList:function(e,t,a){o.a.get(r["g"].customerService.WorkSheetSponsorGroupList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryMemberList:function(e,t,a){o.a.get(r["g"].customerService.WorkSheetMemberList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryKpi:function(e,t,a){o.a.get(r["g"].customerService.WorkSheetKpi,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))}}},"3dcd":function(e,t,a){"use strict";var n=a("765f"),i=a.n(n);i.a},"443b":function(e,t,a){"use strict";a("4de4");var n=a("c596"),i=a("1ab1"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"append-to-body":"",visible:e.visible,title:"自定义列","custom-class":"biz-columns",width:"500px"},on:{close:e.onClose}},[a("div",{staticClass:"columns-wrap"},[a("biz-flex-table",{ref:"table",attrs:{checkable:!1,tableData:e.tableData},on:{"selection-change":e.selectionChangeHandler}},[a("el-table-column",{attrs:{type:"selection",width:"50",selectable:e.getSelectable}}),a("el-table-column",{attrs:{label:"信息",prop:"name"}}),a("el-table-column",{attrs:{prop:"tag",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index;return[a("el-button",{attrs:{icon:"el-icon-sort-up",type:"text",disabled:0===n},on:{click:function(t){return e.onUp(n)}}}),a("el-button",{attrs:{icon:"el-icon-sort-down",type:"text",disabled:n===e.tableData.length-1},on:{click:function(t){return e.onBottom(n)}}})]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)])},r=[],l=(a("7db0"),a("a434"),a("b85c")),s=a("04d3"),c={name:"biz-columns",components:{BizFlexTable:s["c"]},props:{visible:Boolean,tableId:String},data:function(){return{id:"",tableName:"",selections:[],tableData:[]}},computed:{},watch:{visible:function(e){e?this.makeRowDisplayable():this.saveSelection()},tableId:function(){this.getTableColumns()}},mounted:function(){this.getTableColumns()},methods:{getTableColumns:function(){var e=this;i["a"].get(n["g"].user.columns,{tableId:this.tableId}).then((function(t){e.tableData=t.data.columnDatas,e.id=t.data.id,e.tableName=t.data.tableName}))},getSelectable:function(e){return e.isEditable},selectionChangeHandler:function(e){this.selections=e},saveSelection:function(){var e,t=this,a=Object(l["a"])(this.tableData);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.displayable=!1}}catch(s){a.e(s)}finally{a.f()}var i,o=Object(l["a"])(this.selections);try{var r=function(){var e=i.value;t.tableData.find((function(t){return t.id===e.id})).displayable=!0};for(o.s();!(i=o.n()).done;)r()}catch(s){o.e(s)}finally{o.f()}},onUp:function(e){this.tableData[e]=this.tableData.splice(e-1,1,this.tableData[e])[0]},onBottom:function(e){this.tableData[e]=this.tableData.splice(e+1,1,this.tableData[e])[0]},onClose:function(){this.$emit("update:visible",!1)},update:function(){var e,t=this,a=Object(l["a"])(this.tableData);try{for(a.s();!(e=a.n()).done;){var o=e.value;o.displayable=!1}}catch(d){a.e(d)}finally{a.f()}var r,s=Object(l["a"])(this.selections);try{var c=function(){var e=r.value;t.tableData.find((function(t){return t.id===e.id})).displayable=!0};for(s.s();!(r=s.n()).done;)c()}catch(d){s.e(d)}finally{s.f()}var u={columnDatas:this.tableData,id:this.id,tableId:this.tableId,tableName:this.tableName};console.log(u),i["a"].put(n["g"].user.columns,u).then((function(e){t.$emit("update"),t.$emit("update:visible",!1)}))},makeRowDisplayable:function(){var e=this;setTimeout((function(){var t,a=Object(l["a"])(e.tableData);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.$refs.table.$refs.table.toggleRowSelection(n,n.displayable)}}catch(i){a.e(i)}finally{a.f()}}),20)}}},u=c,d=(a("ec6b"),a("2877")),f=Object(d["a"])(u,o,r,!1,null,null,null),m=f.exports,h=m;t["a"]={components:{BizColumnOperation:s["a"],BizColumns:h},data:function(){return{columnsSettingVisible:!1,columns:[]}},created:function(){this.getTableId(),this.getColumns()},methods:{onCustomColumns:function(){this.columnsSettingVisible=!0},getColumns:function(){var e=this;console.log(12),i["a"].get(n["A"].columns,{tableId:this.tableId}).then((function(t){e.columns=[],setTimeout((function(){e.columns=t.data.columnDatas.filter((function(e){return e.displayable})),e.$refs.table&&setTimeout((function(){e.$refs.table.doLayout()}),50)}),20)})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))},getTableId:function(){}}}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),i=a("5899"),o="["+i+"]",r=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),s=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(r,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:s(1),end:s(2),trim:s(3)}},"5b8e":function(e,t,a){"use strict";var n=a("9678"),i=a.n(n);i.a},"697f":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:e.title,visible:e.dialogVisible,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close,open:e.open}},[e._t("top"),a("biz-flex-table",{ref:"table",attrs:{showTable:e.showTable,operations:e.operations,filters:e.filters,tags:e.tags,rowKeys:e.rowKeys,pagination:e.pagination,tableData:e.tableData,rowClassName:e.rowClassName,loading:e.loading,memberIds:e.memberIds,checkable:e.checkable,isDepotOutNew:e.isDepotOutNew,checkedTable:e.checkedTable},on:{operate:e.operate,"row-click":e.rowClick,"filter-data-change":e.filterDataChange,"select-all":e.handleSelectAll,select:e.handleSelectionChange,"size-change":e.pageSizeChange,"current-change":e.currentPageChange,"cascader-change":e.cascaderChange,"active-item-change":e.activeItemChange,"sort-change":e.handleSortChange}},[e._t("default")],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isClear?a("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("清除")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmed}},[e._v("确定")])],1)],2)},i=[],o=(a("99af"),a("4160"),a("c975"),a("a434"),a("a9e3"),a("159b"),a("04d3")),r={name:"BizDialogSelector",components:{BizFlexTable:o["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},max:{type:Number,default:0},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},isClear:{default:!0,type:Boolean},rowClassName:{type:Function,default:function(){return null}},selectionKeys:{type:Array,default:function(){return[]}},memberIds:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},isDepotOut:{type:Boolean,default:function(){return!1}},checkTable:{type:Array,default:function(){return[]}},showTable:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],isDepotOutNew:!1,checkedTable:[],innerSelection:[]}},methods:{rowKeys:function(e){return e.id},generateSelectionKeys:function(e,t){if(e.indexOf(t)>=0)this.innerSelectionKeys.push(t[this.keyField]),this.innerSelection.push(t);else{var a=this.innerSelectionKeys.indexOf(t[this.keyField]);this.innerSelectionKeys.splice(a,1),this.innerSelection.splice(a,1)}},open:function(e){this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(e){this.innerSelectionKeys=[],this.innerSelection=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){if(this.innerSelectionKeys.length>0||!this.showTable){if(!this.showTable&&!/(http|https):\/\/([\w.]+\/?)\S*/.test(this.filters[2].value))return void this.$message.warning("必须以http,https开头,且需符合URL规范,检查格式是否正确");this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1}else this.$message("请选择一项")},clear:function(){var e=this;this.tableData.forEach((function(t){e.$refs.table.toggleRowSelection(t,!1)})),this.innerSelectionKeys=[],this.innerSelection=[]},updateSelection:function(){var e=this;this.$refs&&this.$refs.table&&this.tableData.forEach((function(t){e.innerSelectionKeys.indexOf(t[e.keyField])>=0?(e.$refs.table.toggleRowSelection(t,!0),"single"===e.selectionMode&&(e.$refs.table.$refs.table.setCurrentRow(t),e.innerSelection=[t])):e.$refs.table.toggleRowSelection(t,!1)}))},operate:function(e){this.$emit("operate",e)},filterDataChange:function(e){this.$emit("filterDataChange",e)},handleSelectAll:function(e){var t=this;0===e.length?this.tableData.forEach((function(e){var a=t.innerSelectionKeys.indexOf(e[t.keyField]);a>=0&&t.innerSelectionKeys.splice(a,1)})):this.tableData.forEach((function(e){var a=t.innerSelectionKeys.indexOf(e[t.keyField]);a<0&&t.innerSelectionKeys.push(e[t.keyField])})),this.$emit("selectionChange",e)},handleSelectionChange:function(e,t){this.generateSelectionKeys(e,t),this.$emit("selectionChange",e)},pageSizeChange:function(e){this.$emit("pageSizeChange",e)},currentPageChange:function(e){this.$emit("currentPageChange",e)},cascaderChange:function(e){this.$emit("cascaderChange",e)},activeItemChange:function(e){this.$emit("active-item-change",e)},handleSortChange:function(e){this.$emit("sort-change",e)},rowClick:function(e,t,a){"single"===this.selectionMode&&(this.innerSelectionKeys=[e[this.keyField]],this.innerSelection=[e])}},watch:{visibility:function(e,t){this.dialogVisible=e,this.isDepotOutNew=this.isDepotOut,this.checkedTable=this.checkTable}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){},updated:function(){this.updateSelection()}},l=r,s=(a("0943"),a("2877")),c=Object(s["a"])(l,n,i,!1,null,null,null);t["a"]=c.exports},7132:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"biz-fade-t"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[a("transition",{attrs:{name:"biz-fade-t-right"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"popup-content",style:e.contentStyle},[e._t("default")],2)])],1)])},i=[],o={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},r=o,l=(a("5b8e"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,null,null),c=s.exports,u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"biz-popup-tabs"},[a("biz-popup",{attrs:{open:e.open,contentStyle:e.contentStyle},on:{close:e.close}},[a("el-tabs",{attrs:{type:"border-card",value:e.value},on:{"tab-click":e.tabClick}},[e._t("default")],2)],1)],1)},d=[],f=(a("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:c},methods:{close:function(){var e=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("close")}))},tabClick:function(e){this.$emit("input",e.name)}}}),m=f,h=(a("d4c2"),Object(l["a"])(m,u,d,!1,null,null,null)),p=h.exports;a.d(t,"a",(function(){return p}))},"765f":function(e,t,a){},"8f467":function(e,t,a){"use strict";var n=a("24c9"),i=a.n(n);i.a},9678:function(e,t,a){},a9e3:function(e,t,a){"use strict";var n=a("83ab"),i=a("da84"),o=a("94ca"),r=a("6eeb"),l=a("5135"),s=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),f=a("7c73"),m=a("241c").f,h=a("06cf").f,p=a("9bf2").f,b=a("58a8").trim,g="Number",v=i[g],y=v.prototype,S=s(f(y))==g,w=function(e){var t,a,n,i,o,r,l,s,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(o=c.slice(2),r=o.length,l=0;l<r;l++)if(s=o.charCodeAt(l),s<48||s>i)return NaN;return parseInt(o,n)}return+c};if(o(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var C,k=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof k&&(S?d((function(){y.valueOf.call(a)})):s(a)!=g)?c(new v(w(t)),a,k):w(t)},_=n?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;_.length>I;I++)l(v,C=_[I])&&!l(k,C)&&p(k,C,h(v,C));k.prototype=y,y.constructor=k,r(i,g,k)}},af3f:function(e,t,a){"use strict";var n=a("697f");t["a"]=n["a"]},b547:function(e,t,a){},d4c2:function(e,t,a){"use strict";var n=a("e725"),i=a.n(n);i.a},d74a:function(e,t,a){"use strict";var n=a("21c5"),i=a.n(n);i.a},e725:function(e,t,a){},ec6b:function(e,t,a){"use strict";var n=a("b547"),i=a.n(n);i.a}}]);