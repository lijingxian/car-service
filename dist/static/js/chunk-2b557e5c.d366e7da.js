(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b557e5c"],{a07ea:function(t,e,a){"use strict";var s=a("a134"),n=a.n(s);n.a},a134:function(t,e,a){},d6f0:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoicing-report"},[a("div",{staticClass:"top"},[a("div",{staticClass:"block"},[a("div",{staticClass:"demonstration"},[t._v("月份")]),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"month",placeholder:"选择月",size:"mini","picker-options":t.pickerOptions},on:{change:t.dateChange},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("div",{staticClass:"demonstration"},[t._v("店铺")]),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:t.shopChange},model:{value:t.checkedShops,callback:function(e){t.checkedShops=e},expression:"checkedShops"}},t._l(t.shopsList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.printView}},[t._v("打印")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.save}},[t._v("导出")])],1)]),a("div",{ref:"imageWrapper"},[a("div",{staticClass:"title-header"},[a("span",[t._v(t._s(t.shopName))]),a("span",[t._v("进销存月报")]),a("span",[t._v("|")]),a("span",[t._v(t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"1-"+t._s(t.lastDate)+"日")])]),a("div",{staticClass:"content"},[t._m(0),a("div",{staticClass:"des"},[a("p",[t._v(" "+t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"， 本店共产生采购订单"+t._s(t.indicators.purchaseOrderNum.increase)+"张，采购金额"+t._s(t.indicators.purchaseOrderAmount.increase)+"，实际完成采购商品"+t._s(t.indicators.purchaseProductNum.increase)+"件； "),t.indicators.purchaseOrderNum.increase>0?a("span",[t._v("从供应商来看，从供应商"+t._s(t.topSupplierAmount.length>0?t.topSupplierAmount[0].xValue:"")+"采购商品最多，金额"+t._s(t.topSupplierAmount.length>0?t.topSupplierAmount[0].yValue:"")+"万元。")]):t._e()]),a("p",[t._v(" 本店共产生销售订单"+t._s(t.indicators.salesOrderNum.increase)+"，销售商品"+t._s(t.indicators.salesProductNum.increase)+"件， "),t.indicators.salesOrderNum.increase>0?a("span",[t._v("从代理商来看，要货"+t._s(t.topAgentAmount.length>0?t.topAgentAmount[0].xValue:"")+"最多，金额"+t._s(t.topAgentAmount.length>0?t.topAgentAmount[0].yValue:"")+"万元。")]):t._e()]),a("p",[t._v(" 本店共产生入库单"+t._s(t.indicators.depotInNum.increase)+"，入库商品"+t._s(t.indicators.depotInProductNum.increase)+"件， 共产生出库单"+t._s(t.indicators.depotOutNum.increase)+"，出库商品"+t._s(t.indicators.depotOutProductNum.increase)+"件，本月库存盘点"+t._s(t.indicators.depotInventoryNum.increase)+"， 调拨商品"+t._s(t.indicators.depotTransferProductNum.increase)+"次。 ")])]),a("div",[a("div",{staticStyle:{"margin-bottom":"10px"},attrs:{align:"center"}},[t._v("进销存统计表")]),a("el-table",{attrs:{data:t.tableData,border:"",size:"small"}},[a("el-table-column",{attrs:{prop:"name",label:"指标项",width:"180"}}),a("el-table-column",{attrs:{prop:"increase",label:"值",width:"180"}}),a("el-table-column",{attrs:{prop:"yearOnYear",label:"趋势"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 同比： "+t._s(e.row.yearOnYear)+"% 环比： "+t._s(e.row.monthOnMonth)+"% ")]}}])})],1)],1)]),a("div",{staticClass:"content"},[t._m(1),a("div",{staticClass:"des"},[a("p",[t._v(" 本月采购订单、采购商品数量情况如下图所示。与上月相比，采购订单数量环比增长"+t._s(t.indicators.purchaseOrderNum.monthOnMonth)+"%，采购订单金额环比增长"+t._s(t.indicators.purchaseOrderAmount.monthOnMonth)+"%， "),t.topPurchaseOrder.length>0?a("span",[t._v("采购商品最多的是"+t._s(t.topPurchaseOrder.length>0?t.topPurchaseOrder[0].xValue:"")+"，数量"+t._s(t.topPurchaseOrder.length>0?t.topPurchaseOrder[0].y[0].yValue:"")+"， 采购金额最高的是"+t._s(t.topPurchaseOrderAmount.length>0?t.topPurchaseOrderAmount[0].xValue:"")+"，采购金额"+t._s(t.topPurchaseOrderAmount.length>0?t.topPurchaseOrderAmount[0].y[1].yValue/1e4:"")+"万元。")]):t._e()]),t.topSupplierNum.length>0?a("p",[t._v(" 供应商"+t._s(t.topSupplierNum.length>0?t.topSupplierNum[0].xValue:"")+"供货最多，共计"+t._s(t.topSupplierNum.length>0?t.topSupplierNum[0].yValue:"")+"单， 供应商"+t._s(t.topSupplierAmount.length>0?t.topSupplierAmount[0].xValue:"")+"金额最高，共计"+t._s(t.topSupplierAmount.length>0?t.topSupplierAmount[0].yValue:"")+"万元。 ")]):t._e()]),a("div",{staticClass:"chart-area"},[a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfPurchaseOrder,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("采购订单数量(金额)")])],1),a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfPurchaseProduct,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("采购商品数量(金额)排行")])],1),a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfSupplier,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("供应商供货周期排行")])],1)])]),a("div",{staticClass:"content"},[t._m(2),a("div",{staticClass:"des"},[a("p",[t._v(" 本月销售订单、销售商品数量情况如下图所示。与上月相比，销售订单数量环比增长"+t._s(t.indicators.salesOrderNum.monthOnMonth)+"%，销售订单金额环比增长"+t._s(t.indicators.salesOrderAmount.monthOnMonth)+"%， "),t.topSalesOrder.length>0?a("span",[t._v("销售商品最多的是"+t._s(t.topSalesOrder.length>0?t.topSalesOrder[0].xValue:"")+"，数量"+t._s(t.topSalesOrder.length>0?t.topSalesOrder[0].y[0].yValue:"")+"， 销售金额最高的是"+t._s(t.topSalesOrderAmount.length>0?t.topSalesOrderAmount[0].xValue:"")+"，销售金额"+t._s(t.topSalesOrderAmount.length>0?t.topSalesOrderAmount[0].y[1].yValue/1e4:"")+"万元。")]):t._e()]),t.topAgentNum.length>0?a("p",[t._v(" 代理商"+t._s(t.topAgentNum.length>0?t.topAgentNum[0].xValue:"")+"要货最多，共计"+t._s(t.topAgentNum.length>0?t.topAgentNum[0].yValue:"")+"单， 代理商"+t._s(t.topAgentAmount.length>0?t.topAgentAmount[0].xValue:"")+"金额最高，共计"+t._s(t.topAgentAmount.length>0?t.topAgentAmount[0].yValue:"")+"万元。 ")]):t._e()]),a("div",{staticClass:"chart-area"},[a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfSalesOrder,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("销售订单数量(金额)")])],1),a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfSalesProduct,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("销售商品数量(金额)排行")])],1),a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfAgent,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("代理商付款周期排行")])],1)])]),a("div",{staticStyle:{"page-break-after":"always"}}),a("div",{staticClass:"content"},[t._m(3),a("div",{staticClass:"des"},[a("p",[t._v(" 目前仓库库存最多的商品为"+t._s(t.topStore.length>0?t.topStore[0].xValue:"")+"。本月共调拨"+t._s(t.indicators.depotTransferNum.increase)+"次，环比增长"+t._s(t.indicators.depotTransferNum.monthOnMonth)+"%。 本月共盘点"+t._s(t.indicators.depotInventoryNum.increase)+"次，盘盈"+t._s(t.checkY)+"次，盘亏"+t._s(t.checkK)+"次。 ")])]),a("div",{staticClass:"chart-area"},[a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfStore,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("库存分布")])],1),a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfAllocate,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("调拨")])],1),a("div",{staticClass:"graph"},[a("biz-chart",{attrs:{chartData:t.chartDataOfCheck,loading:t.loading,showSearch:!1}}),a("div",{staticClass:"des",attrs:{align:"center"}},[t._v("盘点分布")])],1)])]),a("div",{staticClass:"content"},[t._m(4),a("div",{staticClass:"des"},[t._l(t.indicators.advise,(function(e,s){return a("p",{directives:[{name:"show",rawName:"v-show",value:t.indicators.advise&&t.indicators.advise.length>0,expression:"indicators.advise && indicators.advise.length > 0"}],key:s},[t._v(" "+t._s(e.join(","))+" ")])})),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.indicators.advise||0===t.indicators.advise.length,expression:"!indicators.advise || indicators.advise.length === 0"}]},[t._v(" 您的店铺当月经营良好，暂无明显需要改善的地方。 ")])],2)])]),a("el-dialog",{attrs:{visible:t.dialogTableVisible,center:"",width:"1000px","append-to-body":""},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{attrs:{align:"right"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.print}},[t._v("打印")])],1),a("vue-easy-print",{ref:"easyPrint",attrs:{tableShow:""}},[a("img",{attrs:{src:t.url,width:"100%"}})])],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-header"},[a("span",[t._v("一、进销存概述")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-header"},[a("span",[t._v("二、采购情况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-header"},[a("span",[t._v("三、销售情况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-header"},[a("span",[t._v("四、仓库情况")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-header"},[a("span",[t._v("五、结论建议")])])}],i=(a("d81d"),a("b0c0"),a("d3b7"),a("ac1f"),a("1276"),a("5530")),r=a("562e"),o=a("2f62"),c=a("fedf"),h=a("1ab1"),d=a("c466"),l=a("ce0c"),p=a("225d"),u=a("c0e9"),g=a.n(u),m={name:"CustomerServiceNav",data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},companyCount:0,storeCount:0,unionCount:0,beginDate:l["a"].getMonthStartDate(),endDate:d["a"].nowDate(),addOperator:"",addStore:"",storeList:"",url:"",tableData:[],isIndeterminateShops:!0,dialogTableVisible:!1,loading:!1,checkAllShops:!0,checkedShops:this.getUser().shop.id,shopsList:[],chartData:{},chartDataOfSupplier:{},chartDataOfPurchaseProduct:{},chartDataOfPurchaseOrder:{},chartDataOfAgent:{},chartDataOfSalesProduct:{},chartDataOfSalesOrder:{},chartDataOfStore:{},chartDataOfAllocate:{},chartDataOfCheck:{},topPurchaseOrder:[],topPurchaseOrderAmount:[],topSupplierNum:[],topSupplierAmount:[],topSalesOrder:[],topSalesOrderAmount:[],topAgentNum:[],topAgentAmount:[],topStore:[],checkK:"0",checkY:"0",indicators:{advise:[],purchaseProductNum:{increase:""},salesProductNum:{increase:""},salesOrderAmount:{increase:""},depotOutNum:{increase:""},depotTransferProductNum:{increase:""},purchaseOrderAmount:{increase:""},depotInventoryNum:{increase:""},salesOrderNum:{increase:""},depotOutProductNum:{increase:""},depotTransferNum:{increase:""},depotInProductNum:{increase:""},depotInNum:{increase:""},purchaseOrderNum:{increase:""}},imgUrl:"",kpiName:["本期","同比","环比"]}},computed:{shopName:function(){var t=this,e=this.getUser().shop.name;return this.shopsList.map((function(a){t.checkedShops===a.id&&(e=a.name)})),e},lastDate:function(){return d["a"].getMonthDays(this.endDate)}},components:{BizChart:r["a"],vueEasyPrint:p["a"]},created:function(){this.getShopList()},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(o["c"])(["getUser"])),Object(o["d"])("Menu",["updateRoutes"])),Object(o["c"])("Authority",["currentAuth"])),{},{print:function(){this.$refs.easyPrint.print()},dateChange:function(){this.beginDate=this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-01",this.query()},init:function(){var t=this,e={viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/stock/summary/report.jhtml",e).then((function(e){t.indicators=e.indicators,t.tableData=[Object.assign(e.indicators.purchaseOrderNum,{increase:e.indicators.purchaseOrderNum.increase+"单"},{name:"采购订单数量"}),Object.assign(e.indicators.purchaseOrderAmount,{increase:e.indicators.purchaseOrderAmount.increase+"万元"},{name:"采购订单金额"}),Object.assign(e.indicators.salesOrderNum,{increase:e.indicators.salesOrderNum.increase+"单"},{name:"销售订单数量"}),Object.assign(e.indicators.salesOrderAmount,{increase:e.indicators.salesOrderAmount.increase+"万元"},{name:"销售订单金额"}),Object.assign(e.indicators.depotInNum,{increase:e.indicators.depotInNum.increase+"单"},{name:"入库单"}),Object.assign(e.indicators.depotOutNum,{increase:e.indicators.depotOutNum.increase+"单"},{name:"出库单"}),Object.assign(e.indicators.depotTransferNum,{increase:e.indicators.depotTransferNum.increase+"单"},{name:"调拨单"}),Object.assign(e.indicators.depotInventoryNum,{increase:e.indicators.depotInventoryNum.increase+"单"},{name:"盘点单"})]})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)}))},query:function(){this.getGraphPurchaseOrderData(),this.getGraphPurchaseProductData(),this.getGraphDataSupplier(),this.getGraphSalesOrderData(),this.getGraphSalesProductData(),this.getGraphDataAgent(),this.getGraphDataStore(),this.getGraphAllocateData(),this.getGraphCheckData(),this.getGraphDataStoreProduct(),this.init()},shopChange:function(t){this.query()},getShopList:function(){var t=this,e={sourceType:"5"};h["a"].get("/admin/member/json/findEShops.jhtml",e).then((function(e){t.shopsList=e.shops,t.query()})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)}))},getGraphPurchaseOrderData:function(){var t=this;this.loading=!0;var e={viewType:"month",indicators:["purchaseOrderNum","purchaseOrderAmount"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/lineGraph.jhtml",e).then((function(e){t.chartDataOfPurchaseOrder=t.dataPurchaseOrderFormat(e)})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphPurchaseProductData:function(){var t=this;this.loading=!0;var e={viewType:"month",indicators:["purchaseProductTop"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphMults.jhtml",e).then((function(e){t.chartDataOfPurchaseProduct=t.dataPurchaseOrderFormat(e),t.topPurchaseOrder=e.indicators,t.getGraphPurchaseAmountData()})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphPurchaseAmountData:function(){var t=this;this.loading=!0;var e={viewType:"month",indicators:["purchaseProductAmountTop"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphMults.jhtml",e).then((function(e){t.topPurchaseOrderAmount=e.indicators})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphDataSupplier:function(){var t=this;this.loading=!0;var e={indicators:["supplierShippingCycle"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphMults.jhtml",e).then((function(e){t.chartDataOfSupplier=t.dataFormatCricle(e),t.getSupplierNum(),t.getSupplierAmount()})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getSupplierNum:function(){var t=this;this.loading=!0;var e={indicators:["supplierOrderNum"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphRank.jhtml",e).then((function(e){t.topSupplierNum=e.indicators})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getSupplierAmount:function(){var t=this;this.loading=!0;var e={indicators:["supplierOrderAmount"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphRank.jhtml",e).then((function(e){t.topSupplierAmount=e.indicators})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphSalesOrderData:function(){var t=this;this.loading=!0;var e={viewType:"month",indicators:["salesOrderNum","salesOrderAmount"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/lineGraph.jhtml",e).then((function(e){t.chartDataOfSalesOrder=t.dataPurchaseOrderFormat(e)})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphSalesProductData:function(){var t=this;this.loading=!0;var e={viewType:"month",indicators:["salesProductTop"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphMults.jhtml",e).then((function(e){t.chartDataOfSalesProduct=t.dataPurchaseOrderFormat(e),t.topSalesOrder=e.indicators,t.getGraphSalesAmountData()})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphSalesAmountData:function(){var t=this;this.loading=!0;var e={viewType:"month",indicators:["salesProductAmountTop"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphMults.jhtml",e).then((function(e){t.topSalesOrderAmount=e.indicators})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphDataAgent:function(){var t=this;this.loading=!0;var e={indicators:["agentPaymentCycle"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphMults.jhtml",e).then((function(e){t.chartDataOfAgent=t.dataFormatCricle(e),t.getAgentNum(),t.getAgentAmount()})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getAgentNum:function(){var t=this;this.loading=!0;var e={indicators:["agentOrderNum"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphRank.jhtml",e).then((function(e){t.topAgentNum=e.indicators})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getAgentAmount:function(){var t=this;this.loading=!0;var e={indicators:["agentOrderAmount"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};h["a"].post("/admin/ecommerce/kpi/purchase/graph/columnGraphRank.jhtml",e).then((function(e){t.topAgentAmount=e.indicators})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphDataStore:function(){var t=this;this.loading=!0;var e={indicators:["depotProductDist"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate)};h["a"].post("/admin/ecommerce/kpi/stock/graph/depotDist.jhtml",e).then((function(e){t.chartDataOfStore=t.dataFormatWork(e)})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphDataStoreProduct:function(){var t=this;this.loading=!0;var e={indicators:["depotProductRank"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate)};h["a"].post("/admin/ecommerce/kpi/stock/graph/depotRank.jhtml",e).then((function(e){t.topStore=e.indicators})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphAllocateData:function(){var t=this;this.loading=!0;var e={indicators:["depotTransferNum"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate)};h["a"].post("/admin/ecommerce/kpi/stock/graph/depotColumn.jhtml",e).then((function(e){t.chartDataOfAllocate=t.dataFormat(e)})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},getGraphCheckData:function(){var t=this;this.loading=!0;var e={indicators:["depotInventoryDepotStateDist"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+d["a"].getMonthDays(this.endDate)};h["a"].post("/admin/ecommerce/kpi/stock/graph/depotDist.jhtml",e).then((function(e){t.chartDataOfCheck=t.dataFormatWork(e),e.indicators.map((function(e){"盘盈"===e.lable&&(t.checkY=e.value),"盘亏"===e.lable&&(t.checkK=e.value)}))})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},dataPurchaseOrderFormat:function(t){var e=[];console.log(t.indicators);for(var a=0;a<(t.indicators.length>5?5:t.indicators.length);a++)e.push({"时间":t.indicators[a].xValue,"数量":t.indicators[a].y[0].yValue,"金额":t.indicators[a].y[1].yValue});var s={legendVisible:!0,type:"histogram",data:{columns:["时间","数量","金额"],rows:e},settings:{}};return s},dataFormatCricle:function(t){for(var e=[],a=0;a<(t.indicators.length>5?5:t.indicators.length);a++)e.push({"供应商":t.indicators[a].xValue,"天":t.indicators[a].y[0].yValue});var s={type:"histogram",legendVisible:!1,data:{columns:["供应商","天"],rows:e},settings:{}};return s},dataFormat:function(t){for(var e=[],a=0;a<t.indicators.length;a++)e.push({"日期":t.indicators[a].xValue,"本期":t.indicators[a].yValue,"同比":t.indicators[a].yoyRate,"环比":t.indicators[a].momRate});var s={type:"histogram",data:{columns:["日期",this.kpiName[0],this.kpiName[1],this.kpiName[2]],rows:e},settings:{axisSite:{right:["同比","环比"]},yAxisType:["KMB","KMB"],yAxisName:["","%"],showLine:[this.kpiName[1],this.kpiName[2]]}};return s},dataFormatWork:function(t){for(var e=[],a=0;a<t.indicators.length;a++)e.push({type:t.indicators[a].lable,value:t.indicators[a].value});var s={type:"pie",legendVisible:!1,data:{columns:["type","value"],rows:e},settings:{adius:[30,30],offsetY:"50%"}};return s},printView:function(){var t=this,e=this;window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,setTimeout((function(){g()(t.$refs.imageWrapper).then((function(t){e.url=t.toDataURL(),e.dialogTableVisible=!0}))}),500)},save:function(){var t=this,e=this;window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,setTimeout((function(){g()(t.$refs.imageWrapper).then((function(t){var a=document.createElement("a");a.download="进销存月报",a.href=t.toDataURL("image/png"),document.body.appendChild(a),a.click(),a.remove(),e.loading=!1}))}),500)},link:function(t){this.updateRoutes({routes:c["a"]["".concat(t.split("/")[1])]}),this.$router.push(t)}}),mounted:function(){}},D=m,v=(a("a07ea"),a("2877")),f=Object(v["a"])(D,s,n,!1,null,null,null);e["default"]=f.exports}}]);