(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14bb248a"],{"0f31":function(e,t,o){},"11e9":function(e,t,o){"use strict";var a=o("2497"),n=o("bc3a"),r=o.n(n),i=o("c596");t["a"]={getCommodityList:function(e,t,o){r.a.get(i["g"].commodity.getCommodityList,{params:e}).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},delete:function(e,t,o){r.a.delete(i["g"].commodity.delete,{data:e}).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},query:function(e,t,o){r.a.get(i["g"].commodity.query,{params:e}).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},soldoutAndPutaway:function(e,t,o){r.a.post(i["g"].commodity.soldoutAndPutaway,e).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},cloneProduct:function(e,t,o){r.a.post(i["g"].commodity.cloneProduct,e).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},queryPlatformCategoryTree:function(e,t,o){r.a.get(i["g"].commodity.queryPlatformCategoryTree,{params:e}).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},queryPlatformImportInfo:function(e,t,o){r.a.get(i["g"].commodity.queryPlatformImportInfo,{params:e}).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},importPlatformProduct:function(e,t,o){r.a.post(i["g"].commodity.importPlatformProduct,e).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},audit:function(e,t,o){r.a.post(i["g"].commodity.audit,e).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},auditTarget:function(e,t,o){r.a.post(i["g"].commodity.auditTarget,e).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},recallProduct:function(e,t,o){r.a.get(i["g"].commodity.recallProduct,{params:e}).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))},queryFilters:function(e,t,o){r.a.get(i["g"].commodity.queryFilters,{params:e}).then(Object(a["a"])(t,o)).catch((function(e){console.error(e)}))}}},2497:function(e,t,o){"use strict";var a=o("4360"),n=o("a18c");t["a"]=function(e,t){return function(o){var r=o.data;"100"===r.resultCode?e(r):"709"===r.resultCode?(a["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",a["a"].getters.currentUser),n["a"].push("/login")):t(r)}}},"4b76":function(e,t,o){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,o){var a=o("1d80"),n=o("5899"),r="["+n+"]",i=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),l=function(e){return function(t){var o=String(a(t));return 1&e&&(o=o.replace(i,"")),2&e&&(o=o.replace(s,"")),o}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5b8e":function(e,t,o){"use strict";var a=o("9678"),n=o.n(a);n.a},7132:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"biz-fade-t"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[o("transition",{attrs:{name:"biz-fade-t-right"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"popup-content",style:e.contentStyle},[e._t("default")],2)])],1)])},n=[],r={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},i=r,s=(o("5b8e"),o("2877")),l=Object(s["a"])(i,a,n,!1,null,null,null),c=l.exports,u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"biz-popup-tabs"},[o("biz-popup",{attrs:{open:e.open,contentStyle:e.contentStyle},on:{close:e.close}},[o("el-tabs",{attrs:{type:"border-card",value:e.value},on:{"tab-click":e.tabClick}},[e._t("default")],2)],1)],1)},d=[],p=(o("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:c},methods:{close:function(){var e=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("close")}))},tabClick:function(e){this.$emit("input",e.name)}}}),f=p,m=(o("d4c2"),Object(s["a"])(f,u,d,!1,null,null,null)),h=m.exports;o.d(t,"a",(function(){return h}))},"7bd60":function(e,t,o){"use strict";var a=o("fb1e"),n=o.n(a);n.a},9678:function(e,t,o){},a9e3:function(e,t,o){"use strict";var a=o("83ab"),n=o("da84"),r=o("94ca"),i=o("6eeb"),s=o("5135"),l=o("c6b6"),c=o("7156"),u=o("c04e"),d=o("d039"),p=o("7c73"),f=o("241c").f,m=o("06cf").f,h=o("9bf2").f,g=o("58a8").trim,b="Number",v=n[b],y=v.prototype,I=l(p(y))==b,D=function(e){var t,o,a,n,r,i,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=g(c),t=c.charCodeAt(0),43===t||45===t){if(o=c.charCodeAt(2),88===o||120===o)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+c}for(r=c.slice(2),i=r.length,s=0;s<i;s++)if(l=r.charCodeAt(s),l<48||l>n)return NaN;return parseInt(r,a)}return+c};if(r(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,M=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof M&&(I?d((function(){y.valueOf.call(o)})):l(o)!=b)?c(new v(D(t)),o,M):D(t)},N=a?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;N.length>C;C++)s(v,w=N[C])&&!s(M,w)&&h(M,w,m(v,w));M.prototype=y,y.constructor=M,i(n,b,M)}},b72a:function(e,t,o){"use strict";var a=o("0f31"),n=o.n(a);n.a},c466:function(e,t,o){"use strict";o("99af"),o("d3b7"),o("ac1f"),o("25f0"),o("5319");t["a"]={nowDate:function(){var e=new Date,t=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,o=e.getDate()+1<10?"0"+e.getDate():e.getDate();return e.getFullYear().toString()+"-"+t+"-"+o},getMonthDays:function(e){var t=new Date(Date.parse(e.replace(/-/g,"/"))),o=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,1),n=(a-o)/864e5;return n},halfYearAgo:function(e){var t="";return t=e?new Date(Date.parse(e.replace(/-/g,"/"))):new Date,console.log(t),t.setMonth(t.getMonth()-6),"".concat(t.getFullYear(),"-").concat(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate())},lastMonthDate:function(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1<10?"0"+e.getMonth():e.getMonth(),a=e.getDate()+1<10?"0"+e.getDate():e.getDate();return"00"===o&&(o="12",t--),t.toString()+"-"+o+"-"+a},nextMonthDate:function(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),n=parseInt(o)+1;13===n&&(t=parseInt(t)+1,n=1);var r=new Date(t,n,0);return r=r.getDate(),a>r&&(a=r),n<10&&(n="0"+n),t+"-"+n+"-"+a},lastYearDate:function(){var e=new Date,t=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());return t.getFullYear()+"-"+this.convertToFullMode(t.getMonth()+1)+"-"+this.convertToFullMode(t.getDate())},lastTwoYearDate:function(){var e=new Date,t=new Date(e.getFullYear()+2,e.getMonth(),e.getDate());return t.getFullYear()+"-"+this.convertToFullMode(t.getMonth()+1)+"-"+this.convertToFullMode(t.getDate())},lastNYearDate:function(e,t){var o=new Date(e),a=new Date(o.getFullYear()+parseInt(t),o.getMonth(),o.getDate());return a.getFullYear()+"-"+this.convertToFullMode(a.getMonth()+1)+"-"+this.convertToFullMode(a.getDate())},dateConverter:function(e){return e instanceof Date?e.getFullYear()+"-"+this.convertToFullMode(e.getMonth()+1)+"-"+this.convertToFullMode(e.getDate()):e},timeConverter:function(e){return e instanceof Date?this.convertToFullMode(e.getHours())+":"+this.convertToFullMode(e.getMinutes())+":"+this.convertToFullMode(e.getSeconds()):e},shortTimeConverter:function(e){return e instanceof Date?this.convertToFullMode(e.getHours())+":"+this.convertToFullMode(e.getMinutes()):e},dateTimeConverter:function(e){return e instanceof Date?this.dateConverter(e)+" "+this.timeConverter(e):e},convertToFullMode:function(e){return e=e.toString(),1===e.length?"0"+e:e}}},d4c2:function(e,t,o){"use strict";var a=o("e725"),n=o.n(a);n.a},e725:function(e,t,o){},ef98:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"stock-statistics"},[o("biz-flex-table",{ref:"table",staticClass:"stock-statistics",attrs:{operations:e.operations,filters:e.filters,tableData:e.tableData,loading:e.loading,pagination:e.pagination,showSummary:!0},on:{operate:e.operate,"filter-data-change":e.filterDataChange,"selection-change":e.handleSelectionChange,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"active-item-change":e.activeItemChange,"cascader-change":e.cascaderChange}},[e._l(e.cols,(function(t,a){return a<=6?["条码"!==t.name?o("el-table-column",{key:a,attrs:{label:t.name,prop:t.value}}):e._e(),"条码"===t.name?o("el-table-column",{key:a,attrs:{label:t.name},scopedSlots:e._u([{key:"default",fn:function(t){return o("div",{},[e._v(" "+e._s(t.row.value1)+" ")])}}],null,!0)}):e._e()]:e._e()})),o("el-table-column",{attrs:{label:"操作",prop:"date"},scopedSlots:e._u([{key:"default",fn:function(t){return o("div",{},[e.cols.length>7?o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){return o.stopPropagation(),e.showMore(t.row)}}},[e._v("更多")]):e._e()],1)}}])})],2),o("biz-popup-tabs",{attrs:{open:e.open},on:{close:function(t){e.open=!1}},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[o("el-tab-pane",{attrs:{label:"调拨",name:"info"}},[o("alloted-info",{attrs:{open:e.open,dataModel:e.dataModel,itemId:e.itemId},on:{operationSuccess:e.refresh}})],1)],1),o("biz-popup-tabs",{attrs:{open:e.openMore},on:{close:function(t){e.openMore=!1}},model:{value:e.tabNameMore,callback:function(t){e.tabNameMore=t},expression:"tabNameMore"}},[o("el-tab-pane",{attrs:{label:"详细库存",name:"depotInfo"}},[o("depot-info",{ref:"depot",attrs:{depotName:e.depotName,depotItem:e.depotItem}})],1)],1)],1)},n=[],r=(o("4160"),o("b0c0"),o("a9e3"),o("d3b7"),o("ac1f"),o("25f0"),o("3ca3"),o("466d"),o("1276"),o("159b"),o("ddb0"),o("2b3d"),o("96cf"),o("1da1")),i=o("5530"),s=o("04d3"),l=o("1ab1"),c=o("2f62"),u=o("c596"),d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("biz-grid",{staticClass:"alloted-info"},[e.isEdit?o("biz-header",{attrs:{operations:e.operations},on:{operate:e.operate}}):e._e(),o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,"label-width":"120px",size:"small",rules:e.rules,disabled:!e.isEdit,"inline-message":!0}},[o("el-form-item",{attrs:{label:"调出仓库",prop:"depotOut"}},[o("el-select",{attrs:{placeholder:""},on:{change:e.depotOutChange},model:{value:e.form.depotOut.id,callback:function(t){e.$set(e.form.depotOut,"id",t)},expression:"form.depotOut.id"}},[o("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.shopDepotsOut,(function(t){return o("el-option",{directives:[{name:"show",rawName:"v-show",value:t.depotId!==e.form.depotIn.id,expression:"shopDepot.depotId!==form.depotIn.id"}],key:t.depotId,attrs:{label:t.depotName,value:t.depotId,disabled:"0"===t.enabled}})}))],2)],1),o("el-form-item",{attrs:{label:"调入仓库",prop:"depotIn"}},[o("el-select",{attrs:{placeholder:""},model:{value:e.form.depotIn.id,callback:function(t){e.$set(e.form.depotIn,"id",t)},expression:"form.depotIn.id"}},[o("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.shopDepots,(function(t,a){return o("el-option",{directives:[{name:"show",rawName:"v-show",value:t.id!==e.form.depotOut.id,expression:"shopDepot.id!==form.depotOut.id"}],key:a,attrs:{label:t.name,value:t.id,disabled:"0"===t.enabled}})}))],2)],1),o("el-form-item",{attrs:{label:"可调拨数量",prop:"stockAmount"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form.stockAmount,callback:function(t){e.$set(e.form,"stockAmount",t)},expression:"form.stockAmount"}})],1),o("el-form-item",{attrs:{label:"调拨数量",prop:"quantity"}},[o("el-input",{model:{value:e.form.quantity,callback:function(t){e.$set(e.form,"quantity",t)},expression:"form.quantity"}})],1),o("el-form-item",{attrs:{label:"创建人",prop:"creator"}},[o("el-input",{attrs:{value:e.form.creator||e.getUser().name,disabled:!0}})],1),o("el-form-item",{attrs:{label:"确认人",prop:"modifier"}},[o("el-input",{attrs:{value:e.form.auditorName,disabled:!0}})],1),o("el-form-item",{attrs:{label:"状态",prop:"state"}},[o("el-input",{attrs:{value:"1"===e.form.state?"已确认":"未确认",disabled:!0}})],1),o("el-form-item",{attrs:{label:"创建日期",prop:"createDate"}},[o("el-input",{attrs:{value:e.form.createDate,disabled:!0}})],1),o("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[o("el-input",{attrs:{value:e.form.remarks,type:"textarea"}})],1)],1)],1)},p=[],f=(o("d81d"),o("f36f")),m=o("c466"),h={name:"MemberBaseInfo",props:{itemId:{type:String},dataModel:{type:Object},isEdit:{type:Boolean,default:function(){return!0}}},components:{BizGrid:f["a"],BizHeader:s["d"]},data:function(){var e=this,t=function(t,o,a){e.form.depotOut.id?a():a(new Error("请选择调出仓库"))},o=function(t,o,a){e.form.depotIn.id?a():a(new Error("请选择调入仓库"))},a=function(t,o,a){Number(e.form.quantity)>Number(e.form.stockAmount)?a(new Error("调拨数量大于可调拨数量")):a()};return{loading:!1,form:this.getDefaultForm(),operations:[{label:"保存",name:"save",type:"primary"}],shopDepots:[],shopDepotsOut:[],showDialog:!1,errorMobile:"",errorRole:"",errUserName:"",errName:"",rules:{quantity:[{required:!0,message:"请输入调拨数量",trigger:"blur"},{validator:a,trigger:["blur","change"]}],depotOut:[{required:!0,message:"请选择调出仓库",trigger:"change"},{validator:t,trigger:"change"}],depotIn:[{required:!0,message:"请选择调入仓库",trigger:"change"},{validator:o,trigger:"change"}]}}},watch:{itemId:{handler:function(e){e?this.query():this.form=this.getDefaultForm()}}},created:function(){this.getDepots()},methods:Object(i["a"])(Object(i["a"])({},Object(c["c"])(["getUser"])),{},{operate:function(e){this[e]()},depotOutChange:function(e){var t=this;this.shopDepotsOut.map((function(o){o.depotId===e&&(t.form.stockAmount=o.stockAmount)}))},getDepots:function(){var e=this,t={shopId:window.top.SHOP_ID||"",pageSize:"1000",pageNumber:1};l["a"].get("/admin/invoicing/stock/shopDepots.jhtml",t).then((function(t){e.shopDepots=t.dataList})).catch((function(t){console.log(t),console.log("code错误"),t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))},getDefaultForm:function(){return{sn:"",type:"1",depotIn:{id:"",name:""},depotOut:{id:"",name:""},relateDepotInBill:{id:"",name:""},relateDepotOutBill:{id:"",name:""},state:"1",items:[],stockAmount:"",quantity:"",remarks:""}},showNotify:function(e,t){this.$notify({showClose:!0,message:e,type:t})},query:function(){var e=this;this.itemId&&(this.loading=!0,l["a"].get(u["g"].invoicing.allottedMgmt.products,{productId:this.itemId}).then((function(t){e.loading=!1,e.shopDepotsOut=t.dataList,e.form.quantity="",e.form.createDate=m["a"].dateTimeConverter(new Date)})).catch((function(t){e.loading=!1,console.log(t),console.log("code错误"),t.errorMessage&&e.$message.warning(t.errorMessage)})))},save:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,e.form.items=[],e.dataModel.quantity=e.form.quantity,e.form.items.push(e.dataModel),l["a"].post(u["g"].invoicing.allottedMgmt.depotTransfer,e.form).then((function(t){e.loading=!1,e.$message.success("保存成功"),e.$emit("operationSuccess")})).catch((function(t){e.loading=!1,console.log(t),console.log("code错误"),t.errorMessage&&e.$message.warning(t.errorMessage)})))}))},dialogOperate:function(e){}})},g=h,b=(o("b72a"),o("2877")),v=Object(b["a"])(g,d,p,!1,null,null,null),y=v.exports,I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("biz-grid",{staticClass:"depot-info"},[o("biz-flex-table",{ref:"table",attrs:{tableData:e.tableData,loading:e.loading,checkable:!1},on:{operate:e.operate}},[o("el-table-column",{attrs:{label:"仓库",prop:"name"}}),o("el-table-column",{attrs:{label:"库存",prop:"stock"}})],1)],1)},D=[],w=o("b85c"),M={name:"DepotInfo",components:{BizFlexTable:s["c"],BizGrid:f["a"]},props:{depotName:{type:Array},depotItem:{type:Array}},data:function(){return{loading:!1,tableData:[]}},created:function(){},computed:{},mounted:function(){},watch:{},methods:{operate:function(e){this[e]()},getList:function(){var e,t=[],o=Object(w["a"])(this.depotName);try{for(o.s();!(e=o.n()).done;){var a=e.value;"value3"===a.value&&t.push({name:a.name,stock:this.depotItem[0].value3}),"value4"===a.value&&t.push({name:a.name,stock:this.depotItem[0].value4}),"value5"===a.value&&t.push({name:a.name,stock:this.depotItem[0].value5}),"value6"===a.value&&t.push({name:a.name,stock:this.depotItem[0].value6}),"value7"===a.value&&t.push({name:a.name,stock:this.depotItem[0].value7}),"value8"===a.value&&t.push({name:a.name,stock:this.depotItem[0].value8})}}catch(n){o.e(n)}finally{o.f()}this.tableData=t}}},N=M,C=(o("7bd60"),Object(b["a"])(N,I,D,!1,null,null,null)),O=C.exports,k=o("7132"),F=o("bc3a"),S=o.n(F),x=o("11e9"),T={name:"StockStatistics",data:function(){return{loading:!1,open:!1,openMore:!1,selections:[],operations:[{label:"导出",name:"export",type:""},{label:"刷新",name:"refresh",type:""},{label:"调拨",name:"alloted",disabled:!0,type:""}],filters:[{type:"cascader",label:"商品分类",name:"category",filterable:!1,value:[],options:[]},{type:"input",label:"",placeholder:"请输入商品名称",name:"searchValue",value:""}],tableData:[],cols:[],categoryDatas:[],dataModel:{},depotItem:[],depotName:[],tabName:"info",tabNameMore:"depotInfo",itemId:"",productCategoryId:"",pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:9}}},components:{BizFlexTable:s["c"],AllotedInfo:y,BizPopupTabs:k["a"],DepotInfo:O},created:function(){this.getList(),this.queryFilters()},watch:{},computed:{},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(c["c"])(["getUser"])),{},{operate:function(e){this[e]()},refresh:function(){this.getList()},showMore:function(e){var t=this;this.tabNameMore="depotInfo",this.openMore=!0;var o=[],a=[];this.cols.forEach((function(e,t){t>2&&o.push(e)})),this.tableData.forEach((function(t,o){t.productId===e.productId&&a.push(t)})),this.depotName=o,this.depotItem=a,this.$nextTick((function(){console.log(t.depotItem+"124512"),t.$refs.depot.getList()}))},alloted:function(){this.itemId=this.selections[0].productId,this.dataModel={categoryId:this.selections[0].categoryId,categoryName:this.selections[0].categoryName,depotId:this.selections[0].depotId,depotName:this.selections[0].depotName,fullName:this.selections[0].productName,id:"",productId:this.selections[0].productId,quantity:"1",vin:this.selections[0].vin},this.open=!0},export:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o,a,n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=[],e.selections&&e.selections.length>0&&e.selections.forEach((function(e){o.push(e.productId)})),a={ids:o,pageSize:e.pagination.pageSize,pageNumber:e.pagination.currentPage,shopId:window.top.SHOP_ID||"",searchValue:e.filters[1].value,categoryId:e.productCategoryId},t.prev=3,t.next=6,S.a.post(u["g"].invoicing.stockStatistics.export,a,{responseType:"blob"});case 6:return n=t.sent,console.log("response => ",n),r=new Blob([n.data],{type:"application/vnd.ms-excel"}),i=decodeURI(n.headers["content-disposition"].split("filename=")[1]),s=document.createElement("a"),s.download=i.match(/"(\S*)"/)[1],s.style.display="none",s.href=URL.createObjectURL(r),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s),e.loading=!1,t.abrupt("return");case 22:throw t.prev=22,t.t0=t["catch"](3),new Error(t.t0);case 25:case"end":return t.stop()}}),t,null,[[3,22]])})))()},getList:function(){var e=this,t={pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage,shopId:window.top.SHOP_ID||"",searchValue:this.filters[1].value,categoryId:this.productCategoryId};this.loading=!0,l["a"].get(u["g"].invoicing.stockStatistics.list,t).then((function(t){e.tableData=t.dataList,e.cols=t.dataNameList,e.pagination.total=Number(t.total),e.loading=!1})).catch((function(t){e.$message.warning(t.errorMessage),console.log("ERR_REFRESH: ",t)})).finally((function(t){e.loading=!1}))},queryFilters:function(){var e=this,t={shopId:window.top.SHOP_ID||""};x["a"].queryFilters(t,(function(t){e.categoryDatas=t.categoryDatas,e.setCategoryFilters()}),(function(o){""!==o.errorMessage&&e.$message.error(o.errorMessage),console.log("获取过滤器失败",t)}))},setCategoryFilters:function(){var e=[{value:"",label:"全部"}];this.categoryDatas.forEach((function(t){e.push({value:t.id,label:t.name,children:[{label:"全部",value:""}]})})),this.filters[0].options=e},cascaderChange:function(e){this.productCategoryId=e[e.length-1],e.length>1&&""===this.productCategoryId&&(this.productCategoryId=e[e.length-2]),this.getList()},activeItemChange:function(e){var t=this,o={shopId:this.getUser().shop.id,parentId:e.toString()};l["a"].get("/admin/shopProduct/productCategorys.jhtml",o).then((function(o){var a;t.setCategoryFilters(),t.filters[0].options.forEach((function(t){t.value===e[0]&&(a=t.children)})),o.dateList.forEach((function(e){a.push({value:e.id,label:e.name})}))})).catch((function(){}))},handleSelectionChange:function(e){this.selections=e,this.operations[2].disabled=!0,1===e.length&&(this.operations[2].disabled=!1)},filterDataChange:function(e){this.filters=e,this.pagination.currentPage=1,this.refresh()},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()}})},_=T,E=(o("fe88"),Object(b["a"])(_,a,n,!1,null,null,null));t["default"]=E.exports},fb1e:function(e,t,o){},fe88:function(e,t,o){"use strict";var a=o("4b76"),n=o.n(a);n.a}}]);