(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f6e7051"],{"0943":function(e,t,a){"use strict";var i=a("1fac"),r=a.n(i);r.a},"0a3d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"biz-fence-map"},[a("div",{staticClass:"fencemap",attrs:{id:"fencemap"}})])}],o=(a("99af"),a("d81d"),a("ac1f"),a("1276"),{name:"BizFenceMap",components:{},props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:function(){return"0"}},carState:{type:Object,default:function(){return{}}},icon:{type:Object,default:function(){return{}}}},data:function(){return{params:{rectLng1:"",rectLat1:"",rectLng2:"",rectLat2:"",rectLng3:"",rectLat3:"",rectLng4:"",rectLat4:"",circleLng:"",circleLat:"",radius:"",polygon:"",area:""},fenceType:"",overlaysCache:[],styleOptions:{strokeColor:"red",fillColor:"red",strokeWeight:3,strokeOpacity:.8,fillOpacity:.6,strokeStyle:"solid"}}},watch:{value:{handler:function(e,t){}},carState:{deep:!0,handler:function(e,t){this.initLocation(e)}},type:{deep:!0,handler:function(e,t){for(var a=0;a<e.length;a++)t[a]!==e[a]&&(this.fenceType=e[a],this.initFence())}}},methods:{init:function(e){var t=this;this.$BMap=window.BMap,this.map=new this.$BMap.Map("fencemap"),e&&e.longitude&&e.latitude?this.point=new this.$BMap.Point(e.longitude,e.latitude):this.point=new this.$BMap.Point(125.31364243,43.89833761),this.map.enableScrollWheelZoom(!0),this.map.addControl(new window.BMap.CityListControl({anchor:window.BMAP_ANCHOR_TOP_LEFT,offset:this.$BMap.Size(10,20)}));var a=[],i=function(e){for(var i=0;i<a.length;i++)t.map.removeOverlay(a[i]);if(a.push(e.overlay),"circle"===e.drawingMode){t.params.circleLng=e.overlay.getCenter().lng,t.params.circleLat=e.overlay.getCenter().lat,t.params.radius=e.overlay.getRadius(),t.$emit("paramsChange",t.params);for(var r=e.overlay.getPath().length,o=[],n=0;n<r;n++)o.push([e.overlay.getPath()[n].lng,e.overlay.getPath()[n].lat]);t.overlaysCache=o,t.map.clearOverlays(),a.push(e.overlay);var l=t.overlaysCache,s=[];for(var c in l)s.push(new t.$BMap.Point(l[c][0],l[c][1]));var d=s,u=new t.$BMap.Polygon(d,t.styleOptions);t.map.addOverlay(u)}else if("rectangle"===e.drawingMode){if(void 0!==e.overlay.getPath()||null!==e.overlay.getPath()){t.params.rectLng1=e.overlay.getPath()[0].lng,t.params.rectLat1=e.overlay.getPath()[0].lat,t.params.rectLng2=e.overlay.getPath()[1].lng,t.params.rectLat2=e.overlay.getPath()[1].lat,t.params.rectLng3=e.overlay.getPath()[2].lng,t.params.rectLat3=e.overlay.getPath()[2].lat,t.params.rectLng4=e.overlay.getPath()[3].lng,t.params.rectLat4=e.overlay.getPath()[3].lat,t.$emit("paramsChange",t.params);for(var m=e.overlay.getPath().length,f=[],p=0;p<m;p++)f.push([e.overlay.getPath()[p].lng,e.overlay.getPath()[p].lat]);t.overlaysCache=f,t.map.clearOverlays(),a.push(e.overlay);var h=t.overlaysCache,g=[];for(var b in h)g.push(new t.$BMap.Point(h[b][0],h[b][1]));var v=g,y=new t.$BMap.Polygon(v,t.styleOptions);t.map.addOverlay(y)}}else if("polygon"===e.drawingMode){t.showLatLon(e.overlay.getPath()),t.map.clearOverlays(),a.push(e.overlay);var M=t.overlaysCache,w=[];for(var C in M)w.push(new t.$BMap.Point(M[C][0],M[C][1]));var I=w,S=new t.$BMap.Polygon(I,t.styleOptions);t.map.addOverlay(S),S.enableEditing(),S.addEventListener("lineupdate",(function(e){t.showLatLon(e.currentTarget.getPath())}))}};if("2"!==this.fenceType){var r=new window.BMapLib.DrawingManager(this.map,{isOpen:!1,enableDrawingTool:!0,drawingToolOptions:{anchor:window.BMAP_ANCHOR_TOP_RIGHT,offset:new this.$BMap.Size(5,5),drawingModes:["0"===this.fenceType?window.BMAP_DRAWING_CIRCLE:"1"===this.fenceType?window.BMAP_DRAWING_RECTANGLE:"3"===this.fenceType?window.BMAP_DRAWING_POLYGON:""]},circleOptions:this.styleOptions,polylineOptions:this.styleOptions,polygonOptions:this.styleOptions,rectangleOptions:this.styleOptions});r.addEventListener("overlaycomplete",i)}if(this.icon.path){var o=new this.$BMap.Icon(this.icon.path+"/map_grey.png",new this.$BMap.Size(40,82)),n=new this.$BMap.Marker(this.point,{icon:o});this.map.addOverlay(n)}else{var l=new this.$BMap.Marker(this.point);this.map.addOverlay(l)}},initFence:function(){var e=this,t=[],a=function(a){for(var i=0;i<t.length;i++)e.map.removeOverlay(t[i]);if(t.push(a.overlay),"circle"===a.drawingMode)e.params.circleLng=a.overlay.getCenter().lng,e.params.circleLat=a.overlay.getCenter().lat,e.params.radius=a.overlay.getRadius(),e.$emit("paramsChange",e.params);else if("rectangle"===a.drawingMode)void 0===a.overlay.getPath()&&null===a.overlay.getPath()||(e.params.rectLng1=a.overlay.getPath()[0].lng,e.params.rectLat1=a.overlay.getPath()[0].lat,e.params.rectLng2=a.overlay.getPath()[1].lng,e.params.rectLat2=a.overlay.getPath()[1].lat,e.params.rectLng3=a.overlay.getPath()[2].lng,e.params.rectLat3=a.overlay.getPath()[2].lat,e.params.rectLng4=a.overlay.getPath()[3].lng,e.params.rectLat4=a.overlay.getPath()[3].lat,e.$emit("paramsChange",e.params));else if("polygon"===a.drawingMode){e.showLatLon(a.overlay.getPath()),e.map.clearOverlays(),t.push(a.overlay);var r=e.overlaysCache,o=[];for(var n in r)o.push(new e.$BMap.Point(r[n][0],r[n][1]));var l=o,s=new e.$BMap.Polygon(l,e.styleOptions);e.map.addOverlay(s),s.enableEditing(),s.addEventListener("lineupdate",(function(t){e.showLatLon(t.currentTarget.getPath())}))}};if("2"!==this.fenceType){var i=new window.BMapLib.DrawingManager(this.map,{isOpen:!1,enableDrawingTool:!0,drawingToolOptions:{anchor:window.BMAP_ANCHOR_TOP_RIGHT,offset:new this.$BMap.Size(5,5),drawingModes:["0"===this.fenceType?window.BMAP_DRAWING_CIRCLE:"1"===this.fenceType?window.BMAP_DRAWING_RECTANGLE:"3"===this.fenceType?window.BMAP_DRAWING_POLYGON:""]},circleOptions:this.styleOptions,polylineOptions:this.styleOptions,polygonOptions:this.styleOptions,rectangleOptions:this.styleOptions});i.addEventListener("overlaycomplete",a)}if(this.icon.path){var r=new this.$BMap.Icon(this.icon.path+"/map_grey.png",new this.$BMap.Size(40,82)),o=new this.$BMap.Marker(this.point,{icon:r});this.map.addOverlay(o)}else{var n=new this.$BMap.Marker(this.point);this.map.addOverlay(n)}},showLatLon:function(e){for(var t=e.length,a="",i=[],r=0;r<t;r++)i.push([e[r].lng,e[r].lat]),a+=e[r].lng+","+e[r].lat+";";this.overlaysCache=i,this.params.polygon=a,this.$emit("paramsChange",this.params)},clearOverlays:function(){this.map.clearOverlays()},initLocation:function(e){if(e&&e.longitude&&e.latitude&&(this.point=new this.$BMap.Point(e.longitude,e.latitude)),this.map.centerAndZoom(this.point,13),this.map.enableScrollWheelZoom(!0),this.map.clearOverlays(),this.icon.path){var t=new this.$BMap.Icon(this.icon.path+"/map_grey.png",new this.$BMap.Size(40,82)),a=new this.$BMap.Marker(this.point,{icon:t});this.map.addOverlay(a)}else{var i=new this.$BMap.Marker(this.point);this.map.addOverlay(i)}this.initFence()},initEditFenceMap:function(e){var t=this;if(this.fenceType=e.type,this.init(this.carState),"0"===e.type){var a=new this.$BMap.Circle(new this.$BMap.Point(e.circleLng,e.circleLat),e.radius,{strokeColor:"red",fillColor:"red",strokeWeight:3,strokeOpacity:.8,fillOpacity:.3,strokeStyle:"solid"});if(this.map.addOverlay(a),e.circleLng&&e.circleLat){var i=new this.$BMap.Point(e.circleLng,e.circleLat);this.map.centerAndZoom(i,13)}}else if("1"===e.type){var r=new this.$BMap.Polygon([new this.$BMap.Point(e.rectLng1,e.rectLat1),new this.$BMap.Point(e.rectLng2,e.rectLat2),new this.$BMap.Point(e.rectLng3,e.rectLat3),new this.$BMap.Point(e.rectLng4,e.rectLat4)],{strokeColor:"red",fillColor:"red",strokeWeight:3,strokeOpacity:.8,fillOpacity:.3,strokeStyle:"solid"});if(this.map.addOverlay(r),e.rectLng1&&e.rectLat1){var o=new this.$BMap.Point(e.rectLng1,e.rectLat1);this.map.centerAndZoom(o,13)}}else if("3"===e.type){var n=[];n=e.polygon.split(";");for(var l=[],s=0;s<n.length;s++){var c=[];c=n[s].split(","),l.push(new this.$BMap.Point(c[0],c[1]))}var d=l,u=new this.$BMap.Polygon(d,this.styleOptions);this.map.addOverlay(u),l.length>0&&this.map.centerAndZoom(l[0],13)}else if("2"===e.type)if(this.$nextTick((function(){var a=new t.$BMap.Boundary;a.get(e.fullName,(function(e){t.map.clearOverlays();var a=e.boundaries.length;if(0!==a){for(var i=[],r=0;r<a;r++){var o=new t.$BMap.Polygon(e.boundaries[r],t.styleOptions);t.map.addOverlay(o),i=i.concat(o.getPath())}t.map.setViewport(i)}}))})),this.icon.path){var m=new this.$BMap.Icon(this.icon.path+"/map_grey.png",new this.$BMap.Size(40,82)),f=new this.$BMap.Marker(this.point,{icon:m});this.map.addOverlay(f)}else{var p=new this.$BMap.Marker(this.point);this.map.addOverlay(p)}}},created:function(){this.fenceType=this.type},mounted:function(){this.init(this.carState)}}),n=o,l=(a("d05d"),a("2877")),s=Object(l["a"])(n,i,r,!1,null,null,null),c=s.exports;a.d(t,"a",(function(){return c}))},"0e5e":function(e,t,a){"use strict";var i=a("2497"),r=a("bc3a"),o=a.n(r),n=a("c596");t["a"]={query:function(e,t,a){o.a.get(n["g"].vehicleMgmt.VehicleBaseInfo_query,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryShopList:function(e,t,a){o.a.get(n["g"].vehicleMgmt.Component_queryShops,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryBrandList:function(e,t,a){o.a.get(n["g"].vehicleMgmt.Component_queryBrands,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},querySeriesList:function(e,t,a){o.a.get(n["g"].vehicleMgmt.Component_querySeries,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryTypeList:function(e,t,a){o.a.get(n["g"].vehicleMgmt.Component_queryTypes,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryDimList:function(e,t,a){o.a.get(n["g"].vehicleMgmt.VehicleBaseInfo_queryDimList,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryInsuranceList:function(e,t,a){o.a.get(n["g"].vehicleMgmt.VehicleBaseInfo_queryInsuranceList,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryTerminalList:function(e,t,a){o.a.get(n["g"].vehicleMgmt.VehicleBaseInfo_queryTerminalList,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryTerminalInfo:function(e,t,a){o.a.get(n["g"].vehicleMgmt.VehicleBaseInfo_queryTerminalInfo,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},update:function(e,t,a){o.a.post(n["g"].vehicleMgmt.VehicleBaseInfo_update,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},add:function(e,t,a){o.a.post(n["g"].vehicleMgmt.VehicleBaseInfo_add,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))}}},"13a3":function(e,t,a){"use strict";var i=a("b151"),r=a.n(i);r.a},"1fac":function(e,t,a){},"225d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.tableShow,expression:"tableShow"}],ref:"template"},[e._t("default",[a("span",[e._v("编写你自己的打印区域组件，然后slot插入到vue-easy-print")])],{getChineseNumber:e.getChineseNumber})],2),e.buttonShow?a("button",{class:e.buttonClass,attrs:{type:"button"},on:{click:e.print}},[a("span",[e._v("开始打印")])]):e._e()])},r=[],o=(a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("466d"),a("5319"),a("1276"),{name:"vue-easy-print",components:{},props:{spaceRow:{type:Boolean,default:!1},tableData:{type:Object,default:function(){}},tableShow:{type:Boolean,default:!1},buttonShow:{type:Boolean,default:!1},buttonClass:{type:String,default:"el-button el-button--default"},onePageRow:{type:Number,default:5},beforeCopy:Function,beforePrint:Function},data:function(){return{}},mounted:function(){this.init()},methods:{init:function(){var e=this,t=document.getElementById("easyPrintIframe");t?this.getStyle():(t=document.createElement("iframe"),t.id="easyPrintIframe",t.style.position="fixed",t.style.width="0",t.style.height="0",t.style.top="-100px",window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)&&(t.src='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")'),t.onload=function(){e.getStyle()},document.body.appendChild(t))},print:function(){"function"===typeof this.beforeCopy&&this.beforeCopy();var e=document.getElementById("easyPrintIframe");e.contentDocument.body.innerHTML=this.$refs.template.innerHTML,"function"===typeof this.beforePrint&&this.beforePrint(),setTimeout((function(){e.contentWindow.print()}),100)},getStyle:function(){for(var e=document.getElementById("easyPrintIframe"),t="",a=document.querySelectorAll("style"),i=0;i<a.length;i++)t+=a[i].outerHTML;e.contentDocument.head.innerHTML=t;for(var r=document.querySelectorAll("link"),o=0;o<r.length;o++){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),r[o].type?n.setAttribute("type",r[o].type):n.setAttribute("type","text/css"),n.setAttribute("href",r[o].href),n.setAttribute("media","all"),e.contentDocument.head.appendChild(n)}},getChineseNumber:function(e){var t,a,i,r,o,n,l,s,c,d,u,m,f,p,h=99999999999.99,g="零",b="壹",v="贰",y="叁",M="肆",w="伍",C="陆",I="柒",S="捌",O="玖",T="拾",_="佰",L="仟",D="万",k="亿",$="",P="元",x="角",N="分",E="整";if(void 0===e)return"";if(e=e.toString(),""==e)return"";if(null!=e.match(/[^,.\d]/))return"";if(null==e.match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/))return"";if(e=e.replace(/,/g,""),e=e.replace(/^0+/,""),Number(e)>h)return alert("您输入的金额太大，请重新输入!"),"";if(r=e.split("."),r.length>1?(t=r[0],a=r[1],a=a.substr(0,2)):(t=r[0],a=""),o=new Array(g,b,v,y,M,w,C,I,S,O),n=new Array("",T,_,L),l=new Array("",D,k),s=new Array(x,N),i="",Number(t)>0){for(c=0,d=0;d<t.length;d++)u=t.length-d-1,m=t.substr(d,1),f=u/4,p=u%4,"0"==m?c++:(c>0&&(i+=o[0]),c=0,i+=o[Number(m)]+n[p]),0==p&&c<4&&(i+=l[f]);i+=P}if(""!=a)for(d=0;d<a.length;d++)m=a.substr(d,1),"0"!=m&&(i+=o[Number(m)]+s[d]);return""==i&&(i=g+P),""==a&&(i+=E),i=$+i,i}}}),n=o,l=a("2877"),s=Object(l["a"])(n,i,r,!1,null,null,null),c=s.exports;t["a"]=c},2497:function(e,t,a){"use strict";var i=a("4360"),r=a("a18c");t["a"]=function(e,t){return function(a){var o=a.data;"100"===o.resultCode?e(o):"709"===o.resultCode?(i["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",i["a"].getters.currentUser),r["a"].push("/login")):t(o)}}},"25eb":function(e,t,a){var i=a("23e7"),r=a("c20d");i({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},3193:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicle-base-info__content"},[a("el-form",{ref:"form",attrs:{size:"small","label-width":"130px",model:e.formModel,rules:e.rules,"inline-message":!0}},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("el-form-item",{attrs:{label:"车牌号码",prop:"plateNumber"}},[a("el-input",{attrs:{placeholder:"请输入车牌号码"},model:{value:e.formModel.plateNumber,callback:function(t){e.$set(e.formModel,"plateNumber",t)},expression:"formModel.plateNumber"}})],1),a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择品牌",filterable:""},on:{change:e.handleBrandChange},model:{value:e.formModel.brand,callback:function(t){e.$set(e.formModel,"brand",t)},expression:"formModel.brand"}},e._l(e.brandList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"系列"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择系列",filterable:""},on:{change:e.handleSeriesChange},model:{value:e.formModel.series,callback:function(t){e.$set(e.formModel,"series",t)},expression:"formModel.series"}},e._l(e.seriesList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"车型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择车型"},model:{value:e.formModel.type,callback:function(t){e.$set(e.formModel,"type",t)},expression:"formModel.type"}},e._l(e.modeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),e.memberId?e._e():a("el-form-item",{attrs:{label:"所有者"}},[a("people-picker",{attrs:{contentField:"userName"},model:{value:e.formModel.member,callback:function(t){e.$set(e.formModel,"member",t)},expression:"formModel.member"}})],1),e.memberId?e._e():a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{attrs:{type:"phone",maxlength:"12",readonly:"",placeholder:"请输入电话"},model:{value:e.formModel.member.mobile,callback:function(t){e.$set(e.formModel.member,"mobile",t)},expression:"formModel.member.mobile"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formModel.state,callback:function(t){e.$set(e.formModel,"state",t)},expression:"formModel.state"}},e._l(e.stateList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("div",{attrs:{slot:"label"},slot:"label"},[e._v(" 注册日期 "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:onTimePop",arg:"onTimePop"}],attrs:{type:"text",size:"small"}},[a("i",{staticClass:"iconfont el-icon-question"})]),a("el-popover",{ref:"onTimePop",attrs:{placement:"bottom-start",width:"300",trigger:"hover",content:"您可在车辆行驶证上查询到此信息"}})],1),a("el-date-picker",{attrs:{type:"date",placeholder:"选择注册日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.formModel.onTime,callback:function(t){e.$set(e.formModel,"onTime",t)},expression:"formModel.onTime"}})],1),a("el-form-item",{attrs:{label:"行驶证"}},[a("div",{staticClass:"image-content"},[a("BizAvatarUploaderNew",{model:{value:e.formModel.carLicense.positiveImage,callback:function(t){e.$set(e.formModel.carLicense,"positiveImage",t)},expression:"formModel.carLicense.positiveImage"}}),a("BizAvatarUploaderNew",{model:{value:e.formModel.carLicense.backgroundImage,callback:function(t){e.$set(e.formModel.carLicense,"backgroundImage",t)},expression:"formModel.carLicense.backgroundImage"}}),a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!!e.formModel.id,expression:"!!formModel.id"}],attrs:{type:"primary",disabled:!e.formModel.carLicense.positiveImage&&!e.formModel.carLicense.backgroundImage,size:"mini"},on:{click:e.reject}},[e._v("驳回")])],1)],1)]),a("el-form-item",{attrs:{label:"营运"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9","active-color":"#87d068"},model:{value:e.formModel.isCV,callback:function(t){e.$set(e.formModel,"isCV",t)},expression:"formModel.isCV"}})],1),a("el-form-item",{attrs:{label:"登记的交管所"}},[a("el-input",{attrs:{maxlength:"16",placeholder:"请输入车辆所登记的交管所"},model:{value:e.formModel.trafficControl,callback:function(t){e.$set(e.formModel,"trafficControl",t)},expression:"formModel.trafficControl"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注信息"},model:{value:e.formModel.remarks,callback:function(t){e.$set(e.formModel,"remarks",t)},expression:"formModel.remarks"}})],1)],1),a("el-collapse-item",{attrs:{title:"所属店铺",name:"8"}},[a("el-table",{attrs:{size:"small",data:e.formModel.shops}},[a("el-table-column",{attrs:{label:"店铺名称",prop:"name"}}),a("el-table-column",{attrs:{label:"详细地址",prop:"address"}}),a("el-table-column",{attrs:{label:"销售电话",prop:"mobile"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleDeleteClick(t.row)}}},[e._v(" 删除 ")])]}}])})],1)],1),a("el-collapse-item",{attrs:{title:"技术信息",name:"2"}},[a("el-form-item",{attrs:{label:"车辆识别代号",prop:"vin"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v(" 车辆识别代号 "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:vinPop",arg:"vinPop"}],attrs:{type:"text",size:"small"}},[a("i",{staticClass:"iconfont el-icon-question"})]),a("el-popover",{ref:"vinPop",attrs:{placement:"bottom-start",width:"300",trigger:"hover",content:"车辆识别代号，即车架号，具有对车辆的唯一识别性，因此可称为“汽车身份证”。您可在车辆行驶证上查询到此信息，也可打开发动机盖，在挡板上可看到此码。"}})],1),a("el-input",{attrs:{maxlength:"17",placeholder:"请输入车辆识别代号信息"},model:{value:e.formModel.vin,callback:function(t){e.$set(e.formModel,"vin",t)},expression:"formModel.vin"}})],1),a("el-form-item",{attrs:{label:"发动机号",prop:"engineNumber"}},[a("div",{attrs:{slot:"label"},slot:"label"},[e._v(" 发动机号 "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:engineNumberPop",arg:"engineNumberPop"}],attrs:{type:"text",size:"small"}},[a("i",{staticClass:"iconfont el-icon-question"})]),a("el-popover",{ref:"engineNumberPop",attrs:{placement:"bottom-start",width:"300",trigger:"hover",content:"您可在车辆行驶证上查询到此信息"}})],1),a("el-input",{attrs:{placeholder:"请输入发动机号信息"},model:{value:e.formModel.engineNumber,callback:function(t){e.$set(e.formModel,"engineNumber",t)},expression:"formModel.engineNumber"}})],1),a("el-form-item",{attrs:{label:"车身颜色"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formModel.bodyColor,callback:function(t){e.$set(e.formModel,"bodyColor",t)},expression:"formModel.bodyColor"}},e._l(e.colorList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"车牌颜色"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formModel.plateColor,callback:function(t){e.$set(e.formModel,"plateColor",t)},expression:"formModel.plateColor"}},e._l(e.colorList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"燃油编号"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formModel.fuelGrade,callback:function(t){e.$set(e.formModel,"fuelGrade",t)},expression:"formModel.fuelGrade"}},e._l(e.fuelGradeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"变速箱类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formModel.transmissionType,callback:function(t){e.$set(e.formModel,"transmissionType",t)},expression:"formModel.transmissionType"}},e._l(e.transmissionTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"排放标准"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formModel.dischargeStandard,callback:function(t){e.$set(e.formModel,"dischargeStandard",t)},expression:"formModel.dischargeStandard"}},e._l(e.effluentStandardList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"生产日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择生产日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.formModel.productionTime,callback:function(t){e.$set(e.formModel,"productionTime",t)},expression:"formModel.productionTime"}})],1)],1),a("el-collapse-item",{attrs:{title:"终端信息",name:"3"}},[a("div",[a("biz-header",{attrs:{operations:e.ruleTableOperations},on:{operate:e.operateHandler}}),a("el-table",{staticClass:"cp-table",staticStyle:{width:"100%"},attrs:{data:e.formModel.terminals,size:"small"}},[a("el-table-column",{attrs:{prop:"terminalTypeName",label:"设备类型"}}),a("el-table-column",{attrs:{prop:"number",label:"设备编号"}}),a("el-table-column",{attrs:{prop:"title",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.rowEditClickHandler(t.row,a)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.rowDeleteClickHandler(a,t.row)}}},[e._v(" 删除 ")])]}}])})],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showRule,expression:"showRule"}],staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[a("el-form",{ref:"ruleForm",attrs:{size:"small","label-width":"110px",model:e.ruleModel,rules:e.ruleRules}},[a("el-form-item",{attrs:{label:"设备编号",prop:"number"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{value:e.ruleModel.number,"fetch-suggestions":e.handleRemote,placeholder:"请输入设备编号","trigger-on-focus":!1,"value-key":"number"},on:{select:e.handleNumberChange,input:e.handleNumberInput}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.systemList&&e.systemList.length>0,expression:"systemList && systemList.length > 0"}],attrs:{label:"电控系统"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.ruleModel.diagnoseType,callback:function(t){e.$set(e.ruleModel,"diagnoseType",t)},expression:"ruleModel.diagnoseType"}},e._l(e.systemList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"通讯方式"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.ruleModel.communicationType,callback:function(t){e.$set(e.ruleModel,"communicationType",t)},expression:"ruleModel.communicationType"}},e._l(e.commTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("biz-save-button",{staticStyle:{"margin-right":"0"},attrs:{operations:e.ruleOperations},on:{operate:e.operateHandler}})],1)],1)]),a("el-collapse-item",{attrs:{title:"销售信息",name:"4"}},[a("el-form-item",{attrs:{label:"车辆销售公司"}},[a("el-input",{attrs:{placeholder:"请输入车辆销售公司"},model:{value:e.formModel.carSalesData.salesCompany,callback:function(t){e.$set(e.formModel.carSalesData,"salesCompany",t)},expression:"formModel.carSalesData.salesCompany"}})],1),a("el-form-item",{attrs:{label:"车辆销售单号",prop:"salesContractNumber"}},[a("el-input",{attrs:{maxlength:"16",placeholder:"请输入车辆销售单号"},model:{value:e.formModel.carSalesData.salesContractNumber,callback:function(t){e.$set(e.formModel.carSalesData,"salesContractNumber",t)},expression:"formModel.carSalesData.salesContractNumber"}})],1),a("el-form-item",{attrs:{label:"购买日期",prop:"purchaseTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择购买日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.formModel.carSalesData.purchaseTime,callback:function(t){e.$set(e.formModel.carSalesData,"purchaseTime",t)},expression:"formModel.carSalesData.purchaseTime"}})],1),a("el-form-item",{attrs:{label:"是否贷款"}},[a("el-radio-group",{model:{value:e.formModel.carSalesData.loanType,callback:function(t){e.$set(e.formModel.carSalesData,"loanType",t)},expression:"formModel.carSalesData.loanType"}},[a("el-radio",{attrs:{label:"0"}},[e._v("是")]),a("el-radio",{attrs:{label:"1"}},[e._v("否")]),a("el-radio",{attrs:{label:"2"}},[e._v("保密")])],1)],1),a("el-form-item",{attrs:{label:"销售公司电话",prop:"salesCompanyPhone"}},[a("el-input",{attrs:{type:"phone",maxlength:"12",placeholder:"请输入销售公司电话"},model:{value:e.formModel.carSalesData.salesCompanyPhone,callback:function(t){e.$set(e.formModel.carSalesData,"salesCompanyPhone",t)},expression:"formModel.carSalesData.salesCompanyPhone"}})],1),a("el-form-item",{attrs:{label:"销售员"}},[a("el-input",{attrs:{placeholder:"请输入销售员"},model:{value:e.formModel.carSalesData.salesStaff,callback:function(t){e.$set(e.formModel.carSalesData,"salesStaff",t)},expression:"formModel.carSalesData.salesStaff"}})],1),a("el-form-item",{attrs:{label:"销售员电话",prop:"salesStaffPhone"}},[a("el-input",{attrs:{type:"phone",maxlength:"13",placeholder:"请输入销售员电话"},model:{value:e.formModel.carSalesData.salesStaffPhone,callback:function(t){e.$set(e.formModel.carSalesData,"salesStaffPhone",t)},expression:"formModel.carSalesData.salesStaffPhone"}})],1)],1),a("el-collapse-item",{attrs:{title:"质保信息",name:"5"}},[a("el-form-item",{attrs:{label:"质保起始日期",prop:"purchaseTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择保起始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.qualityAssuranceDate,callback:function(t){e.qualityAssuranceDate=t},expression:"qualityAssuranceDate"}})],1),a("div",{staticClass:"zbxx"},[a("el-form-item",{staticClass:"isRequired",attrs:{label:"质保期",prop:"qualityAssuranceTime"}},[a("el-input",{model:{value:e.formModel.carQualityAssurance.time,callback:function(t){e.$set(e.formModel.carQualityAssurance,"time",t)},expression:"formModel.carQualityAssurance.time"}},[a("template",{slot:"append"},[e._v("年")])],2)],1),a("el-form-item",{attrs:{label:"或","label-width":"40px",prop:"qualityAssuranceDrivingRange"}},[a("el-input",{model:{value:e.formModel.carQualityAssurance.drivingRange,callback:function(t){e.$set(e.formModel.carQualityAssurance,"drivingRange",t)},expression:"formModel.carQualityAssurance.drivingRange"}},[a("template",{slot:"append"},[e._v("公里")])],2)],1)],1),a("el-form-item",{attrs:{label:"质保截止日期",prop:"purchaseTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择质保截止日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",disabled:""},model:{value:e.qualityAssuranceEndDate,callback:function(t){e.qualityAssuranceEndDate=t},expression:"qualityAssuranceEndDate"}})],1)],1),a("el-collapse-item",{attrs:{title:"保险信息",name:"6"}},[a("el-form-item",{attrs:{label:"投保公司"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择投保公司"},on:{change:e.handleInsuranceChange},model:{value:e.formModel.carInsurance.insuranceCompany,callback:function(t){e.$set(e.formModel.carInsurance,"insuranceCompany",t)},expression:"formModel.carInsurance.insuranceCompany"}},e._l(e.insuranceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"保单号码",prop:"insurancePolicyNumber"}},[a("el-input",{attrs:{maxlength:"20",placeholder:"请输入保单号码"},model:{value:e.formModel.carInsurance.insurancePolicyNumber,callback:function(t){e.$set(e.formModel.carInsurance,"insurancePolicyNumber",t)},expression:"formModel.carInsurance.insurancePolicyNumber"}})],1),a("el-form-item",{attrs:{label:"保单生效日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择保单生效日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.formModel.carInsurance.policyEffectiveDate,callback:function(t){e.$set(e.formModel.carInsurance,"policyEffectiveDate",t)},expression:"formModel.carInsurance.policyEffectiveDate"}})],1),a("el-form-item",{attrs:{label:"保单失效日期",prop:"policyExpiryDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择保单失效日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.formModel.carInsurance.policyExpiryDate,callback:function(t){e.$set(e.formModel.carInsurance,"policyExpiryDate",t)},expression:"formModel.carInsurance.policyExpiryDate"}})],1),a("el-form-item",{attrs:{label:"客服电话",prop:"customerServicePhone"}},[a("el-input",{attrs:{type:"phone",maxlength:"12"},model:{value:e.formModel.carInsurance.customerServicePhone,callback:function(t){e.$set(e.formModel.carInsurance,"customerServicePhone",t)},expression:"formModel.carInsurance.customerServicePhone"}})],1),a("el-form-item",{attrs:{label:"理赔员姓名"}},[a("el-input",{attrs:{placeholder:"请输入理赔员姓名"},model:{value:e.formModel.carInsurance.claimMemberName,callback:function(t){e.$set(e.formModel.carInsurance,"claimMemberName",t)},expression:"formModel.carInsurance.claimMemberName"}})],1),a("el-form-item",{attrs:{label:"理赔员电话",prop:"claimMemberPhone"}},[a("el-input",{attrs:{type:"phone",maxlength:"13",placeholder:"请输入理赔员电话"},model:{value:e.formModel.carInsurance.claimMemberPhone,callback:function(t){e.$set(e.formModel.carInsurance,"claimMemberPhone",t)},expression:"formModel.carInsurance.claimMemberPhone"}})],1),a("el-form-item",{attrs:{label:"保单详细信息"}},[a("el-input",{attrs:{placeholder:"请输入保单详细信息"},model:{value:e.formModel.carInsurance.insuranceDetails,callback:function(t){e.$set(e.formModel.carInsurance,"insuranceDetails",t)},expression:"formModel.carInsurance.insuranceDetails"}})],1),a("el-form-item",{attrs:{label:"保单说明"}},[a("el-input",{attrs:{placeholder:"请输入保单说明"},model:{value:e.formModel.carInsurance.policyDescription,callback:function(t){e.$set(e.formModel.carInsurance,"policyDescription",t)},expression:"formModel.carInsurance.policyDescription"}})],1)],1),a("el-collapse-item",{attrs:{title:"保养信息",name:"7"}},[a("el-form-item",{attrs:{label:"车辆里程(km)",prop:"nowDrivingRange"}},[a("el-input",{attrs:{"controls-position":"right",placeholder:"请输入车辆里程"},model:{value:e.formModel.drivingRange,callback:function(t){e.$set(e.formModel,"drivingRange",t)},expression:"formModel.drivingRange"}})],1),a("el-form-item",{attrs:{label:"保养日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择保养日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.formModel.carMaintain.happenDate,callback:function(t){e.$set(e.formModel.carMaintain,"happenDate",t)},expression:"formModel.carMaintain.happenDate"}})],1),a("el-form-item",{attrs:{label:"上次保养里程(km)",prop:"drivingRange"}},[a("el-input",{attrs:{"controls-position":"right",placeholder:"请输入上次保养里程"},model:{value:e.formModel.carMaintain.drivingRange,callback:function(t){e.$set(e.formModel.carMaintain,"drivingRange",t)},expression:"formModel.carMaintain.drivingRange"}})],1),a("el-form-item",{attrs:{label:"保养间隔里程(km)",prop:"drivingRangeGap"}},[a("el-input",{attrs:{"controls-position":"right"},model:{value:e.formModel.carMaintain.drivingRangeGap,callback:function(t){e.$set(e.formModel.carMaintain,"drivingRangeGap",t)},expression:"formModel.carMaintain.drivingRangeGap"}})],1)],1)],1)],1)],1)},r=[],o=(a("99af"),a("4160"),a("c975"),a("a434"),a("b0c0"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("159b"),a("8330")),n=a("c365"),l=a("04d3"),s=a("c466"),c=a("0e5e"),d=a("c17f"),u=a("1ab1"),m={name:"VehicleBaseInfoContent",components:{BizSaveButton:o["a"],PeoplePicker:n["a"],BizHeader:l["d"],BizAvatarUploaderNew:d["b"]},data:function(){var e=this;return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},rules:{plateNumber:[{required:!0,message:"请输入车牌号码",trigger:"blur"},{trigger:"blur",validator:function(t,a,i){var r=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1,2}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/;r.test(e.formModel.plateNumber)?i():i(new Error("车牌号格式错误"))}}],vin:[{trigger:"blur",validator:function(t,a,i){e.formModel.vin&&e.$set(e.formModel,"vin",e.formModel.vin.toUpperCase());var r=/^[A-Z0-9]{17}$/;!e.formModel.vin||r.test(e.formModel.vin)?i():i(new Error("车辆识别代号格式错误"))}}],engineNumber:[{trigger:"blur",validator:function(t,a,i){e.formModel.engineNumber&&e.$set(e.formModel,"engineNumber",e.formModel.engineNumber.toUpperCase());var r=/^[a-zA-Z0-9]{6,14}$/;!e.formModel.engineNumber||r.test(e.formModel.engineNumber)?i():i(new Error("发动机号格式错误"))}}],salesContractNumber:[{trigger:"blur",validator:function(t,a,i){e.formModel.carSalesData&&e.formModel.carSalesData.salesContractNumber&&e.$set(e.formModel.carSalesData,"salesContractNumber",e.formModel.carSalesData.salesContractNumber.toUpperCase());var r=/^[A-Z0-9]*$/;e.formModel.carSalesData&&e.formModel.carSalesData.salesContractNumber&&!r.test(e.formModel.carSalesData.salesContractNumber)?i(new Error("车辆销售单号格式错误")):i()}}],salesStaffPhone:[{trigger:"blur",validator:function(t,a,i){var r=/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/;!e.formModel.carSalesData.salesStaffPhone||r.test(e.formModel.carSalesData.salesStaffPhone)?i():i(new Error("销售员电话格式错误"))}}],customerServicePhone:[{trigger:"blur",validator:function(t,a,i){var r=/^[0-9]\d*$/;!e.formModel.carInsurance.customerServicePhone||r.test(e.formModel.carInsurance.customerServicePhone)?i():i(new Error("客服电话格式错误"))}}],claimMemberPhone:[{trigger:"blur",validator:function(t,a,i){var r=/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/;!e.formModel.carInsurance.claimMemberPhone||r.test(e.formModel.carInsurance.claimMemberPhone)?i():i(new Error("理赔员电话格式错误"))}}],insurancePolicyNumber:[{trigger:"blur",validator:function(t,a,i){var r=/^[A-Z0-9]*$/;!e.formModel.carInsurance.insurancePolicyNumber||r.test(e.formModel.carInsurance.insurancePolicyNumber)?i():i(new Error("保单号码格式错误"))}}],policyExpiryDate:[{trigger:"blur",validator:function(t,a,i){e.formModel.carInsurance.policyExpiryDate&&e.formModel.carInsurance.policyEffectiveDate&&e.formModel.carInsurance.policyExpiryDate<=e.formModel.carInsurance.policyEffectiveDate?i(new Error("保单失效日期要晚于保单生效日期")):i()}}],purchaseTime:[{trigger:"blur",validator:function(t,a,i){e.formModel.carSalesData.purchaseTime&&e.formModel.productionTime&&e.formModel.carSalesData.purchaseTime<e.formModel.productionTime?i(new Error("购买日期要晚于生产日期")):i()}}],nowDrivingRange:[{trigger:"blur",validator:function(t,a,i){var r=new RegExp(/^\+?[0-9][0-9]*$/);e.formModel.drivingRange&&!r.test(e.formModel.drivingRange)?i(new Error("请输入整数")):i()}}],drivingRange:[{trigger:"blur",validator:function(t,a,i){var r=new RegExp(/^\+?[0-9][0-9]*$/);e.formModel.carMaintain.drivingRange&&!r.test(e.formModel.carMaintain.drivingRange)?i(new Error("请输入整数")):i()}}],drivingRangeGap:[{trigger:"blur",validator:function(t,a,i){var r=new RegExp(/^\+?[0-9][0-9]*$/);e.formModel.carMaintain.drivingRangeGap&&!r.test(e.formModel.carMaintain.drivingRangeGap)?i(new Error("请输入整数")):i()}}],qualityAssuranceTime:[{required:!1,message:"请输入质保期",trigger:"blur"},{trigger:"blur",validator:function(t,a,i){var r=new RegExp(/^\+?[1-9][0-9]*$/);e.formModel.carQualityAssurance.time&&!r.test(e.formModel.carQualityAssurance.time)?i(new Error("请输入一个大于0的整数")):e.formModel.carQualityAssurance.time?i():i(new Error("请输入质保期"))}}],qualityAssuranceDrivingRange:[{required:!1,message:"请输入里程",trigger:"blur"},{trigger:"blur",validator:function(t,a,i){var r=new RegExp(/^\+?[1-9][0-9]*$/);e.formModel.carQualityAssurance.drivingRange&&!r.test(e.formModel.carQualityAssurance.drivingRange)?i(new Error("请输入一个大于0的整数")):e.formModel.carQualityAssurance.drivingRange?i():i(new Error("请输入里程"))}}]},shopList:[],brandList:[],seriesList:[],modeList:[],stateList:[],transmissionTypeList:[],plateNumberTypeList:[],colorList:[],fuelGradeList:[],effluentStandardList:[],systemList:[],commTypeList:[],insuranceList:[],formModel:this.getDefaultModel(),activeNames:["1"],ruleTableOperations:[{label:"新建",name:"addOperate",type:"primary"}],showRule:!1,ruleModel:this.getDefaultRuleModel(),ruleOperations:[{label:"取消",name:"cancelRuleOperate"},{label:"保存",name:"saveRuleOperate",type:"primary",auth:["admin:car.edit"]}],ruleRules:{number:[{required:!0,trigger:"blur",validator:function(t,a,i){e.ruleModel.number?i():i(new Error("请选择终端"))}},{trigger:["blur"],validator:function(t,a,i){e.checkNumber(e.ruleModel.number,i)}}]},selectLoading:!1,terminalList:[]}},props:{itemId:{type:Object,default:function(){return{id:""}}},memberId:{type:Object}},created:function(){this.queryShopList(),this.queryBrandList(),this.queryInsuranceList(),this.queryDimList(),this.effluentStandardList=["国Ⅰ","国Ⅱ","国Ⅲ","国Ⅳ","国Ⅴ","国Ⅵ","欧Ⅰ","欧Ⅱ","欧Ⅲ","欧Ⅳ","欧Ⅴ"],this.commTypeList=[{id:"0",name:"自动切换"},{id:"1",name:"网络"},{id:"2",name:"蓝牙"},{id:"3",name:"WIFI"},{id:"4",name:"GPRS"},{id:"5",name:"3G"},{id:"6",name:"4G"}],this.deletedRules=[]},methods:{reject:function(){var e=this;u["a"].put("/admin/car/carLicense/state.jhtml",{id:this.formModel.id}).then((function(t){e.$message.success("驳回成功"),e.$emit("operationSuccess"),e.formModel.carLicense.positiveImage="",e.formModel.carLicense.backgroundImage=""})).catch((function(t){console.log(t),e.$message.warning(t.errorMessage)}))},handleDeleteClick:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,u["a"].delete("/admin/car/relateShop.jhtml",{shopId:e.id,id:t.itemId.id}).then((function(a){t.formModel.shops.splice(t.formModel.shops.indexOf(e),1),t.$message.success("删除成功"),t.$emit("operationSuccess")})).catch((function(e){console.log(e),console.log("code错误"),"店铺不存在"!==e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){t.loading=!1}))}))},queryShopList:function(){var e=this;c["a"].queryShopList({},(function(t){e.shopList=t.storeList}),(function(e){console.log(e),console.log("code错误")}))},queryBrandList:function(){var e=this;c["a"].queryBrandList({},(function(t){e.brandList=t.dataList}),(function(e){console.log(e),console.log("code错误")}))},querySeriesList:function(e){var t=this;c["a"].querySeriesList({brand:e},(function(e){t.seriesList=e.dataList?e.dataList:[]}),(function(e){console.log(e),console.log("code错误")}))},queryTypeList:function(e){var t=this;c["a"].queryTypeList({series:e,brand:this.formModel.brand},(function(e){t.modeList=e.dataList?e.dataList:[]}),(function(e){console.log(e),console.log("code错误")}))},queryInsuranceList:function(){var e=this;c["a"].queryInsuranceList({},(function(t){e.insuranceList=t.dataList}),(function(e){console.log(e),console.log("code错误")}))},queryDimList:function(){var e=this;c["a"].queryDimList({},(function(t){e.stateList=t.carStateList,e.transmissionTypeList=t.transmissionTypeList,e.plateNumberTypeList=t.plateNumberTypeList,e.colorList=t.colorList,e.fuelGradeList=t.fuelGradeList}),(function(e){console.log(e),console.log("code错误")}))},getSaveParams:function(){var e=[];e=e.concat(this.formModel.terminals);var t=this.deletedRules,a=[];return e.forEach((function(e){a.push(e.number)})),t.forEach((function(t){a.indexOf(t.number)<0&&e.push({terminalType:t.terminalType,type:t.type})})),this.formModel.carQualityAssurance.qualityAssuranceDate=this.qualityAssuranceDate,this.formModel.carQualityAssurance.qualityAssuranceEndDate=this.qualityAssuranceEndDate,{id:this.formModel.id,plateNumber:this.formModel.plateNumber,brand:this.formModel.brand,series:this.formModel.series,type:this.formModel.type,member:this.memberId?this.memberId:this.formModel.member,shop:this.formModel.shop,state:this.formModel.state,onTime:this.formModel.onTime,isCV:this.formModel.isCV,trafficControl:this.formModel.trafficControl,remarks:this.formModel.remarks,drivingRange:this.formModel.drivingRange,carshipId:this.formModel.carshipId,vin:this.formModel.vin,engineNumber:this.formModel.engineNumber,bodyColor:this.formModel.bodyColor,plateColor:this.formModel.plateColor,fuelGrade:this.formModel.fuelGrade,carLicense:this.formModel.carLicense,transmissionType:this.formModel.transmissionType,dischargeStandard:this.formModel.dischargeStandard,productionTime:this.formModel.productionTime,terminals:e,carSalesData:this.formModel.carSalesData,carInsurance:this.formModel.carInsurance,carMaintain:this.formModel.carMaintain,carQualityAssurance:this.formModel.carQualityAssurance}},resetModel:function(){this.formModel=this.getDefaultModel()},getDefaultModel:function(){return{member:{id:"",name:""},bodyColor:"2",plateColor:"0",fuelGrade:"1",carLicense:{positiveImage:"",backgroundImage:""},transmissionType:"2",dischargeStandard:"国5",shop:{id:"",name:""},engineNumber:"",carSalesData:{salesCompanyPhone:"",salesStaffPhone:""},carInsurance:{insuranceCompany:"",customerServicePhone:"",claimMemberPhone:""},carMaintain:{drivingRangeGap:""},carQualityAssurance:{drivingRange:"60000",qualityAssuranceDate:"",qualityAssuranceEndDate:"",time:"3",carId:"",id:""},terminals:[]}},operateHandler:function(e){this[e]()},handleBrandChange:function(e){this.querySeriesList(e),this.$set(this.formModel,"series",""),this.$set(this.formModel,"type","")},handleSeriesChange:function(e){this.queryTypeList(e),this.$set(this.formModel,"type","")},save:function(){var e=this;this.$refs.form.validate((function(t,a){return t?e.formModel.backgroundImage&&!e.formModel.positiveImage||!e.formModel.backgroundImage&&e.formModel.positiveImage?(e.$message.warning("驾驶证正反面图片都需要上传"),!1):(e.$emit("on-loading",!0),void(e.formModel.id?c["a"].update(e.getSaveParams(),(function(t){e.$message.success("保存成功"),e.$emit("operationSuccess"),e.$emit("on-loading",!1)}),(function(t){e.$message.warning(t.errorMessage),e.$emit("on-loading",!1)})):c["a"].add(e.getSaveParams(),(function(t){e.$message.success("保存成功"),e.$emit("operationSuccess"),e.$emit("on-loading",!1)}),(function(t){e.$message.warning(t.errorMessage),e.$emit("on-loading",!1)})))):(e.$message.warning("车辆信息输入有误，请修改"),e.activeNames=["1","2","4","5","6"],!1)}))},handleInsuranceChange:function(e){var t=this;this.insuranceList.forEach((function(a){a.name===e&&t.$set(t.formModel.carInsurance,"customerServicePhone",a.phoneNumber)}))},getDefaultRuleModel:function(){return{number:"",diagnoseType:"",communicationType:"0"}},rowEditClickHandler:function(e,t,a){t.stopPropagation(),this.systemList=e.diagnoseTypes?e.diagnoseTypes:[],this.terminalList=[],this.ruleModel=Object.assign({},e),this.showRule=!0,this.$refs.ruleForm.resetFields()},rowDeleteClickHandler:function(e,t){var a=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.formModel.terminals.forEach((function(e,i){e.number===t.number&&a.formModel.terminals.splice(i,1)})),a.deletedRules.push(t)}))},addOperate:function(){this.resetRuleModel(),this.showRule=!0,this.$refs.ruleForm.resetFields()},resetRuleModel:function(){this.systemList=[],this.terminalList=[],this.ruleModel=this.getDefaultRuleModel()},cancelRuleOperate:function(){this.showRule=!1},saveRuleOperate:function(){var e=this;this.$refs.ruleForm.validate((function(t,a){if(!t)return!1;var i=!1;e.formModel.terminals.forEach((function(t,a){t.number===e.ruleModel.number&&(e.formModel.terminals.splice(a,1,e.getRuleParams()),i=!0)})),i||e.formModel.terminals.push(e.getRuleParams()),e.showRule=!1}))},getRuleParams:function(){return Object.assign({},this.ruleModel)},checkNumber:function(e,t){var a=this;c["a"].queryTerminalInfo({sn:e,carId:this.itemId.id,shopId:window.top.SHOP_ID},(function(e){a.systemList=e.diagnoseTypes?e.diagnoseTypes:[],e.diagnoseType=a.systemList.length>0?a.systemList[0]:"";for(var i=0;i<a.systemList.length;i++)if(a.systemList[i]===a.ruleModel.diagnoseType){e.diagnoseType=a.systemList[i];break}Object.assign(a.ruleModel,e),t()}),(function(e){console.log("ERROR_QUERY",e),a.systemList=[],a.$set(a.ruleModel,"diagnoseType",""),t(new Error(e.errorMessage))}))},handleNumberChange:function(e){this.$set(this.ruleModel,"number",e.number),this.$refs.ruleForm.clearValidate()},handleNumberInput:function(e){this.$set(this.ruleModel,"number",e)},handleRemote:function(e,t){e?this.queryTerminalList(e,t):this.terminalList=[]},queryTerminalList:function(e,t){var a=this;this.$emit("on-loading",!0),c["a"].queryTerminalList({number:e},(function(e){t(e.dataList),a.$emit("on-loading",!1)}),(function(e){console.log(e),console.log("code错误"),a.$emit("on-loading",!1)}))}},computed:{point:{get:function(){return{lng:this.formModel.lngBaidu,lat:this.formModel.latBaidu}},set:function(e){e&&(this.formModel.lngBaidu=e.lng,this.formModel.latBaidu=e.lat)}},qualityAssuranceDate:{get:function(){return!this.formModel.carQualityAssurance.qualityAssuranceDate&&this.formModel.onTime?this.formModel.onTime:this.formModel.carQualityAssurance.qualityAssuranceDate},set:function(e){e&&(this.formModel.carQualityAssurance.qualityAssuranceDate=e)}},qualityAssuranceEndDate:{get:function(){return!this.formModel.carQualityAssurance.qualityAssuranceEndDate&&this.qualityAssuranceDate&&this.formModel.carQualityAssurance.time?s["a"].lastNYearDate(this.qualityAssuranceDate,this.formModel.carQualityAssurance.time):this.formModel.carQualityAssurance.qualityAssuranceEndDate},set:function(e){e&&(this.formModel.carQualityAssurance.qualityAssuranceEndDate=e)}}},watch:{itemId:function(e,t){var a=this;this.$refs.form.$el.scrollTop=0,console.log(e),e.id?(this.$emit("on-loading",!0),c["a"].query({carId:e.id,carShipId:e.carShipId},(function(e){var t=Object.assign(a.getDefaultModel(),e.car);a.formModel=t,a.querySeriesList(a.formModel.brand),a.queryTypeList(a.formModel.series),a.$refs.form.resetFields(),a.activeNames=["1"],a.deletedRules=[],a.$emit("on-loading",!1),a.showRule=!1}),(function(e){console.log(e),console.log("code错误"),a.$emit("on-loading",!1)}))):(this.resetModel(),this.$refs.form.$el.scrollTop=0,this.$refs.form.resetFields(),this.activeNames=["1"])}}},f=m,p=(a("d158"),a("2877")),h=Object(p["a"])(f,i,r,!1,null,null,null);t["a"]=h.exports},"39ec":function(e,t,a){"use strict";var i=a("78a1"),r=a.n(i);r.a},"3f28":function(e,t,a){},"443b":function(e,t,a){"use strict";a("4de4");var i=a("c596"),r=a("1ab1"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"append-to-body":"",visible:e.visible,title:"自定义列","custom-class":"biz-columns",width:"500px"},on:{close:e.onClose}},[a("div",{staticClass:"columns-wrap"},[a("biz-flex-table",{ref:"table",attrs:{checkable:!1,tableData:e.tableData},on:{"selection-change":e.selectionChangeHandler}},[a("el-table-column",{attrs:{type:"selection",width:"50",selectable:e.getSelectable}}),a("el-table-column",{attrs:{label:"信息",prop:"name"}}),a("el-table-column",{attrs:{prop:"tag",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.$index;return[a("el-button",{attrs:{icon:"el-icon-sort-up",type:"text",disabled:0===i},on:{click:function(t){return e.onUp(i)}}}),a("el-button",{attrs:{icon:"el-icon-sort-down",type:"text",disabled:i===e.tableData.length-1},on:{click:function(t){return e.onBottom(i)}}})]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)])},n=[],l=(a("7db0"),a("a434"),a("b85c")),s=a("04d3"),c={name:"biz-columns",components:{BizFlexTable:s["c"]},props:{visible:Boolean,tableId:String},data:function(){return{id:"",tableName:"",selections:[],tableData:[]}},computed:{},watch:{visible:function(e){e?this.makeRowDisplayable():this.saveSelection()},tableId:function(){this.getTableColumns()}},mounted:function(){this.getTableColumns()},methods:{getTableColumns:function(){var e=this;r["a"].get(i["g"].user.columns,{tableId:this.tableId}).then((function(t){e.tableData=t.data.columnDatas,e.id=t.data.id,e.tableName=t.data.tableName}))},getSelectable:function(e){return e.isEditable},selectionChangeHandler:function(e){this.selections=e},saveSelection:function(){var e,t=this,a=Object(l["a"])(this.tableData);try{for(a.s();!(e=a.n()).done;){var i=e.value;i.displayable=!1}}catch(s){a.e(s)}finally{a.f()}var r,o=Object(l["a"])(this.selections);try{var n=function(){var e=r.value;t.tableData.find((function(t){return t.id===e.id})).displayable=!0};for(o.s();!(r=o.n()).done;)n()}catch(s){o.e(s)}finally{o.f()}},onUp:function(e){this.tableData[e]=this.tableData.splice(e-1,1,this.tableData[e])[0]},onBottom:function(e){this.tableData[e]=this.tableData.splice(e+1,1,this.tableData[e])[0]},onClose:function(){this.$emit("update:visible",!1)},update:function(){var e,t=this,a=Object(l["a"])(this.tableData);try{for(a.s();!(e=a.n()).done;){var o=e.value;o.displayable=!1}}catch(u){a.e(u)}finally{a.f()}var n,s=Object(l["a"])(this.selections);try{var c=function(){var e=n.value;t.tableData.find((function(t){return t.id===e.id})).displayable=!0};for(s.s();!(n=s.n()).done;)c()}catch(u){s.e(u)}finally{s.f()}var d={columnDatas:this.tableData,id:this.id,tableId:this.tableId,tableName:this.tableName};console.log(d),r["a"].put(i["g"].user.columns,d).then((function(e){t.$emit("update"),t.$emit("update:visible",!1)}))},makeRowDisplayable:function(){var e=this;setTimeout((function(){var t,a=Object(l["a"])(e.tableData);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.$refs.table.$refs.table.toggleRowSelection(i,i.displayable)}}catch(r){a.e(r)}finally{a.f()}}),20)}}},d=c,u=(a("ec6b"),a("2877")),m=Object(u["a"])(d,o,n,!1,null,null,null),f=m.exports,p=f;t["a"]={components:{BizColumnOperation:s["a"],BizColumns:p},data:function(){return{columnsSettingVisible:!1,columns:[]}},created:function(){this.getTableId(),this.getColumns()},methods:{onCustomColumns:function(){this.columnsSettingVisible=!0},getColumns:function(){var e=this;console.log(12),r["a"].get(i["A"].columns,{tableId:this.tableId}).then((function(t){e.columns=[],setTimeout((function(){e.columns=t.data.columnDatas.filter((function(e){return e.displayable})),e.$refs.table&&setTimeout((function(){e.$refs.table.doLayout()}),50)}),20)})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))},getTableId:function(){}}}},"46b7":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-popup-tabs",{attrs:{open:e.open},on:{close:e.close},model:{value:e.tabSelection,callback:function(t){e.tabSelection=t},expression:"tabSelection"}},[e.isAssets?e._e():a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("membership-mgmt-base-info",{attrs:{itemId:e.itemId,isEdit:e.isEdit},on:{operationSuccess:e.operationSuccess}})],1),""!==e.itemId.id&&e.isAssets?a("el-tab-pane",{attrs:{label:"车辆信息",name:"1"}},[a("membership-mgmt-vehicle-info",{attrs:{itemId:e.itemId,isEdit:e.isEdit},on:{operationSuccess:e.operationSuccess}})],1):e._e(),"shop"===e.getUser.roleLevel||""===e.itemId.id||e.isAssets?e._e():a("el-tab-pane",{attrs:{label:"实名认证",name:"2"}},[a("membership-certification",{attrs:{itemId:e.itemId,isEdit:e.isEdit},on:{operationSuccess:e.operationSuccess}})],1),""!==e.itemId.id&&e.isAssets?a("el-tab-pane",{attrs:{label:"终端信息",name:"3"}},[a("membership-mgmt-terminal",{attrs:{itemId:e.itemId,isEdit:e.isEdit},on:{operationSuccess:e.operationSuccess}})],1):e._e(),""!==e.itemId.id&&e.isAssets?a("el-tab-pane",{attrs:{label:"电子围栏",name:"4"}},[a("vehicle-elec-fence",{attrs:{itemId:e.itemId,isEdit:e.isEdit},on:{operationSuccess:e.operationSuccess}})],1):e._e(),""===e.itemId.id||e.isAssets?e._e():a("el-tab-pane",{attrs:{label:"会员权益",name:"5"}},[a("member-rights",{attrs:{itemId:e.itemId,isEdit:e.isEdit,storeId:e.storeId}})],1),""===e.itemId.id||e.isAssets?e._e():a("el-tab-pane",{attrs:{label:"会员动态",name:"6"}},[a("member-news",{attrs:{itemId:e.itemId,isEdit:e.isEdit}})],1)],1)},r=[],o=a("5530"),n=a("7132"),l=a("e0d7"),s=a("bea5"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicle-base-info__terminal"},[a("div",[a("biz-header",{attrs:{operations:e.ruleTableOperations},on:{operate:e.operateHandler}}),a("el-table",{ref:"terminalTable",staticClass:"cp-table",staticStyle:{width:"100%"},attrs:{data:e.terminalData,size:"mini"}},[a("el-table-column",{attrs:{prop:"terminalTypeName",label:"设备类型"}}),a("el-table-column",{attrs:{prop:"number",label:"设备编号"}}),a("el-table-column",{attrs:{prop:"bindCar.plateNumber",label:"关联车辆"}}),a("el-table-column",{attrs:{prop:"title",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.rowEditClickHandler(t.row,a)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.rowDeleteClickHandler(a,t.row)}}},[e._v(" 删除 ")])]}}])})],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showRule,expression:"showRule"}],staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[a("el-form",{ref:"ruleForm",attrs:{size:"small","label-width":"110px",model:e.ruleModel,rules:e.ruleRules,"inline-message":!0}},[a("el-form-item",{attrs:{label:"设备编号",prop:"number"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{value:e.ruleModel.number,"fetch-suggestions":e.handleRemote,placeholder:"请输入设备编号","trigger-on-focus":!1,"value-key":"number"},on:{select:e.handleNumberChange,input:e.handleNumberInput}})],1),a("el-form-item",{attrs:{label:"通讯方式"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.ruleModel.communicationType,callback:function(t){e.$set(e.ruleModel,"communicationType",t)},expression:"ruleModel.communicationType"}},e._l(e.commTypeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("biz-save-button",{staticStyle:{"margin-right":"0"},attrs:{operations:e.ruleOperations},on:{operate:e.operateHandler}})],1)],1)])},d=[],u=a("8330"),m=a("04d3"),f=a("0e5e"),p=a("1ab1"),h={name:"VehicleBaseInfoContent",components:{BizSaveButton:u["a"],BizHeader:m["d"]},data:function(){var e=this;return{rules:{},shopList:[],commTypeList:[],insuranceList:[],selections:[],terminalData:[],ruleTableOperations:[{label:"新建",name:"addOperate",type:"primary"}],showRule:!1,ruleModel:this.getDefaultRuleModel(),ruleOperations:[{label:"取消",name:"cancelRuleOperate"},{label:"保存",name:"saveRuleOperate",type:"primary"}],ruleRules:{number:[{required:!0,trigger:"blur",validator:function(t,a,i){e.ruleModel.number?i():i(new Error("请选择终端"))}}]},selectLoading:!1,terminalList:[]}},props:{itemId:{type:Object,default:function(){return{id:""}}},memberId:{type:Object}},created:function(){this.effluentStandardList=["国Ⅰ","国Ⅱ","国Ⅲ","国Ⅳ","国Ⅴ","国Ⅵ","欧Ⅰ","欧Ⅱ","欧Ⅲ","欧Ⅳ","欧Ⅴ"],this.commTypeList=[{id:"0",name:"自动切换"},{id:"1",name:"网络"},{id:"2",name:"蓝牙"},{id:"3",name:"WIFI"},{id:"4",name:"GPRS"},{id:"5",name:"3G"},{id:"6",name:"4G"}],this.getTerminalList(),this.deletedRules=[]},methods:{getTerminalList:function(){var e=this;p["a"].get("/admin/terminal/memberTerminals.jhtml",{userId:this.itemId?this.itemId.id:"",shopId:window.top.SHOP_ID||""}).then((function(t){e.terminalData=t.dataList})).catch((function(t){console.log(t),e.$message.warning(t.errorMessage)}))},operateHandler:function(e){this[e]()},addOperate:function(){this.resetRuleModel(),this.showRule=!0,this.$refs.ruleForm.resetFields()},getDefaultRuleModel:function(){return{number:"",diagnoseType:"",communicationType:"0",userId:this.itemId?this.itemId.id:""}},rowEditClickHandler:function(e,t,a){t.stopPropagation(),this.terminalList=[],this.ruleModel=Object.assign({},e),this.showRule=!0,this.$refs.ruleForm.resetFields()},rowDeleteClickHandler:function(e,t){var a=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p["a"].delete("/admin/terminal/memberTerminal.jhtml",{ids:[t.id],userId:a.itemId.id}).then((function(e){a.$message.success("删除成功"),a.getTerminalList()})).catch((function(e){console.log(e),a.$message.warning(e.errorMessage)}))}))},resetRuleModel:function(){this.terminalList=[],this.ruleModel=this.getDefaultRuleModel()},cancelRuleOperate:function(){this.showRule=!1},getSaveParams:function(){return{number:this.ruleModel.number,diagnoseType:this.ruleModel.diagnoseType,communicationType:this.ruleModel.communicationType,userId:this.itemId?this.itemId.id:""}},saveRuleOperate:function(){var e=this;this.$refs.ruleForm.validate((function(t,a){if(!t)return!1;e.ruleModel.id?p["a"].put("/admin/terminal/memberTerminal.jhtml",e.getSaveParams()).then((function(t){e.$message.success("保存成功"),e.getTerminalList()})).catch((function(t){console.log(t),e.$message.warning(t.errorMessage)})):p["a"].post("/admin/terminal/memberTerminal.jhtml",e.getSaveParams()).then((function(t){e.$message.success("保存成功"),e.getTerminalList()})).catch((function(t){console.log(t),e.$message.warning(t.errorMessage)})),e.showRule=!1}))},getRuleParams:function(){return Object.assign({},this.ruleModel)},checkNumber:function(e,t){var a=this;f["a"].queryTerminalInfo({sn:e,carId:this.itemId.id,shopId:window.top.SHOP_ID},(function(e){Object.assign(a.ruleModel,e),t()}),(function(e){console.log("ERROR_QUERY",e),a.$set(a.ruleModel,"diagnoseType",""),t(new Error(e.errorMessage))}))},handleNumberChange:function(e){this.$set(this.ruleModel,"number",e.number),this.$refs.ruleForm.clearValidate()},handleNumberInput:function(e){this.$set(this.ruleModel,"number",e)},handleRemote:function(e,t){e?this.queryTerminalList(e,t):this.terminalList=[]},queryTerminalList:function(e,t){var a=this;this.$emit("on-loading",!0),f["a"].queryTerminalList({number:e},(function(e){t(e.dataList),a.$emit("on-loading",!1)}),(function(e){console.log(e),console.log("code错误"),a.$emit("on-loading",!1)}))}},computed:{},watch:{"itemId.id":function(e,t){this.showRule=!1,this.getTerminalList()}}},g=h,b=(a("e921"),a("2877")),v=Object(b["a"])(g,c,d,!1,null,null,null),y=v.exports,M=a("ff9d"),w=a("ea3d"),C=a("2f62"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{staticClass:"member-rights"},[a("div",{staticClass:"select-wrap"},[a("label",{staticClass:"s-label"},[e._v("选择店铺")]),a("el-select",{attrs:{size:"mini"},on:{change:e.shopChange},model:{value:e.shopId,callback:function(t){e.shopId=t},expression:"shopId"}},e._l(e.storeId,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-collapse-item",{attrs:{title:"会员卡",name:"member-card"}},[a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"small",data:e.memberCards}},[a("el-table-column",{attrs:{"min-width":"150",label:"会员卡信息"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",{staticClass:"_member"},[a("div",{staticClass:"head"},[i.memberRank&&i.memberRank.image?a("img",{attrs:{src:i.memberRank.image}}):a("img",{attrs:{src:e.defaultImg}})]),a("div",{staticClass:"mane-tel"},[a("div",{staticClass:"name"},[e._v(e._s(i.member.name))]),a("div",{staticClass:"tel"},[e._v(e._s(i.member.mobile))])])])]}}])}),a("el-table-column",{attrs:{label:"所属店铺",prop:"shop.name","min-width":"80"}}),a("el-table-column",{attrs:{label:"V豆",prop:"bean","min-width":"50"}}),a("el-table-column",{attrs:{label:"积分",prop:"point","min-width":"50"}}),a("el-table-column",{attrs:{label:"余额",prop:"balance","min-width":"50"}})],1)],1),a("biz-pagination",{attrs:{pagination:e.pagination},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),a("el-collapse-item",{attrs:{title:"福利",name:"rights"}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:e.getListChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("可使用")]),a("el-radio-button",{attrs:{label:"2"}},[e._v("已使用")]),a("el-radio-button",{attrs:{label:"3"}},[e._v("已过期")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.rightLoading,expression:"rightLoading"}],staticClass:"card-flex"},[e._l(e.showRightsDatas,(function(t){return a("el-card",{key:t.couponCodeId,staticClass:"box-card"},[a("div",{staticClass:"display"},[a("div",{staticClass:"name",attrs:{title:t.name}},[e._v(e._s(t.name))]),e.isEdit?a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"===e.radio,expression:"radio==='1'"}],attrs:{type:"text",size:"mini"},on:{click:function(a){return e.verificationDialog(t)}}},[e._v("核销 ")]):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.radio,expression:"radio==='1'"}],staticClass:"display"},[a("div",[e._v("有效期截至："+e._s(t.endDate||"长期有效"))]),e.isEdit?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.revoke(t)}}},[e._v("撤回")]):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===e.radio,expression:"radio==='2'"}],staticClass:"display"},[a("div",[e._v("使用日期："+e._s(t.usedDate))]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.printDialog(t)}}},[e._v("凭证")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"3"===e.radio,expression:"radio==='3'"}],staticClass:"display"},[a("div",[e._v("有效期截至："+e._s(t.endDate))])])])})),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAllShow&&e.rightsDatas.length>2,expression:"!isAllShow&&rightsDatas.length > 2"}],staticClass:"view-all",on:{click:e.allShow}},[e._v(" 查看全部 "),a("i",{staticClass:"iconfont biz-icon-i-web-zd1"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.rightsDatas.length,expression:"rightsDatas.length===0"}],style:e.styleObject})],2)],1)],1),a("el-dialog",{attrs:{title:"福利核销",visible:e.dialogVerification,width:"500px","append-to-body":!0,center:""},on:{"update:visible":function(t){e.dialogVerification=t}}},[a("el-form",{ref:"formSingle",attrs:{size:"small",model:e.formVerification,"label-width":"55px"}},[a("div",{staticStyle:{"padding-bottom":"10px"}},[e._v("请您在与客户沟通一致前提下使用此功能，福利核销后，不能恢复。")]),a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{type:"textarea",placeholder:"备注字数限制100字",maxlength:"100",size:"small"},model:{value:e.formVerification.remarks,callback:function(t){e.$set(e.formVerification,"remarks",t)},expression:"formVerification.remarks"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVerification=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.verification}},[e._v("确 定")])],1)],1)],1),a("el-dialog",{staticClass:"rights-dialog",attrs:{visible:e.dialogPrint,"append-to-body":!0},on:{"update:visible":function(t){e.dialogPrint=t}}},[a("el-row",{attrs:{gutter:10}},[a("div",{staticClass:"btn-c",attrs:{align:"right"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.print}},[e._v("打印")])],1)]),a("vue-easy-print",{ref:"easyPrint",attrs:{tableShow:""}},[a("div",{staticClass:"d-p-wrap"},[a("el-row",{attrs:{gutter:10}},[a("div",{staticClass:"p-title"},[e._v(e._s(e.currentUser.shop?e.currentUser.shop.name+"核销单":"核销单"))])]),a("el-row",{staticClass:"row",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid18"})]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple",attrs:{align:"right"}},[e._v("打印日期："+e._s(e.formatDate((new Date).getTime())))])])],1),a("el-row",{staticClass:"row-top",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("会员姓名："+e._s(e.formPrint.member?e.formPrint.member.name:""))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("会员电话："+e._s(e.formPrint.member?e.formPrint.member.mobile:""))])])],1),a("el-row",{staticClass:"row",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("核销时间："+e._s(e.formPrint.usedDate))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v(" 车牌号："+e._s(e.formPrint.member&&e.formPrint.member.defaultCarInfo?e.formPrint.member.defaultCarInfo.plateNumber:""))])])],1),a("el-row",{staticClass:"row",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v(" 车型："+e._s(e.formPrint.member&&e.formPrint.member.defaultCarInfo?e.formPrint.member.defaultCarInfo.type:""))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v(" 车辆识别代码："+e._s(e.formPrint.member&&e.formPrint.member.defaultCarInfo?e.formPrint.member.defaultCarInfo.vin:""))])])],1),a("el-row",{staticClass:"row",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("券名称："+e._s(e.formPrint.name))])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("券码："+e._s(e.formPrint.code))])])],1),a("el-row",{staticClass:"row-bottom",attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("备注："+e._s(e.formPrint.remarks))])])],1),a("el-row",{staticClass:"row",attrs:{gutter:10}},[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"grid18"})]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("客户签字：")])])],1)],1)])],1)],1)},S=[],O=(a("4160"),a("c975"),a("d81d"),a("fb6a"),a("a434"),a("a9e3"),a("d3b7"),a("159b"),a("f36f")),T=a("c596"),_=a("7d7b"),L=a.n(_),D=a("f260"),k=a.n(D),$=a("225d"),P={name:"MemberRights",props:{storeId:{type:Array},itemId:{type:Object},isEdit:{type:Boolean,default:!1}},components:{vueEasyPrint:$["a"],BizPagination:m["f"],BizGrid:O["a"]},data:function(){return{isAllShow:!1,formPrint:{},dialogPrint:!1,formVerification:{couponCodeId:"",remarks:""},dialogVerification:!1,shopId:"",shopOptions:[],rightsDatas:[],radio:"1",defaultImg:L.a,loading:!1,rightLoading:!1,activeTab:["member-card","rights"],memberCards:[],pagination:{pageSize:3,currentPage:1,pageSizes:[3],total:0},styleObject:{height:"200px",background:"url("+k.a+") 50% 50% / 50% no-repeat"}}},created:function(){},computed:Object(o["a"])(Object(o["a"])({},Object(C["c"])(["currentUser"])),{},{showRightsDatas:function(){return this.isAllShow?this.rightsDatas:this.rightsDatas.slice(0,2)}}),watch:{itemId:{handler:function(e){var t=this;this.radio="1",this.activeTab=["member-card","rights"],this.shopOptions=[],this.storeId.forEach((function(e){t.getShopList(e.id)})),this.$nextTick((function(){t.shopId=(t.storeId.length>0?t.storeId[0].id:"")||t.currentUser.shop.id,t.getMemberCards(),t.getRights()}))}}},mounted:function(){var e=this;this.storeId.forEach((function(t){e.getShopList(t.id)})),this.$nextTick((function(){e.shopId=(e.storeId.length>0?e.storeId[0].id:"")||e.currentUser.shop.id,e.getMemberCards(),e.getRights()}))},methods:{allShow:function(){this.isAllShow=!0},printDialog:function(e){var t=this;this.dialogPrint=!0;var a={couponCodeId:e.couponCodeId};p["a"].get(T["e"].print,a).then((function(e){t.formPrint=e.data})).catch((function(e){console.log(e)})).finally((function(){}))},print:function(){this.$refs.easyPrint.print()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getMemberCards()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getMemberCards()},getMemberCards:function(){var e=this;console.log("getMemberCards");var t={userId:this.itemId.userId,shopId:this.shopId,sourceType:"5",pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize};p["a"].get(T["o"].memberCardList,t).then((function(t){t.memberCards.length>3?(e.memberCards=t.memberCards.splice(0,3),e.pagination.currentPage>1&&(e.memberCards=t.memberCards)):e.memberCards=t.memberCards,e.pagination.total=Number(t.total)})).catch((function(e){}))},getListChange:function(){this.getRights()},getRights:function(){var e=this;this.rightLoading=!0;var t={state:this.radio,userId:this.itemId.userId,shopId:this.shopId,sourceType:"5",pageNumber:1,pageSize:999};p["a"].get(T["o"].rightsList,t).then((function(t){e.isAllShow=!1,e.rightsDatas=t.coupons})).catch((function(e){})).finally((function(){e.rightLoading=!1}))},getShopList:function(e){var t=this;console.log(123),p["a"].get(T["o"].mainPage.shopList,{shopId:e||window.top.SHOP_ID,sourceType:"5"}).then((function(e){e.shops.map((function(e){-1===JSON.stringify(t.shopOptions).indexOf(JSON.stringify(e))&&t.shopOptions.push(e)}))})).catch((function(e){}))},shopChange:function(){this.getMemberCards(),this.getRights()},verificationDialog:function(e){this.dialogVerification=!0,this.formVerification.couponCodeId=e.couponCodeId,this.remarks=""},verification:function(){var e=this,t={couponCodeId:this.formVerification.couponCodeId,memberId:this.itemId.userId,remarks:this.formVerification.remarks};p["a"].post(T["e"].verification,t).then((function(t){e.$message.success("核销成功"),e.getRights(),e.dialogVerification=!1})).catch((function(t){e.$message.warning(t.errorMessage)})).finally((function(){}))},revoke:function(e){var t=this;this.$confirm("是否确认撤回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={memberId:t.itemId.userId,couponCodeId:e.couponCodeId};p["a"].post(T["e"].revoke,a).then((function(e){t.$message.success("撤回成功"),t.getRights()})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){t.loading=!1}))}))},formatDate:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),o=a+"-"+(i<10?"0"+i:i)+"-"+(r<10?"0"+r:r);return o}}},x=P,N=(a("13a3"),Object(b["a"])(x,I,S,!1,null,null,null)),E=N.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"member-rights"},[a("div",{staticClass:"select-wrap"},[a("label",{staticClass:"s-label"},[e._v("选择店铺")]),a("el-select",{attrs:{size:"mini"},on:{change:e.shopChange},model:{value:e.shopId,callback:function(t){e.shopId=t},expression:"shopId"}},e._l(e.shopOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-collapse-item",{attrs:{title:"活跃情况",name:"actvie"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("最近登录地址：")]),a("div",{staticClass:"content"},[e._v(e._s(e.actvie.latestAddress))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("最近登录时间：")]),a("div",{staticClass:"content"},[e._v(e._s(e.actvie.latestTime))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("活跃度标签：")]),a("div",{staticClass:"content"},[e._v(e._s(e.actvie.activeTagNames))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("本月登录次数：")]),a("div",{staticClass:"content"},[e._v(e._s(e.actvie.monthLoginTimes||""))])])]),a("el-collapse-item",{attrs:{title:"下单情况",name:"order"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("下单总额：")]),a("div",{staticClass:"content"},[e._v(e._s(e.order.amount))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("下单数量：")]),a("div",{staticClass:"content"},[e._v(e._s(e.order.total))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("下单类型：")]),a("div",{staticClass:"content"},[e._v(e._s(e.order.typeNames))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("最近下单时间：")]),a("div",{staticClass:"content"},[e._v(e._s(e.order.latestTime))])])]),a("el-collapse-item",{attrs:{title:"活动参与",name:"activity"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("参与活动次数：")]),a("div",{staticClass:"content"},[e._v(e._s(e.activity.attendTimes))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("分享活动次数：")]),a("div",{staticClass:"content"},[e._v(e._s(e.activity.shareTimes))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("参与活动类型：")]),a("div",{staticClass:"content"},[e._v(e._s(e.activity.typeNames))])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[e._v("最近参与时间：")]),a("div",{staticClass:"content"},[e._v(e._s(e.activity.latestTime))])])])],1)],1)},j=[],B={name:"MemberNews",props:{itemId:{type:Object},isEdit:{type:Boolean,default:!1}},components:{BizGrid:O["a"]},data:function(){return{activeTab:["actvie","order","activity"],activity:{attendTimes:"",shareTimes:"",typeNames:"",latestTime:""},actvie:{latestAddress:"",latestTime:"",activeTagNames:"",monthLoginTimes:""},order:{amount:"",total:"",typeNames:"",latestTime:""},shopId:"",shopOptions:[],loading:!1}},created:function(){this.getShopList()},computed:Object(o["a"])({},Object(C["c"])(["currentUser"])),watch:{itemId:{handler:function(e){this.shopId=this.currentUser.shop.id,this.getNews()}}},mounted:function(){},methods:{getNews:function(){var e=this;this.loading=!0;var t={userId:this.itemId.userId,shopId:this.shopId};p["a"].get(T["o"].memberNews,t).then((function(t){e.activity=t.data.activity,e.actvie=t.data.actvie,e.order=t.data.order})).catch((function(e){})).finally((function(){e.loading=!1}))},getShopList:function(){var e=this;p["a"].get(T["o"].mainPage.shopList,{shopId:window.top.SHOP_ID||"",sourceType:"5"}).then((function(t){e.shopOptions=t.shops,e.$nextTick((function(){e.shopId=e.currentUser.shop.id,e.getNews()}))})).catch((function(e){}))},shopChange:function(){this.getNews()}}},q=B,R=(a("de96"),Object(b["a"])(q,z,j,!1,null,null,null)),A=R.exports,F={name:"MembershipMgmtPopup",components:{MemberNews:A,MemberRights:E,BizPopupTabs:n["a"],MembershipMgmtBaseInfo:l["a"],MembershipMgmtVehicleInfo:s["a"],MembershipCertification:M["a"],MembershipMgmtTerminal:y,VehicleElecFence:w["a"]},props:{storeId:{type:Array},open:{type:Boolean},isEdit:{type:Boolean,default:function(){return!0}},isAssets:{type:Boolean,default:function(){return!1}},itemId:{type:Object,default:function(){return{id:""}}}},computed:Object(o["a"])({},Object(C["c"])(["getUser"])),data:function(){return{tabSelection:"0",alertId:{id:""},showFailure:!0,showSign:!0}},methods:{close:function(e){this.$emit("close",e),this.tabSelection="0"},operationSuccess:function(e){this.$emit("operationSuccess",e)}}},V=F,H=Object(b["a"])(V,i,r,!1,null,null,null);t["a"]=H.exports},"4d9f":function(e,t,a){},"50c2":function(e,t,a){"use strict";var i=a("4d9f"),r=a.n(i);r.a},"57a5":function(e,t,a){"use strict";var i=a("b84c"),r=a.n(i);r.a},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var i=a("1d80"),r=a("5899"),o="["+r+"]",n=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),s=function(e){return function(t){var a=String(i(t));return 1&e&&(a=a.replace(n,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:s(1),end:s(2),trim:s(3)}},6401:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"biz-empty-table",style:e.emptyStyle})},r=[],o=a("f260"),n=a.n(o),l={name:"",data:function(){return{EmptyImg:n.a}},components:{},computed:{emptyStyle:function(){return{position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",background:"url("+n.a+") 50% 50% / auto 200px no-repeat"}}},methods:{},mounted:function(){}},s=l,c=a("2877"),d=Object(c["a"])(s,i,r,!1,null,null,null);t["a"]=d.exports},"697f":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:e.title,visible:e.dialogVisible,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close,open:e.open}},[e._t("top"),a("biz-flex-table",{ref:"table",attrs:{showTable:e.showTable,operations:e.operations,filters:e.filters,tags:e.tags,rowKeys:e.rowKeys,pagination:e.pagination,tableData:e.tableData,rowClassName:e.rowClassName,loading:e.loading,memberIds:e.memberIds,checkable:e.checkable,isDepotOutNew:e.isDepotOutNew,checkedTable:e.checkedTable},on:{operate:e.operate,"row-click":e.rowClick,"filter-data-change":e.filterDataChange,"select-all":e.handleSelectAll,select:e.handleSelectionChange,"size-change":e.pageSizeChange,"current-change":e.currentPageChange,"cascader-change":e.cascaderChange,"active-item-change":e.activeItemChange,"sort-change":e.handleSortChange}},[e._t("default")],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isClear?a("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("清除")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmed}},[e._v("确定")])],1)],2)},r=[],o=(a("99af"),a("4160"),a("c975"),a("a434"),a("a9e3"),a("159b"),a("04d3")),n={name:"BizDialogSelector",components:{BizFlexTable:o["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},max:{type:Number,default:0},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},isClear:{default:!0,type:Boolean},rowClassName:{type:Function,default:function(){return null}},selectionKeys:{type:Array,default:function(){return[]}},memberIds:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},isDepotOut:{type:Boolean,default:function(){return!1}},checkTable:{type:Array,default:function(){return[]}},showTable:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],isDepotOutNew:!1,checkedTable:[],innerSelection:[]}},methods:{rowKeys:function(e){return e.id},generateSelectionKeys:function(e,t){if(e.indexOf(t)>=0)this.innerSelectionKeys.push(t[this.keyField]),this.innerSelection.push(t);else{var a=this.innerSelectionKeys.indexOf(t[this.keyField]);this.innerSelectionKeys.splice(a,1),this.innerSelection.splice(a,1)}},open:function(e){this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(e){this.innerSelectionKeys=[],this.innerSelection=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){if(this.innerSelectionKeys.length>0||!this.showTable){if(!this.showTable&&!/(http|https):\/\/([\w.]+\/?)\S*/.test(this.filters[2].value))return void this.$message.warning("必须以http,https开头,且需符合URL规范,检查格式是否正确");this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1}else this.$message("请选择一项")},clear:function(){var e=this;this.tableData.forEach((function(t){e.$refs.table.toggleRowSelection(t,!1)})),this.innerSelectionKeys=[],this.innerSelection=[]},updateSelection:function(){var e=this;this.$refs&&this.$refs.table&&this.tableData.forEach((function(t){e.innerSelectionKeys.indexOf(t[e.keyField])>=0?(e.$refs.table.toggleRowSelection(t,!0),"single"===e.selectionMode&&(e.$refs.table.$refs.table.setCurrentRow(t),e.innerSelection=[t])):e.$refs.table.toggleRowSelection(t,!1)}))},operate:function(e){this.$emit("operate",e)},filterDataChange:function(e){this.$emit("filterDataChange",e)},handleSelectAll:function(e){var t=this;0===e.length?this.tableData.forEach((function(e){var a=t.innerSelectionKeys.indexOf(e[t.keyField]);a>=0&&t.innerSelectionKeys.splice(a,1)})):this.tableData.forEach((function(e){var a=t.innerSelectionKeys.indexOf(e[t.keyField]);a<0&&t.innerSelectionKeys.push(e[t.keyField])})),this.$emit("selectionChange",e)},handleSelectionChange:function(e,t){this.generateSelectionKeys(e,t),this.$emit("selectionChange",e)},pageSizeChange:function(e){this.$emit("pageSizeChange",e)},currentPageChange:function(e){this.$emit("currentPageChange",e)},cascaderChange:function(e){this.$emit("cascaderChange",e)},activeItemChange:function(e){this.$emit("active-item-change",e)},handleSortChange:function(e){this.$emit("sort-change",e)},rowClick:function(e,t,a){"single"===this.selectionMode&&(this.innerSelectionKeys=[e[this.keyField]],this.innerSelection=[e])}},watch:{visibility:function(e,t){this.dialogVisible=e,this.isDepotOutNew=this.isDepotOut,this.checkedTable=this.checkTable}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){},updated:function(){this.updateSelection()}},l=n,s=(a("0943"),a("2877")),c=Object(s["a"])(l,i,r,!1,null,null,null);t["a"]=c.exports},"6eca":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"membership-mgmt"},[i("div",{staticClass:"toggle-btn",on:{click:e.isShow}},[e._v(" "+e._s(e.toggleRecommendTxt)+" "),i("div",{staticClass:"iconfont biz-icon-i-web-zd1",class:{"rotate-180":e.showRecommend}})]),i("biz-flex-table",{ref:"table",attrs:{operations:e.operations,filters:e.filters,tableData:e.tableDataHandle,loading:e.loading,pagination:e.pagination},on:{operate:e.handleOperate,"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange,"selection-change":e.handleSelectionChange,"filter-data-change":e.handleFilterDataChange,"row-click":e.handleRowClick,"sort-change":e.handleSortChange,"cascader-change":e.cascaderChange}},[e.hasAuthImport?i("template",{slot:"operation"},[i("import-file",{ref:"importFile",staticStyle:{"margin-left":"10px"},attrs:{tableData:e.importResult,importLoading:e.importLoading,total:e.total,disabled:e.disabled,count:e.count,percentage:e.percentage,stepkey:e.stepkey,action:"/admin/member/importMember.jhtml",name:"uFile"},on:{clearTimeOut:e.clearTimeOut,restProcess:e.restProcess,"handle-import":e.handleImport}},[i("el-table-column",{attrs:{label:"序号",prop:"line",width:"50"}}),i("el-table-column",{attrs:{label:"结果",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.result?"导入失败":""))]}}],null,!1,3930150204)}),i("el-table-column",{attrs:{label:"消息",prop:"result"}})],1)],1):e._e(),e._l(e.columns,(function(t){return i("el-table-column",{key:t.id,attrs:{label:t.name,"min-width":e.getWidth(t),sortable:e.getSortable(t),prop:e.getProp(t)},scopedSlots:e._u([{key:"default",fn:function(r){return["1"===t.id?i("div",{staticClass:"customer-info"},[r.row.head?i("img",{attrs:{src:r.row.head}}):i("img",{attrs:{src:a("624d")}}),i("div",{staticClass:"wrapper"},[i("div",{staticClass:"title",attrs:{title:r.row.name}},[e._v(e._s(r.row.name))]),i("div",{staticClass:"gender"},["0"===r.row.gender?i("i",{staticClass:"male iconfont biz-icon-i-web-m"}):e._e(),"1"===r.row.gender?i("i",{staticClass:"female iconfont biz-icon-i-web-f"}):e._e(),"2"===r.row.gender?i("i",{staticClass:"none iconfont biz-icon-i-web-bm"}):e._e(),i("span",[e._v(e._s(r.row.mobile||r.row.contactMobile))])])])]):"2"===t.id?i("div",[e._v(e._s("1"===r.row.enableState?"启用":"停用"))]):"3"===t.id?i("div",e._l(r.row.shops,(function(t,a){return i("div",{key:a,staticClass:"customer-info"},[e._v(e._s(t.name))])})),0):"4"===t.id?i("div",[e._v(e._s(r.row.consultant?r.row.consultant.name:""))]):"5"===t.id?i("div",{staticClass:"customer-info"},[i("span",{staticStyle:{display:"block"}},[e._v(e._s(r.row.loginAddress||r.row.lastLoginIp))]),i("span",{staticStyle:{display:"block"}},[e._v(e._s(e.loginDateConverter(r.row)))])]):"6"===t.id?i("div",[e._l(r.row.shopTagsNew,(function(t,a){return i("div",{key:a,staticClass:"platform-tags"},[e._v(e._s(t.name))])})),r.row.shopTags&&r.row.shopTags.length>3?i("div",{staticClass:"show-more"},[e._v("更多")]):e._e()],2):e._e()]}}],null,!0)})})),i("el-table-column",{attrs:{prop:"tag",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("biz-column-operation",{attrs:{row:t.row}},["1"!==t.row.unionConfig.editable&&"shop"===e.getUser.roleLevel||!e.hasAuthDel?e._e():i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleDeleteClick(a,t.row)}}},[e._v("删除")])],1)]}},{key:"header",fn:function(){return[i("div",{staticClass:"custom-header"},[i("div",[e._v("操作")]),i("i",{staticClass:"el-icon-setting",on:{click:e.onCustomColumns}})])]},proxy:!0}])})],2),i("div",{attrs:{slot:"float"},slot:"float"},[i("right-popup",{ref:"popup",attrs:{open:e.open,itemId:e.itemId,isAssets:!1,isEdit:e.flag,storeId:e.storeId},on:{close:function(t){e.open=!1},operationSuccess:e.handlePopupSuccess}})],1),i("el-dialog",{attrs:{visible:e.dialogVisible,title:"分配顾问"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.adminId,callback:function(t){e.adminId=t},expression:"adminId"}},e._l(e.consultantList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirm}},[e._v("确 定")])],1)],1),i("biz-columns",{attrs:{visible:e.columnsSettingVisible,tableId:e.tableId},on:{"update:visible":function(t){e.columnsSettingVisible=t},update:e.getColumns}})],1)},r=[],o=(a("99af"),a("4160"),a("caad"),a("c975"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("25eb"),a("d3b7"),a("ac1f"),a("2532"),a("5319"),a("159b"),a("5530")),n=a("b85c"),l=a("04d3"),s=a("ccf0"),c=a("46b7"),d=a("c596"),u=a("1ab1"),m=a("c466"),f=a("2f62"),p=a("443b"),h={data:{editShopIds:[],storeId:[],isEdit:!0,dialogVisible:!1,adminId:""},methods:{queryShopList:function(){var e=this;u["a"].get(d["o"].mainPage.shopList,{shopId:window.top.SHOP_ID||"",sourceType:"5"}).then((function(t){var a=t.shops;a.map((function(e){e.value=e.id,e.label=e.name})),a.unshift({value:"",label:"全部"}),e.$set(e.filters[1],"options",a)})).catch((function(e){console.log(e)}))},isContained:function(e,t){for(var a=!1,i=0;i<t.length;i++)-1!==e.indexOf(t[i].id)&&(a=!0);return a},getConsultant:function(){var e=this;this.loading=!0,u["a"].post("/admin/common/roleAdmins.jhtml",{roleTypes:["afterSaleAdmin","afterSale"]}).then((function(t){e.filters[4].options=[{label:"全部",value:""},{label:"未分配",value:"-1"}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}}))),e.consultantList=t.dataList.map((function(e){return{label:e.name,value:e.id}}))})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1}))},getEditableStores:function(){var e=this;u["a"].get(d["j"].editableStores,{resourceType:"5"}).then((function(t){e.editShopIds=[],t.dataList.map((function(t){e.editShopIds.push(t.id)}))})).catch((function(e){console.log(e),console.log("code错误")}))}},events:{handleOperate:function(e){this[e]()}}},g={data:{loading:!1,curTagName:"",tableData:[],flag:!0,showRecommend:!1,consultantList:[],operations:[{label:"新增",name:"add",type:"primary",disabled:!1,auth:["admin:member.add"]},{label:"删除",name:"delete",type:"",disabled:!0,auth:["admin:member.delete"]},{label:"刷新",name:"refreshList",type:""},{label:"模板下载",name:"download",type:"",auth:["admin:member.import"]},{label:"分配",name:"distribute",type:"",auth:["admin:member.distribution"]}],filters:[{type:"select",label:"状态",name:"state",value:"",class:"hidden",options:[{value:"",label:"全部"},{value:"0",label:"停用"},{value:"1",label:"启用"}]},{type:"select",label:"店铺名称",name:"shopName",value:"",class:"hidden",options:[]},{type:"cascader",label:"会员标签",name:"memberTag",changeOnSelect:!1,filterable:!1,value:[""],class:"hidden",options:[]},{type:"select",label:"挪车码",name:"moveCarCode",value:"",class:"hidden",options:[{label:"全部",value:""},{label:"未发放",value:"0"},{label:"已发放",value:"1"}]},{type:"select",label:"专属顾问",name:"consultant",value:"",class:"hidden",options:[]},{type:"input",label:"",placeholder:"请输入姓名/手机号/车辆识别代码/车牌号",name:"searchValue",value:""}],pagination:{pageSize:20,currentPage:1,total:0},sortInfo:{}},methods:{getQueryParams:function(){return{shopId:window.top.SHOP_ID||"",moveCarCode:this.filters[3].value,state:this.filters[0].value,searchShopId:this.filters[1].value,tag:this.curTagName,searchValue:this.filters[5].value,consultantId:this.filters[4].value,orderProperty:this.sortInfo.column,orderDirection:this.sortInfo.sort,pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage}},getKpi:function(){var e=this;u["a"].get("/admin/member/queryNavigationKpi.jhtml",{}).then((function(t){var a="共有会员"+t.data.memberCount+"人，今日新增"+t.data.memberInsCount+"人，您可在此页查看/编辑其基础信息;";e.$message({customClass:"motorists-club-activity__kpi",showClose:!0,message:a,duration:3e3})})).catch((function(e){}))},query:function(){var e=this;this.loading=!0;var t=this.getQueryParams();u["a"].get(d["o"].mainPage.list,t).then((function(t){e.tableData=t.content,e.$set(e.pagination,"total",Number.parseInt(t.total))})).catch((function(t){console.log(t),console.log("code错误"),"店铺不存在"!==t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))},refresh:function(){this.query()},refreshList:function(){this.query()},distribute:function(){this.selections&&this.selections.length>0?this.dialogVisible=!0:this.$message("请选择一条数据")},confirm:function(){var e=this,t=[];this.selections.forEach((function(e){t.push(e.id)})),this.adminId?u["a"].put("/admin/member/distribute.jhtml",{adminId:this.adminId,ids:t}).then((function(t){"{}"===JSON.stringify(t.unDistributed)?(e.dialogVisible=!1,e.$message.success("分配成功"),e.refresh()):e.$message.warning("分配失败")})).catch((function(t){"店铺不存在"!==t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){})):this.$message.warning("请选择分配顾问")},getTagClassList:function(){var e,t=this,a={categoryType:"会员标签",isIncludeTag:"1"};"platform"===this.getUser.roleLevel?e=d["x"].platformTagcategories:"shop"===this.getUser.roleLevel&&(e=d["x"].storeTagcategories,a.shopId=window.top.SHOP_ID||""),u["a"].get(e,a).then((function(e){var a=e.content,i=[{label:"全部",value:""}];i=i.concat(w(a)),t.filters[2].options=i,t.filters[2].value=[""]})).catch((function(e){"店铺不存在"!==e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){}))},cascaderChange:function(e){var t=this,a="";this.pagination.currentPage=1,0===e.length?(this.curTagName="",this.filters[2].value=[],this.refresh()):(this.curTagName=e[e.length-1].id,e.length>1&&!this.curTagName?(a=e[e.length-2].id,u["a"].get("/admin/tag/storeTags.jhtml",{tagCategoryId:a}).then((function(e){var a=[];e.content.map((function(e){a.push(e.id)})),t.curTagName=a.join(","),t.refresh()})).catch((function(e){"店铺不存在"!==e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){}))):this.refresh())}},events:{handlePageSizeChange:function(e){this.pagination.pageSize=e,this.pagination.currentPage=1,this.query()},handleCurrentPageChange:function(e){this.pagination.currentPage=e,this.query()},handleSelectionChange:function(e){this.selections=e,this.operations.map((function(e){"delete"===e.name&&(e.disabled=!0)})),e.length>0&&this.operations.map((function(e){"delete"===e.name&&(e.disabled=!1)}))},handleFilterDataChange:function(){this.pagination.currentPage=1,this.query()},handleRowClick:function(e,t,a){this.open=!0,this.flag=!0,this.storeId=e.shops,this.isEdit&&"0"!==e.unionConfig.editable?this.flag=!0:this.flag=!1,this.$nextTick((function(){this.itemId={id:String(e.id),userId:String(e.id)}}))},handleSortChange:function(e){console.log("column",e),this.sortInfo={column:"lastLoginDate"===e.prop?"loginDate":e.prop,sort:e.order?"ascending"===e.order?"asc":"desc":void 0},this.query()}}},b={data:{},methods:{isShow:function(){this.showRecommend?(this.filters[0].class="hidden",this.filters[1].class="hidden",this.filters[2].class="hidden",this.filters[3].class="hidden",this.filters[4].class="hidden"):(this.filters[0].class="show",this.filters[1].class="show",this.filters[2].class="show",this.filters[3].class="show",this.filters[4].class="show"),this.showRecommend=!this.showRecommend},deleteItem:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,u["a"].delete(d["o"].mainPage.delete,{ids:e}).then((function(e){t.$message.success("删除成功"),t.query()})).catch((function(e){console.log(e),console.log("code错误"),"店铺不存在"!==e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){t.loading=!1}))}))},delete:function(){if(this.selections&&this.selections.length>0){var e=[];this.selections.forEach((function(t){e.push(t.id)})),this.deleteItem(e)}else this.$message("请选择一条数据")},add:function(){this.$refs.popup.tabSelection="0",this.open=!0,this.isEdit=!0,this.itemId={id:""}},switchState:function(e,t){var a=this;this.loading=!0;var i={ids:e,state:t};u["a"].post(d["o"].mainPage.switchState,i).then((function(e){a.$message.success("0"===t?"停用成功":"启用成功"),a.query()})).catch((function(e){console.log(e),console.log("code错误"),"店铺不存在"!==e.errorMessage&&a.$message.warning(e.errorMessage)})).finally((function(){a.loading=!1}))}},events:{handleRouterPush:function(e,t){e.stopPropagation(),this.$router.push({name:this.$route.params.isSys?"tag-group-all-mgmt":"tag-group-mgmt",params:{isSys:"isSys",classId:t.id}})},handleDriveClick:function(e,t){e.stopPropagation(),this.driveItem(t.id)},handleSignClick:function(e,t){e.stopPropagation(),this.signItem(t.id)},handleFailClick:function(e,t){e.stopPropagation(),this.failItem(t.id)},handleStartClick:function(e,t){this.switchState([t.id],"1")},handleStopClick:function(e,t){this.switchState([t.id],"0")},handleDeleteClick:function(e,t){e.stopPropagation(),this.deleteItem([t.id])}}},v={stateConverter:function(e){return"0"===e.enableState?"停用":"1"===e.enableState?"启用":"--"},createDateConverter:function(e){if(!e.createDate)return"";e.createDate=e.createDate.replace(/-/g,"/");var t=new Date(e.createDate);return m["a"].dateConverter(t)},loginDateConverter:function(e){if(!e.lastLoginDate)return"--";e.lastLoginDate=e.lastLoginDate.replace(/-/g,"/");var t=new Date(e.lastLoginDate);return m["a"].dateConverter(t)}},y={data:{importResult:[],importLoading:!1,total:0,count:0,t:"",percentage:0,stepkey:"",loading:!1,disabled:!1},methods:{},beforeDestroy:function(){this.t&&window.clearTimeout(this.t)},events:{download:function(){window.open("/upload/mode/V%E6%9C%8D%E7%88%B1%E8%BD%A6_%E4%BC%9A%E5%91%98%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx")},clearTimeOut:function(){window.clearTimeout(this.t)},restProcess:function(){this.total=0,this.count=0,this.stepkey="",this.percentage=0},handleImport:function(){var e=this,t="/admin/member/importProgress.jhtml";u["a"].get(t,{}).then((function(t){t.data.total||(e.total=0,e.count=0,e.stepkey="",e.percentage=0),t.data.total&&(e.total=Number(t.data.total||0),e.count=Number(t.data.count||0),e.stepkey=t.data.remark,e.percentage=Number(t.data.rate),e.$refs.importFile.title=t.data.title),t.data&&t.data.rate&&"100"===t.data.rate?(e.clearTimeOut(),e.$refs.importFile.showCurrentInfo=!1,e.$refs.importFile.title="导入完成",t.data&&t.data.results&&t.data.results.length>0&&(e.importResult=t.data.results,e.$refs.importFile.uploadingVisible=!1,e.$refs.importFile.importingVisible=!0),e.disabled=!1):t.data&&t.data.rate&&"100"!==t.data.rate&&(e.t&&e.clearTimeOut(),e.t=setTimeout(e.handleImport,2e3),e.$refs.importFile.uploadingVisible=!0,e.$refs.importFile.showCurrentInfo=!0,e.disabled=!0)})).catch((function(e){console.log(e),console.log("code错误")}))}}},M={data:{open:!1,itemId:{id:""}},methods:{},events:{handlePopupClose:function(){this.open=!1},handlePopupSuccess:function(e){this.open=!1,this.query()}}},w=function e(t){var a,i=[],r=Object(n["a"])(t);try{for(r.s();!(a=r.n()).done;){var o=a.value,l={value:{name:o.name,id:o.id},label:o.name};if(o.children.length>0&&(l.children=e(o.children)),o.tags&&o.tags.length>0){l.hasOwnProperty("children")||(l.children=[]),l.children=l.children.concat([{label:"全部",value:""}]);var s,c=C(o.tags),d=Object(n["a"])(c);try{for(d.s();!(s=d.n()).done;){var u=s.value;l.children.push(u)}}catch(m){d.e(m)}finally{d.f()}}0!==o.children.length||o.tags||(l.disabled=!0),i.push(l)}}catch(m){r.e(m)}finally{r.f()}return i},C=function(e){var t,a=[],i=Object(n["a"])(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;a.push({label:r.name,value:{name:r.name,id:r.id}})}}catch(o){i.e(o)}finally{i.f()}return a},I={name:"MembershipMgmt",components:{BizFlexTable:l["c"],ImportFile:s["b"],RightPopup:c["a"]},props:{},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(f["c"])("Authority",["currentAuth"])),{},{hasAuthDel:function(){return this.currentAuth.includes("admin:member.delete")},hasAuthImport:function(){return this.currentAuth.includes("admin:member.import")},tableDataHandle:function(){var e=this.tableData;return e.forEach((function(e){e.shopTags&&(e.shopTagsNew=[],e.shopTags.forEach((function(t,a){a<3&&(e.shopTags.length>1&&e.shopTags.length,e.shopTagsNew.push(t))})))})),e}},Object(f["c"])(["getUser"])),{},{toggleRecommendTxt:function(){var e=this.showRecommend;return e?"收起":"筛选"}}),data:function(){return Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({tableId:"6"},h.data),g.data),y.data),M.data)},mixins:[p["a"]],methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({getWidth:function(e){switch(e.id){case"1":return"180";case"3":return"120";case"4":return"120";case"":return"120";default:return""}},getSortable:function(e){switch(e.id){case"5":return"custom";default:return!1}},getProp:function(e){switch(e.id){case"5":return"lastLoginDate";default:return""}}},h.methods),h.events),g.methods),g.events),b.methods),b.events),y.methods),y.events),M.methods),M.events),v),created:function(){this.$set(this.filters[5],"value",this.$route.query.mobile),this.query(),this.queryShopList(),this.handleImport(),this.getKpi(),this.getEditableStores(),this.getTagClassList(),this.getConsultant()},mounted:function(){this.filters[0].value="",this.filters[1].value="",this.filters[2].value=[],this.filters[3].value=""}},S=I,O=(a("d0c3"),a("2877")),T=Object(O["a"])(S,i,r,!1,null,null,null);t["default"]=T.exports},"757a":function(e,t,a){},"78a1":function(e,t,a){},"7ad4":function(e,t,a){},"7d7b":function(e,t,a){e.exports=a.p+"static/img/icon_vip.446f6042.png"},"7f45":function(e,t,a){},"92a6":function(e,t,a){"use strict";var i=a("2497"),r=a("bc3a"),o=a.n(r),n=a("c596");t["a"]={query:function(e,t,a){o.a.get(n["g"].vehicleMgmt.VehicleElecFence_query,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryRule:function(e,t,a){o.a.get(n["g"].vehicleMgmt.VehicleElecFence_fence,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},deleteRule:function(e,t,a){o.a.delete(n["g"].vehicleMgmt.VehicleElecFence_fence,{data:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},updateRule:function(e,t,a){o.a.put(n["g"].vehicleMgmt.VehicleElecFence_fence,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},addRule:function(e,t,a){o.a.post(n["g"].vehicleMgmt.VehicleElecFence_fence,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))}}},"9b1a":function(e,t,a){"use strict";var i=a("cc00"),r=a.n(i);r.a},"9de1":function(e,t,a){"use strict";var i=a("7f45"),r=a.n(i);r.a},"9ecb":function(e,t,a){},a9e3:function(e,t,a){"use strict";var i=a("83ab"),r=a("da84"),o=a("94ca"),n=a("6eeb"),l=a("5135"),s=a("c6b6"),c=a("7156"),d=a("c04e"),u=a("d039"),m=a("7c73"),f=a("241c").f,p=a("06cf").f,h=a("9bf2").f,g=a("58a8").trim,b="Number",v=r[b],y=v.prototype,M=s(m(y))==b,w=function(e){var t,a,i,r,o,n,l,s,c=d(e,!1);if("string"==typeof c&&c.length>2)if(c=g(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(o=c.slice(2),n=o.length,l=0;l<n;l++)if(s=o.charCodeAt(l),s<48||s>r)return NaN;return parseInt(o,i)}return+c};if(o(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var C,I=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof I&&(M?u((function(){y.valueOf.call(a)})):s(a)!=b)?c(new v(w(t)),a,I):w(t)},S=i?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;S.length>O;O++)l(v,C=S[O])&&!l(I,C)&&h(I,C,p(v,C));I.prototype=y,y.constructor=I,n(r,b,I)}},af3f:function(e,t,a){"use strict";var i=a("697f");t["a"]=i["a"]},b151:function(e,t,a){},b547:function(e,t,a){},b84c:function(e,t,a){},baa5:function(e,t,a){var i=a("23e7"),r=a("e58c");i({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},bea5:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"membership-mgmt__vehicle-info"},[e.isEdit?a("biz-header",{attrs:{operations:e.operations},on:{operate:e.handleOperate}}):e._e(),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"85%",size:"small"},on:{"selection-change":e.handleSelectionChange,"row-click":e.handleRowClick}},[a("biz-empty-table",{attrs:{slot:"empty"},slot:"empty"}),a("el-table-column",{attrs:{prop:"plateNumber",label:"车牌号"}}),a("el-table-column",{attrs:{prop:"type",label:"车型"}}),a("el-table-column",{attrs:{prop:"engineNumber",label:"发动机号"}}),a("el-table-column",{attrs:{prop:"vin",label:"车辆识别代号","min-width":"120"}}),e.ishandler?a("el-table-column",{attrs:{prop:"title",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.rowDeleteClickHandler(a,t.row)}}},[e._v(" 删除 ")]):e._e(),e.isEdit?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleRowClick(a,t.row)}}},[e._v(" 编辑 ")]):e._e()]}}],null,!1,1370604828)}):e._e()],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showForm,expression:"showForm"}],staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[e.isEdit?a("biz-save-button",{attrs:{operations:e.formOperations},on:{operate:e.handleOperate}}):e._e(),e.isEdit?a("vehicle-base-info-content",{ref:"baseInfo",attrs:{itemId:e.formId,memberId:e.itemId},on:{operationSuccess:e.handleOperationSuccess}}):e._e()],1)],1)},r=[],o=(a("4160"),a("d3b7"),a("159b"),a("5530")),n=a("8330"),l=a("04d3"),s=a("f36f"),c=a("dcc1"),d=a("c596"),u=a("1ab1"),m=a("3193"),f={data:{loading:!1,ishandler:!0,show:!0,operations:[{label:"新增",name:"add",type:"primary"}]},methods:{getQueryParams:function(){return{shopId:window.top.SHOP_ID||"",userId:this.itemId.id,pageSize:100,pageNumber:1}},query:function(){var e=this;this.loading=!0,u["a"].get(d["o"].vehicleInfo.list,this.getQueryParams()).then((function(t){e.tableData=t.ownCars,e.showForm=!1,e.show=!0})).catch((function(t){console.log(t),console.log("code错误"),t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))},add:function(){this.show=!1,this.initForm()},delete:function(){if(this.selections&&this.selections.length>0){var e=[];this.selections.forEach((function(t){e.push(t.id)})),this.deleteItem(e)}else this.$message("请选择一条数据")}},events:{handleOperate:function(e){this[e]()}}},p={data:{tableData:[],selections:[]},methods:{deleteItem:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0;var a={ids:e};u["a"].post(d["o"].vehicleInfo.delete,a).then((function(e){t.$message.success("删除成功"),t.query()})).catch((function(e){console.log(e),console.log("code错误"),e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){t.loading=!1}))}))}},events:{rowDeleteClickHandler:function(e,t){e.stopPropagation(),this.deleteItem([t.id])},handleRowClick:function(e){this.initForm(e)},handleSelectionChange:function(e){this.operations[1].disabled=!0,e.length>0&&(this.operations[1].disabled=!1),this.selections=e}}},h={data:{showForm:!1,formId:{id:""},formOperations:[{label:"取消",name:"cancelForm"},{label:"保存",name:"saveForm",type:"primary"}]},methods:{initForm:function(e){this.formId=e?{id:e.id}:{id:""},this.showForm=!0},cancelForm:function(){this.showForm=!1,this.show=!0},saveForm:function(){var e=this,t=this.$refs.baseInfo.getSaveParams();t.userId=this.itemId.id,t.carSales=this.$refs.baseInfo.getSaveParams().carSalesData,t.carQualityAssurance=this.$refs.baseInfo.getSaveParams().carQualityAssurance,t.car={id:t.id,plateNumber:t.plateNumber,brand:t.brand,series:t.series,type:t.type,shop:t.shop,state:t.state,onTime:t.onTime,isCV:t.isCV,trafficControl:t.trafficControl,remarks:t.remarks,drivingRange:t.drivingRange,carshipId:t.carshipId,vin:t.vin,engineNumber:t.engineNumber,bodyColor:t.bodyColor,plateColor:t.plateColor,fuelGrade:t.fuelGrade,transmissionType:t.transmissionType,dischargeStandard:t.dischargeStandard,productionTime:t.productionTime,terminals:t.terminals,carLicense:t.carLicense},this.formId.id&&u["a"].post(d["o"].vehicleInfo.update,t).then((function(t){e.$message.success("保存成功"),e.query()})).catch((function(t){console.log(t),console.log("code错误"),t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1})),!this.formId.id&&u["a"].post(d["o"].vehicleInfo.add,t).then((function(t){e.$message.success("保存成功"),e.query()})).catch((function(t){console.log(t),console.log("code错误"),t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))}},events:{handleOperationSuccess:function(){this.query()}}},g={name:"MembershipMgmtVehicleInfo",components:{BizHeader:l["d"],BizGrid:s["a"],BizSaveButton:n["a"],VehicleBaseInfoContent:m["a"],BizEmptyTable:c["a"]},props:{itemId:{type:Object,default:function(){return{id:""}}},isEdit:{type:Boolean,default:function(){return!0}},alertId:{type:Object,default:function(){return{id:""}}}},data:function(){return Object(o["a"])(Object(o["a"])(Object(o["a"])({},f.data),p.data),h.data)},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},f.methods),f.events),p.methods),p.events),h.methods),h.events),watch:{itemId:function(e,t){e.id&&this.query()},alertId:function(e){e.id&&this.getCallbackInfo(e)}},created:function(){this.itemId.id&&this.query()}},b=g,v=(a("9de1"),a("2877")),y=Object(v["a"])(b,i,r,!1,null,null,null);t["a"]=y.exports},c162:function(e,t,a){},c20d:function(e,t,a){var i=a("da84"),r=a("58a8").trim,o=a("5899"),n=i.parseInt,l=/^[+-]?0[Xx]/,s=8!==n(o+"08")||22!==n(o+"0x16");e.exports=s?function(e,t){var a=r(String(e));return n(a,t>>>0||(l.test(a)?16:10))}:n},c365:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vehicle-mgmt-vehicle__people-picker"},[i("el-input",{attrs:{placeholder:"请选择用户",readonly:"readonly"},model:{value:e.value[e.contentField],callback:function(t){e.$set(e.value,e.contentField,t)},expression:"value[contentField]"}},[i("el-button",{staticClass:"el-icon-circle-plus-outline",staticStyle:{color:"#fa9f33",padding:"10px"},attrs:{slot:"append",type:"primary"},on:{click:e.addMember},slot:"append"}),i("el-button",{staticClass:"iconfont biz-icon-man",staticStyle:{padding:"2px 10px",color:"#fa9f33"},attrs:{slot:"append",type:"primary"},on:{click:e.clickHandler},slot:"append"})],1),i("el-dialog",{attrs:{title:"添加所有者",visible:e.dialogVisible,width:"50%",appendToBody:!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"dialogFormModel",attrs:{model:e.formMember,"label-width":"120px",size:"small",rules:e.dialogRules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[i("el-input",{attrs:{placeholder:"请输入手机号，如1888888888"},on:{blur:e.mobileBlur},model:{value:e.formMember.mobile,callback:function(t){e.$set(e.formMember,"mobile",t)},expression:"formMember.mobile"}})],1),i("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[i("el-input",{attrs:{placeholder:"请输入用户名，如1888888888"},model:{value:e.formMember.userName,callback:function(t){e.$set(e.formMember,"userName",t)},expression:"formMember.userName"}})],1),i("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[i("el-input",{attrs:{placeholder:"请输入昵称，如1888888888"},model:{value:e.formMember.nickname,callback:function(t){e.$set(e.formMember,"nickname",t)},expression:"formMember.nickname"}})],1),i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入姓名，如张三"},model:{value:e.formMember.name,callback:function(t){e.$set(e.formMember,"name",t)},expression:"formMember.name"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{type:"text",placeholder:"请输入密码"},model:{value:e.formMember.password,callback:function(t){e.$set(e.formMember,"password",t)},expression:"formMember.password"}})],1),i("el-form-item",{attrs:{label:"性别",prop:"gender"}},[i("el-radio-group",{model:{value:e.formMember.gender,callback:function(t){e.$set(e.formMember,"gender",t)},expression:"formMember.gender"}},[i("el-radio",{attrs:{label:"0"}},[e._v("男")]),i("el-radio",{attrs:{label:"1"}},[e._v("女")]),i("el-radio",{attrs:{label:"2"}},[e._v("保密")])],1)],1),i("el-form-item",{attrs:{label:"车牌号"}},[i("el-input",{attrs:{placeholder:"请输入车牌号，如浙12345"},model:{value:e.formMember.defaultCarInfo.plateNumber,callback:function(t){e.$set(e.formMember.defaultCarInfo,"plateNumber",t)},expression:"formMember.defaultCarInfo.plateNumber"}})],1),i("el-form-item",{attrs:{label:"品牌"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择，如宝马",filterable:""},on:{change:e.brandChange},model:{value:e.formMember.defaultCarInfo.brand,callback:function(t){e.$set(e.formMember.defaultCarInfo,"brand",t)},expression:"formMember.defaultCarInfo.brand"}},e._l(e.brandData,(function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),i("el-form-item",{attrs:{label:"系列"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择，如宝马3系",filterable:""},on:{change:e.seriesChange},model:{value:e.formMember.defaultCarInfo.series,callback:function(t){e.$set(e.formMember.defaultCarInfo,"series",t)},expression:"formMember.defaultCarInfo.series"}},e._l(e.seriesData,(function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),i("el-form-item",{attrs:{label:"车型"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择，如宝马3系2016款"},model:{value:e.formMember.defaultCarInfo.type,callback:function(t){e.$set(e.formMember.defaultCarInfo,"type",t)},expression:"formMember.defaultCarInfo.type"}},e._l(e.modeData,(function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),i("el-form-item",{attrs:{label:"车辆识别代码"}},[i("el-input",{attrs:{placeholder:"请输入车辆识别代码，如1G1BL52P7TR115520"},model:{value:e.formMember.defaultCarInfo.vin,callback:function(t){e.$set(e.formMember.defaultCarInfo,"vin",t)},expression:"formMember.defaultCarInfo.vin"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.createMember()}}},[e._v("确 定")])],1)],1),i("biz-dialog-selector",{attrs:{slot:"float",visibility:e.showDialog,loading:e.dialogLoading,tableData:e.dialogTableData,pagination:e.dialogPagination,selectionMode:"single",isClear:!1,filters:e.dialogFilters},on:{"update:visibility":function(t){e.showDialog=t},confirmed:e.confirmedHandler,open:e.openedHandler,filterDataChange:e.dialogFilterDataChange,pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange},slot:"float"},[i("el-table-column",{attrs:{prop:"userName",label:"会员信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"customer-info"},[t.row.head?i("img",{attrs:{src:t.row.head}}):i("img",{attrs:{src:a("624d")}}),i("div",{staticClass:"wrapper"},[i("div",{staticClass:"title",attrs:{title:t.row.name}},[e._v(e._s(t.row.name))]),i("div",{staticClass:"gender"},["0"===t.row.gender?i("i",{staticClass:"male iconfont biz-icon-i-web-m"}):e._e(),"1"===t.row.gender?i("i",{staticClass:"female iconfont biz-icon-i-web-f"}):e._e(),"2"===t.row.gender?i("i",{staticClass:"none iconfont biz-icon-i-web-bm"}):e._e(),i("span",[e._v(e._s(t.row.mobile||t.row.contactMobile))])])])])]}}])}),i("el-table-column",{attrs:{prop:"nickname",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("1"===t.row.enableState?"启用":"停用")+" ")]}}])}),i("el-table-column",{attrs:{prop:"nickname",label:"店铺"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.shop.name)+" ")]}}])}),i("el-table-column",{attrs:{prop:"nickname",label:"最后登录"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.lastLoginDate)+" ")]}}])})],1)],1)},r=[],o=(a("b0c0"),a("af3f")),n=a("e4c3"),l=a("0e5e"),s=a("e42c"),c={name:"VehicleMgmtPeoplePicker",components:{BizDialogSelector:o["a"]},model:{prop:"value",event:"input"},props:{value:{type:Object},contentField:{type:String,default:function(){return"name"}}},data:function(){var e=this;return{text:"",showDialog:!1,dialogLoading:!1,dialogTableData:[],dialogPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},dialogFilters:[{type:"input",label:"",placeholder:"请输入姓名/手机号",name:"searchValue",value:""}],dialogVisible:!1,dialogRules:{userName:[{required:!0,trigger:"blur",message:"请输入用户名"},{pattern:/^[0-9a-zA-Z]+$/,message:"用户名只能为数字或字母",trigger:"blur"},{min:4,max:20,message:"长度在4-20位",trigger:"blur"}],mobile:[{required:!0,trigger:"blur",message:"请输入手机号"}],nickname:[{required:!0,trigger:"blur",message:"请输入昵称"}],name:[{required:!0,trigger:"blur",message:"请输入姓名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:20,message:"密码应在6-20位之间",trigger:"blur"}],rePassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{trigger:"blur",validator:function(t,a,i){e.formMember.password===e.formMember.rePassword?i():i(new Error("两次输入密码不一致"))}}]},formMember:{userName:"",mobile:"",name:"",password:"123456",nickname:"",gender:"2",defaultCarInfo:{plateNumber:"",brand:"",series:"",type:"",vin:""}},brandData:[],seriesData:[],brandList:[],seriesList:[],modeData:[]}},methods:{addMember:function(){this.formMember={userName:"",mobile:"",name:"",password:"123456",nickname:"",gender:"2",defaultCarInfo:{plateNumber:"",vin:"",brand:"",series:"",type:""}},this.queryBrandList(),this.getBrandList(),this.dialogVisible=!0},createMember:function(){var e=this;this.$refs.dialogFormModel.validate((function(t,a){t&&s["a"].createMember(e.formMember,(function(t){e.loading=!1,e.$message.success("保存成功"),e.dialogVisible=!1;var a={defaultCarInfo:{id:t.data.defaultCarInfo?t.data.defaultCarInfo.id:"",brand:t.data.defaultCarInfo?t.data.defaultCarInfo.brand:"",plateNumber:t.data.defaultCarInfo?t.data.defaultCarInfo.plateNumber:"",series:t.data.defaultCarInfo?t.data.defaultCarInfo.series:"",type:t.data.defaultCarInfo?t.data.defaultCarInfo.type:""},gender:t.data.gender,id:t.data.id,mobile:t.data.mobile,name:t.data.name,userName:t.data.name};e.$emit("input",a)}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage)}))}))},mobileBlur:function(){this.formMember.id||this.formMember.nickname||this.$set(this.formMember,"nickname",this.formMember.mobile),this.formMember.id||this.formMember.userName||this.$set(this.formMember,"userName",this.formMember.mobile)},brandChange:function(e){this.getSeriesList(e),this.formMember.defaultCarInfo.series="",this.formMember.defaultCarInfo.type=""},seriesChange:function(e){this.getModeList(e),this.formMember.defaultCarInfo.type=""},queryBrandList:function(){var e=this;l["a"].queryBrandList({},(function(t){e.brandList=t.dataList}),(function(e){console.log(e),console.log("code错误")}))},querySeriesList:function(e){var t=this;l["a"].querySeriesList({brand:e},(function(e){t.seriesList=e.dataList?e.dataList:[]}),(function(e){console.log(e),console.log("code错误")}))},getBrandList:function(){var e=this;l["a"].queryBrandList({},(function(t){e.brandData=t.dataList}),(function(e){console.log(e),console.log("code错误")}))},getSeriesList:function(e){var t=this;l["a"].querySeriesList({brand:e},(function(e){t.seriesData=e.dataList}),(function(e){console.log(e),console.log("code错误")}))},getModeList:function(e){var t=this;l["a"].queryTypeList({series:e,brand:this.formMember.defaultCarInfo.brand},(function(e){t.modeData=e.dataList}),(function(e){console.log(e),console.log("code错误")}))},queryPeople:function(e){var t=this;this.dialogLoading=!0,n["a"].queryPeople(e,(function(e){t.dialogTableData=e.content,t.$set(t.dialogPagination,"total",parseInt(e.total)),t.dialogLoading=!1}),(function(e){console.log(e),console.log("code错误")}))},getStatus:function(e){switch(e.enableState){case"0":return"停用";case"1":return"启用"}return""},clickHandler:function(e){this.showDialog=!0},confirmedHandler:function(e,t){var a=t[0];this.text=a.name,this.$emit("input",a)},getDialogQueryParams:function(){return{pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage,searchValue:this.dialogFilters[0].value,shopId:window.top.SHOP_ID||""}},openedHandler:function(){this.dialogPagination.currentPage=1,this.dialogPagination.pageSize=20,this.dialogFilters=[{type:"input",label:"",placeholder:"请输入姓名/手机号",name:"searchValue",value:""}],this.queryPeople(this.getDialogQueryParams())},dialogFilterDataChange:function(e){this.$set(this.dialogPagination,"currentPage",1),this.queryPeople(this.getDialogQueryParams())},dialogPageSizeChange:function(e){this.$set(this.dialogPagination,"pageSize",e),this.queryPeople(this.getDialogQueryParams())},dialogCurrentPageChange:function(e){this.$set(this.dialogPagination,"currentPage",e),this.queryPeople(this.getDialogQueryParams())}}},d=c,u=(a("50c2"),a("2877")),m=Object(u["a"])(d,i,r,!1,null,null,null);t["a"]=m.exports},c466:function(e,t,a){"use strict";a("99af"),a("d3b7"),a("ac1f"),a("25f0"),a("5319");t["a"]={nowDate:function(){var e=new Date,t=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()+1<10?"0"+e.getDate():e.getDate();return e.getFullYear().toString()+"-"+t+"-"+a},getMonthDays:function(e){var t=new Date(Date.parse(e.replace(/-/g,"/"))),a=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth()+1,1),r=(i-a)/864e5;return r},halfYearAgo:function(e){var t="";return t=e?new Date(Date.parse(e.replace(/-/g,"/"))):new Date,console.log(t),t.setMonth(t.getMonth()-6),"".concat(t.getFullYear(),"-").concat(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate())},lastMonthDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1<10?"0"+e.getMonth():e.getMonth(),i=e.getDate()+1<10?"0"+e.getDate():e.getDate();return"00"===a&&(a="12",t--),t.toString()+"-"+a+"-"+i},nextMonthDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),r=parseInt(a)+1;13===r&&(t=parseInt(t)+1,r=1);var o=new Date(t,r,0);return o=o.getDate(),i>o&&(i=o),r<10&&(r="0"+r),t+"-"+r+"-"+i},lastYearDate:function(){var e=new Date,t=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());return t.getFullYear()+"-"+this.convertToFullMode(t.getMonth()+1)+"-"+this.convertToFullMode(t.getDate())},lastTwoYearDate:function(){var e=new Date,t=new Date(e.getFullYear()+2,e.getMonth(),e.getDate());return t.getFullYear()+"-"+this.convertToFullMode(t.getMonth()+1)+"-"+this.convertToFullMode(t.getDate())},lastNYearDate:function(e,t){var a=new Date(e),i=new Date(a.getFullYear()+parseInt(t),a.getMonth(),a.getDate());return i.getFullYear()+"-"+this.convertToFullMode(i.getMonth()+1)+"-"+this.convertToFullMode(i.getDate())},dateConverter:function(e){return e instanceof Date?e.getFullYear()+"-"+this.convertToFullMode(e.getMonth()+1)+"-"+this.convertToFullMode(e.getDate()):e},timeConverter:function(e){return e instanceof Date?this.convertToFullMode(e.getHours())+":"+this.convertToFullMode(e.getMinutes())+":"+this.convertToFullMode(e.getSeconds()):e},shortTimeConverter:function(e){return e instanceof Date?this.convertToFullMode(e.getHours())+":"+this.convertToFullMode(e.getMinutes()):e},dateTimeConverter:function(e){return e instanceof Date?this.dateConverter(e)+" "+this.timeConverter(e):e},convertToFullMode:function(e){return e=e.toString(),1===e.length?"0"+e:e}}},cc00:function(e,t,a){},d05d:function(e,t,a){"use strict";var i=a("9ecb"),r=a.n(i);r.a},d0c3:function(e,t,a){"use strict";var i=a("7ad4"),r=a.n(i);r.a},d158:function(e,t,a){"use strict";var i=a("c162"),r=a.n(i);r.a},de96:function(e,t,a){"use strict";var i=a("3f28"),r=a.n(i);r.a},e0d7:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"membership-mgmt__base-info"},[e.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.handleOperate},slot:"top"}):e._e(),a("el-form",{ref:"form",attrs:{size:"small","label-width":"110px",model:e.formModel,rules:e.rules,disabled:!e.isEdit,":inline-message":!0}},[a("el-collapse",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"baseInfo"}},["1"===e.formModel.memberType?a("div",[e.formModel.photo?a("el-form-item",{attrs:{label:"人像"}},[a("img",{attrs:{src:e.formModel.photo,width:"60px"}})]):e._e(),a("el-form-item",{attrs:{label:"企业名",prop:"enterpriseName"}},[a("el-input",{model:{value:e.formModel.enterpriseName,callback:function(t){e.$set(e.formModel,"enterpriseName",t)},expression:"formModel.enterpriseName"}})],1),a("el-form-item",{attrs:{label:"关联V服店铺",prop:"enterprise"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formModel.enterprise,callback:function(t){e.$set(e.formModel,"enterprise",t)},expression:"formModel.enterprise"}})],1),a("el-form-item",{attrs:{label:"联系人",prop:"contactPerson"}},[a("el-input",{model:{value:e.formModel.contactPerson,callback:function(t){e.$set(e.formModel,"contactPerson",t)},expression:"formModel.contactPerson"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"contactMobile"}},[a("el-input",{model:{value:e.formModel.contactMobile,callback:function(t){e.$set(e.formModel,"contactMobile",t)},expression:"formModel.contactMobile"}})],1)],1):e._e(),"0"===e.formModel.memberType?a("div",[a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{type:"phone",maxlength:"11",placeholder:"请输入手机号"},on:{blur:e.mobileBlur},model:{value:e.formModel.mobile,callback:function(t){e.$set(e.formModel,"mobile",t)},expression:"formModel.mobile"}})],1),a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.formModel.userName,callback:function(t){e.$set(e.formModel,"userName",t)},expression:"formModel.userName"}})],1),a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.formModel.nickname,callback:function(t){e.$set(e.formModel,"nickname",t)},expression:"formModel.nickname"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.formModel.realName,callback:function(t){e.$set(e.formModel,"realName",t)},expression:"formModel.realName"}})],1),e.formModel.id?e._e():a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入6-16位密码"},model:{value:e.formModel.password,callback:function(t){e.$set(e.formModel,"password",t)},expression:"formModel.password"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.formModel.gender,callback:function(t){e.$set(e.formModel,"gender",t)},expression:"formModel.gender"}},[a("el-radio",{attrs:{label:"0"}},[e._v("男")]),a("el-radio",{attrs:{label:"1"}},[e._v("女")]),a("el-radio",{attrs:{label:"2"}},[e._v("保密")])],1)],1),a("el-form-item",{attrs:{label:"出生日期",prop:"birth"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入出生日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.formModel.birth,callback:function(t){e.$set(e.formModel,"birth",t)},expression:"formModel.birth"}})],1),a("el-form-item",{attrs:{label:"挪车码",prop:"moveCarCode"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formModel.moveCarCode,callback:function(t){e.$set(e.formModel,"moveCarCode",t)},expression:"formModel.moveCarCode"}})],1)],1):e._e(),a("el-form-item",{attrs:{label:"专属顾问",prop:"consultant"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择专属顾问"},model:{value:e.formModel.consultant.id,callback:function(t){e.$set(e.formModel.consultant,"id",t)},expression:"formModel.consultant.id"}},e._l(e.consultant,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),"0"===e.formModel.memberType?a("el-form-item",{attrs:{label:"地址"}},[a("biz-area-select",{attrs:{areaId:e.formModel.area.id},on:{areaChanged:e.handleAreaChanged}})],1):e._e(),"1"===e.formModel.memberType?a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:e.formModel.address,callback:function(t){e.$set(e.formModel,"address",t)},expression:"formModel.address"}})],1):e._e(),a("el-form-item",{attrs:{label:"状态",prop:"enableState"}},[a("el-switch",{attrs:{"active-value":"1","inactive-color":"#d9d9d9","active-color":"#87d068","inactive-value":"0"},model:{value:e.formModel.enableState,callback:function(t){e.$set(e.formModel,"enableState",t)},expression:"formModel.enableState"}})],1),e.formModel.id?a("el-form-item",{attrs:{label:"用户来源"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.formModel.userSource,callback:function(t){e.$set(e.formModel,"userSource",t)},expression:"formModel.userSource"}},e._l(e.sourceList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"会员标签"}},[a("div",{staticStyle:{display:"flex","flex-flow":"wrap"}},[e._l(e.formModel.shopTags,(function(t,i){return a("el-popover",{key:i,attrs:{placement:"bottom-end",width:"200",trigger:"hover"}},[a("div",[e._v(" "+e._s("0"===t.hierarchy?"平台级":"1"===t.hierarchy?"店铺级":"2"===t.hierarchy?"运营商级":"3"===t.hierarchy?"模板级":"用户级")+", 来源："+e._s(t.tagCategory?t.tagCategory.fullName:"")+" ")]),a("div",{staticClass:"tag-container",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{staticClass:"member-tag",attrs:{closable:!t.deletable||"0"!==t.deletable},on:{close:function(a){return e.onClose(t)}}},[e._v(" "+e._s(t.name))])],1)])})),a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onClickHandle}},[e._v("+")])],1)],2)])],1),a("el-collapse-item",{attrs:{title:"所属店铺",name:"shopInfo"}},[a("el-table",{attrs:{size:"small",data:e.formModel.shops}},[a("el-table-column",{attrs:{label:"店铺名称",prop:"name"}}),a("el-table-column",{attrs:{label:"详细地址",prop:"address"}}),a("el-table-column",{attrs:{label:"销售电话",prop:"mobile"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleDeleteClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-collapse-item",{attrs:{title:"扩展信息",name:"advanceInfo"}},["0"===e.formModel.memberType?a("el-form-item",{attrs:{label:"情感状态",prop:"emotionalState"}},[a("el-select",{attrs:{clearable:""},model:{value:e.formModel.emotionalState,callback:function(t){e.$set(e.formModel,"emotionalState",t)},expression:"formModel.emotionalState"}},e._l(e.emotionalStateList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"0"===e.formModel.memberType?a("el-form-item",{attrs:{label:"家庭身份",prop:"familialIdentity"}},[a("el-select",{attrs:{clearable:""},model:{value:e.formModel.familialIdentity,callback:function(t){e.$set(e.formModel,"familialIdentity",t)},expression:"formModel.familialIdentity"}},e._l(e.familialIdentityList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"0"===e.formModel.memberType?a("el-form-item",{attrs:{label:"社会身份",prop:"socialIdentity"}},[a("el-select",{attrs:{clearable:""},model:{value:e.formModel.socialIdentity,callback:function(t){e.$set(e.formModel,"socialIdentity",t)},expression:"formModel.socialIdentity"}},e._l(e.socialIdentityList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"0"===e.formModel.memberType?a("el-form-item",{attrs:{label:"学历",prop:"education"}},[a("el-select",{attrs:{clearable:""},model:{value:e.formModel.education,callback:function(t){e.$set(e.formModel,"education",t)},expression:"formModel.education"}},e._l(e.educationList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"0"===e.formModel.memberType?a("el-form-item",{attrs:{label:"收入状况",prop:"incomeState"}},[a("el-select",{attrs:{clearable:""},model:{value:e.formModel.incomeState,callback:function(t){e.$set(e.formModel,"incomeState",t)},expression:"formModel.incomeState"}},e._l(e.incomeStateList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!!e.formModel.id,expression:"!!formModel.id"}],attrs:{label:"创建日期",prop:"name"}},[a("span",{staticClass:"form-static"},[e._v(e._s(e.formModel.createDate))])]),"0"===e.formModel.memberType?a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!!e.formModel.id,expression:"!!formModel.id"}],attrs:{label:"最后登录地址",prop:"name"}},[a("span",{staticClass:"form-static"},[e._v(e._s(e.formModel.loginAddress||e.formModel.lastLoginIp))])]):e._e(),"0"===e.formModel.memberType?a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!!e.formModel.id,expression:"!!formModel.id"}],attrs:{label:"最后登录日期",prop:"name"}},[a("span",{staticClass:"form-static"},[e._v(e._s(e.formModel.lastLoginDate))])]):e._e()],1)],1),a("el-dialog",{staticClass:"member-ship-info",attrs:{title:"添加标签",visible:e.showSelecTags,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.showSelecTags=t}}},[a("div",{staticClass:"member-ship-select-tag"},[a("div",{staticClass:"tag-type"},[a("div",{staticClass:"handel-name"},[e._v("标签种类")]),a("el-cascader",{attrs:{options:e.tagTypeOptions},on:{change:e.tagTypeChange},model:{value:e.tagClass,callback:function(t){e.tagClass=t},expression:"tagClass"}})],1),a("div",{staticClass:"tag-type"},[a("div",{staticClass:"handel-name"},[e._v("标签")]),a("el-cascader",{attrs:{options:e.tagOptions},on:{change:e.tagChange},model:{value:e.selectTag,callback:function(t){e.selectTag=t},expression:"selectTag"}})],1)]),a("biz-save-button",{attrs:{slot:"footer",operations:e.tagOperations},on:{operate:e.tagOperate},slot:"footer"})],1)],1)],1)},r=[],o=(a("4160"),a("c975"),a("d81d"),a("45fc"),a("a434"),a("b0c0"),a("d3b7"),a("159b"),a("5530")),n=a("b85c"),l=a("f36f"),s=a("8330"),c=a("ce2e"),d=a("0e5e"),u=a("c596"),m=a("1ab1"),f=a("c466"),p=a("2f62"),h={data:{activeTab:["baseInfo"],emotionalStateList:[{value:"0",label:"单身贵族"},{value:"1",label:"热恋期"},{value:"2",label:"有家室"}],familialIdentityList:[{value:"0",label:"宝妈"},{value:"1",label:"宝爸"},{value:"2",label:"我还是个宝宝"}],socialIdentityList:[{value:"0",label:"白领"},{value:"1",label:"蓝领"},{value:"2",label:"在校学生"},{value:"3",label:"自由职业"},{value:"4",label:"创业者"},{value:"5",label:"农民"},{value:"6",label:"无业游民"}],educationList:[{value:"0",label:"高中及以下"},{value:"1",label:"专科"},{value:"2",label:"本科"},{value:"3",label:"研究生"},{value:"4",label:"博士生"}],incomeStateList:[{value:"0",label:"入不敷出"},{value:"1",label:"收支平衡"},{value:"2",label:"小康家庭"},{value:"3",label:"富裕家庭"},{value:"4",label:"财务自由"}],tagClass:[],memberTags:[],showSelecTags:!1,brandList:[],seriesList:[],modeList:[],tagTypeOptions:[],tagOptions:[],selectTag:[],arryList:[],tagOperations:[{label:"取消",name:"cancel"},{label:"确认选择",name:"confirm",type:"primary"}],operations:[{label:"保存",name:"save",type:"primary"}],consultant:[],areaId:"1568",sourceList:[{value:"0",label:"推荐注册"},{value:"1",label:"潜客转化"},{value:"2",label:"正常注册"},{value:"3",label:"后台创建"},{value:"4",label:"其他"}]},events:{handleOperate:function(e){this[e]()},tagOperate:function(e){this[e]()}},methods:{}},g=function(){return{gender:"2",enableState:"1",password:"123456",area:{id:"1568"},consultant:{id:""},areaId:"1568",shopTags:[],memberType:"0",enterpriseName:"",enterprise:"",contactPerson:"",contactMobile:"",defaultCarInfo:{plateNumber:"",brand:"",series:"",type:"",vin:""},moveCarCode:"",emotionalState:"",familialIdentity:"",socialIdentity:"",education:"",incomeState:""}},b={data:{loading:!1,formModel:g(),pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}},events:{handleAreaChanged:function(e){console.log(222),this.formModel.area.id=e}},methods:{mobileBlur:function(){this.formModel.id||this.formModel.nickname||this.$set(this.formModel,"nickname",this.formModel.mobile),this.formModel.id||this.formModel.userName||this.$set(this.formModel,"userName",this.formModel.mobile),this.$refs.form.clearValidate()},handleDeleteClick:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,m["a"].delete("/admin/member/relateShop.jhtml",{shopId:e.id,id:t.itemId.id}).then((function(a){t.formModel.shops.splice(t.formModel.shops.indexOf(e),1),t.$message.success("删除成功")})).catch((function(e){console.log(e),console.log("code错误"),"店铺不存在"!==e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){t.loading=!1}))}))},handleBrandChange:function(e){this.querySeriesList(e),this.formModel.defaultCarInfo.series="",this.formModel.defaultCarInfo.type=""},handleSeriesChange:function(e){this.queryTypeList(e),this.formModel.defaultCarInfo.type=""},querySeriesList:function(e){var t=this;d["a"].querySeriesList({brand:e},(function(e){t.seriesList=e.dataList?e.dataList:[]}),(function(e){console.log(e),console.log("code错误")}))},queryBrandList:function(){var e=this;d["a"].queryBrandList({},(function(t){e.brandList=t.dataList}),(function(e){console.log(e),console.log("code错误")}))},queryTypeList:function(e){var t=this;d["a"].queryTypeList({series:e,brand:this.formModel.defaultCarInfo.brand},(function(e){t.modeList=e.dataList?e.dataList:[]}),(function(e){console.log(e),console.log("code错误")}))},cancel:function(){this.showSelecTags=!1},confirm:function(){var e;if(this.selectTag.length)if(e=this.selectTag[this.selectTag.length-1],this.containsSameTag(e))this.$message.warning("该标签已存在，请重新选择");else{var t,a,i="",r=Object(n["a"])(this.tagTypeOptions);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(2===this.tagClass.length){if(o.children){var l,s=Object(n["a"])(o.children);try{for(s.s();!(l=s.n()).done;){var c=l.value;this.tagClass[0]===o.value&&this.tagClass[1]===c.value&&(i="会员标签/"+o.label+"/"+c.label)}}catch(u){s.e(u)}finally{s.f()}}}else this.tagClass[0]===o.value&&(i="会员标签/"+o.label)}}catch(u){r.e(u)}finally{r.f()}this.arryList.map((function(a){a.name===e&&(t={id:a.id,name:a.name,hierarchy:a.hierarchy,tagCategory:{fullName:i}})})),this.showSelecTags=!1;var d=this.formModel.shopTags.some((function(e){if(e.name===t.name)return!0}));d||this.formModel.shopTags.push(t)}},onClickHandle:function(){this.showSelecTags=!0,this.selectTag=[],this.tagClass=[]},initModel:function(e){e?(this.formModel=Object.assign(this.getDefaultModel(),e),this.$set(this.formModel,"password",""),this.areaId=this.formModel.area.id||"1568"):this.resetModel()},resetModel:function(){this.formModel=this.getDefaultModel(),this.areaId="1568"},getDefaultModel:function(){return g()},query:function(e){var t=this;this.loading=!0;var a=this.itemId.id;e&&(a=e),m["a"].get(u["o"].baseInfo.query,{id:a,shopId:window.top.SHOP_ID||""}).then((function(e){t.initModel(e.memberData),t.checkIfAdmin()})).catch((function(e){console.log(e),console.log("code错误"),"店铺不存在"!==e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){t.loading=!1}))},checkIfAdmin:function(){var e=this;console.log(this.consultant),m["a"].post("/admin/common/roleAdmins.jhtml",{roleTypes:["afterSaleAdmin","afterSale"]}).then((function(t){if(e.consultant=t.dataList,e.formModel.consultant.id){for(var a=!0,i=0;i<e.consultant.length;i++)e.consultant[i].id===String(e.formModel.consultant.id)&&(a=!1);a&&e.consultant.unshift({id:e.formModel.consultant.id,name:e.formModel.consultant.name})}})).catch((function(e){console.log(e),console.log("code错误")})).finally((function(){e.loading=!1}))},getConsultant:function(){var e=this;this.loading=!0,m["a"].post("/admin/common/roleAdmins.jhtml",{roleTypes:["afterSaleAdmin","afterSale"]}).then((function(t){e.consultant=t.dataList})).catch((function(e){console.log(e),console.log("code错误")})).finally((function(){e.loading=!1}))},getSaveParams:function(){return{token:"",shopId:window.top.SHOP_ID||"",consultant:{id:this.formModel.consultant.id},id:this.formModel.id,area:{id:this.formModel.area.id},userName:this.formModel.userName,mobile:this.formModel.mobile,password:this.formModel.password,realName:this.formModel.realName,nickname:this.formModel.nickname,gender:this.formModel.gender,birth:f["a"].dateConverter(this.formModel.birth),enableState:this.formModel.enableState,userSource:this.formModel.userSource,shopTags:this.formModel.shopTags,defaultCarInfo:{plateNumber:this.formModel.defaultCarInfo.plateNumber,brand:this.formModel.defaultCarInfo.brand,series:this.formModel.defaultCarInfo.series,type:this.formModel.defaultCarInfo.type,vin:this.formModel.defaultCarInfo.vin},emotionalState:this.formModel.emotionalState,familialIdentity:this.formModel.familialIdentity,socialIdentity:this.formModel.socialIdentity,education:this.formModel.education,incomeState:this.formModel.incomeState}},containsSameTag:function(e){var t=!1;return this.formModel.shopTags.forEach((function(a){if(e===a)return t=!0,!1})),t},save:function(){var e=this;this.$refs.form.validate((function(t,a){if(!t)return!1;e.loading=!0;var i=function(t){e.$message.success("保存成功"),e.formModel.id||(e.formModel=e.getDefaultModel()),e.$emit("operationSuccess")},r=function(t){console.log(t),console.log("code错误"),e.$message.warning(t.errorMessage),"450"!==t.resultCode&&"1121"!==t.resultCode||e.query(t.memberId)},o=function(t){e.loading=!1},n=e.getSaveParams();e.formModel.id?m["a"].put(u["o"].baseInfo.update,n).then(i).catch(r).finally(o):m["a"].post(u["o"].baseInfo.create,n).then(i).catch(r).finally(o)}))},getTagClassList:function(){var e,t=this,a={categoryType:"会员标签"};"platform"===this.getUser.roleLevel?e=u["g"].systemSetting.platformTagcategories:"shop"===this.getUser.roleLevel&&(e=u["g"].systemSetting.storeTagcategories,a.shopId=window.top.SHOP_ID||""),m["a"].get(e,a).then((function(e){var a,i=e.content;t.tagTypeOptions=[],i.forEach((function(e){a={},a.label=e.name,a.value=e.id,t.tagTypeOptions.push(a),e.children&&e.children.length&&(a.children=[],e.children.forEach((function(e){var t={};t.label=e.name,t.value=e.id,a.children.push(t),e.children&&e.children.length&&(t.children=[],e.children.forEach((function(e){var a={};a.label=e.name,a.value=e.id,t.children.push(a),e.children&&e.children.length&&(a.children=[],e.children.forEach((function(e){var t={};t.label=e.name,t.value=e.id,a.children.push(t)})))})))})))}))})).catch((function(e){"店铺不存在"!==e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){}))},onClose:function(e){for(var t=this.formModel.shopTags,a=t.length,i=0;i<a;i++)if(t[i]===e){t.splice(i,1);break}},tagChange:function(e){console.log(e)},tagTypeChange:function(e){var t,a=this,i=e[e.length-1],r={tagCategoryId:i};"platform"===this.getUser.roleLevel?t=u["g"].systemSetting.getPlatformTags:"shop"===this.getUser.roleLevel&&(t=u["g"].systemSetting.storeTags,r.shopId=window.top.SHOP_ID||""),m["a"].get(t,r).then((function(e){console.log(a.tagTypeOptions),a.tagOptions=[];var t,i=Object(n["a"])(e.content);try{for(i.s();!(t=i.n()).done;){var r=t.value;a.tagOptions.push({value:r.name,label:r.name,hierarchy:r.hierarchy})}}catch(o){i.e(o)}finally{i.f()}a.arryList=e.content,console.log(e)})).catch((function(e){console.warn(e)}))}}},v={name:"MembershipMgmtBaseInfo",components:{BizSaveButton:s["a"],BizGrid:l["a"],BizAreaSelect:c["a"]},data:function(){var e=this;return Object(o["a"])(Object(o["a"])(Object(o["a"])({},h.data),b.data),{},{rules:{userName:[{required:!0,trigger:"blur",message:"请输入用户名"},{pattern:/^[0-9a-zA-Z]+$/,message:"用户名只能为数字或字母",trigger:"blur"},{min:4,max:20,message:"长度在4-20位",trigger:"blur"}],mobile:[{required:!0,trigger:"blur",message:"请输入手机号"},{len:11,message:"手机号位数错误",trigger:"blur"},{pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,message:"手机号格式错误",trigger:"blur"}],nickname:[{required:!0,trigger:"blur",message:"请输入昵称"}],realName:[{required:!0,trigger:"blur",message:"请输入姓名"}],zipCode:[{len:6,message:"邮编位数错误",trigger:"blur"},{pattern:/^[0-9]*$/,message:"邮编格式错误",trigger:"blur"}],enableState:[{required:!0,trigger:"blur",message:"请选择是否启用"}],password:[{required:!0,trigger:"blur",min:6,max:16,message:"长度在6-16个字符"}],rePassword:[{required:!1,trigger:"blur",message:"请再次输入密码"},{trigger:"blur",validator:function(t,a,i){e.formModel.password===e.formModel.rePassword?i():i(new Error("两次输入密码不一致"))}}],userSource:[{required:!0,trigger:"blur",message:"请选择用户来源"}]}})},props:{itemId:{type:Object,default:function(){return{id:""}}},isEdit:{type:Boolean,default:function(){return!0}}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},b.methods),b.events),h.methods),h.events),mounted:function(){console.log(111),this.initModel()},watch:{itemId:function(e,t){this.$refs.form.$el.scrollTop=0,this.$refs.form.clearValidate(),this.activeTab=["baseInfo"],e.id?e.id!==t.id&&(this.getConsultant(),this.query()):(this.getConsultant(),this.initModel())}},computed:Object(o["a"])(Object(o["a"])({},Object(p["c"])(["getUser"])),{},{dateRange:{get:function(){return[this.formModel.beginDate,this.formModel.endDate]},set:function(e){e?(this.formModel.beginDate=e[0],this.formModel.endDate=e[1]):(this.formModel.beginDate="",this.formModel.endDate="")}}}),created:function(){this.getTagClassList(),this.queryBrandList()}},y=v,M=(a("57a5"),a("2877")),w=Object(M["a"])(y,i,r,!1,null,null,null);t["a"]=w.exports},e42c:function(e,t,a){"use strict";var i=a("2497"),r=a("bc3a"),o=a.n(r),n=a("c596");t["a"]={listOrder:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.list,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},viewOrder:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.order:n["g"].orderMgmt.orderMgmt.order,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},updateOrder:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.order:n["g"].orderMgmt.orderMgmt.order,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},createOrder:function(e,t,a){o.a.post("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.order:n["g"].orderMgmt.orderMgmt.order,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},excuteOrder:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.service:n["g"].orderMgmt.orderMgmt.service,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},closeOrder:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.close:n["g"].orderMgmt.orderMgmt.close,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},confirmOrder:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.confirm:n["g"].orderMgmt.orderMgmt.confirm,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},paymentOrder:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.payment:n["g"].orderMgmt.orderMgmt.payment,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},shippingOrder:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.shipping:n["g"].orderMgmt.orderMgmt.shipping,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},repairMaintainHistory:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.repairMaintainHistory,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},listAdminByRole:function(e,t,a){o.a.post(n["g"].orderMgmt.orderMgmt.listAdminByRole,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},listExistCardTemplate:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.listExistCardTemplate,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},viewProducts:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.viewProducts:n["g"].orderMgmt.orderMgmt.viewProducts,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},viewOrderlogs:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.viewOrderlogs:n["g"].orderMgmt.orderMgmt.viewOrderlogs,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},viewOrderRefunds:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.viewOrderRefunds:n["g"].orderMgmt.orderMgmt.viewOrderRefunds,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryInvoiceDetailByOrderID:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.queryInvoiceDetailByOrderID:n["g"].orderMgmt.orderMgmt.queryInvoiceDetailByOrderID,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},invoiceMail:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.invoiceMail:n["g"].orderMgmt.orderMgmt.invoiceMail,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},invoiceMailUpdate:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.invoiceMail:n["g"].orderMgmt.orderMgmt.invoiceMail,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},invoiceInfoDefault:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.invoiceInfoDefault:n["g"].orderMgmt.orderMgmt.invoiceInfoDefault,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},invoiceByOrder:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.invoiceByOrder:n["g"].orderMgmt.orderMgmt.invoiceByOrder,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},invoiceDetailCreate:function(e,t,a){o.a.post("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.invoice:n["g"].orderMgmt.orderMgmt.invoice,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},invoiceDetailUpdate:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.invoice:n["g"].orderMgmt.orderMgmt.invoice,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},invoiceDetail:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.invoiceDetail:n["g"].orderMgmt.orderMgmt.invoiceDetail,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},addOrderItems:function(e,t,a){o.a.post("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.addOrderItems:n["g"].orderMgmt.orderMgmt.addOrderItems,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},brands:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.brands,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},series:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.series,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},types:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.types,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},getFinancialPlans:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.getFinancialPlans,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},memberList:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.memberList,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},options:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.options,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},rescuers:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.rescuers,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},export:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.export,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},rescueOrderLogs:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.rescueOrderLogs,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},loanTerms:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.loanTerms,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryOrderKpi:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.queryOrderKpi,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},refundsAudit:function(e,t,a){o.a.put("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.refundsAudit:n["g"].orderMgmt.orderMgmt.refundsAudit,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},rescuerSetting:function(e,t,a){o.a.put(n["g"].orderMgmt.orderMgmt.rescuerSetting,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},rescuerDispath:function(e,t,a){o.a.put(n["g"].orderMgmt.orderMgmt.rescuerDispath,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},carOptions:function(e,t,a){o.a.put(n["g"].orderMgmt.orderMgmt.carOptions,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},createMember:function(e,t,a){o.a.post(n["g"].orderMgmt.orderMgmt.createMember,e).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},certificate:function(e,t,a){o.a.get("purchaseOrder"===window.top.dType?n["g"].orderMgmt.purchaseOrderMgmt.certificate:n["g"].orderMgmt.orderMgmt.certificate,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},listProductByTestDrive:function(e,t,a){o.a.get(n["g"].orderMgmt.orderMgmt.listProductByTestDrive,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))}}},e4c3:function(e,t,a){"use strict";var i=a("2497"),r=a("bc3a"),o=a.n(r),n=a("c596");t["a"]={queryPeople:function(e,t,a){o.a.get(n["g"].vehicleMgmt.Component_queryPeople,{params:e}).then(Object(i["a"])(t,a)).catch((function(e){console.error(e)}))},queryVehicles:function(e,t,a,r){o.a.get(e,{params:t}).then(Object(i["a"])(a,r)).catch((function(e){console.error(e)}))}}},e58c:function(e,t,a){"use strict";var i=a("fc6a"),r=a("a691"),o=a("50c4"),n=a("a640"),l=a("ae40"),s=Math.min,c=[].lastIndexOf,d=!!c&&1/[1].lastIndexOf(1,-0)<0,u=n("lastIndexOf"),m=l("indexOf",{ACCESSORS:!0,1:0}),f=d||!u||!m;e.exports=f?function(e){if(d)return c.apply(this,arguments)||0;var t=i(this),a=o(t.length),n=a-1;for(arguments.length>1&&(n=s(n,r(arguments[1]))),n<0&&(n=a+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}:c},e921:function(e,t,a){"use strict";var i=a("757a"),r=a.n(i);r.a},ea3d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{staticClass:"vehicle-mgmt-all-vehicle__vehicle-elec-fence"},[e.isEdit?a("biz-header",{attrs:{slot:"top",operations:e.ruleTableOperations},on:{operate:e.operateHandler,rowClick:e.rowEditClickHandler},slot:"top"}):e._e(),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100%",size:"small"},on:{"selection-change":e.selectionChangeHandler}},[a("biz-empty-table-tab",{attrs:{slot:"empty"},slot:"empty"}),a("el-table-column",{attrs:{type:"selection",width:"30"}}),a("el-table-column",{attrs:{prop:"name",label:"围栏名称"}}),a("el-table-column",{attrs:{prop:"count",label:"监控车辆数量",width:"100"}}),a("el-table-column",{attrs:{prop:"terminalCount",label:"监控设备数量",width:"100"}}),a("el-table-column",{attrs:{prop:"title",label:"操作","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return e.isEdit?[e.isCar?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return a.stopPropagation(),e.monitorState(t.row)}}},[e._v(" "+e._s("0"===t.row.state?"监控":"取消监控")+" ")]):e._e(),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.rowEditClickHandler(t.row,a)}}},[e._v(" 编辑 ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return a.stopPropagation(),e.rowDeleteClickHandler(a,t.row)}}},[e._v(" 删除 ")])]:void 0}}],null,!0)})],1),a("el-dialog",{staticClass:"vehicle-elec-fence__details-dialog",attrs:{slot:"float",title:"电子围栏",visible:e.dialogVisible,fullscreen:!0,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}},slot:"float"},[a("div",{staticClass:"details-dialog__content"},[a("div",{staticClass:"dialog-form"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.ruleLoading,expression:"ruleLoading"}],ref:"ruleForm",attrs:{size:"small","label-width":"110px",model:e.ruleModel,rules:e.rules,"inline-message":!0}},[a("el-form-item",{attrs:{label:"围栏名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入围栏名称"},model:{value:e.ruleModel.name,callback:function(t){e.$set(e.ruleModel,"name",t)},expression:"ruleModel.name"}})],1),a("el-form-item",{attrs:{label:"启用",prop:"isEnabled"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","inactive-color":"#d9d9d9","active-color":"#87d068"},model:{value:e.ruleModel.isEnabled,callback:function(t){e.$set(e.ruleModel,"isEnabled",t)},expression:"ruleModel.isEnabled"}})],1),a("el-form-item",{attrs:{label:"触发方式",prop:"triggerMethod"}},[a("el-radio-group",{model:{value:e.ruleModel.triggerMethod,callback:function(t){e.$set(e.ruleModel,"triggerMethod",t)},expression:"ruleModel.triggerMethod"}},[a("el-radio",{attrs:{label:"0"}},[e._v("进围栏")]),a("el-radio",{attrs:{label:"1"}},[e._v("出围栏")]),a("el-radio",{attrs:{label:"2"}},[e._v("进出围栏")])],1)],1),a("el-form-item",{attrs:{label:"围栏类型",prop:"type"}},[a("el-radio-group",{on:{change:e.typeChange},model:{value:e.ruleModel.type,callback:function(t){e.$set(e.ruleModel,"type",t)},expression:"ruleModel.type"}},[a("el-radio",{attrs:{label:"0"}},[e._v("圆形")]),a("el-radio",{attrs:{label:"1"}},[e._v("矩形")]),a("el-radio",{attrs:{label:"3"}},[e._v("多边形")]),a("el-radio",{attrs:{label:"2"}},[e._v("行政区划")])],1),a("biz-area-select",{directives:[{name:"show",rawName:"v-show",value:"2"===e.ruleModel.type,expression:"ruleModel.type === '2'"}],attrs:{areaId:e.ruleModel.areaId},on:{areaChanged:e.areaChanged}})],1),a("el-form-item",{attrs:{label:"超速限制",prop:"overspeed"}},[a("el-input",{attrs:{type:"number",min:"0"},model:{value:e.ruleModel.overspeed,callback:function(t){e.$set(e.ruleModel,"overspeed",t)},expression:"ruleModel.overspeed"}})],1),a("el-form-item",{attrs:{label:"围栏种类",prop:"category"}},[a("el-radio-group",{model:{value:e.ruleModel.category,callback:function(t){e.$set(e.ruleModel,"category",t)},expression:"ruleModel.category"}},[a("el-radio",{attrs:{label:"0"}},[e._v("个人")]),a("el-radio",{directives:[{name:"show",rawName:"v-show",value:e.isMotorcadeMode(),expression:"isMotorcadeMode()"}],attrs:{label:"1"}},[e._v("车队")])],1)],1),a("el-form-item",{attrs:{label:"监控车辆"}},[a("vehicle-picker",{attrs:{motorcadeId:e.motorcadeId.id,userId:e.itemId.userId},model:{value:e.ruleModel.carIds,callback:function(t){e.$set(e.ruleModel,"carIds",t)},expression:"ruleModel.carIds"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isMotorcadeMode(),expression:"!isMotorcadeMode()"}],attrs:{label:"监控设备"}},[a("terminal-picker",{attrs:{motorcadeId:e.motorcadeId.id,userId:e.itemId.userId},model:{value:e.ruleModel.terminalIds,callback:function(t){e.$set(e.ruleModel,"terminalIds",t)},expression:"ruleModel.terminalIds"}})],1),a("el-form-item",{attrs:{prop:"startTime"}},[a("div",{staticStyle:{display:"inline-block"},attrs:{slot:"label"},slot:"label"},[e._v(" 开始时间 "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:startTime",arg:"startTime"}],attrs:{type:"text",size:"small"}},[a("i",{staticClass:"iconfont el-icon-question"})]),a("el-popover",{ref:"startTime",attrs:{placement:"bottom-start",width:"300",trigger:"hover",content:"您可设置开始时间和结束时间，在此时间段内车辆出发围栏报警时将提示到车主"}})],1),a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"01:00",end:"23:00"},placeholder:"选择时间"},model:{value:e.ruleModel.startTime,callback:function(t){e.$set(e.ruleModel,"startTime",t)},expression:"ruleModel.startTime"}})],1),a("el-form-item",{attrs:{prop:"endTime"}},[a("div",{staticStyle:{display:"inline-block"},attrs:{slot:"label"},slot:"label"},[e._v(" 结束时间 "),a("el-button",{directives:[{name:"popover",rawName:"v-popover:endTime",arg:"endTime"}],attrs:{type:"text",size:"small"}},[a("i",{staticClass:"iconfont el-icon-question"})]),a("el-popover",{ref:"endTime",attrs:{placement:"bottom-start",width:"300",trigger:"hover",content:"您可设置开始时间和结束时间，在此时间段内车辆出发围栏报警时将提示到车主"}})],1),a("el-time-select",{attrs:{"picker-options":{start:"00:59",step:"01:00",end:"23:59"},placeholder:"选择时间"},model:{value:e.ruleModel.endTime,callback:function(t){e.$set(e.ruleModel,"endTime",t)},expression:"ruleModel.endTime"}})],1)],1),e.isEdit?a("biz-save-button",{staticStyle:{"margin-right":"0"},attrs:{operations:e.ruleOperations},on:{operate:e.operateHandler}}):e._e()],1),a("biz-fence-map",{ref:"fenceMap",attrs:{type:e.type,carState:e.carState,icon:e.icon},on:{paramsChange:e.paramsChange}})],1)])],1)},r=[],o=(a("4160"),a("d81d"),a("b0c0"),a("a9e3"),a("25eb"),a("d3b7"),a("159b"),a("f36f")),n=a("04d3"),l=a("0a3d"),s=a("8330"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicle-mgmt-vehicle__vehicle-picker"},[a("el-input",{attrs:{placeholder:"请输入内容",value:e.textComputed,readonly:"readonly"}},[a("el-button",{attrs:{slot:"append"},on:{click:e.clickHandler},slot:"append"},[e._v("选择")])],1),e.motorcadeId?a("biz-dialog-selector",{attrs:{slot:"float",title:"车辆选择",visibility:e.showDialog,loading:e.dialogLoading,tableData:e.dialogTableData,pagination:e.dialogPagination,keyField:"id",selectionKeys:e.value,filters:e.dialogFilters},on:{"update:visibility":function(t){e.showDialog=t},confirmed:e.confirmedHandler,open:e.openedHandler,filterDataChange:e.dialogFilterDataChange,pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange},slot:"float"},[a("el-table-column",{attrs:{prop:"orderNum",label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"plateNumber",label:"车牌号"}}),a("el-table-column",{attrs:{prop:"member.name",label:"车主"}}),a("el-table-column",{attrs:{prop:"member.phone",label:"电话"}})],1):e._e(),e.motorcadeId?e._e():a("biz-dialog-selector",{attrs:{slot:"float",title:"车辆选择",visibility:e.showDialog,loading:e.dialogLoading,tableData:e.dialogTableData,pagination:e.dialogPagination,keyField:"id",selectionKeys:e.value,filters:e.dialogFilters},on:{"update:visibility":function(t){e.showDialog=t},confirmed:e.confirmedHandler,open:e.openedHandler,filterDataChange:e.dialogFilterDataChange,pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange},slot:"float"},[a("el-table-column",{attrs:{prop:"sn",label:"车牌号"}}),a("el-table-column",{attrs:{prop:"owner",label:"车主姓名"}}),a("el-table-column",{attrs:{prop:"ownerUuid",label:"车主电话"}})],1)],1)},d=[],u=a("af3f"),m=a("e4c3"),f={name:"VehicleMgmtVehiclePicker",components:{BizDialogSelector:u["a"]},model:{prop:"value",event:"input"},props:{value:{type:Array},motorcadeId:{type:String,required:!0},userId:{type:String}},data:function(){return{showDialog:!1,dialogLoading:!1,dialogTableData:[],dialogPagination:{pageSize:1e3,currentPage:1,pageSizes:[1e3],total:0},dialogFilters:[{type:"input",label:"",placeholder:"请输入姓名/手机号",name:"searchValue",value:""}]}},computed:{textComputed:function(){return"已选择 "+this.value.length+" 辆车"}},methods:{queryVehicles:function(e){var t=this;this.dialogLoading=!0;var a="";a=this.motorcadeId?"/admin/fence/fleetMonitorItems.jhtml":"/admin/fence/personalMonitorItems.jhtml",m["a"].queryVehicles(a,e,(function(e){if(t.motorcadeId)t.dialogTableData=e.dataList,t.$set(t.dialogPagination,"total",parseInt(e.dataList.length));else{var a=[];e.dataList.map((function(e){"0"===e.produceType&&a.push(e)})),t.dialogTableData=a,t.$set(t.dialogPagination,"total",parseInt(a.length))}t.dialogLoading=!1}),(function(e){console.log(e),console.log("code错误"),t.$message.warning(e.errorMessage)}))},clickHandler:function(e){this.showDialog=!0},confirmedHandler:function(e,t){this.$emit("input",e),this.$emit("on-confirm",e)},getDialogQueryParams:function(){return{fleetId:this.motorcadeId,userId:this.userId,pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage,searchValue:this.dialogFilters[0].value}},openedHandler:function(){this.dialogPagination.currentPage=1,this.dialogPagination.pageSize=20,this.dialogFilters=[{type:"input",label:"",placeholder:"请输入车牌号",name:"searchValue",value:""}],this.queryVehicles(this.getDialogQueryParams())},dialogFilterDataChange:function(e){this.queryVehicles(this.getDialogQueryParams())},dialogPageSizeChange:function(e){this.$set(this.dialogPagination,"pageSize",e),this.queryVehicles(this.getDialogQueryParams())},dialogCurrentPageChange:function(e){this.$set(this.dialogPagination,"currentPage",e),this.queryVehicles(this.getDialogQueryParams())}}},p=f,h=a("2877"),g=Object(h["a"])(p,c,d,!1,null,null,null),b=g.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicle-mgmt-vehicle__vehicle-picker"},[a("el-input",{attrs:{placeholder:"请输入内容",value:e.textComputed,readonly:"readonly"}},[a("el-button",{attrs:{slot:"append"},on:{click:e.clickHandler},slot:"append"},[e._v("选择")])],1),e.motorcadeId?a("biz-dialog-selector",{attrs:{slot:"float",title:"设备选择",visibility:e.showDialog,loading:e.dialogLoading,tableData:e.dialogTableData,pagination:e.dialogPagination,keyField:"id",selectionKeys:e.value,filters:e.dialogFilters},on:{"update:visibility":function(t){e.showDialog=t},confirmed:e.confirmedHandler,open:e.openedHandler,filterDataChange:e.dialogFilterDataChange,pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange},slot:"float"},[a("el-table-column",{attrs:{prop:"orderNum",label:"序号",width:"100"}}),a("el-table-column",{attrs:{prop:"plateNumber",label:"车牌号"}}),a("el-table-column",{attrs:{prop:"member.name",label:"车主"}}),a("el-table-column",{attrs:{prop:"member.phone",label:"电话"}})],1):e._e(),e.motorcadeId?e._e():a("biz-dialog-selector",{attrs:{slot:"float",title:"设备选择",visibility:e.showDialog,loading:e.dialogLoading,tableData:e.dialogTableData,pagination:e.dialogPagination,keyField:"id",selectionKeys:e.value,filters:e.dialogFilters},on:{"update:visibility":function(t){e.showDialog=t},confirmed:e.confirmedHandler,open:e.openedHandler,filterDataChange:e.dialogFilterDataChange,pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange},slot:"float"},[a("el-table-column",{attrs:{prop:"name",label:"终端名称",width:"100"}}),a("el-table-column",{attrs:{prop:"sn",label:"序列号",width:"100"}}),a("el-table-column",{attrs:{prop:"originalId",label:"终端分类"}}),a("el-table-column",{attrs:{prop:"owner",label:"所有者姓名"}}),a("el-table-column",{attrs:{prop:"ownerUuid",label:"所有者电话"}})],1)],1)},y=[],M={name:"VehicleMgmtVehiclePicker",components:{BizDialogSelector:u["a"]},model:{prop:"value",event:"input"},props:{value:{type:Array},motorcadeId:{type:String,required:!0},userId:{type:String}},data:function(){return{showDialog:!1,dialogLoading:!1,dialogTableData:[],dialogPagination:{pageSize:1e3,currentPage:1,pageSizes:[1e3],total:0},dialogFilters:[{type:"input",label:"",placeholder:"请输入姓名/手机号",name:"searchValue",value:""}]}},computed:{textComputed:function(){return"已选择 "+this.value.length+"个设备"}},methods:{queryVehicles:function(e){var t=this;this.dialogLoading=!0;var a="";a=this.motorcadeId?"/admin/fence/fleetMonitorItems.jhtml":"/admin/fence/personalMonitorItems.jhtml",m["a"].queryVehicles(a,e,(function(e){if(t.motorcadeId)t.dialogTableData=e.dataList,t.$set(t.dialogPagination,"total",parseInt(e.dataList.length));else{var a=[];e.dataList.map((function(e){"1"===e.produceType&&a.push(e)})),t.dialogTableData=a,t.$set(t.dialogPagination,"total",parseInt(a.length))}t.dialogLoading=!1}),(function(e){console.log(e),console.log("code错误"),t.$message.warning(e.errorMessage)}))},clickHandler:function(e){this.showDialog=!0},confirmedHandler:function(e,t){this.$emit("input",e),this.$emit("on-confirm",e)},getDialogQueryParams:function(){return{fleetId:this.motorcadeId,userId:this.userId,pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage,searchValue:this.dialogFilters[0].value}},openedHandler:function(){this.dialogPagination.currentPage=1,this.dialogPagination.pageSize=20,this.dialogFilters=[{type:"input",label:"",placeholder:"请输入序列号",name:"searchValue",value:""}],this.queryVehicles(this.getDialogQueryParams())},dialogFilterDataChange:function(e){this.queryVehicles(this.getDialogQueryParams())},dialogPageSizeChange:function(e){this.$set(this.dialogPagination,"pageSize",e),this.queryVehicles(this.getDialogQueryParams())},dialogCurrentPageChange:function(e){this.$set(this.dialogPagination,"currentPage",e),this.queryVehicles(this.getDialogQueryParams())}}},w=M,C=Object(h["a"])(w,v,y,!1,null,null,null),I=C.exports,S=a("ce2e"),O=a("6401"),T=a("92a6"),_=a("1ab1"),L={name:"VehicleElecFence",components:{BizSaveButton:s["a"],BizHeader:n["d"],BizFenceMap:l["a"],BizGrid:o["a"],VehiclePicker:b,TerminalPicker:I,BizAreaSelect:S["a"],BizEmptyTableTab:O["a"]},props:{itemId:{type:Object,default:function(){return{id:"",userId:""}}},isEdit:{type:Boolean,default:function(){return!0}},motorcadeId:{type:Object,default:function(){return{id:""}}},isMotorcade:{type:Boolean,default:function(){return!1}},carState:{type:Object,default:function(){return{}}},icon:{type:Object,default:function(){return{}}},isCar:{type:Boolean,default:function(){return!1}}},data:function(){var e=this;return{isFirst:!0,ruleTableOperations:[{label:"新建",name:"addOperate",type:"primary",auth:["admin:car.edit"]},{label:"删除",name:"deleteOperate",type:"",disabled:!0,auth:["admin:car.edit"]}],tableData:[],type:"0",dialogVisible:!1,ruleLoading:!1,ruleModel:this.getDefaultModel(),rules:{name:[{required:!0,message:"请输入围栏名称/长度不大于16位",max:16,trigger:"blur"}],isEnabled:[{required:!0,message:"请选择启用状态",trigger:"blur"}],triggerMethod:[{required:!0,message:"请选择触发方式",trigger:"blur"}],type:[{required:!0,message:"请选择围栏类型",trigger:"blur"}],overspeed:[{trigger:"blur",validator:function(t,a,i){Number(e.ruleModel.overspeed)>=1||"undefined"===typeof e.ruleModel.overspeed||""===e.ruleModel.overspeed?i():i(new Error("请输入大于0的正整数"))}}],category:[{required:!0,message:"请选择围栏种类",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"blur"}]},ruleOperations:[{label:"取消",name:"cancelRuleOperate"},{label:"保存",name:"saveRuleOperate",type:"primary"}]}},created:function(){},methods:{isMotorcadeMode:function(){return!!this.isMotorcade},monitorState:function(e){var t=this;_["a"].put("/admin/fence/monitorState.jhtml",{fenceId:e.id,carId:this.itemId.id,state:"0"===e.state?"1":"0"}).then((function(e){t.$message.success("操作成功"),t.query()})).catch((function(e){console.log(e),console.log("code错误"),"店铺不存在"!==e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){t.loading=!1}))},init:function(){this.itemId.id?(this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.query()):this.tableData=[]},query:function(){var e=this;T["a"].query({fleetId:this.isMotorcadeMode()?this.itemId.id:"",userId:this.itemId.userId,category:this.isMotorcadeMode()?"1":"0",carId:this.isMotorcadeMode()?"":this.itemId.id},(function(t){e.tableData=t.fences,e.selections=[]}),(function(e){console.log(e),console.log("code错误")}))},queryRule:function(e){var t=this;this.ruleLoading=!0,T["a"].queryRule({id:e},(function(e){t.ruleModel=Object.assign(t.getDefaultModel(),e.fence),t.ruleModel.carIds=[],t.ruleModel.terminalIds=[],e.fence.cars.map((function(e){t.ruleModel.carIds.push(e.id)})),e.fence.terminals.map((function(e){t.ruleModel.terminalIds.push(e.id)})),t.$refs.fenceMap.initEditFenceMap(t.ruleModel),t.ruleLoading=!1}),(function(e){console.log(e),console.log("code错误"),t.ruleLoading=!1}))},getSaveParams:function(){var e=this.ruleModel.carIds.map((function(e){return{id:e}})),t=this.ruleModel.terminalIds.map((function(e){return{id:e}}));return{fence:{id:this.ruleModel.id,name:this.ruleModel.name,category:this.ruleModel.category,fleetId:this.motorcadeId.id,type:this.ruleModel.type,triggerMethod:this.ruleModel.triggerMethod,overspeed:Number.parseInt(this.ruleModel.overspeed),cars:e,terminals:t,startTime:this.ruleModel.startTime,endTime:this.ruleModel.endTime,isEnabled:this.ruleModel.isEnabled,areaId:this.ruleModel.areaId,rectLng1:this.ruleModel.rectLng1,rectLat1:this.ruleModel.rectLat1,rectLng2:this.ruleModel.rectLng2,rectLat2:this.ruleModel.rectLat2,rectLng3:this.ruleModel.rectLng3,rectLat3:this.ruleModel.rectLat3,rectLng4:this.ruleModel.rectLng4,rectLat4:this.ruleModel.rectLat4,circleLng:this.ruleModel.circleLng,circleLat:this.ruleModel.circleLat,radius:this.ruleModel.radius,polygon:this.ruleModel.polygon,area:this.ruleModel.area,fullName:this.ruleModel.fullName},userId:this.itemId.userId}},paramsChange:function(e){this.ruleModel.rectLng1=e.rectLng1,this.ruleModel.rectLng2=e.rectLng2,this.ruleModel.rectLng3=e.rectLng3,this.ruleModel.rectLng4=e.rectLng4,this.ruleModel.rectLat1=e.rectLat1,this.ruleModel.rectLat2=e.rectLat2,this.ruleModel.rectLat3=e.rectLat3,this.ruleModel.rectLat4=e.rectLat4,this.ruleModel.circleLng=e.circleLng,this.ruleModel.circleLat=e.circleLat,this.ruleModel.radius=e.radius,this.ruleModel.polygon=e.polygon},typeChange:function(e){this.type=e},resetModel:function(){this.ruleModel=this.getDefaultModel()},getDefaultModel:function(){return console.log(this.isMotorcadeMode()),{triggerMethod:"0",type:"0",category:this.isMotorcadeMode()?"1":"0",carIds:[],terminalIds:[],areaId:"1568",isEnabled:"0",overspeed:"60",startTime:"",endTime:""}},deleteRule:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){T["a"].deleteRule({ids:e},(function(e){t.$message.success("删除成功"),t.query()}),(function(e){t.$message.warning(e.errorMessage)}))}))},switchStatus:function(e,t){console.log("switch to "+t,e)},operateHandler:function(e){this[e]()},addOperate:function(){this.resetModel(),this.dialogVisible=!0,this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.$nextTick((function(){this.$refs.fenceMap.initLocation(this.carState)}))},deleteOperate:function(){if(this.selections&&this.selections.length>0){var e=[];this.selections.forEach((function(t){e.push(t.id)})),this.deleteRule(e)}else this.$message("请选择一个用户进行删除")},selectionChangeHandler:function(e){this.selections=e,this.ruleTableOperations[1].disabled=!0,e.length>0&&(this.ruleTableOperations[1].disabled=!1)},rowDeleteClickHandler:function(e,t){this.deleteRule([t.id])},rowEditClickHandler:function(e,t,a){this.dialogVisible=!0,this.$refs.ruleForm&&this.$refs.ruleForm.clearValidate(),this.queryRule(e.id)},areaChanged:function(e){this.ruleModel.areaId=e,this.isFirst&&(this.ruleModel.areaId="1568",this.isFirst=!1)},cancelRuleOperate:function(){this.dialogVisible=!1},saveRuleOperate:function(){var e=this;void 0!==this.ruleModel.circleLng||void 0!==this.ruleModel.rectLat1||void 0!==this.ruleModel.radius||"3"===this.ruleModel.type?this.$refs.ruleForm.validate((function(t,a){if(!t)return!1;e.loading=!0,e.ruleModel.id?T["a"].updateRule(e.getSaveParams(),(function(t){e.$message.success("保存成功"),e.query(),e.dialogVisible=!1,e.loading=!1}),(function(t){e.$message.warning(t.errorMessage),e.loading=!1})):T["a"].addRule(e.getSaveParams(),(function(t){e.$message.success("保存成功"),e.query(),e.dialogVisible=!1,e.loading=!1}),(function(t){e.$message.warning(t.errorMessage),e.loading=!1}))})):this.$message.warning("请在地图上维护围栏数据")}},computed:{},watch:{itemId:function(e,t){this.init()}},mounted:function(){this.init()}},D=L,k=(a("39ec"),Object(h["a"])(D,i,r,!1,null,null,null));t["a"]=k.exports},ec6b:function(e,t,a){"use strict";var i=a("b547"),r=a.n(i);r.a},ff9d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"membership-mgmt__certification"},[e.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.handleOperate},slot:"top"}):e._e(),a("el-form",{ref:"form",attrs:{size:"small","label-width":"110px",model:e.formModel,rules:e.rules,disabled:!e.isEdit}},[a("el-form-item",{attrs:{label:"真实姓名"}},[a("span",{staticClass:"form-static"},[e._v(e._s(e.formModel.name))])]),a("el-form-item",{attrs:{label:"证件类型"}},[a("span",{staticClass:"form-static"},[e._v(e._s(e.type))])]),a("el-form-item",{attrs:{label:"证件号码"}},[a("span",{staticClass:"form-static"},[e._v(e._s(e.formModel.number))])]),a("el-form-item",{attrs:{label:"证件照片"}},[e.formModel.backgroundImg?a("img",{staticClass:"uploaded-image",attrs:{src:e.formModel.backgroundImg},on:{click:function(t){return e.handleImageClick(t,e.formModel.backgroundImg)}}}):e._e(),e.formModel.positiveImg?a("img",{staticClass:"uploaded-image",attrs:{src:e.formModel.positiveImg},on:{click:function(t){return e.handleImageClick(t,e.formModel.positiveImg)}}}):e._e()]),a("el-form-item",{attrs:{label:"认证状态"}},[a("span",{staticClass:"form-static"},[e._v(e._s(e.state))])])],1),a("el-dialog",{staticClass:"avatar-preview-dialog",attrs:{"append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"review"},[a("img",{attrs:{src:e.imgUrl,alt:""}})])])],1)},r=[],o=(a("a9e3"),a("d3b7"),a("5530")),n=a("f36f"),l=a("8330"),s=a("c596"),c=a("1ab1"),d={data:{operations:[{label:"通过",name:"pass",type:"primary"},{label:"不通过",name:"unpass",type:"primary"}],typeList:[{label:"身份证 ",value:"0"},{label:"驾驶证 ",value:"1"},{label:"护照",value:"2"},{label:"军官证",value:"3"},{label:"户口簿",value:"4"}],stateList:[{label:"审核中",value:"0 "},{label:"审核通过",value:"1"},{label:"未通过",value:"2"}]},events:{handleOperate:function(e){this[e]()}},methods:{}},u=function(){return{isTop:"0",beginDate:"",endDate:""}},m={data:{loading:!1,formModel:u()},events:{},methods:{initModel:function(e){e?this.formModel=Object.assign(this.getDefaultModel(),e):this.resetModel(),this.$refs.form.resetFields()},resetModel:function(){this.formModel=this.getDefaultModel()},getDefaultModel:function(){return u()},query:function(){var e=this;this.loading=!0,c["a"].get(s["o"].certification.query,{shopId:window.top.SHOP_ID||"",userId:this.itemId.id}).then((function(t){e.initModel(t.content)})).catch((function(t){console.log(t),console.log("code错误"),t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))},getSaveParams:function(e){return{userId:this.itemId.id,isPass:e,shopId:window.top.SHOP_ID||""}},pass:function(){this.save("1")},unpass:function(){this.save("0")},save:function(e){var t=this;this.$refs.form.validate((function(a,i){if(!a)return t.$message.warning("表单验证失败"),!1;t.loading=!0;var r=function(e){t.$message.success("操作成功"),t.$emit("operationSuccess")},o=function(e){console.log(e),console.log("code错误"),e.errorMessage&&t.$message.warning(e.errorMessage)},n=function(e){t.loading=!1};c["a"].put(s["o"].certification.certify,t.getSaveParams(e)).then(r).catch(o).finally(n)}))}}},f={data:{dialogVisible:!1,imgUrl:""},methods:{},events:{handleImageClick:function(e,t){this.dialogVisible=!0,this.imgUrl=t}}},p={name:"MembershipMgmtCertification",components:{BizSaveButton:l["a"],BizGrid:n["a"]},data:function(){return Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},d.data),m.data),f.data),{},{rules:{}})},props:{itemId:{type:Object,default:function(){return{id:""}}},isEdit:{type:Boolean,default:function(){return!0}}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},m.methods),m.events),d.methods),d.events),f.methods),f.events),watch:{itemId:function(e,t){e.id?this.query():this.initModel()}},computed:{type:function(){var e=Number(this.formModel.type);return isNaN(e)?"--":this.typeList[e]?this.typeList[e].label:"--"},state:function(){var e=Number(this.formModel.state);return isNaN(e)?"--":this.stateList[e]?this.stateList[e].label:"--"}},created:function(){this.itemId.id&&this.query()}},h=p,g=(a("9b1a"),a("2877")),b=Object(g["a"])(h,i,r,!1,null,null,null);t["a"]=b.exports}}]);