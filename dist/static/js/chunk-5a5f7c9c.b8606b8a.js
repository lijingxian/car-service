(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a5f7c9c"],{"0943":function(e,t,a){"use strict";var i=a("1fac"),n=a.n(i);n.a},"1fac":function(e,t,a){},"3eb4":function(e,t,a){"use strict";var i=a("cc29"),n=a.n(i);n.a},"4df0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"product-category-analysis"},[a("div",{staticClass:"member-info"},[a("div",{staticClass:"header"},[a("span",[e._v(e._s(e.userPortrait.productCateGoryName))]),a("span",[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.memberSelected}},[e._v("切换")])],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"header-img"},[e.userPortrait.productCateGoryLogo?a("img",{attrs:{src:e.userPortrait.productCateGoryLogo,alt:""}}):a("img",{attrs:{src:e.DefaultAvatar}})]),a("div",{staticClass:"info-con"},[a("div",{staticClass:"base-info",attrs:{title:e.userPortrait.totalNum}},[e._v("商品品种："+e._s(e.userPortrait.totalNum))]),a("div",{staticClass:"base-info"},[e._v("已上架："+e._s(e.userPortrait.marketableNum))]),a("div",{staticClass:"base-info",attrs:{title:e.userPortrait.noMarketableNum}},[e._v("已下架："+e._s(e.userPortrait.noMarketableNum))])])])]),a("div",{staticClass:"graph-container"},[a("div",{staticClass:"left-graph"},[e._m(0),a("biz-chart",{attrs:{chartData:e.lineChartData,showSearch:!1,chartHeight:e.chartHeight}})],1),a("div",{staticClass:"right-graph"},[a("div",{staticClass:"header"},[a("span",[e._v("商品数量分布")]),a("span",{staticClass:"font"},[e._v("购买品种："+e._s(e.buyTotalCount))])]),a("biz-chart",{attrs:{chartData:e.amountGraphData,showSearch:!1,chartHeight:e.chartHeight}})],1)]),a("div",{staticClass:"graph-container"},[a("div",{staticClass:"left-graph"},[a("div",{staticClass:"header"},[a("span",[e._v("销售数量分布")]),a("span",{staticClass:"font"},[e._v("销售总量："+e._s(e.readTotalCount))])]),a("biz-chart",{attrs:{chartData:e.saleAmountGraphData,showSearch:!1,chartHeight:e.chartHeight}})],1),a("div",{staticClass:"right-graph"},[a("div",{staticClass:"header"},[a("span",[e._v("销售金额分布")]),a("span",{staticClass:"font"},[e._v("销售总额："+e._s(e.loginTotalCount))])]),a("biz-chart",{attrs:{chartData:e.salePriceGraphData,showSearch:!1,chartHeight:e.chartHeight}})],1)]),a("biz-dialog-selector",{staticClass:"notice-dialog-selector",attrs:{title:"选择分类",visibility:e.showDialog,appendToBody:!0,selectionMode:"single",isClear:!1,loading:e.dialogLoading,tableData:e.curDialogTableData,pagination:e.dialogPagination},on:{"update:visibility":function(t){e.showDialog=t},confirmed:e.handleConfirmed,pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange}},[a("el-table-column",{attrs:{prop:"name",label:"分类"}}),a("el-table-column",{attrs:{prop:"childrenProductCategoryData",label:"参数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.parameterGroupDataList,(function(a,i){return[e._v(" "+e._s(a.name)+" "),i<t.row.parameterGroupDataList.length-1?[e._v(e._s(e.separator))]:e._e()]}))]}}])}),a("el-table-column",{attrs:{prop:"childrenProductCategoryData",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.specificationDataList,(function(a,i){return[e._v(" "+e._s(a.name)+" "),i<t.row.specificationDataList.length-1?[e._v(e._s(e.separator))]:e._e()]}))]}}])}),a("el-table-column",{attrs:{prop:"shop.name",label:"店铺"}})],1)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("span",[e._v("销售趋势")])])}],r=(a("d81d"),a("fb6a"),a("a9e3"),a("d3b7"),a("b85c")),o=(a("96cf"),a("1da1")),s=a("5530"),c=a("624d"),l=a.n(c),u=a("ce0c"),h=a("1ab1"),d=a("2f62"),g=a("562e"),p=a("af3f"),f={name:"MemberProtraitAnalysis",data:function(){return{curCategoryId:"",date:"",chartHeight:"100%",separator:"、",DefaultAvatar:l.a,userPortrait:[],showDialog:!1,lineChartData:{},amountGraphData:{legendVisible:!1,type:"pie",data:{columns:["type","value"],rows:[]},settings:{offsetY:"50%"}},saleAmountGraphData:{legendVisible:!1,type:"pie",data:{columns:["type","value"],rows:[]},settings:{offsetY:"50%"}},salePriceGraphData:{legendVisible:!1,type:"pie",data:{columns:["type","value"],rows:[]},settings:{radius:["20%","60%"],offsetY:"50%"}},dialogLoading:!0,viewType:"month",dialogTableData:[],memberMobileData:[],beginDate:u["a"].getMonthStartDate(),endDate:u["a"].getMonthEndDate(),curTagName:"",memberId:"",readTotalCount:0,buyTotalCount:0,loginTotalCount:0,dialogPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},props:{},watch:{},components:{BizChart:g["a"],BizDialogSelector:p["a"]},computed:{curDialogTableData:function(){return this.dialogTableData.slice((this.currentPage-1)*this.pageSize,this.pageSize)}},methods:Object(s["a"])(Object(s["a"])({},Object(d["c"])(["getUser"])),{},{refresh:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=5;break}return a.next=3,t.queryCategory();case 3:a.next=6;break;case 5:t.curCategoryId=e;case 6:t.getCategoryInfo(t.curCategoryId),t.getLineGraphData(t.curCategoryId),t.getAmountGraphData(t.curCategoryId),t.getSalePriceGraphData(t.curCategoryId),t.getSaleAmountGraphData(t.curCategoryId);case 11:case"end":return a.stop()}}),a)})))()},queryCategory:function(){var e=this;this.dialogLoading=!0;var t={shopId:window.top.SHOP_ID||"",pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage};return new Promise((function(a,i){h["a"].get("/admin/json/ShopProduct_category/list.jhtml",t).then((function(t){e.dialogTableData=t.ProductCategoryManage,e.curCategoryId||(e.curCategoryId=e.dialogTableData[0].id),e.dialogPagination.total=Number(t.ProductCategoryManage.length),e.dialogLoading=!1,a()})).catch((function(t){t.errorMessage&&e.$message.warning(t.errorMessage),i(t)})).finally((function(){}))}))},getCategoryInfo:function(e){var t=this,a={shopId:window.top.SHOP_ID||"",productCateGorys:[e]};h["a"].post("/admin/ecommerce/kpi/product/summary/category.jhtml",a).then((function(e){t.userPortrait=e.indicators})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))},getSaleAmountGraphData:function(e){var t=this;this.readTotalCount=0;var a={shopId:window.top.SHOP_ID||"",type:"productNumDistribute",beginDate:this.beginDate,endDate:this.endDate,productCateGorys:[e],indicators:["productTypeSafeNumDistribute"],viewType:this.viewType};h["a"].post("/admin/ecommerce/kpi/product/graph/product.jhtml",a).then((function(e){var a,i=Object(r["a"])(e.indicators);try{for(i.s();!(a=i.n()).done;){var n=a.value;t.readTotalCount+=Number(n.value)}}catch(o){i.e(o)}finally{i.f()}t.saleAmountGraphData.data.rows=e.indicators.map((function(e){return{type:e.lable,value:e.value}}))})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)}))},getAmountGraphData:function(e){var t=this;this.buyTotalCount=0;var a={shopId:window.top.SHOP_ID||"",type:"productNumDistribute",beginDate:this.beginDate,endDate:this.endDate,productCateGorys:[e],indicators:["productTypeNumDistribute"],viewType:this.viewType};h["a"].post("/admin/ecommerce/kpi/product/graph/product.jhtml",a).then((function(e){var a,i=Object(r["a"])(e.indicators);try{for(i.s();!(a=i.n()).done;){var n=a.value;t.buyTotalCount+=Number(n.value)}}catch(o){i.e(o)}finally{i.f()}t.amountGraphData.data.rows=e.indicators.map((function(e){return{type:e.lable,value:e.value}}))})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)}))},getSalePriceGraphData:function(e){var t=this;this.loginTotalCount=0;var a={shopId:window.top.SHOP_ID||"",type:"productSafeAnalysis",beginDate:this.beginDate,endDate:this.endDate,productCateGorys:[e],indicators:["productTypeSafeAmountDistribute"],viewType:this.viewType};h["a"].post("/admin/ecommerce/kpi/product/graph/product.jhtml",a).then((function(e){var a,i=Object(r["a"])(e.indicators);try{for(i.s();!(a=i.n()).done;){var n=a.value;t.loginTotalCount+=Number(n.value)}}catch(o){i.e(o)}finally{i.f()}t.salePriceGraphData.data.rows=e.indicators.map((function(e){return{type:e.lable,value:e.value}}))})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)}))},getLineGraphData:function(e){var t=this,a={shopId:window.top.SHOP_ID||"",type:"productSafeAnalysis",beginDate:this.beginDate,endDate:this.endDate,productCateGorys:[e],indicators:["productTypeSafeAmountTrend","productTypeSafeNumTrend"],viewType:this.viewType};h["a"].post("/admin/ecommerce/kpi/product/graph/product.jhtml",a).then((function(e){t.lineChartData=t.lineFormat(e)})).catch((function(e){e.errorMessage&&t.$message.warning(e.errorMessage)}))},lineFormat:function(e){for(var t=[],a=0;a<e.indicators.length;a++)t.push({"日期":e.indicators[a].xValue,"销售额":e.indicators[a].y[0].yValue,"销售量":e.indicators[a].y[1].yValue});var i={type:"line",data:{columns:["日期","销售额","销售量"],rows:t},settings:{yAxisName:["万元","件"],axisSite:{right:["销售量"]}}};return i},memberSelected:function(){this.showDialog=!0,this.queryCategory()},handleConfirmed:function(e,t){this.showDialog=!1,this.refresh(t[0].id)},dialogPageSizeChange:function(e){this.dialogPagination.pageSize=e,this.queryCategory()},dialogCurrentPageChange:function(e){this.dialogPagination.currentPage=e,this.queryCategory()}}),created:function(){},mounted:function(){this.refresh()}},y=f,m=(a("3eb4"),a("2877")),b=Object(m["a"])(y,i,n,!1,null,null,null);t["default"]=b.exports},"697f":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:e.title,visible:e.dialogVisible,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close,open:e.open}},[e._t("top"),a("biz-flex-table",{ref:"table",attrs:{showTable:e.showTable,operations:e.operations,filters:e.filters,tags:e.tags,rowKeys:e.rowKeys,pagination:e.pagination,tableData:e.tableData,rowClassName:e.rowClassName,loading:e.loading,memberIds:e.memberIds,checkable:e.checkable,isDepotOutNew:e.isDepotOutNew,checkedTable:e.checkedTable},on:{operate:e.operate,"row-click":e.rowClick,"filter-data-change":e.filterDataChange,"select-all":e.handleSelectAll,select:e.handleSelectionChange,"size-change":e.pageSizeChange,"current-change":e.currentPageChange,"cascader-change":e.cascaderChange,"active-item-change":e.activeItemChange,"sort-change":e.handleSortChange}},[e._t("default")],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isClear?a("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("清除")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmed}},[e._v("确定")])],1)],2)},n=[],r=(a("99af"),a("4160"),a("c975"),a("a434"),a("a9e3"),a("159b"),a("04d3")),o={name:"BizDialogSelector",components:{BizFlexTable:r["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},max:{type:Number,default:0},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},isClear:{default:!0,type:Boolean},rowClassName:{type:Function,default:function(){return null}},selectionKeys:{type:Array,default:function(){return[]}},memberIds:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},isDepotOut:{type:Boolean,default:function(){return!1}},checkTable:{type:Array,default:function(){return[]}},showTable:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],isDepotOutNew:!1,checkedTable:[],innerSelection:[]}},methods:{rowKeys:function(e){return e.id},generateSelectionKeys:function(e,t){if(e.indexOf(t)>=0)this.innerSelectionKeys.push(t[this.keyField]),this.innerSelection.push(t);else{var a=this.innerSelectionKeys.indexOf(t[this.keyField]);this.innerSelectionKeys.splice(a,1),this.innerSelection.splice(a,1)}},open:function(e){this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(e){this.innerSelectionKeys=[],this.innerSelection=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){if(this.innerSelectionKeys.length>0||!this.showTable){if(!this.showTable&&!/(http|https):\/\/([\w.]+\/?)\S*/.test(this.filters[2].value))return void this.$message.warning("必须以http,https开头,且需符合URL规范,检查格式是否正确");this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1}else this.$message("请选择一项")},clear:function(){var e=this;this.tableData.forEach((function(t){e.$refs.table.toggleRowSelection(t,!1)})),this.innerSelectionKeys=[],this.innerSelection=[]},updateSelection:function(){var e=this;this.$refs&&this.$refs.table&&this.tableData.forEach((function(t){e.innerSelectionKeys.indexOf(t[e.keyField])>=0?(e.$refs.table.toggleRowSelection(t,!0),"single"===e.selectionMode&&(e.$refs.table.$refs.table.setCurrentRow(t),e.innerSelection=[t])):e.$refs.table.toggleRowSelection(t,!1)}))},operate:function(e){this.$emit("operate",e)},filterDataChange:function(e){this.$emit("filterDataChange",e)},handleSelectAll:function(e){var t=this;0===e.length?this.tableData.forEach((function(e){var a=t.innerSelectionKeys.indexOf(e[t.keyField]);a>=0&&t.innerSelectionKeys.splice(a,1)})):this.tableData.forEach((function(e){var a=t.innerSelectionKeys.indexOf(e[t.keyField]);a<0&&t.innerSelectionKeys.push(e[t.keyField])})),this.$emit("selectionChange",e)},handleSelectionChange:function(e,t){this.generateSelectionKeys(e,t),this.$emit("selectionChange",e)},pageSizeChange:function(e){this.$emit("pageSizeChange",e)},currentPageChange:function(e){this.$emit("currentPageChange",e)},cascaderChange:function(e){this.$emit("cascaderChange",e)},activeItemChange:function(e){this.$emit("active-item-change",e)},handleSortChange:function(e){this.$emit("sort-change",e)},rowClick:function(e,t,a){"single"===this.selectionMode&&(this.innerSelectionKeys=[e[this.keyField]],this.innerSelection=[e])}},watch:{visibility:function(e,t){this.dialogVisible=e,this.isDepotOutNew=this.isDepotOut,this.checkedTable=this.checkTable}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){},updated:function(){this.updateSelection()}},s=o,c=(a("0943"),a("2877")),l=Object(c["a"])(s,i,n,!1,null,null,null);t["a"]=l.exports},af3f:function(e,t,a){"use strict";var i=a("697f");t["a"]=i["a"]},cc29:function(e,t,a){}}]);