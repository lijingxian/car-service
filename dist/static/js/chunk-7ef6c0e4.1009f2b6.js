(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ef6c0e4"],{"024a":function(e,t,a){"use strict";var i=a("7b61"),n=a.n(i);n.a},"7b61":function(e,t,a){},ec86:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"marketing-statistics-activity-kpi-report"},[a("biz-chart",{attrs:{chartData:e.chartData,filters:e.filters,loading:e.loading,pagination:e.pagination},on:{filterDataChange:e.filterDataChange,handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,refreshHandle:e.refreshHandle,exportExcle:e.exportExcle}},[a("div",{attrs:{slot:"list"},slot:"list"},["workSheetCnt"!==e.filters[0].value&&"workSheetDuration"!==e.filters[0].value?a("biz-list",{ref:"list",staticStyle:{width:"100%"},attrs:{height:e.height,tableData:e.tableData}},[a("el-table-column",{attrs:{prop:"csAccountName",label:"客服人员"}}),a("el-table-column",{attrs:{prop:"date",label:"日期"}}),a("el-table-column",{attrs:{prop:"mobile",label:"用户手机号"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),a("el-table-column",{attrs:{prop:"length",label:"会话时长（分钟）"}}),a("el-table-column",{attrs:{prop:"memberScore",label:"用户评分（分）"}}),a("el-table-column",{attrs:{prop:"managerScore",label:"质检评分（分）"}})],1):e._e(),"workSheetCnt"===e.filters[0].value||"workSheetDuration"===e.filters[0].value?a("biz-list",{ref:"list",staticStyle:{width:"100%"},attrs:{height:e.height,tableData:e.tableData}},[a("el-table-column",{attrs:{prop:"number",label:"工单号"}}),a("el-table-column",{attrs:{prop:"date",label:"日期"}}),a("el-table-column",{attrs:{prop:"type",label:"工单类型"}}),a("el-table-column",{attrs:{prop:"sponsor",label:"发起人"}}),a("el-table-column",{attrs:{prop:"handler",label:"受理人"}}),a("el-table-column",{attrs:{prop:"createDate",label:"创建日期"}}),a("el-table-column",{attrs:{prop:"modifyDate",label:"更新日期"}}),a("el-table-column",{attrs:{prop:"length",label:"处理时长（分钟）"}})],1):e._e()],1),a("div",{attrs:{slot:"description"},slot:"description"},[a("p",[e._v("会话数量：统计期内客服会话数量总计")]),a("p",[e._v("用户满意度：统计期内客服会话--用户评分平均值")]),a("p",[e._v("会话时长：统计期内所有会话时长的平均值")]),a("p",[e._v("质检评分：统计期内客服会话--质检评分平均值")]),a("p",[e._v("工单数量：统计期内创建的工单数量")]),a("p",[e._v("工单处理时长：统计期内工单的处理时长平均值，若工单未完结，结束时间按统计时间计算")])])])],1)},n=[],l=(a("99af"),a("a15b"),a("a9e3"),a("d3b7"),a("562e")),r=a("7558"),s=a("ce0c"),o=a("c596"),c=a("1ab1"),h={name:"ActivityKpiReport",data:function(){return{today:"",loading:!0,height:"500",beginDate:s["a"].getMonthStartDate(),endDate:s["a"].getMonthEndDate(),viewType:"month",pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},tableData:[],filters:[{type:"select",label:"统计指标",value:"sessionCnt",options:[{value:"sessionCnt",label:"会话数量"},{value:"serviceSatisfaction",label:"用户满意度"},{value:"sessionDuration",label:"会话时长"},{value:"managerScore",label:"质检评分"},{value:"workSheetCnt",label:"工单数量"},{value:"workSheetDuration",label:"工单处理时长"}]}],kpiName:["当前","同比","环比"],chartData:{}}},methods:{init:function(){var e=this;this.loading=!0;var t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};c["a"].get(o["g"].customerService.statisticsAnalysis.serviceReport,t).then((function(t){e.chartData=e.dataFormat(t)})).catch((function(t){e.loading=!1,t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(t){e.loading=!1}))},getTable:function(){var e=this,t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};c["a"].get(o["g"].customerService.statisticsAnalysis.serviceTable,t).then((function(t){e.tableData=t.dataList,e.pagination.total=Number(t.total)})).catch((function(t){e.loading=!1,t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(t){e.loading=!1}))},refreshHandle:function(e){this.viewType=e.viewType,this.beginDate=e.date[0],this.endDate=e.date[1],this.init(),this.getTable()},filterDataChange:function(e){this.filters=e,this.init(),this.getTable()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getTable()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getTable()},exportExcle:function(){var e=this,t={viewType:this.viewType,indicator:this.filters[0].value,beginDate:this.beginDate,endDate:this.endDate};c["a"].get(o["g"].customerService.statisticsAnalysis.serviceExport,t).then().catch((function(a){if(a.errorMessage||"没有符合条件的数据"===a)"没有符合条件的数据"===a?e.$message.warning("没有符合条件的数据"):(e.$message.warning(a.errorMessage),console.log("ERR_EXPORT: ",a));else{var i=[];for(var n in t)i.push("".concat(n,"=").concat(t[n]));var l="".concat(o["g"].customerService.statisticsAnalysis.serviceExport,"?")+i.join("&");window.open(l)}}))},dataFormat:function(e){for(var t=[],a=0;a<e.indicators.length;a++)t.push({"日期":e.indicators[a].xValue,"当前":e.indicators[a].yValue,"同比":e.indicators[a].yYearOnYear,"环比":e.indicators[a].yMonthOnMonth});var i={type:"histogram",data:{columns:["日期",this.kpiName[0],this.kpiName[1],this.kpiName[2]],rows:t},settings:{showLine:[this.kpiName[1],this.kpiName[2]]}};return i}},computed:{},created:function(){this.init(),this.getTable()},components:{BizChart:l["a"],BizList:r["a"]}},p=h,g=(a("024a"),a("2877")),u=Object(g["a"])(p,i,n,!1,null,null,null);t["default"]=u.exports}}]);