(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fb22b10"],{2497:function(e,t,a){"use strict";var n=a("4360"),r=a("a18c");t["a"]=function(e,t){return function(a){var o=a.data;"100"===o.resultCode?e(o):"709"===o.resultCode?(n["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",n["a"].getters.currentUser),r["a"].push("/login")):t(o)}}},"4e8d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{staticClass:"vehicle-mgmt-car-state"},[a("biz-flex-table",{attrs:{operations:e.operations,filters:e.filters,tableData:e.tableData,pagination:e.pagination,checkable:e.checkable},on:{operate:e.operate,"filter-data-change":e.filterDataChange,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{width:"110",prop:"plateNumber",label:"车牌号"}}),a("el-table-column",{attrs:{"min-width":"120",prop:"terminalNumber",label:"设备号"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"simNumber",label:"卡号"}}),a("el-table-column",{attrs:{"min-width":"150",prop:"happenDate",label:"最后上报时间"}}),a("el-table-column",{attrs:{"min-width":"50",prop:"speed",label:"速度"}}),a("el-table-column",{attrs:{width:"80",prop:"terminalState",label:"设备状态"}}),a("el-table-column",{attrs:{width:"100",prop:"runningStatus",label:"车辆状态"}}),a("el-table-column",{attrs:{width:"150",prop:"address",label:"位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.address||"--")+" ")]}}])})],1)],1)},r=[],o=(a("d81d"),a("b0c0"),a("04d3")),c=a("f36f"),i=a("cc3c"),l={name:"CarState",data:function(){return{operations:[{label:"导出",name:"export",type:""}],filters:[{type:"select",label:"车队",name:"carGroup",value:"",options:[]},{type:"input",placeholder:"请输入设备号/卡号/车牌号",name:"searchbar",value:""}],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},tableData:[],checkable:!1}},methods:{operate:function(e){this[e]()},filterDataChange:function(e){this.filters=e,this.refresh()},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()},export:function(){var e=this,t="";this.filters[0].options.map((function(a){a.value===e.filters[0].value&&(t=a.label)}));var a={fleetName:t};i["a"].carStateExport(a,(function(e){}),(function(e){console.log("ERR_EXPORT: ",e)}))},refresh:function(){var e=this,t={fleetId:this.filters[0].value,value:this.filters[1].value};i["a"].queryCarStateData(t,(function(t){e.tableData=t.carStates,e.pagination.total=e.tableData.length}),(function(e){console.log("ERR_REFRESH: ",e)}))},queryCarFleet:function(){var e=this,t={fleetType:"group",pageNumber:"1",pageSize:"200"};i["a"].queryFleetList(t,(function(t){var a=[];t.content.map((function(e){a.push({value:e.id,label:e.name})})),e.$set(e.filters[0],"options",a),e.filters[0].value=e.filters[0].options[0].value,console.log("fleetList: ",e.filters[0])}),(function(e){console.log("ERR_GET_FLEET: ",e)}))}},mounted:function(){this.queryCarFleet(),this.refresh()},components:{BizFlexTable:o["c"],BizGrid:c["a"]}},s=l,u=(a("c5c3"),a("2877")),p=Object(u["a"])(s,n,r,!1,null,null,null);t["default"]=p.exports},c5c3:function(e,t,a){"use strict";var n=a("e616"),r=a.n(n);r.a},cc3c:function(e,t,a){"use strict";a("99af"),a("a15b");var n=a("2497"),r=a("bc3a"),o=a.n(r),c=a("c596");t["a"]={queryFleetList:function(e,t,a){o.a.get(c["g"].vehicleMgmt.MarketingCars_queryFleetList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryCarList:function(e,t,a){o.a.get(c["g"].vehicleMgmt.MarketingCars_queryCarList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryDriverList:function(e,t,a){o.a.get(c["g"].vehicleMgmt.MarketingCars_queryDriverList,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryMarketingCarsData:function(e,t,a){o.a.get(c["g"].vehicleMgmt.MarketingCars_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryMarketingCarsChart:function(e,t,a){o.a.get(c["g"].vehicleMgmt.MarketingCars_queryChart,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},marketingCarsExport:function(e,t,a){window.open(c["g"].vehicleMgmt.MarketingCars_export+"?fleetName="+e.fleetName+"&type="+e.type+"&summaryMode="+e.summaryMode+"&dateRange="+e.dateRange)},queryCarStateData:function(e,t,a){o.a.get(c["g"].vehicleMgmt.CarState_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},carStateExport:function(e,t,a){window.open(c["g"].vehicleMgmt.CarState_export+"?fleetName="+e.fleetName)},queryAbnormalData:function(e,t,a){o.a.get(c["g"].vehicleMgmt.AbnormalStatistics_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},abnormalExport:function(e,t,a){var n=[];for(var r in e)n.push("".concat(r,"=").concat(e[r]));window.open(c["g"].vehicleMgmt.AbnormalStatistics_export+"?"+n.join("&"))},querySpeed:function(e,t,a){o.a.get(c["g"].vehicleMgmt.CarSpeed_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},querySpeedChart:function(e,t,a){o.a.get(c["g"].vehicleMgmt.CarSpeedChart_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},speedExport:function(e,t,a){window.open(c["g"].vehicleMgmt.CarSpeed_export+"?plateNumber="+e.plateNumber+"&speed="+e.speed+"&dateRange="+e.dateRange)},queryPayment:function(e,t,a){o.a.get(c["g"].vehicleMgmt.CarPayment_query,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExpenseAnalysis:function(e,t,a){o.a.get(c["g"].vehicleMgmt.CarExpensAnalyze,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExpensePropotion:function(e,t,a){o.a.get(c["g"].vehicleMgmt.CarExpensePropotion,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExpenseYearOnYear:function(e,t,a){o.a.get(c["g"].vehicleMgmt.CarExpenseYearOnYear,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))},queryExpenseMonthOnMonth:function(e,t,a){o.a.get(c["g"].vehicleMgmt.CarExpenseMonthOnMonth,{params:e}).then(Object(n["a"])(t,a)).catch((function(e){console.error(e)}))}}},e616:function(e,t,a){}}]);