(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30e3b672"],{"25d4":function(t,a,e){},"86fc":function(t,a,e){"use strict";var i=e("25d4"),s=e.n(i);s.a},f412:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"operate-report"},[e("div",{staticClass:"top"},[e("div",{staticClass:"block"},[e("div",{staticClass:"demonstration"},[t._v("月份")]),e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"month",placeholder:"选择月",size:"mini","picker-options":t.pickerOptions},on:{change:t.dateChange},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}}),e("div",{staticClass:"demonstration"},[t._v("店铺")]),e("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:t.shopChange},model:{value:t.checkedShops,callback:function(a){t.checkedShops=a},expression:"checkedShops"}},t._l(t.shopsList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("div",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.printView}},[t._v("打印")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.save}},[t._v("导出")])],1)]),e("div",{ref:"imageWrapper"},[e("div",{staticClass:"title-header"},[e("span",[t._v(t._s(t.shopName))]),e("span",[t._v("运营月报")]),e("span",[t._v("|")]),e("span",[t._v(t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"1-"+t._s(t.lastDate)+"日")])]),e("div",{staticClass:"content"},[t._m(0),e("div",{staticClass:"des"},[e("p",[t._v(" "+t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"， 共新增订单"+t._s(t.indicators.orderInc)+"单，总销售额"+t._s(t.indicators.orderAmountInc)+"万元，同比增加"+t._s(t.indicators.orderAmountIncYoy)+"%，环比增加"+t._s(t.indicators.orderAmountIncMom)+"%； ")]),e("p",[t._v(" 从销售热度分析，整车商品中"+t._s(t.carData[0].xValue)+"最受欢迎； 车品中"+t._s(t.productData[0].xValue)+"最受欢迎；服务中"+t._s(t.serviceData[0].xValue)+"最受欢迎。 ")])]),e("div",{staticClass:"chart-area"},[e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartData,loading:t.loading,showSearch:!1}}),e("div",{staticClass:"des",attrs:{align:"center"}},[t._v("整车销量排行")])],1),e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartDataOfAppreciation,loading:t.loading,showSearch:!1}}),e("div",{staticClass:"des",attrs:{align:"center"}},[t._v("车品销量排行")])],1),e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartServiceData,loading:t.loading,showSearch:!1}}),e("div",{staticClass:"des",attrs:{align:"center"}},[t._v("服务销量排行")])],1)])]),e("div",{staticClass:"content"},[t._m(1),e("div",{staticClass:"des"},[e("p",[t._v(" "+t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"，服务态度满意度"+t._s(t.indicators.serviceAttitudeInc)+"分，同比增加"+t._s(t.indicators.serviceAttitudeIncYoy)+"%，环比增加"+t._s(t.indicators.serviceAttitudeIncMom)+"%； 专业技能满意度"+t._s(t.indicators.professionalInc)+"分，同比增加"+t._s(t.indicators.professionalIncYoy)+"%，环比增加"+t._s(t.indicators.professionalIncMom)+"%。 售后次数"+t._s(t.indicators.afterSaleRefundNumInc)+"次，同比增加"+t._s(t.indicators.afterSaleRefundNumIncYoy)+"%，环比增加"+t._s(t.indicators.afterSaleRefundNumIncMom)+"%。 "),t.indicators.memberIncMon?e("span",[t._v("以"+t._s(t.indicators.memberIncMom)+"原因为主。售后金额"+t._s(t.indicators.afterSaleRefundAmountInc)+"次，同比增加"+t._s(t.indicators.afterSaleRefundAmountIncYoy)+"%，环比增加"+t._s(t.indicators.afterSaleRefundAmountIncMom)+"%，其中进行售后次数最多的商品是"+t._s(t.topConsultantX[0])+"。")]):t._e()])]),e("div",{staticClass:"chart-area"},[e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartDataOfSatisfaction,loading:t.loading,showSearch:!1}}),e("div",{staticClass:"des",attrs:{align:"center"}},[t._v("订单满意度")])],1),e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartDataOfConsultant,loading:t.loading,showSearch:!1}}),e("div",{staticClass:"des",attrs:{align:"center"}},[t._v("TOP售后商品排行")])],1)])]),e("div",{staticClass:"content"},[t._m(2),e("div",{staticClass:"des"},[t._l(t.indicators.advise,(function(a,i){return e("p",{directives:[{name:"show",rawName:"v-show",value:t.indicators.advise&&t.indicators.advise.length>0,expression:"indicators.advise && indicators.advise.length > 0"}],key:i},[t._v(" "+t._s(a.join(","))+" ")])})),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.indicators.advise||0===t.indicators.advise.length,expression:"!indicators.advise || indicators.advise.length === 0"}]},[t._v(" 您的店铺当月经营良好，暂无明显需要改善的地方。 ")])],2)])]),e("el-dialog",{attrs:{visible:t.dialogTableVisible,center:"",width:"1200px","append-to-body":""},on:{"update:visible":function(a){t.dialogTableVisible=a}}},[e("div",{attrs:{align:"right"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.print}},[t._v("打印")])],1),e("vue-easy-print",{ref:"easyPrint",attrs:{tableShow:""}},[e("img",{attrs:{src:t.url,width:"100%"}})])],1)],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title-header"},[e("span",[t._v("一、销售情况")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title-header"},[e("span",[t._v("二、分车型/顾问销售情况")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title-header"},[e("span",[t._v("三、结论建议")])])}],n=(e("d81d"),e("b0c0"),e("d3b7"),e("ac1f"),e("1276"),e("5530")),r=e("562e"),o=e("2f62"),c=e("fedf"),d=e("1ab1"),h=e("c466"),l=e("ce0c"),p=e("225d"),u=e("c0e9"),g=e.n(u),m=e("e511"),f=e.n(m),v={name:"CustomerServiceNav",data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},companyCount:0,storeCount:0,unionCount:0,beginDate:l["a"].getMonthStartDate(),endDate:h["a"].nowDate(),addOperator:"",addStore:"",storeList:"",url:"",isIndeterminateShops:!0,dialogTableVisible:!1,loading:!1,checkAllShops:!0,checkedShops:this.getUser().shop.id,shopsList:[],carData:[],serviceData:[],productData:[],chartData:{},chartDataOfAppreciation:{},chartServiceData:{},chartDataOfSatisfaction:{},chartDataOfConsultant:{},topCarX:[],topCarY:[],topCarAmountX:[],topCarAmountY:[],topConsultantX:[],topConsultantY:[],topConsultantAmountX:[],topConsultantAmountY:[],indicators:{advise:[]},imgUrl:"",kpiName:["本期","同比","环比"]}},computed:{shopName:function(){var t=this,a=this.getUser().shop.name;return this.shopsList.map((function(e){t.checkedShops===e.id&&(a=e.name)})),a},lastDate:function(){return h["a"].getMonthDays(this.endDate)}},components:{BizChart:r["a"],vueEasyPrint:p["a"]},created:function(){this.getShopList()},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["getUser"])),Object(o["d"])("Menu",["updateRoutes"])),Object(o["c"])("Authority",["currentAuth"])),{},{print:function(){this.$refs.easyPrint.print()},dateChange:function(){this.beginDate=this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-01",this.query()},init:function(){var t=this,a={viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};d["a"].post("/admin/ecommerce/kpi/order/summary/order/report.jhtml",a).then((function(a){t.indicators=a.indicators})).catch((function(a){a.errorMessage&&t.$message.warning(a.errorMessage)}))},printView:function(){var t=this,a=this;window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,setTimeout((function(){g()(t.$refs.imageWrapper).then((function(t){a.url=t.toDataURL(),a.dialogTableVisible=!0}))}),500)},save:function(){var t=this,a=this;window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,setTimeout((function(){g()(t.$refs.imageWrapper).then((function(t){var e=t.width,i=t.height,s=e/592.28*841.89,n=i,r=0,o=595.28,c=592.28/e*i,d=t.toDataURL("image/jpeg",1),h=new f.a("","pt","a4");if(n<s)h.addImage(d,"JPEG",0,0,o,c);else while(n>0)h.addImage(d,"JPEG",0,r,o,c),n-=s,r-=841.89,n>0&&h.addPage();h.save("运营月报.pdf"),a.loading=!1}))}),500)},link:function(t){this.updateRoutes({routes:c["a"]["".concat(t.split("/")[1])]}),this.$router.push(t)},query:function(){this.getGraphData(),this.getGraphAppreciationData(),this.getGraphPieData(),this.getGraphServiceData(),this.getGraphGeneralData(),this.init()},shopChange:function(t){this.query()},getShopList:function(){var t=this,a={sourceType:"5"};d["a"].get("/admin/member/json/findEShops.jhtml",a).then((function(a){t.shopsList=a.shops,t.query()})).catch((function(a){a.errorMessage&&t.$message.warning(a.errorMessage)}))},getGraphGeneralData:function(){var t=this;this.loading=!0;var a={viewType:"month",type:"afterSaleProduct",indicators:["afterSaleProduct"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopId:this.checkedShops};d["a"].post("/admin/ecommerce/kpi/order/graph/order/order.jhtml",a).then((function(a){t.chartDataOfConsultant=t.dataConsultantFormat(a),t.topConsultantX=[],a.indicators.map((function(a,e){e<5&&t.topConsultantX.push(a.xValue)})),t.topConsultantY=[],a.indicators.map((function(a,e){e<5&&t.topConsultantY.push(a.yValue)}))})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},dataConsultantFormat:function(t){for(var a=[],e=0;e<t.indicators.length;e++)a.push({"商品":t.indicators[e].xValue,"售后次数":t.indicators[e].yValue});var i={legendVisible:!1,type:"histogram",data:{columns:["商品","售后次数"],rows:a},settings:{}};return i},getGraphPieData:function(){var t=this;this.loading=!0;var a={type:"orderSatisfaction",indicators:["serviceAttitude","serviceSpeed","professional"],viewType:"month",beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||""};d["a"].post("/admin/ecommerce/kpi/order/graph/order/order.jhtml",a).then((function(a){t.chartDataOfSatisfaction=t.dataSatisfactionFormat(a)})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},dataSatisfactionFormat:function(t){for(var a=[],e=0;e<t.indicators.length;e++)a.push({"日期":t.indicators[e].xValue,"服务态度":t.indicators[e].y[0].yValue,"服务速度":t.indicators[e].y[1].yValue,"专业技能":t.indicators[e].y[2].yValue});var i={type:"line",data:{columns:["日期","服务态度","服务速度","专业技能"],rows:a},settings:{}};return i},getGraphData:function(){var t=this;this.loading=!0;var a={viewType:"month",indicators:["hotCar"],type:"orderHot",beginDate:h["a"].halfYearAgo(this.endDate),endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopId:this.checkedShops};d["a"].post("/admin/ecommerce/kpi/order/graph/order/order.jhtml",a).then((function(a){t.chartData=t.dataFormat(a),t.carData=a.indicators})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},getGraphServiceData:function(){var t=this;this.loading=!0;var a={viewType:"month",indicators:["hotService"],type:"orderHot",beginDate:h["a"].halfYearAgo(this.endDate),endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopId:this.checkedShops};d["a"].post("/admin/ecommerce/kpi/order/graph/order/order.jhtml",a).then((function(a){t.chartServiceData=t.dataFormat(a),t.serviceData=a.indicators})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},dataFormat:function(t){for(var a=[],e=0;e<t.indicators.length;e++)a.push({"商品":t.indicators[e].xValue,"个":t.indicators[e].yValue});var i={legendVisible:!1,type:"histogram",data:{columns:["商品","个"],rows:a},settings:{}};return i},getGraphAppreciationData:function(){var t=this;this.loading=!0;var a={viewType:"month",indicators:["hotProduct"],type:"orderHot",beginDate:h["a"].halfYearAgo(this.endDate),endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopId:this.checkedShops};d["a"].post("/admin/ecommerce/kpi/order/graph/order/order.jhtml",a).then((function(a){t.chartDataOfAppreciation=t.dataFormat(a),t.productData=a.indicators})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},dataAppreciationFormat:function(t){for(var a=[],e=0;e<t.indicators.length;e++)a.push({"日期":t.indicators[e].xValue,"本期":t.indicators[e].yValue,"同比":t.indicators[e].yoyRate,"环比":t.indicators[e].momRate});var i={type:"histogram",data:{columns:["日期",this.kpiName[0],this.kpiName[1],this.kpiName[2]],rows:a},settings:{axisSite:{right:["同比","环比"]},yAxisType:["KMB","KMB"],yAxisName:["","%"],showLine:[this.kpiName[1],this.kpiName[2]]}};return i}}),mounted:function(){}},D=v,y=(e("86fc"),e("2877")),_=Object(y["a"])(D,i,s,!1,null,null,null);a["default"]=_.exports}}]);