(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0c24424"],{"0943":function(e,t,r){"use strict";var a=r("1fac"),n=r.n(a);n.a},"0e5e":function(e,t,r){"use strict";var a=r("2497"),n=r("bc3a"),o=r.n(n),i=r("c596");t["a"]={query:function(e,t,r){o.a.get(i["g"].vehicleMgmt.VehicleBaseInfo_query,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryShopList:function(e,t,r){o.a.get(i["g"].vehicleMgmt.Component_queryShops,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryBrandList:function(e,t,r){o.a.get(i["g"].vehicleMgmt.Component_queryBrands,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},querySeriesList:function(e,t,r){o.a.get(i["g"].vehicleMgmt.Component_querySeries,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryTypeList:function(e,t,r){o.a.get(i["g"].vehicleMgmt.Component_queryTypes,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryDimList:function(e,t,r){o.a.get(i["g"].vehicleMgmt.VehicleBaseInfo_queryDimList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryInsuranceList:function(e,t,r){o.a.get(i["g"].vehicleMgmt.VehicleBaseInfo_queryInsuranceList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryTerminalList:function(e,t,r){o.a.get(i["g"].vehicleMgmt.VehicleBaseInfo_queryTerminalList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryTerminalInfo:function(e,t,r){o.a.get(i["g"].vehicleMgmt.VehicleBaseInfo_queryTerminalInfo,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},update:function(e,t,r){o.a.post(i["g"].vehicleMgmt.VehicleBaseInfo_update,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},add:function(e,t,r){o.a.post(i["g"].vehicleMgmt.VehicleBaseInfo_add,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))}}},"0f32":function(e,t,r){"use strict";var a=r("75e2"),n=r.n(a);n.a},1029:function(e,t,r){"use strict";var a=r("f9a5"),n=r.n(a);n.a},1148:function(e,t,r){"use strict";var a=r("a691"),n=r("1d80");e.exports="".repeat||function(e){var t=String(n(this)),r="",o=a(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},"11e9":function(e,t,r){"use strict";var a=r("2497"),n=r("bc3a"),o=r.n(n),i=r("c596");t["a"]={getCommodityList:function(e,t,r){o.a.get(i["g"].commodity.getCommodityList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},delete:function(e,t,r){o.a.delete(i["g"].commodity.delete,{data:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},query:function(e,t,r){o.a.get(i["g"].commodity.query,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},soldoutAndPutaway:function(e,t,r){o.a.post(i["g"].commodity.soldoutAndPutaway,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},cloneProduct:function(e,t,r){o.a.post(i["g"].commodity.cloneProduct,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryPlatformCategoryTree:function(e,t,r){o.a.get(i["g"].commodity.queryPlatformCategoryTree,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryPlatformImportInfo:function(e,t,r){o.a.get(i["g"].commodity.queryPlatformImportInfo,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},importPlatformProduct:function(e,t,r){o.a.post(i["g"].commodity.importPlatformProduct,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},audit:function(e,t,r){o.a.post(i["g"].commodity.audit,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},auditTarget:function(e,t,r){o.a.post(i["g"].commodity.auditTarget,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},recallProduct:function(e,t,r){o.a.get(i["g"].commodity.recallProduct,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryFilters:function(e,t,r){o.a.get(i["g"].commodity.queryFilters,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))}}},"18eb":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"biz-tag-select"},[r("div",{staticClass:"tag-content"},[r("div",{staticClass:"tag-show-eara"},e._l(e.curSelectedTags,(function(t,a){return r("el-tag",{key:a,staticClass:"sel-tag",attrs:{closable:""},on:{close:function(r){return e.onClose(t,a)}}},[e._v(" "+e._s(t.name?t.name:t)+" ")])})),1),r("div",{staticClass:"select-area"},[r("div",{staticClass:"search-container"},[e.bAddTag?r("el-input",{attrs:{placeholder:"请输入关键词，按回车添加新标签"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.tagName,callback:function(t){e.tagName=t},expression:"tagName"}}):e._e()],1),e.tagList.length?r("div",{staticClass:"tag-container"},[r("el-checkbox-group",{attrs:{size:"small"},on:{change:e.onChange},model:{value:e.curSelectedTags,callback:function(t){e.curSelectedTags=t},expression:"curSelectedTags"}},e._l(e.curShowTags,(function(t,a){return r("el-checkbox-button",{key:a,staticClass:"tag-column",attrs:{label:t.name}},[e._v(e._s(t.name)+" ")])})),1),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showMore,expression:"showMore"}],staticClass:"more-btn",attrs:{small:"",type:"primary"},on:{click:e.onMore}},[e._v("更多...")])],1):r("div",{staticClass:"empty"},[e._v("暂无标签数据")])])])])},n=[],o=(r("4160"),r("d81d"),r("a434"),r("b0c0"),r("ac1f"),r("5319"),r("159b"),r("1ab1")),i=r("c596"),s={name:"biz-tag-select",data:function(){return{curSelectedTags:[],tagName:"",tagCatrgoryId:"",showMore:!1,curShowTags:[]}},props:{tagList:{type:Array},selectedTags:{type:Array},bAddTag:{type:Boolean,default:!0},selectType:{type:String},categoryType:{type:String,default:function(){return""}}},components:{},computed:{},watch:{selectedTags:function(e){this.curSelectedTags=e.map((function(e){return e.name?e.name:e}))},tagList:function(e){var t=this;e&&e.length&&(this.curShowTags.splice(0,this.curShowTags.length),this.tagCatrgoryId=e[0].tagCategory.id,this.showMore=e.length>6,e.forEach((function(e,r){r<6&&t.curShowTags.push(e)})))}},methods:{getCurSelectedTags:function(e){var t,r,a=this;return t=[],this.curSelectedTags.forEach((function(e){a.tagList.forEach((function(a){a.name===e&&(r={},r.id=a.id,r.name=a.name,t.push(r))}))})),t},onChange:function(e){"order"===this.selectType&&this.curSelectedTags.length>1&&(this.curSelectedTags.pop(),this.$message.warning("您已选择标签，如需要变更请先删除之前的选择")),this.$emit("change",e)},onClose:function(e,t){console.log(e),this.curSelectedTags.splice(t,1)},handleInputConfirm:function(){this.tagName=this.tagName.replace(/\s+/g,""),this.tagName&&(this.tagCatrgoryId?this.addTag():"店铺特色"===this.categoryType&&this.getTagCatrgoryId())},getTagCatrgoryId:function(){var e=this,t={categoryType:"店铺特色",isIncludeParent:"1"};o["a"].get(i["g"].systemSetting.storeTagcategories,t).then((function(t){t.content.length&&(e.tagCatrgoryId=t.content[0].id,e.addTag())})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))},addTag:function(){var e=this,t={name:this.tagName,hierarchy:"1",tagCategory:{id:this.tagCatrgoryId}};o["a"].post(i["g"].systemSetting.deleteTag,t).then((function(t){e.$emit("addSuccess"),console.log(e.curSelectedTags),e.tagName=""})).catch((function(t){e.$message.warning(t.errorMessage),console.log(t.errorMessage)}))},onMore:function(){"shopProfile"===this.selectType?this.$emit("showMore"):(this.showMore=!1,this.curShowTags=this.tagList)}}},l=s,c=(r("663e"),r("2877")),m=Object(c["a"])(l,a,n,!1,null,null,null),d=m.exports;t["a"]=d},"1fac":function(e,t,r){},2086:function(e,t,r){"use strict";var a=r("2497"),n=r("bc3a"),o=r.n(n),i=r("c596");t["a"]={getList:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.getMemberCardList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getRightsList:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.getList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},listDistributeRights:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.listDistributeRights,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},listCardTemplate:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.listCardTemplate,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getlistVbean:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.getlistVbean,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getIntegralList:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.getIntegralList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},listProduct:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.listProduct,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryUserRights:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.queryUserRights,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryUserCoupons:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.queryUserCoupons,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},listByRights:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.listByRights,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getVipCardInfo:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.getVipCardInfo,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getVipCardTemplate:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.getVipCardTemplate,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},memberRankList:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.memberRankList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},setting:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.setting,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},settingUpdate:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.setting,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryPeople:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.queryPeople,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},delete:function(e,t,r){o.a.delete(i["g"].memberCardMgmt.memberCard.deleteManage,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},verification:function(e,t,r){o.a.post(i["g"].memberCardMgmt.vipRights.verification,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},updateTemplate:function(e,t,r){o.a.put(i["g"].memberCardMgmt.memberCard.updateTemplate,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},createTemplate:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.updateTemplate,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},delTemplate:function(e,t,r){o.a.delete(i["g"].memberCardMgmt.memberCard.updateTemplate,{data:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},distributeRights:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.distributeRights,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},distributeAssignedRights:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.distributeAssignedRights,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},updateVipCardState:function(e,t,r){o.a.put(i["g"].memberCardMgmt.memberCard.updateVipCardState,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},createVipCard:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.createVipCard,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},createBean:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.createBean,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},createPoint:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.createPoint,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},addScore:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.addScore,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},reduceDeposit:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.reduceDeposit,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getlistUpgrade:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.getlistUpgrade,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getlistStore:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.getlistStore,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},updateGrade:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.updateGrade,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getVipCardGradeInfo:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.getVipCardGradeInfo,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},editVipCardGrade:function(e,t,r){o.a.put(i["g"].memberCardMgmt.memberCard.VipCardGrade,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},addVipCardGrade:function(e,t,r){o.a.post(i["g"].memberCardMgmt.memberCard.VipCardGrade,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},delVipCardGrade:function(e,t,r){o.a.delete(i["g"].memberCardMgmt.memberCard.VipCardGrade,{data:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},listAuthority:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.listAuthority,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},vipRightsList:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.getList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryrightsClass:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.get,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getFirstClassifies:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.getFirstClassifies,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},rightsCouponList:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.rightsCouponList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryRightsCoupon:function(e,t,r){o.a.get(i["g"].memberCardMgmt.vipRights.queryRightsCoupon,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},memberCardBox:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.memberCardBox,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},editRightsClass:function(e,t,r){o.a.put(i["g"].memberCardMgmt.vipRights.edit,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},createRightsClass:function(e,t,r){o.a.post(i["g"].memberCardMgmt.vipRights.add,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},rightsCouponUpdate:function(e,t,r){o.a.put(i["g"].memberCardMgmt.vipRights.rightsCouponUpdate,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},rightsCouponCreate:function(e,t,r){o.a.post(i["g"].memberCardMgmt.vipRights.rightsCouponCreate,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},deleteRightscoupon:function(e,t,r){o.a.delete(i["g"].memberCardMgmt.vipRights.deleteRightscoupon,{data:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},deleteRights:function(e,t,r){o.a.delete(i["g"].memberCardMgmt.vipRights.delete,{data:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},certificate:function(e,t,r){o.a.get(i["g"].memberCardMgmt.memberCard.certificate,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))}}},"225d":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.tableShow,expression:"tableShow"}],ref:"template"},[e._t("default",[r("span",[e._v("编写你自己的打印区域组件，然后slot插入到vue-easy-print")])],{getChineseNumber:e.getChineseNumber})],2),e.buttonShow?r("button",{class:e.buttonClass,attrs:{type:"button"},on:{click:e.print}},[r("span",[e._v("开始打印")])]):e._e()])},n=[],o=(r("a9e3"),r("d3b7"),r("ac1f"),r("25f0"),r("466d"),r("5319"),r("1276"),{name:"vue-easy-print",components:{},props:{spaceRow:{type:Boolean,default:!1},tableData:{type:Object,default:function(){}},tableShow:{type:Boolean,default:!1},buttonShow:{type:Boolean,default:!1},buttonClass:{type:String,default:"el-button el-button--default"},onePageRow:{type:Number,default:5},beforeCopy:Function,beforePrint:Function},data:function(){return{}},mounted:function(){this.init()},methods:{init:function(){var e=this,t=document.getElementById("easyPrintIframe");t?this.getStyle():(t=document.createElement("iframe"),t.id="easyPrintIframe",t.style.position="fixed",t.style.width="0",t.style.height="0",t.style.top="-100px",window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)&&(t.src='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")'),t.onload=function(){e.getStyle()},document.body.appendChild(t))},print:function(){"function"===typeof this.beforeCopy&&this.beforeCopy();var e=document.getElementById("easyPrintIframe");e.contentDocument.body.innerHTML=this.$refs.template.innerHTML,"function"===typeof this.beforePrint&&this.beforePrint(),setTimeout((function(){e.contentWindow.print()}),100)},getStyle:function(){for(var e=document.getElementById("easyPrintIframe"),t="",r=document.querySelectorAll("style"),a=0;a<r.length;a++)t+=r[a].outerHTML;e.contentDocument.head.innerHTML=t;for(var n=document.querySelectorAll("link"),o=0;o<n.length;o++){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),n[o].type?i.setAttribute("type",n[o].type):i.setAttribute("type","text/css"),i.setAttribute("href",n[o].href),i.setAttribute("media","all"),e.contentDocument.head.appendChild(i)}},getChineseNumber:function(e){var t,r,a,n,o,i,s,l,c,m,d,p,u,f,g=99999999999.99,h="零",b="壹",y="贰",v="叁",I="肆",C="伍",w="陆",M="柒",S="捌",T="玖",D="拾",O="佰",_="仟",k="万",P="亿",$="",x="元",N="角",L="分",z="整";if(void 0===e)return"";if(e=e.toString(),""==e)return"";if(null!=e.match(/[^,.\d]/))return"";if(null==e.match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/))return"";if(e=e.replace(/,/g,""),e=e.replace(/^0+/,""),Number(e)>g)return alert("您输入的金额太大，请重新输入!"),"";if(n=e.split("."),n.length>1?(t=n[0],r=n[1],r=r.substr(0,2)):(t=n[0],r=""),o=new Array(h,b,y,v,I,C,w,M,S,T),i=new Array("",D,O,_),s=new Array("",k,P),l=new Array(N,L),a="",Number(t)>0){for(c=0,m=0;m<t.length;m++)d=t.length-m-1,p=t.substr(m,1),u=d/4,f=d%4,"0"==p?c++:(c>0&&(a+=o[0]),c=0,a+=o[Number(p)]+i[f]),0==f&&c<4&&(a+=s[u]);a+=x}if(""!=r)for(m=0;m<r.length;m++)p=r.substr(m,1),"0"!=p&&(a+=o[Number(p)]+l[m]);return""==a&&(a=h+x),""==r&&(a+=z),a=$+a,a}}}),i=o,s=r("2877"),l=Object(s["a"])(i,a,n,!1,null,null,null),c=l.exports;t["a"]=c},2497:function(e,t,r){"use strict";var a=r("4360"),n=r("a18c");t["a"]=function(e,t){return function(r){var o=r.data;"100"===o.resultCode?e(o):"709"===o.resultCode?(a["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",a["a"].getters.currentUser),n["a"].push("/login")):t(o)}}},"28a1":function(e,t,r){},"28d7":function(e,t,r){},"3f67":function(e,t,r){},"408a":function(e,t,r){var a=r("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},"46fc":function(e,t,r){"use strict";r("ac1f"),r("1276");t["a"]=function(e,t){if(!e||!t)return 0;var r=t.split(":"),a=e.split(":"),n=60*(a[0]-r[0])+(a[1]-r[1]);return n<0?0:n}},"579b":function(e,t,r){"use strict";var a=r("28a1"),n=r.n(a);n.a},5801:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("biz-grid",{staticClass:"order-product-info"},[e.isEdit?r("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}):e._e(),r("el-form",{attrs:{inline:!0,disabled:!e.isEdit,"inline-message":!0}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addProduct}},[e._v("新增")]),r("el-form-item",{staticClass:"subTotal",attrs:{label:"合计:",prop:"subTotal"}},[e._v(e._s(e.subTotal))])],1),r("biz-list",{key:Math.random(),ref:"table",staticStyle:{width:"100%",height:"100%"},attrs:{tableData:e.tableData,loading:e.loading}},[r("el-table-column",{attrs:{prop:"sn",label:"编号"}}),r("el-table-column",{attrs:{prop:"fullName",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"barCode",label:"条码"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.product&&t.row.product.barCode?t.row.product.barCode:""))]}}])}),r("el-table-column",{attrs:{prop:"price",label:"商品价格"}}),r("el-table-column",{attrs:{prop:"minimumPackQuantity",label:"最小包装数","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.product&&t.row.product.minimumPackQuantity?t.row.product.minimumPackQuantity:""))]}}])}),r("el-table-column",{attrs:{prop:"quantity",label:"数量","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{},[r("div",{staticClass:"biz-customcol"},[r("el-input-number",{attrs:{size:"mini",min:1},on:{change:function(r){return e.quantityChange(t.row.quantity)}},model:{value:t.row.quantity,callback:function(r){e.$set(t.row,"quantity",r)},expression:"scope.row.quantity"}})],1)])}}])}),r("el-table-column",{attrs:{prop:"subTotal",label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{},[r("div",{staticClass:"biz-customcol"},[e._v(e._s(t.row.quantity?(Number(t.row.quantity)*Number(t.row.price)).toFixed(2):"")+" ")])])}}])}),r("el-table-column",{attrs:{prop:"date",label:"操作",type:"index"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{},[e.isEdit?r("div",{staticClass:"biz-customcol"},[r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.deleteHandeler(t)}}},[e._v("删除")])],1):e._e()])}}])})],1),r("biz-pagination",{attrs:{pagination:e.pagination},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}),r("el-dialog",{attrs:{visible:e.dialogTableVisible,center:"",width:"1200px","append-to-body":""},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"grid18"})]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple",attrs:{align:"right"}},[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.print}},[e._v("打印")])],1)])],1),r("vue-easy-print",{ref:"easyPrint",attrs:{tableShow:""}},[r("div",{staticClass:"d-p-wrap"},[r("el-row",{attrs:{gutter:10}},[r("div",{staticClass:"p-title"},[e._v(e._s(e.title))])]),r("el-row",{staticClass:"row",attrs:{gutter:10}},[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"grid18"})]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple",attrs:{align:"right"}},[e._v("打印日期："+e._s(e.formatDate((new Date).getTime())))])])],1),r("el-row",{staticClass:"row-top",attrs:{gutter:10}},[r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("订单编号："+e._s(e.shippingData.sn))])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("配送方式："+e._s(e.shippingData.shippingMethod))])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("收货人："+e._s(e.shippingData.consignee))])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("电话："+e._s(e.shippingData.phone))])])],1),r("el-row",{staticClass:"row",attrs:{gutter:10}},[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("地址："+e._s(e.shippingData.address))])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("买家留言："+e._s(e.shippingData.memo))])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"})])],1),r("el-table",{staticClass:"table-class",attrs:{data:e.gridData}},[r("el-table-column",{attrs:{property:"isTotal",width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isTotal?r("div",[e._v("合计")]):r("div",[e._v(e._s(t.$index+1))])]}}])}),r("el-table-column",{attrs:{property:"name",label:"商品名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isTotal?void 0:[e._v(e._s(t.row.name))]}}],null,!0)}),r("el-table-column",{attrs:{property:"address",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isTotal?void 0:[e._v(e._s(-1!==t.row.fullName.indexOf("[")?t.row.fullName.split("[")[1].split("]")[0]:""))]}}],null,!0)}),r("el-table-column",{attrs:{property:"price",label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isTotal?void 0:[e._v("￥"+e._s(t.row.price))]}}],null,!0)}),r("el-table-column",{attrs:{property:"quantity",label:"数量"}}),r("el-table-column",{attrs:{property:"subTotal",label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.subTotal))]}}])})],1),r("el-row",{staticClass:"row",attrs:{gutter:10}},[r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("运费：￥"+e._s(e.formData.freight))])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("优惠金额：￥"+e._s(e.formData.couponDiscount))])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("调整金额：￥"+e._s(e.formData.offsetAmount))])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("订单金额：￥"+e._s(e.formData.originalAmount))])])],1),r("el-row",{staticClass:"row",attrs:{gutter:10}},[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"grid18"})]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[e._v("仓库签字：")])])],1)],1)])],1),r("biz-dialog-selector",{staticClass:"product-info-dailog",attrs:{title:"选择商品",visibility:e.showDialog,tableData:e.giftList,pagination:e.dialogPagination,filters:e.dialogFilters,selectionKeys:e.selectedGiftIds},on:{"update:visibility":function(t){e.showDialog=t},pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange,confirmed:e.confirmedProduct,filterDataChange:e.dialogFilterDataChange,selectionChange:e.selectionChange}},[r("el-table-column",{attrs:{property:"fullName",label:"商品名称",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"dialog-column"},[r("img",{staticClass:"productImg",attrs:{src:t.row.image||e.DefaultImg,onerror:e.errorImg}}),r("div",{staticStyle:{width:"120px"}},[e._v(e._s(t.row.fullName))])])]}}])}),r("el-table-column",{attrs:{property:"barCode",label:"条码"}}),r("el-table-column",{attrs:{property:"categoryName",label:"分类"}}),r("el-table-column",{attrs:{property:"brandName",label:"品牌"}}),r("el-table-column",{attrs:{property:"price",label:"价格"}}),r("el-table-column",{attrs:{label:"剩余库存/库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{width:"120px"}},[e._v(e._s(t.row.availableStock)+"/"+e._s(t.row.stock))])]}}])})],1)],1)},n=[],o=(r("99af"),r("4de4"),r("4160"),r("c975"),r("d81d"),r("a434"),r("b0c0"),r("a9e3"),r("b680"),r("d3b7"),r("25f0"),r("159b"),r("5530")),i=r("7558"),s=r("5c40"),l=r("8330"),c=r("f36f"),m=r("e42c"),d=r("2086"),p=r("225d"),u=r("2f62"),f=r("c596"),g=r("1ab1"),h=r("af3f"),b=r("f3ac"),y=r.n(b),v={name:"NewsMgmt",props:{itemId:{type:String},agentId:{type:String},isEdit:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},errorImg:'this.src="/resources/admin/images/default/product-default.png"',DefaultImg:y.a,selectedGiftList:[],selectedGiftIds:[],showDialog:!1,dialogFilters:[{type:"input",placeholder:"请输入编号/商品名/条码",name:"searchbar",value:""}],giftList:[],loading:!1,open:!1,subTotal:"",height:"585",subTotalAll:"",tableData:[],restaurants:[],selections:[],orderItems:[],selectionList:[],dialogTableVisible:!1,gridData:[],formData:{},shippingData:{},title:"",form:{products:""},operations:[{label:"保存",name:"save",type:"primary"},{label:"打印",name:"certificate",type:"primary"}],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},components:{BizList:i["a"],BizPagination:s["a"],BizGrid:c["a"],BizSaveButton:l["a"],vueEasyPrint:p["a"],BizDialogSelector:h["a"]},watch:{itemId:function(e){this.tableData=[],this.subTotal="",this.itemId&&this.getList()}},mounted:function(){var e=document.documentElement.clientHeight||window.innerHeight;this.height=String(e-175)},methods:Object(o["a"])(Object(o["a"])({},Object(u["c"])(["getUser"])),{},{addProduct:function(){this.dialogFilters[0].value="",this.getGiftList(),this.selectedGiftIds.splice(0,this.selectedGiftIds.length),this.selectedGiftList.splice(0,this.selectedGiftList.length),this.showDialog=!0},dialogPageSizeChange:function(e){this.dialogPagination.pageSize=e,this.getGiftList()},dialogCurrentPageChange:function(e){this.dialogPagination.currentPage=e,this.getGiftList()},dialogFilterDataChange:function(e){this.dialogFilters=e,this.dialogPagination.currentPage=1,this.getGiftList()},getGiftList:function(){var e=this,t={pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage,searchValue:this.dialogFilters[0].value,shopId:window.top.SHOP_ID||"",isOutOfStock:"0",agentId:this.agentId,type:"couponOrder"===this.$route.params.orderType?"7":""};g["a"].get("purchaseOrder"===window.top.dType?"/admin/purchaseOrderManage/product/list.jhtml":f["g"].memberCardMgmt.memberCard.listProduct,t).then((function(t){e.giftList=t.content,e.dialogPagination.total=Number(t.total)})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))},selectionChange:function(e){var t=this;e.forEach((function(e){-1===t.selectionList.indexOf(e)&&t.selectionList.push(e)}))},confirmedProduct:function(e){var t=this;this.selectedGiftIds=e.concat(),this.selectedGiftList=[],this.selectionList.map((function(e){-1!==t.selectedGiftIds.indexOf(e.id)&&(e.quantity="1",t.selectedGiftList.push(e))}));this.selectedGiftList.map((function(e){Number(e.quantity)*Number(e.price)})),this.selectedGiftList.forEach((function(e){t.handleSelect(e),t.listProduct(e)}))},print:function(){this.$refs.easyPrint.print()},certificate:function(){var e=this;if(!this.itemId)return this.$message.warning("请先生成一个订单"),!1;var t={orderId:this.itemId,shopId:window.top.SHOP_ID||""};g["a"].get("purchaseOrder"===window.dType?f["l"].delivery.queryShippingVoucherPurchase:f["l"].delivery.queryShippingVoucher,t).then((function(t){e.dialogTableVisible=!0,e.title=e.getUser().shop?e.getUser().shop.name+"发货单":"发货单",e.formData=t.order,e.shippingData=t.shipping||{},e.userCard=t.userCard,e.gridData=t.order.orderItems})).catch((function(t){e.loading=!1,console.log("ERR_REFRESH: ",t),e.$message.warning(t.errorMessage)}))},formatDate:function(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=r+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n);return o},resize:function(){var e=document.documentElement.clientHeight||window.innerHeight;this.height=String(e-175)},operate:function(e){this[e]()},refresh:function(){this.flag=!0,this.getList()},operationSuccess:function(){this.getList()},getList:function(){var e=this;console.log("window.top.dType"+window.top.dType),this.loading=!0;var t={orderId:this.itemId,pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize};m["a"].viewProducts(t,(function(t){e.loading=!1,e.tableData=t.orderItems,e.subTotal=t.order.price,e.pagination.total=Number(t.total),console.log("this.tableData",e.tableData)}),(function(e){console.log(e)}))},handleSelect:function(e){var t=!1;if(e.productId=e.id,e.id="",this.subTotal=(Number(this.subTotal)+Number(e.quantity)*Number(e.price)).toFixed(2),0!==this.tableData.length){for(var r=0;r<this.tableData.length;r++)if(this.tableData[r].productId===e.productId){this.tableData[r].quantity=(Number(this.tableData[r].quantity)+1).toString(),t=!0;break}t||this.tableData.push(Object.assign(e,{product:{minimumPackQuantity:e.minimumPackQuantity,barCode:e.barCode}}))}else this.tableData.push(e)},deleteHandeler:function(e){this.tableData.splice(e.$index,1),this.subTotal=(Number(this.subTotal)-Number(e.row.price)*Number(e.row.quantity)).toFixed(2)},quantityChange:function(e){var t=0;this.tableData.map((function(e){t+=Number(e.quantity)*Number(e.price)})),this.subTotal=t?t.toFixed(2):""},save:function(){var e=this;this.orderItems=this.tableData.map((function(e){return{id:e.id||"",productId:e.productId?e.productId:e.id,quantity:e.quantity||"",price:e.price||""}}));var t=!1;if(this.tableData.forEach((function(r){console.log(r.quantity),-1!==String(r.quantity).indexOf(".")&&(e.$message.warning("数量不能为小数"),t=!0),r.quantity%r.product.minimumPackQuantity!==0&&(e.$message.warning("数量为最小包装数的整数倍"),t=!0)})),t)return!1;!this.itemId&&this.$emit("setOrderItems",this.orderItems),this.itemId&&m["a"].addOrderItems({orderId:this.itemId,orderData:{orderItems:this.orderItems},shopId:window.top.SHOP_ID},(function(t){e.$emit("setOrderItems",e.orderItems),e.$emit("operationSuccess"),e.loading=!1}),(function(t){e.loading=!1,e.getList(),e.$message.warning(t.errorMessage)}))},listProduct:function(e){var t=this;d["a"].listProduct({searchValue:e.name},(function(e){t.restaurants=e.content.map((function(e){return{fullName:e.fullName,sn:e.sn,price:e.price,quantity:"1",subTotal:e.price,productId:e.id,value:e.fullName}})),t.loading=!1}),(function(e){console.log(e),console.log("code错误")}))},querySearchAsync:function(e,t){var r=this.restaurants,a=e?r.filter(this.createStateFilter(e)):r;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t(a)}),300*Math.random())},createStateFilter:function(e){return function(e){return!0}},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()}})},I=v,C=(r("8f05"),r("2877")),w=Object(C["a"])(I,a,n,!1,null,null,null);t["a"]=w.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var a=r("1d80"),n=r("5899"),o="["+n+"]",i=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),l=function(e){return function(t){var r=String(a(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(s,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5b8e":function(e,t,r){"use strict";var a=r("9678"),n=r.n(a);n.a},"663e":function(e,t,r){"use strict";var a=r("3f67"),n=r.n(a);n.a},"681d":function(e,t,r){},"697f":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:e.title,visible:e.dialogVisible,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close,open:e.open}},[e._t("top"),r("biz-flex-table",{ref:"table",attrs:{showTable:e.showTable,operations:e.operations,filters:e.filters,tags:e.tags,rowKeys:e.rowKeys,pagination:e.pagination,tableData:e.tableData,rowClassName:e.rowClassName,loading:e.loading,memberIds:e.memberIds,checkable:e.checkable,isDepotOutNew:e.isDepotOutNew,checkedTable:e.checkedTable},on:{operate:e.operate,"row-click":e.rowClick,"filter-data-change":e.filterDataChange,"select-all":e.handleSelectAll,select:e.handleSelectionChange,"size-change":e.pageSizeChange,"current-change":e.currentPageChange,"cascader-change":e.cascaderChange,"active-item-change":e.activeItemChange,"sort-change":e.handleSortChange}},[e._t("default")],2),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isClear?r("el-button",{attrs:{size:"small"},on:{click:e.clear}},[e._v("清除")]):e._e(),r("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取消")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmed}},[e._v("确定")])],1)],2)},n=[],o=(r("99af"),r("4160"),r("c975"),r("a434"),r("a9e3"),r("159b"),r("04d3")),i={name:"BizDialogSelector",components:{BizFlexTable:o["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},max:{type:Number,default:0},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},isClear:{default:!0,type:Boolean},rowClassName:{type:Function,default:function(){return null}},selectionKeys:{type:Array,default:function(){return[]}},memberIds:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},isDepotOut:{type:Boolean,default:function(){return!1}},checkTable:{type:Array,default:function(){return[]}},showTable:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],isDepotOutNew:!1,checkedTable:[],innerSelection:[]}},methods:{rowKeys:function(e){return e.id},generateSelectionKeys:function(e,t){if(e.indexOf(t)>=0)this.innerSelectionKeys.push(t[this.keyField]),this.innerSelection.push(t);else{var r=this.innerSelectionKeys.indexOf(t[this.keyField]);this.innerSelectionKeys.splice(r,1),this.innerSelection.splice(r,1)}},open:function(e){this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(e){this.innerSelectionKeys=[],this.innerSelection=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){if(this.innerSelectionKeys.length>0||!this.showTable){if(!this.showTable&&!/(http|https):\/\/([\w.]+\/?)\S*/.test(this.filters[2].value))return void this.$message.warning("必须以http,https开头,且需符合URL规范,检查格式是否正确");this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1}else this.$message("请选择一项")},clear:function(){var e=this;this.tableData.forEach((function(t){e.$refs.table.toggleRowSelection(t,!1)})),this.innerSelectionKeys=[],this.innerSelection=[]},updateSelection:function(){var e=this;this.$refs&&this.$refs.table&&this.tableData.forEach((function(t){e.innerSelectionKeys.indexOf(t[e.keyField])>=0?(e.$refs.table.toggleRowSelection(t,!0),"single"===e.selectionMode&&(e.$refs.table.$refs.table.setCurrentRow(t),e.innerSelection=[t])):e.$refs.table.toggleRowSelection(t,!1)}))},operate:function(e){this.$emit("operate",e)},filterDataChange:function(e){this.$emit("filterDataChange",e)},handleSelectAll:function(e){var t=this;0===e.length?this.tableData.forEach((function(e){var r=t.innerSelectionKeys.indexOf(e[t.keyField]);r>=0&&t.innerSelectionKeys.splice(r,1)})):this.tableData.forEach((function(e){var r=t.innerSelectionKeys.indexOf(e[t.keyField]);r<0&&t.innerSelectionKeys.push(e[t.keyField])})),this.$emit("selectionChange",e)},handleSelectionChange:function(e,t){this.generateSelectionKeys(e,t),this.$emit("selectionChange",e)},pageSizeChange:function(e){this.$emit("pageSizeChange",e)},currentPageChange:function(e){this.$emit("currentPageChange",e)},cascaderChange:function(e){this.$emit("cascaderChange",e)},activeItemChange:function(e){this.$emit("active-item-change",e)},handleSortChange:function(e){this.$emit("sort-change",e)},rowClick:function(e,t,r){"single"===this.selectionMode&&(this.innerSelectionKeys=[e[this.keyField]],this.innerSelection=[e])}},watch:{visibility:function(e,t){this.dialogVisible=e,this.isDepotOutNew=this.isDepotOut,this.checkedTable=this.checkTable}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){},updated:function(){this.updateSelection()}},s=i,l=(r("0943"),r("2877")),c=Object(l["a"])(s,a,n,!1,null,null,null);t["a"]=c.exports},7132:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"biz-fade-t"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[r("transition",{attrs:{name:"biz-fade-t-right"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"popup-content",style:e.contentStyle},[e._t("default")],2)])],1)])},n=[],o={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},i=o,s=(r("5b8e"),r("2877")),l=Object(s["a"])(i,a,n,!1,null,null,null),c=l.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"biz-popup-tabs"},[r("biz-popup",{attrs:{open:e.open,contentStyle:e.contentStyle},on:{close:e.close}},[r("el-tabs",{attrs:{type:"border-card",value:e.value},on:{"tab-click":e.tabClick}},[e._t("default")],2)],1)],1)},d=[],p=(r("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:c},methods:{close:function(){var e=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("close")}))},tabClick:function(e){this.$emit("input",e.name)}}}),u=p,f=(r("d4c2"),Object(s["a"])(u,m,d,!1,null,null,null)),g=f.exports;r.d(t,"a",(function(){return g}))},"75e2":function(e,t,r){},"8f05":function(e,t,r){"use strict";var a=r("28d7"),n=r.n(a);n.a},"95b5":function(e,t,r){},9678:function(e,t,r){},a9e3:function(e,t,r){"use strict";var a=r("83ab"),n=r("da84"),o=r("94ca"),i=r("6eeb"),s=r("5135"),l=r("c6b6"),c=r("7156"),m=r("c04e"),d=r("d039"),p=r("7c73"),u=r("241c").f,f=r("06cf").f,g=r("9bf2").f,h=r("58a8").trim,b="Number",y=n[b],v=y.prototype,I=l(p(v))==b,C=function(e){var t,r,a,n,o,i,s,l,c=m(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+c}for(o=c.slice(2),i=o.length,s=0;s<i;s++)if(l=o.charCodeAt(s),l<48||l>n)return NaN;return parseInt(o,a)}return+c};if(o(b,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var w,M=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof M&&(I?d((function(){v.valueOf.call(r)})):l(r)!=b)?c(new y(C(t)),r,M):C(t)},S=a?u(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;S.length>T;T++)s(y,w=S[T])&&!s(M,w)&&g(M,w,f(y,w));M.prototype=v,v.constructor=M,i(n,b,M)}},af3f:function(e,t,r){"use strict";var a=r("697f");t["a"]=a["a"]},afd6:function(e,t,r){"use strict";var a=r("681d"),n=r.n(a);n.a},b06a:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("biz-grid",{staticClass:"order-base-info"},[e.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}):e._e(),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,"label-width":"120px",size:"small",disabled:!e.isEdit,"inline-message":!0}},[e.itemId?a("el-form-item",{attrs:{label:"订单编号",prop:"sn"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.sn,callback:function(t){e.$set(e.form,"sn",t)},expression:"form.sn"}})],1):e._e(),a("el-form-item",{attrs:{label:"订单状态"}},[e.itemId?a("el-input",{attrs:{disabled:!0},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}}):a("el-select",{attrs:{disabled:"couponOrder"===this.$route.params.orderType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.orderStateTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.showInfo?a("el-form-item",{attrs:{label:"订单原价",prop:"originalAmount"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.originalAmount,callback:function(t){e.$set(e.form,"originalAmount",t)},expression:"form.originalAmount"}})],1):e._e(),e.form.amountPrepay?a("el-form-item",{attrs:{label:"订金",prop:"amountPrepay"}},[a("el-input",{attrs:{disabled:""!==e.itemId&&("交易完成"===e.form.type||"订单关闭"===e.form.type||"已评价"===e.form.type)},model:{value:e.form.amountPrepay,callback:function(t){e.$set(e.form,"amountPrepay",t)},expression:"form.amountPrepay"}})],1):e._e(),e.form.amountFinalpay?a("el-form-item",{attrs:{label:"尾款",prop:"amountFinalpay"}},[a("el-input",{attrs:{disabled:""!==e.itemId&&("交易完成"===e.form.type||"订单关闭"===e.form.type||"已评价"===e.form.type)},model:{value:e.form.amountFinalpay,callback:function(t){e.$set(e.form,"amountFinalpay",t)},expression:"form.amountFinalpay"}})],1):e._e(),e.showInfo?a("el-form-item",{attrs:{label:"调整金额",prop:"offsetAmount"}},[a("el-input-number",{attrs:{"controls-position":"right",disabled:""!==e.itemId&&"2"===e.form.paymentStatus||"订单关闭"===e.form.type},on:{change:e.offsetAmountChange},model:{value:e.form.offsetAmount,callback:function(t){e.$set(e.form,"offsetAmount",t)},expression:"form.offsetAmount"}})],1):e._e(),e.showInfo?a("el-form-item",{attrs:{label:"订单现价",prop:"amount"}},[a("el-input",{attrs:{disabled:""!==e.itemId&&"2"===e.form.paymentStatus||"订单关闭"===e.form.type},on:{change:e.curAmountChange},model:{value:e.form.curAmount,callback:function(t){e.$set(e.form,"curAmount",t)},expression:"form.curAmount"}})],1):e._e(),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:"1"}},[-1!==e.activeNames.indexOf("1")&&e.handler?a("template",{slot:"title"},[a("div",{staticClass:"title-class"},[a("div",{staticClass:"title-class-one"},[a("el-badge",{staticClass:"item",attrs:{"is-dot":""}},[e._v("客户信息")])],1)])]):e._e(),-1!==e.activeNames.indexOf("1")&&e.handler?e._e():a("template",{slot:"title"},[e._v("客户信息")]),a("el-form-item",{staticClass:"isRequired",attrs:{label:"会员昵称",prop:"member.nickname"}},[a("el-input",{attrs:{disabled:!!e.itemId,placeholder:"请选择或添加会员"},on:{focus:e.showDialogFc},model:{value:e.form.member.nickname,callback:function(t){e.$set(e.form.member,"nickname",t)},expression:"form.member.nickname"}},[e.itemId?e._e():a("el-button",{attrs:{slot:"append",icon:"el-icon-plus"},on:{click:e.addMember},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"性别",prop:"member.gender"}},[a("el-select",{attrs:{disabled:!1===!e.itemId},model:{value:e.form.member.gender,callback:function(t){e.$set(e.form.member,"gender",t)},expression:"form.member.gender"}},[a("el-option",{attrs:{label:"男",value:"0"}}),a("el-option",{attrs:{label:"女",value:"1"}}),a("el-option",{attrs:{label:"保密",value:"2"}})],1)],1),a("el-form-item",{attrs:{label:"电话",prop:"member.mobile"}},[a("el-input",{attrs:{disabled:!1===!e.itemId,placeholder:"请输入电话"},model:{value:e.form.member.mobile,callback:function(t){e.$set(e.form.member,"mobile",t)},expression:"form.member.mobile"}})],1),a("el-form-item",{attrs:{label:"车辆",prop:"car.id"}},[a("el-select",{attrs:{placeholder:"请选择车辆",disabled:""!==e.itemId},on:{change:e.carChange},model:{value:e.form.car.id,callback:function(t){e.$set(e.form.car,"id",t)},expression:"form.car.id"}},e._l(e.cars,(function(e,t){return a("el-option",{key:t,attrs:{label:e.plateNumber,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"车型",prop:"car.type"}},[a("el-input",{attrs:{disabled:!0,placeholder:"选择车辆自动带入"},model:{value:e.form.car.type,callback:function(t){e.$set(e.form.car,"type",t)},expression:"form.car.type"}})],1),e.form.plateNumber?e._e():a("el-form-item",{attrs:{label:"行驶里程",prop:"car.drivingRange"}},[a("el-input",{attrs:{disabled:!0,placeholder:"选择车辆自动带入"},model:{value:e.form.car.drivingRange,callback:function(t){e.$set(e.form.car,"drivingRange",t)},expression:"form.car.drivingRange"}})],1),e.form.plateNumber?a("el-form-item",{attrs:{label:"行驶里程",prop:"drivingRange"}},[a("el-input",{attrs:{disabled:!0,placeholder:"选择车辆自动带入"},model:{value:e.form.drivingRange,callback:function(t){e.$set(e.form,"drivingRange",t)},expression:"form.drivingRange"}})],1):e._e()],2),a("el-collapse-item",{attrs:{name:"2"}},[-1!==e.activeNames.indexOf("2")&&e.handler?a("template",{slot:"title"},[a("div",{staticClass:"title-class"},[a("div",{staticClass:"title-class-one"},[a("el-badge",{staticClass:"item",attrs:{"is-dot":""}},[e._v("服务信息")])],1)])]):e._e(),-1!==e.activeNames.indexOf("2")&&e.handler?e._e():a("template",{slot:"title"},[e._v("服务信息")]),"rescue"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"呼叫方式",prop:"orderItems[0].appointment.way"}},[a("el-select",{attrs:{placeholder:"请选择呼叫方式"},model:{value:e.form.orderItems[0].appointment.way,callback:function(t){e.$set(e.form.orderItems[0].appointment,"way",t)},expression:"form.orderItems[0].appointment.way"}},[a("el-option",{attrs:{label:"电话",value:"0"}}),a("el-option",{attrs:{label:"在线",value:"1"}})],1)],1):e._e(),"rescue"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"救援机构",prop:"orderItems[0].appointment.rescueUnit"}},[a("el-select",{attrs:{placeholder:"请选择救援机构"},model:{value:e.form.orderItems[0].appointment.rescueUnit,callback:function(t){e.$set(e.form.orderItems[0].appointment,"rescueUnit",t)},expression:"form.orderItems[0].appointment.rescueUnit"}},e._l(e.rescueOrganizations,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),"rescue"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"救援人员",prop:"orderItems[0].appointment.rescuerId"}},[a("el-select",{attrs:{placeholder:"请选择救援人员"},model:{value:e.form.orderItems[0].appointment.rescuerId,callback:function(t){e.$set(e.form.orderItems[0].appointment,"rescuerId",t)},expression:"form.orderItems[0].appointment.rescuerId"}},e._l(e.workers,(function(e,t){return a("el-option",{key:t,attrs:{label:e.nickname,value:e.id}})})),1)],1):e._e(),"rescue"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"救援地点",prop:"orderItems[0].appointment.workerLocation"}},[a("el-input",{attrs:{placeholder:"请输入救援地点"},model:{value:e.form.orderItems[0].appointment.workerLocation,callback:function(t){e.$set(e.form.orderItems[0].appointment,"workerLocation",t)},expression:"form.orderItems[0].appointment.workerLocation"}})],1):e._e(),"rescue"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"服务项目",prop:"orderItems[0].appointment.reasons"}},[a("el-checkbox-group",{model:{value:e.form.orderItems[0].appointment.reasons,callback:function(t){e.$set(e.form.orderItems[0].appointment,"reasons",t)},expression:"form.orderItems[0].appointment.reasons"}},e._l(e.reasons,(function(t,r){return a("el-checkbox",{key:r,attrs:{label:t.id}},[e._v(e._s(t.content))])})),1)],1):e._e(),"rescue"===this.$route.params.orderType?a("el-form-item",{staticClass:"imgUpload",attrs:{label:"图片信息"}},[a("el-upload",{attrs:{action:"/admin/file/uploads.jhtml","before-upload":e.beforeAvatarUpload,"file-list":e.imageList,"list-type":"picture-card",name:"file",accept:"image/*",data:{type:"0"},"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.picDialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.picDialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1):e._e(),"rescue"===this.$route.params.orderType&&e.itemId?a("el-form-item",{attrs:{label:"语音信息"}},e._l(e.form.orderItems[0].appointment.voices,(function(e,t){return a("div",{key:t},[a("audio",{attrs:{src:e.path,controls:""}})])})),0):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"服务日期",prop:"orderItems[0].appointment.appontmentDate"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择服务日期"},model:{value:e.form.orderItems[0].appointment.appontmentDate,callback:function(t){e.$set(e.form.orderItems[0].appointment,"appontmentDate",t)},expression:"form.orderItems[0].appointment.appontmentDate"}})],1):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"开始时间",prop:"orderItems[0].appointment.driveStartDate"}},[a("el-time-picker",{attrs:{format:"HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间",disabled:!!e.itemId&&"service"!==e.handler},model:{value:e.form.orderItems[0].appointment.driveStartDate,callback:function(t){e.$set(e.form.orderItems[0].appointment,"driveStartDate",t)},expression:"form.orderItems[0].appointment.driveStartDate"}})],1):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"结束时间",prop:"orderItems[0].appointment.driveEndDate"}},[a("el-time-picker",{attrs:{format:"HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间",disabled:!!e.itemId&&"service"!==e.handler},model:{value:e.form.orderItems[0].appointment.driveEndDate,callback:function(t){e.$set(e.form.orderItems[0].appointment,"driveEndDate",t)},expression:"form.orderItems[0].appointment.driveEndDate"}})],1):e._e(),"service"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"服务日期",prop:"appointmentDate"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"请选择服务日期",clearable:!1,editable:!1},model:{value:e.appointmentDate,callback:function(t){e.appointmentDate=t},expression:"appointmentDate"}})],1):e._e(),"service"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"开始时间",prop:"appointmentStartDate"}},[a("el-time-picker",{attrs:{format:"HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间",editable:!1,clearable:!1},model:{value:e.form.appointmentDate,callback:function(t){e.$set(e.form,"appointmentDate",t)},expression:"form.appointmentDate"}})],1):e._e(),"service"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"结束时间",prop:"appointmentEndDate"}},[a("el-time-picker",{attrs:{format:"HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择结束时间",editable:!1,clearable:!1},model:{value:e.form.appointmentEndDate,callback:function(t){e.$set(e.form,"appointmentEndDate",t)},expression:"form.appointmentEndDate"}})],1):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"使用时间(分)",prop:"useTime"}},[a("el-input",{attrs:{value:e.dateInterval(e.form.orderItems[0].appointment.driveEndDate,e.form.orderItems[0].appointment.driveStartDate),disabled:!0}})],1):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"开始里程",prop:"orderItems[0].appointment.startMileage"}},[a("el-input-number",{attrs:{"controls-position":"right",precision:0,min:0,disabled:!!e.itemId&&"service"!==e.handler},model:{value:e.form.orderItems[0].appointment.startMileage,callback:function(t){e.$set(e.form.orderItems[0].appointment,"startMileage",t)},expression:"form.orderItems[0].appointment.startMileage"}})],1):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"结束里程",prop:"orderItems[0].appointment.endMileage"}},[a("el-input-number",{attrs:{"controls-position":"right",precision:0,min:0,disabled:!!e.itemId&&"service"!==e.handler},model:{value:e.form.orderItems[0].appointment.endMileage,callback:function(t){e.$set(e.form.orderItems[0].appointment,"endMileage",t)},expression:"form.orderItems[0].appointment.endMileage"}})],1):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"使用里程(公里)"}},[a("el-input",{attrs:{value:e.form.orderItems[0].appointment.endMileage-e.form.orderItems[0].appointment.startMileage,disabled:!0}})],1):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{staticClass:"isRequired",attrs:{label:"试驾车号",prop:"orderItems[0].appointment.plateNumber"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入试驾车号"},on:{select:e.handleSelect},model:{value:e.form.orderItems[0].appointment.plateNumber,callback:function(t){e.$set(e.form.orderItems[0].appointment,"plateNumber",t)},expression:"form.orderItems[0].appointment.plateNumber"}})],1):e._e(),"ride"===this.$route.params.orderType?a("el-form-item",{staticClass:"isRequired",attrs:{label:"试驾车型",prop:"orderItems[0].appointment.product.fullName"}},[a("el-input",{attrs:{placeholder:"请选择试驾车型"},on:{focus:e.queryProduct},model:{value:e.form.orderItems[0].appointment.product.fullName,callback:function(t){e.$set(e.form.orderItems[0].appointment.product,"fullName",t)},expression:"form.orderItems[0].appointment.product.fullName"}})],1):e._e(),"replace"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"已有车型",prop:"orderItems[0].appointment.car.type"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.orderItems[0].appointment.car.type,callback:function(t){e.$set(e.form.orderItems[0].appointment.car,"type",t)},expression:"form.orderItems[0].appointment.car.type"}})],1):e._e(),"replace"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"行驶里程",prop:"orderItems[0].appointment.drivingRange"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.orderItems[0].appointment.drivingRange,callback:function(t){e.$set(e.form.orderItems[0].appointment,"drivingRange",t)},expression:"form.orderItems[0].appointment.drivingRange"}})],1):e._e(),"replace"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"上牌时间",prop:"orderItems[0].appointment.onTime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.orderItems[0].appointment.onTime,callback:function(t){e.$set(e.form.orderItems[0].appointment,"onTime",t)},expression:"form.orderItems[0].appointment.onTime"}})],1):e._e(),"replace"===this.$route.params.orderType||"loan"===this.$route.params.orderType?a("el-form-item",{staticClass:"isRequired",attrs:{label:"心仪车型",prop:"orderItems[0].appointment.product.brandId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择品牌",filterable:""},on:{change:e.handleBrandChange},model:{value:e.form.orderItems[0].appointment.product.brandId,callback:function(t){e.$set(e.form.orderItems[0].appointment.product,"brandId",t)},expression:"form.orderItems[0].appointment.product.brandId"}},e._l(e.brandList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),"replace"===this.$route.params.orderType||"loan"===this.$route.params.orderType?a("el-form-item",{staticClass:"isRequired",attrs:{label:"",prop:"orderItems[0].appointment.product.seriesId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择系列",filterable:""},on:{change:e.handleSeriesChange},model:{value:e.form.orderItems[0].appointment.product.seriesId,callback:function(t){e.$set(e.form.orderItems[0].appointment.product,"seriesId",t)},expression:"form.orderItems[0].appointment.product.seriesId"}},e._l(e.seriesList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),"replace"===this.$route.params.orderType||"loan"===this.$route.params.orderType?a("el-form-item",{staticClass:"isRequired",attrs:{label:"",prop:"orderItems[0].appointment.product.id"}},[a("el-select",{staticClass:"isRequired",staticStyle:{width:"100%"},attrs:{placeholder:"请选择车型"},on:{change:e.productChange},model:{value:e.form.orderItems[0].appointment.product.id,callback:function(t){e.$set(e.form.orderItems[0].appointment.product,"id",t)},expression:"form.orderItems[0].appointment.product.id"}},e._l(e.modeList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"裸车总价",prop:"orderItems[0].appointment.product.price"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.orderItems[0].appointment.product.price,callback:function(t){e.$set(e.form.orderItems[0].appointment.product,"price",t)},expression:"form.orderItems[0].appointment.product.price"}})],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"金融方案",prop:"orderItems[0].appointment.financialPlan.id"}},[a("el-select",{attrs:{placeholder:"请选择金融方案"},on:{change:function(t){return e.loanTerm(e.form.orderItems[0].appointment.financialPlan.id)}},model:{value:e.form.orderItems[0].appointment.financialPlan.id,callback:function(t){e.$set(e.form.orderItems[0].appointment.financialPlan,"id",t)},expression:"form.orderItems[0].appointment.financialPlan.id"}},e._l(e.financialPlans,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"首付比例",prop:"orderItems[0].appointment.downPayment"}},[a("el-select",{attrs:{placeholder:"请选择首付比例"},on:{change:e.monthPay},model:{value:e.form.orderItems[0].appointment.downPayment,callback:function(t){e.$set(e.form.orderItems[0].appointment,"downPayment",t)},expression:"form.orderItems[0].appointment.downPayment"}},e._l(e.form.orderItems[0].appointment.financialPlan.downPayments,(function(e,t){return a("el-option",{key:t,attrs:{label:Math.round(e)+"%",value:e}})})),1)],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"还款期限",prop:"orderItems[0].appointment.year"}},[a("el-select",{attrs:{placeholder:"请选择还款年限"},on:{change:e.monthPay},model:{value:e.form.orderItems[0].appointment.year,callback:function(t){e.$set(e.form.orderItems[0].appointment,"year",t)},expression:"form.orderItems[0].appointment.year"}},e._l(e.form.orderItems[0].appointment.financialPlan.loanTerms,(function(e,t){return a("el-option",{key:t,attrs:{label:e.year+"年",value:e.year}})})),1)],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"首付金额"}},[a("el-input",{attrs:{value:e.form.orderItems[0].appointment.product.price?e.form.orderItems[0].appointment.product.price*e.form.orderItems[0].appointment.downPayment/100:e.form.orderItems[0].appointment.product.price,disabled:!0}})],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"贷款额度"}},[a("el-input",{attrs:{value:e.form.orderItems[0].appointment.product.price?e.form.orderItems[0].appointment.product.price-e.form.orderItems[0].appointment.product.price*e.form.orderItems[0].appointment.downPayment/100:e.form.orderItems[0].appointment.product.price,disabled:!0}})],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"月供"}},[a("el-input",{attrs:{value:e.monthPay(),disabled:!0}})],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"手续费",prop:"orderItems[0].appointment.fee"}},[a("el-input",{attrs:{placeholder:"请输入手续费"},model:{value:e.form.orderItems[0].appointment.fee,callback:function(t){e.$set(e.form.orderItems[0].appointment,"fee",t)},expression:"form.orderItems[0].appointment.fee"}})],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"身份证",prop:"orderItems[0].appointment.personId"}},[a("el-input",{attrs:{placeholder:"请输入身份证"},model:{value:e.form.orderItems[0].appointment.personId,callback:function(t){e.$set(e.form.orderItems[0].appointment,"personId",t)},expression:"form.orderItems[0].appointment.personId"}})],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"工作单位",prop:"orderItems[0].appointment.workUnit"}},[a("el-input",{attrs:{placeholder:"请输入工作单位"},model:{value:e.form.orderItems[0].appointment.workUnit,callback:function(t){e.$set(e.form.orderItems[0].appointment,"workUnit",t)},expression:"form.orderItems[0].appointment.workUnit"}})],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"房屋情况",prop:"orderItems[0].appointment.houseState"}},[a("el-select",{model:{value:e.form.orderItems[0].appointment.houseState,callback:function(t){e.$set(e.form.orderItems[0].appointment,"houseState",t)},expression:"form.orderItems[0].appointment.houseState"}},[a("el-option",{attrs:{label:"有",value:"1"}}),a("el-option",{attrs:{label:"无",value:"0"}})],1)],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"上牌城市",prop:"orderItems[0].appointment.onCity"}},[a("el-input",{attrs:{placeholder:"请输入上牌城市"},model:{value:e.form.orderItems[0].appointment.onCity,callback:function(t){e.$set(e.form.orderItems[0].appointment,"onCity",t)},expression:"form.orderItems[0].appointment.onCity"}})],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"意向购车时间",prop:"orderItems[0].appointment.intentionTime"}},[a("el-select",{attrs:{placeholder:"请选择意向购车时间"},model:{value:e.form.orderItems[0].appointment.intentionTime,callback:function(t){e.$set(e.form.orderItems[0].appointment,"intentionTime",t)},expression:"form.orderItems[0].appointment.intentionTime"}},[a("el-option",{attrs:{label:"一年",value:"4"}}),a("el-option",{attrs:{label:"半年",value:"3"}}),a("el-option",{attrs:{label:"三个月",value:"2"}}),a("el-option",{attrs:{label:"两个月",value:"1"}}),a("el-option",{attrs:{label:"一个月",value:"0"}})],1)],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"月收入",prop:"orderItems[0].appointment.monthIncome"}},[a("el-select",{attrs:{placeholder:"请选择月收入"},model:{value:e.form.orderItems[0].appointment.monthIncome,callback:function(t){e.$set(e.form.orderItems[0].appointment,"monthIncome",t)},expression:"form.orderItems[0].appointment.monthIncome"}},[a("el-option",{attrs:{label:"20000以上",value:"4"}}),a("el-option",{attrs:{label:"15000-19999",value:"3"}}),a("el-option",{attrs:{label:"10000-14999",value:"2"}}),a("el-option",{attrs:{label:"5000-9999",value:"1"}}),a("el-option",{attrs:{label:"0-4999",value:"0"}})],1)],1):e._e(),"loan"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"有车情况",prop:"orderItems[0].appointment.carState"}},[a("el-select",{attrs:{placeholder:"请选择有车情况"},model:{value:e.form.orderItems[0].appointment.carState,callback:function(t){e.$set(e.form.orderItems[0].appointment,"carState",t)},expression:"form.orderItems[0].appointment.carState"}},[a("el-option",{attrs:{label:"有",value:"1"}}),a("el-option",{attrs:{label:"无",value:"0"}})],1)],1):e._e(),a("el-form-item",{staticClass:"isRequired",attrs:{label:"顾问",prop:"consultant.id"}},[a("el-select",{attrs:{placeholder:"请选择顾问"},model:{value:e.form.consultant.id,callback:function(t){e.$set(e.form.consultant,"id",t)},expression:"form.consultant.id"}},e._l(e.consultants,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name||"未填写",value:e.id}})})),1)],1),"service"===this.$route.params.orderType?a("el-form-item",{attrs:{label:"业务类型"}},[a("tag-select",{ref:"tagSelect",attrs:{tagList:e.tagList,bAddTag:!1,selectType:"order",selectedTags:e.selectedTags},on:{addSuccess:e.onAddSuccess}})],1):e._e(),a("el-form-item",{attrs:{label:"买家留言",prop:"memo"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.memo,callback:function(t){e.$set(e.form,"memo",t)},expression:"form.memo"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],2),e.showPayment?a("el-collapse-item",{attrs:{name:"4"}},[-1!==e.activeNames.indexOf("4")&&e.handler?a("template",{slot:"title"},[a("div",{staticClass:"title-class"},[a("div",{staticClass:"title-class-one"},[a("el-badge",{staticClass:"item",attrs:{"is-dot":""}},[e._v("付款信息")])],1)])]):e._e(),-1!==e.activeNames.indexOf("4")&&e.handler?e._e():a("template",{slot:"title"},[e._v("付款信息")]),e.itemId?a("el-form-item",{staticClass:"isRequired",attrs:{label:"支付方式",prop:"paymentMethodId"}},[a("el-select",{attrs:{disabled:"1"!==e.form.type&&"2"!==e.form.type,placeholder:"请选择支付方式"},model:{value:e.form.paymentMethodId,callback:function(t){e.$set(e.form,"paymentMethodId",t)},expression:"form.paymentMethodId"}},e._l(e.paymentMethods,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),a("el-form-item",{staticClass:"isRequired",attrs:{label:"付款方式",prop:"payments[0].paymentType"}},[a("el-select",{attrs:{disabled:!!e.itemId&&"payment"!==e.handler,placeholder:"请选择付款方式"},on:{change:e.paymentTypeChange},model:{value:e.form.payments[0].paymentType,callback:function(t){e.$set(e.form.payments[0],"paymentType",t)},expression:"form.payments[0].paymentType"}},e._l(e.paymentTypes,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),"会员卡余额"===e.form.payments[0].paymentType?a("el-form-item",{staticClass:"isRequired",attrs:{label:"会员卡",prop:"memberCardId"}},[a("el-select",{attrs:{disabled:!!e.itemId&&"payment"!==e.handler,placeholder:"请选择会员卡"},on:{change:e.memberCardChange},model:{value:e.form.memberCardId,callback:function(t){e.$set(e.form,"memberCardId",t)},expression:"form.memberCardId"}},e._l(e.listExistCard,(function(e,t){return a("el-option",{key:t,attrs:{label:e.template.name,value:e.id}})})),1)],1):e._e(),"刷卡"===e.form.payments[0].paymentType||"汇款"===e.form.payments[0].paymentType?a("el-form-item",{staticClass:"isRequired",attrs:{label:"付款银行",prop:"payments[0].payBank"}},[a("el-select",{attrs:{disabled:!!e.itemId&&"payment"!==e.handler,placeholder:"请选择付款银行"},model:{value:e.form.payments[0].payBank,callback:function(t){e.$set(e.form.payments[0],"payBank",t)},expression:"form.payments[0].payBank"}},[a("el-option",{attrs:{label:"中国工商银行",value:"中国工商银行"}}),a("el-option",{attrs:{label:"中国农业银行",value:"中国农业银行"}}),a("el-option",{attrs:{label:"中国银行",value:"中国银行"}}),a("el-option",{attrs:{label:"中国建设银行",value:"中国建设银行"}}),a("el-option",{attrs:{label:"交通银行",value:"交通银行"}}),a("el-option",{attrs:{label:"中信银行",value:"中信银行"}}),a("el-option",{attrs:{label:"广发银行",value:"广发银行"}}),e._v("、 "),a("el-option",{attrs:{label:"深圳发展银行",value:"深圳发展银行"}}),a("el-option",{attrs:{label:"招商银行",value:"招商银行"}}),a("el-option",{attrs:{label:"中国光大银行",value:"中国光大银行"}}),a("el-option",{attrs:{label:"华夏银行",value:"华夏银行"}}),a("el-option",{attrs:{label:"中国民生银行",value:"中国民生银行"}}),a("el-option",{attrs:{label:"兴业银行",value:"兴业银行"}}),a("el-option",{attrs:{label:"上海浦东发展银行",value:"上海浦东发展银行"}}),a("el-option",{attrs:{label:"恒丰银行",value:"恒丰银行"}}),a("el-option",{attrs:{label:"浙商银行",value:"浙商银行"}}),a("el-option",{attrs:{label:"渤海银行",value:"渤海银行"}}),a("el-option",{attrs:{label:"中国邮政储蓄银行",value:"中国邮政储蓄银行"}}),a("el-option",{attrs:{label:"其他银行",value:"其他银行"}})],1)],1):e._e(),"刷卡"===e.form.payments[0].paymentType||"汇款"===e.form.payments[0].paymentType?a("el-form-item",{staticClass:"isRequired",attrs:{label:"付款帐号",prop:"payments[0].payAccount"}},[a("el-input",{attrs:{disabled:!!e.itemId&&"payment"!==e.handler,placeholder:"请输入付款帐号"},model:{value:e.form.payments[0].payAccount,callback:function(t){e.$set(e.form.payments[0],"payAccount",t)},expression:"form.payments[0].payAccount"}})],1):e._e()],2):e._e(),e.showInfo?a("el-collapse-item",{attrs:{title:"优惠信息",name:"3"}},[e.itemId?a("div",[a("el-form-item",{attrs:{label:"优惠券折扣",prop:"couponDiscount"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.couponDiscount,callback:function(t){e.$set(e.form,"couponDiscount",t)},expression:"form.couponDiscount"}})],1),a("el-form-item",{attrs:{label:"赠送积分",prop:"point"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.point,callback:function(t){e.$set(e.form,"point",t)},expression:"form.point"}})],1)],1):a("div",[a("el-form-item",{attrs:{label:"福利",prop:"couponDiscount"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.couponChange},model:{value:e.form.couponCodeId,callback:function(t){e.$set(e.form,"couponCodeId",t)},expression:"form.couponCodeId"}},e._l(e.form.couponList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.coupon.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"V豆抵扣",prop:"beanDiscount"}},[a("el-input",{attrs:{disabled:!("会员卡余额"===e.form.payments[0].paymentType&&e.form.memberCardId&&e.form.bean),min:0},on:{change:e.beanChange},model:{value:e.form.beanDiscount,callback:function(t){e.$set(e.form,"beanDiscount",t)},expression:"form.beanDiscount"}}),"会员卡余额"===e.form.payments[0].paymentType&&e.form.memberCardId?a("div",[e._v(e._s(e.beanCanUse))]):e._e()],1)],1)]):e._e(),e.showInfo?a("el-collapse-item",{attrs:{title:"其他信息",name:"7"}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.orderTime,callback:function(t){e.$set(e.form,"orderTime",t)},expression:"form.orderTime"}})],1),a("el-form-item",{attrs:{label:"执行时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.deliveryTime,callback:function(t){e.$set(e.form,"deliveryTime",t)},expression:"form.deliveryTime"}})],1),a("el-form-item",{attrs:{label:"付款时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.paymentTime,callback:function(t){e.$set(e.form,"paymentTime",t)},expression:"form.paymentTime"}})],1),a("el-form-item",{attrs:{label:"完成时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.completeTime,callback:function(t){e.$set(e.form,"completeTime",t)},expression:"form.completeTime"}})],1)],1):e._e()],1)],1),a("el-dialog",{attrs:{title:"创建会员",visible:e.dialogVisible,width:"50%",appendToBody:!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dialogFormModel",attrs:{model:e.formModel,"label-width":"120px",size:"small",rules:e.dialogRules,"inline-message":!0}},[a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号，如1888888888"},on:{blur:e.mobileBlur},model:{value:e.formModel.mobile,callback:function(t){e.$set(e.formModel,"mobile",t)},expression:"formModel.mobile"}})],1),a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户名，如1888888888"},model:{value:e.formModel.userName,callback:function(t){e.$set(e.formModel,"userName",t)},expression:"formModel.userName"}})],1),a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{attrs:{placeholder:"请输入昵称，如1888888888"},model:{value:e.formModel.nickname,callback:function(t){e.$set(e.formModel,"nickname",t)},expression:"formModel.nickname"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名，如张三"},model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入密码"},model:{value:e.formModel.password,callback:function(t){e.$set(e.formModel,"password",t)},expression:"formModel.password"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.formModel.gender,callback:function(t){e.$set(e.formModel,"gender",t)},expression:"formModel.gender"}},[a("el-radio",{attrs:{label:"0"}},[e._v("男")]),a("el-radio",{attrs:{label:"1"}},[e._v("女")]),a("el-radio",{attrs:{label:"2"}},[e._v("保密")])],1)],1),a("el-form-item",{attrs:{label:"车牌号"}},[a("el-input",{attrs:{placeholder:"请输入车牌号，如浙12345"},model:{value:e.formModel.defaultCarInfo.plateNumber,callback:function(t){e.$set(e.formModel.defaultCarInfo,"plateNumber",t)},expression:"formModel.defaultCarInfo.plateNumber"}})],1),a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择，如宝马",filterable:""},on:{change:e.brandChange},model:{value:e.formModel.defaultCarInfo.brand,callback:function(t){e.$set(e.formModel.defaultCarInfo,"brand",t)},expression:"formModel.defaultCarInfo.brand"}},e._l(e.brandData,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"系列"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择，如宝马3系",filterable:""},on:{change:e.seriesChange},model:{value:e.formModel.defaultCarInfo.series,callback:function(t){e.$set(e.formModel.defaultCarInfo,"series",t)},expression:"formModel.defaultCarInfo.series"}},e._l(e.seriesData,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"车型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择，如宝马3系2016款"},model:{value:e.formModel.defaultCarInfo.type,callback:function(t){e.$set(e.formModel.defaultCarInfo,"type",t)},expression:"formModel.defaultCarInfo.type"}},e._l(e.modeData,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"车辆识别代码"}},[a("el-input",{attrs:{placeholder:"请输入车辆识别代码，如1G1BL52P7TR115520"},model:{value:e.formModel.defaultCarInfo.vin,callback:function(t){e.$set(e.formModel.defaultCarInfo,"vin",t)},expression:"formModel.defaultCarInfo.vin"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.createMember()}}},[e._v("确 定")])],1)],1),a("biz-dialog-selector",{staticClass:"memberDialog",attrs:{title:"选择会员",visibility:e.showDialog,appendToBody:!0,keyField:"id",selectionKeys:e.selectionKeys,loading:e.dialogLoading,tableData:e.dialogTableData,pagination:e.dialogPagination,selectionMode:"single",filters:e.dialogFilters},on:{"update:visibility":function(t){e.showDialog=t},confirmed:e.handleConfirmed,open:e.opened,operate:e.dialogOperate,filterDataChange:e.dialogFilterDataChange,pageSizeChange:e.dialogPageSizeChange,currentPageChange:e.dialogCurrentPageChange}},[a("el-table-column",{attrs:{label:"用户名",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"customer-info"},[t.row.head?a("img",{attrs:{src:t.row.head}}):a("img",{attrs:{src:r("624d")}}),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"title"},[e._v(e._s(t.row.name))]),a("div",{staticClass:"gender"},["0"===t.row.gender?a("i",{staticClass:"male iconfont biz-icon-i-web-m"}):e._e(),"1"===t.row.gender?a("i",{staticClass:"female iconfont biz-icon-i-web-f"}):e._e(),"2"===t.row.gender?a("i",{staticClass:"none iconfont biz-icon-i-web-bm"}):e._e(),a("span",[e._v(e._s(t.row.mobile))])])])])]}}])}),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),a("el-table-column",{attrs:{prop:"createDate",label:"创建日期",formatter:e.createDateConverter,sortable:"custom"}}),a("el-table-column",{attrs:{label:"状态",formatter:e.stateConverter}}),a("el-table-column",{attrs:{prop:"",label:"店铺名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",e._l(t.row.shops,(function(t,r){return a("div",{key:r,staticClass:"customer-info"},[e._v(e._s(t.name))])})),0)]}}])}),a("el-table-column",{attrs:{prop:"lastLoginIp",label:"最后登录地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"customer-info"},[a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.row.loginAddress||t.row.lastLoginIp))])])]}}])}),a("el-table-column",{attrs:{prop:"lastLoginDate",label:"最后登录时间",formatter:e.loginDateConverter,sortable:"custom"}})],1),a("biz-dialog-selector",{attrs:{title:"选择车型",visibility:e.showProductSelector,tableData:e.productTableData,pagination:e.productPagination,selectionMode:"single"},on:{"update:visibility":function(t){e.showProductSelector=t},pageSizeChange:e.productPageSizeChange,currentPageChange:e.productCurrentPageChange,confirmed:e.confirmedProduct}},[a("el-table-column",{attrs:{property:"fullName",label:"名称"}}),a("el-table-column",{attrs:{property:"price",label:"销售价"}})],1)],1)},n=[],o=(r("99af"),r("4de4"),r("7db0"),r("c740"),r("4160"),r("c975"),r("d81d"),r("a434"),r("b0c0"),r("a9e3"),r("b680"),r("d3b7"),r("ac1f"),r("25f0"),r("3ca3"),r("5319"),r("1276"),r("159b"),r("ddb0"),r("b85c")),i=(r("96cf"),r("1da1")),s=r("5530"),l=r("f36f"),c=r("e42c"),m=r("8330"),d=r("46fc"),p=r("c466"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:e.title,visible:e.dialogVisible,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close,open:e.open}},[r("biz-flex-table",{ref:"table",attrs:{operations:e.operations,filters:e.filters,tags:e.tags,pagination:e.pagination,tableData:e.tableData,loading:e.loading,checkable:e.checkable},on:{operate:e.operate,"row-click":e.rowClick,"filter-data-change":e.filterDataChange,"select-all":e.handleSelectAll,select:e.handleSelectionChange,"size-change":e.pageSizeChange,"current-change":e.currentPageChange}},[e._t("default")],2),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmed}},[e._v("确定")])],1)],1)},f=[],g=r("04d3"),h={name:"BizDialogSelector",components:{BizFlexTable:g["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},selectionKeys:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],innerSelection:[]}},methods:{generateSelectionKeys:function(e,t){if(e.indexOf(t)>=0)this.innerSelectionKeys.push(t[this.keyField]);else{var r=this.innerSelectionKeys.indexOf(t[this.keyField]);this.innerSelectionKeys.splice(r,1)}},open:function(e){console.log(this.selectionKeys),this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(e){this.innerSelectionKeys=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){this.innerSelectionKeys.length>0?(this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1):this.$message("请选择一项")},operate:function(e){this.$emit("operate",e)},filterDataChange:function(e){this.$emit("filterDataChange",e)},handleSelectAll:function(e){var t=this;0===e.length?this.tableData.forEach((function(e){var r=t.innerSelectionKeys.indexOf(e[t.keyField]);r>=0&&t.innerSelectionKeys.splice(r,1)})):this.tableData.forEach((function(e){var r=t.innerSelectionKeys.indexOf(e[t.keyField]);r<0&&t.innerSelectionKeys.push(e[t.keyField])}))},handleSelectionChange:function(e,t){this.generateSelectionKeys(e,t)},pageSizeChange:function(e){this.$emit("pageSizeChange",e)},currentPageChange:function(e){this.$emit("currentPageChange",e)},rowClick:function(e,t,r){"single"===this.selectionMode&&(this.innerSelectionKeys=[e[this.keyField]],this.innerSelection=[e])}},watch:{visibility:function(e,t){this.dialogVisible=e}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){}},b=h,y=(r("1029"),r("2877")),v=Object(y["a"])(b,u,f,!1,null,null,null),I=v.exports,C=r("2f62"),w=r("18eb"),M=r("0e5e"),S=r("1ab1"),T=r("c596"),D={stateConverter:function(e){return"0"===e.enableState?"停用":"1"===e.enableState?"启用":"--"},createDateConverter:function(e){if(e.createDate){e.createDate=e.createDate.replace(/-/g,"/");var t=new Date(e.createDate);return p["a"].dateConverter(t)}return"--"},loginDateConverter:function(e){if(e.lastLoginDate){e.lastLoginDate=e.lastLoginDate.replace(/-/g,"/");var t=new Date(e.lastLoginDate);return p["a"].dateConverter(t)}return"--"},ipConverter:function(e){return e.lastLoginIp?e.lastLoginIp:"--"}},O={name:"baseInfo",props:{itemId:{type:String},isEdit:{type:Boolean,default:function(){return!0}},open:{type:Boolean,default:function(){return!1}},handler:{type:String},activeNames:{type:Array,default:function(){return["1","2","3","4","5"]}}},components:{BizGrid:l["a"],BizSaveButton:m["a"],BizDialogSelector:I,TagSelect:w["a"]},data:function(){var e=this;return{isShipped:!1,beanCanUse:"",maxOffsetBean:0,minOffsetBean:0,originalAmount:"",orderStateTypeList:[{label:"订单已执行",value:"1"},{label:"交易完成",value:"2"}],beanRate:0,tagList:[],selectedTags:[],restaurants:[],dialogRules:{userName:[{required:!0,trigger:"blur",message:"请输入用户名"},{pattern:/^[0-9a-zA-Z]+$/,message:"用户名只能为数字或字母",trigger:"blur"},{min:4,max:20,message:"长度在4-20位",trigger:"blur"}],mobile:[{required:!0,trigger:"blur",message:"请输入手机号"}],nickname:[{required:!0,trigger:"blur",message:"请输入昵称"}],name:[{required:!0,trigger:"blur",message:"请输入姓名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:20,message:"密码应在6-20位之间",trigger:"blur"}],rePassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{trigger:"blur",validator:function(t,r,a){e.formModel.password===e.formModel.rePassword?a():a(new Error("两次输入密码不一致"))}}]},loading:!1,picDialogVisible:!1,showProductSelector:!1,dialogImageUrl:"",isFirst:!0,showDialog:!1,dialogVisible:!1,showDelivery:!1,showReceiver:!1,flag:!1,data:{type:"",method:""},productTableData:[],imageList:[],consultants:[],shippingMethod:[],deliveryCorps:[],paymentTypes:[],paymentMethods:[],listExistCard:[],brandList:[],seriesList:[],modeList:[],brandData:[],seriesData:[],modeData:[],financialPlans:[],selectionKeys:[],rescueOrganizations:[],cars:[],reasons:[],workers:[],orderItems:[],areaId:"1568",useTime:"",useMileage:"",appointmentDate:"",downPaymentPrice:"",loanPrice:"",formModel:{userName:"",mobile:"",name:"",password:"123456",nickname:"",gender:"2",defaultCarInfo:{plateNumber:"",brand:"",series:"",type:"",vin:""}},form:{bean:"",appointmentData:{appontmentDate:"",driveEndDate:"",driveStartDate:"",startMileage:"",endMileage:"",level:"",palteNumber:"",productId:"",drivingRange:"",onTime:"",downPayment:"",year:"",price:"",fee:"",personId:"",workUnit:"",houseState:"",onCity:"",intentionTime:"",monthIncome:"",carState:"",way:"",rescueUnit:"",rescuerId:"",rescueCar:"",distance:"",workerLocation:"",reasons:[],images:[],voices:[],financialPlan:{id:"",name:"",loanTerm:[],downPayments:[]},product:{brandId:"",seriesIs:"",id:"",fullName:""},car:{type:""}},appointmentDate:"",appointmentEndDate:"",sn:"",type:"",amount:"",amountPrepay:"",amountFinalpay:"",originalAmount:"",offsetAmount:"",curAmount:"",memberCardId:"",userId:"",consultant:{id:""},area:{id:"1568"},car:{id:"",tpye:"",drivingRange:""},address:"",areaName:"",consignee:"",phone:"",zipCode:"",remarks:"",memo:"",promotionDiscount:"",couponDiscount:"",couponCodeId:"",couponCode:{},couponList:[],beanDiscount:"",point:"",giftBean:"",shippingMethodName:"",paymentMethodId:"",shippingMethodId:"",invoiceState:"",orderTime:"",deliveryTime:"",paymentTime:"",completeTime:"",orderItems:[{appointment:{appontmentDate:"",driveEndDate:"",driveStartDate:"",startMileage:"",endMileage:"",level:"",palteNumber:"",productId:"",drivingRange:"",onTime:"",downPayment:"",year:"",price:"",fee:"",personId:"",workUnit:"",houseState:"",onCity:"",intentionTime:"",monthIncome:"",carState:"",way:"",rescueUnit:"",rescuerId:"",rescueCar:"",distance:"",plateNumber:"",workerLocation:"",reasons:[],images:[],voices:[],financialPlan:{id:"",name:"",loanTerm:[],downPayments:[]},product:{brandId:"",seriesIs:"",id:"",fullName:""},car:{type:""}}}],payments:[{paymentType:"",payBank:"",payAccount:""}],member:{nickname:"",gender:"",mobile:""},shippings:[{shippingMethod:"",deliveryCorpId:"",expressSn:"",freight:"",address:"",consignee:"",isLCL:"0",phone:"",zipCode:""}]},operations:[{label:"保存",name:"save",type:"primary"}],adminCurrent:[],dialogLoading:!0,dialogTableData:[],dialogPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},productPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},isCreated:!1,dialogFilters:[{type:"input",label:"",placeholder:"请输入店铺名称",name:"searchValue",value:""}]}},computed:Object(s["a"])(Object(s["a"])({},Object(C["c"])(["currentUser"])),{},{getCouponCode:function(){var e,t=this;return this.form.couponList.forEach((function(r){if(r.id===t.form.couponCodeId)return e=r,!1})),e},showInfo:function(){return!0},showPayment:function(){return!!this.itemId||"1"!==this.form.type},isCreate:function(){return!this.itemId}}),created:function(){this.queryBrandList(),this.getBrandList(),this.getFinancialPlans(),!this.itemId&&this.orderOptions(),this.getStoreTags(),this.testDrives()},watch:{itemId:function(e){this.itemId&&this.init(),this.itemId||(this.resetFormData(),this.form.type="2",this.getStoreTags())},open:function(e){this.isShipped=!1,!this.itemId&&e&&this.isCreated&&this.resetFormData()},form:{deep:!0,immediate:!0,handler:function(e){var t=this;this.showDelivery=!1,this.showReceiver=!1,this.shippingMethod.map((function(r){r.name===e.shippingMethodName&&"1"===r.isNeedDelivery&&(t.showDelivery=!0),r.name===e.shippingMethodName&&"1"===r.isNeedReceiver&&(t.showReceiver=!0)}))}}},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(C["c"])(["getUser"])),D),{},{getDefaultForm:function(){return{bean:"",curAmount:"",couponCodeId:"",couponCode:{},couponList:[],appointmentData:{appontmentDate:"",driveEndDate:"",driveStartDate:"",startMileage:"",endMileage:"",level:"",palteNumber:"",productId:"",drivingRange:"",onTime:"",downPayment:"",year:"",price:"",fee:"",personId:"",workUnit:"",houseState:"",onCity:"",intentionTime:"",monthIncome:"",carState:"",way:"",rescueUnit:"",rescuerId:"",rescueCar:"",distance:"",workerLocation:"",reasons:[],images:[],voices:[],financialPlan:{id:"",name:"",loanTerm:[],downPayments:[]},product:{brandId:"",seriesIs:"",id:"",fullName:""},car:{type:""}},appointmentDate:"",appointmentEndDate:"",sn:"",type:"",amount:"",amountPrepay:"",amountFinalpay:"",originalAmount:"",offsetAmount:"0",memberCardId:"",userId:"",consultant:{id:""},area:{id:"1568",fullanme:""},car:{id:"",tpye:"",drivingRange:""},address:"",areaName:"",consignee:"",phone:"",zipCode:"",remarks:"",memo:"",promotionDiscount:"",couponDiscount:"",beanDiscount:"",point:"",giftBean:"",shippingMethodName:"",paymentMethodId:"",shippingMethodId:"",invoiceState:"",orderTime:"",deliveryTime:"",paymentTime:"",completeTime:"",orderItems:[{appointment:{appontmentDate:"",driveEndDate:"",driveStartDate:"",startMileage:"",endMileage:"",level:"",palteNumber:"",productId:"",drivingRange:"",onTime:"",downPayment:"",year:"",price:"",fee:"",plateNumber:"",personId:"",workUnit:"",houseState:"",onCity:"",intentionTime:"",monthIncome:"",carState:"",way:"",rescueUnit:"",rescuerId:"",rescueCar:"",distance:"",workerLocation:"",reasons:[],images:[],voices:[],financialPlan:{id:"",name:"",loanTerm:[],downPayments:[]},product:{brandId:"",seriesIs:"",id:"",fullName:""},car:{type:""}}}],payments:[{paymentType:"",payBank:"",payAccount:""}],member:{nickname:"",gender:"",mobile:""},shippings:[{shippingMethod:"",deliveryCorpId:"",expressSn:"",freight:"",address:"",consignee:"",phone:"",zipCode:""}]}},onShippingChange:function(){this.form.shippingMethodName&&this.showDelivery||(this.form.shippings[0].freight="",this.getOriginalAmount())},mobileBlur:function(){this.formModel.id||this.formModel.nickname||this.$set(this.formModel,"nickname",this.formModel.mobile),this.formModel.id||this.formModel.userName||this.$set(this.formModel,"userName",this.formModel.mobile)},brandChange:function(e){this.getSeriesList(e),this.formModel.defaultCarInfo.series="",this.formModel.defaultCarInfo.type=""},seriesChange:function(e){this.getModeList(e),this.formModel.defaultCarInfo.type=""},getStoreTags:function(){var e=this,t={categoryType:"订单/服务业务类型",shopId:window.top.SHOP_ID||""};S["a"].get(T["g"].systemSetting.storeTags,t).then((function(t){console.log("订单/服务业务类型标签",t),e.tagList=t.content})).catch((function(e){console.log(e.errorMessage)}))},beanChange:function(){this.getOriginalAmount()},getOriginalAmount:function(){this.isCreate&&(this.form.originalAmount=(Number(this.originalAmount)-Number(this.form.beanDiscount*this.beanRate||"0")-Number(this.form.couponDiscount||"0")+Number(this.form.shippings[0].freight||"0")).toFixed(2),this.getCurAmount())},getCurAmount:function(){this.form.curAmount=(Number(this.form.originalAmount)+Number(this.form.offsetAmount||"0")).toFixed(2),this.form.curAmount<=0&&(this.form.curAmount=0),this.form.curAmount=this.form.curAmount.toString()},freightChange:function(){this.getOriginalAmount()},offsetAmountChange:function(){this.getCurAmount()},curAmountChange:function(){this.form.offsetAmount=Number(this.form.curAmount)+Number(this.form.beanDiscount*this.beanRate)+Number(this.form.couponDiscount)-Number(this.form.originalAmount),this.form.offsetAmount=this.form.offsetAmount.toString()},couponChange:function(){var e=this;this.form.couponList.forEach((function(t){if(t.id===e.form.couponCodeId)return e.form.couponDiscount=t.coupon.amount,!1})),this.getOriginalAmount()},tagMapping:function(){var e={refId:this.itemId,type:"7",tags:this.$refs.tagSelect.getCurSelectedTags(),shopId:window.top.SHOP_ID||""};S["a"].post(T["g"].systemSetting.tagMapping,e).then((function(e){console.log("映射成功")})).catch((function(e){console.log(e.errorMessage)}))},getTagMapping:function(){var e=this;this.selectedTags=[];var t={refId:this.itemId,type:"7",shopId:window.top.SHOP_ID||""};S["a"].get(T["g"].systemSetting.tagMapping,t).then((function(t){console.log("查看映射信息",t),t.data.tags&&(e.selectedTags=t.data.tags)})).catch((function(e){console.log(e.errorMessage)}))},onAddSuccess:function(){this.getStoreTags()},operate:function(e){this[e]()},dateInterval:function(e,t){if(e&&t)return Object(d["a"])(e.split(" ")[1],t.split(" ")[1])},showDialogFc:function(){this.showDialog=!0,this.dialogFilters[0].value=""},monthPay:function(){var e=this;if(this.form.orderItems[0].appointment.year)return this.form.orderItems[0].appointment.financialPlan.loanTerms.map((function(t){t.year===e.form.orderItems[0].appointment.year&&(e.form.orderItems[0].appointment.rate=t.rate)})),((this.form.orderItems[0].appointment.product.price-this.form.orderItems[0].appointment.product.price*this.form.orderItems[0].appointment.downPayment/100)*this.form.orderItems[0].appointment.rate/12*Math.pow(1+this.form.orderItems[0].appointment.rate/12,12*this.form.orderItems[0].appointment.year)/(Math.pow(1+this.form.orderItems[0].appointment.rate/12,12*this.form.orderItems[0].appointment.year)-1)).toFixed(2)},queryProduct:function(){var e=this;c["a"].listProductByTestDrive({clientType:"2",methodName:"ListProductByTestDrive",shopId:this.getUser().shop?this.getUser().shop.id:window.top.SHOP_ID,pageSize:this.productPagination.pageSize,pageNumber:this.productPagination.currentPage},(function(t){e.productTableData=t.content,e.showProductSelector=!0}),(function(t){e.$message.warning(t.errorMessage)}))},confirmedProduct:function(e,t){this.form.orderItems[0].appointment.product.id=t[0].id,this.form.orderItems[0].appointment.product.fullName=t[0].fullName},handleConfirmed:function(e,t){this.form.member.nickname=t[0].nickname,this.form.member.mobile=t[0].mobile,this.form.memberCardId="",this.form.userId=t[0].id,this.$set(this.form.member,"gender",t[0].gender),this.$set(this.form,"selectionKeys",e),this.listExistCardTemplate(),this.form.plateNumber=t[0].defaultCarInfo.plateNumber,this.form.drivingRange=t[0].defaultCarInfo.drivingRange||"",this.form.car.type=t[0].defaultCarInfo.type||"",this.form.car.drivingRange="",this.form.shippings[0].address&&this.itemId||(this.form.shippings[0].address=t[0].defaultReceiver.areaName+t[0].defaultReceiver.address),this.form.shippings[0].consignee&&this.itemId||(this.form.shippings[0].consignee=t[0].name),this.form.shippings[0].phone&&this.itemId||(this.form.shippings[0].phone=t[0].mobile),this.carOptions(this.form.userId),this.getCouponList()},carOptions:function(e){var t,r=this;c["a"].carOptions({memberId:e},(function(e){r.cars=e.cars,r.cars.length>0&&(r.cars.forEach((function(e){if(e.plateNumber===r.form.plateNumber)return t=e,!1})),r.form.car.id=t?t.id:"",r.cars.map((function(e){if(e.id===r.form.car.id)return r.form.car.type=e.type,!1})))}),(function(e){r.$message.warning(e.errorMessage)}))},carChange:function(e){var t=this;this.cars.map((function(r){r.id===e&&(t.form.car.type=r.type,t.form.car.drivingRange=r.drivingRange,t.form.drivingRange=r.drivingRange)}))},createMember:function(){var e=this;this.$refs.dialogFormModel.validate((function(t,r){t&&c["a"].createMember(e.formModel,(function(t){e.loading=!1,e.$message.success("保存成功"),e.dialogVisible=!1,e.form.member.nickname=t.data.name,e.form.member.gender=t.data.gender,e.form.member.mobile=t.data.mobile,e.form.userId=t.data.id,t.data.defaultCarInfo&&(e.cars.push({plateNumber:t.data.defaultCarInfo.plateNumber,id:t.data.defaultCarInfo.id,type:t.data.defaultCarInfo.type}),e.form.car.id=t.data.defaultCarInfo.id,e.form.car.type=t.data.defaultCarInfo.type)}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage)}))}))},resetFormData:function(){this.form=this.getDefaultForm(),this.form.userId="",this.form.memberCardId="",this.listExistCard=[],this.form.member={},this.form.couponList=[],this.form.couponCodeId="",this.form.beanDiscount="",this.paymentTypes=[],this.form.payments[0].paymentType="",this.form.shippings[0].deliveryCorpId="",this.form.originalAmount="",this.form.curAmount="",this.form.car.type="",this.form.car.drivingRange="",this.form.drivingRange="",this.form.plateNumber="",this.form.car.id="",this.form.offsetAmount="",this.form.orderItems[0].appointment.product.brandId="",this.form.orderItems[0].appointment.product.seriesId="",this.form.orderItems[0].appointment.product.id=""},init:function(){var e=this;c["a"].viewOrder(this.getSaveParams(),(function(t){e.form=Object.assign(e.getDefaultForm(),t.order),e.form.curAmount=Number(e.form.originalAmount)+Number(e.form.offsetAmount),console.log(e.form),0===e.form.payments.length?(e.form.payments=[{paymentType:"",payBank:"",payAccount:""}],e.form.payments[0].paymentType=e.form.paymentTypeName):e.form.memberCardId=e.form.payments[0].memberCardId,0===e.form.shippings.length&&(e.form.shippings=[{shippingMethod:"",deliveryCorpId:"",expressSn:"",freight:"",address:e.form.area&&e.form.area.fullName?e.form.area.fullName+e.form.address:e.form.address,consignee:e.form.consignee,phone:e.form.phone,zipCode:e.form.zipCode}]),e.form.orderItems[0].appointment&&e.form.orderItems[0].appointment.product&&e.form.orderItems[0].appointment.product.brandId&&e.querySeriesList(e.form.orderItems[0].appointment.product.brandId),e.form.orderItems[0].appointment&&e.form.orderItems[0].appointment.product&&e.form.orderItems[0].appointment.product.seriesId&&e.queryTypeList(e.form.orderItems[0].appointment.product.seriesId),t.order.appointmentDate&&(e.appointmentDate=t.order.appointmentDate),e.form.orderItems[0].appointment&&e.form.orderItems[0].appointment.reasons&&(e.form.orderItems[0].appointment.reasons=e.form.orderItems[0].appointment.reasons.map((function(e){return e.id}))),e.carOptions(e.form.member.id),e.shippingMethod=t.shippingMethods,e.deliveryCorps=t.deliveryCorps,e.paymentTypes=t.paymentTypes,e.paymentMethods=t.paymentMethods,e.paymentMethods.map((function(r){r.name===t.order.paymentMethodName&&(e.form.paymentMethodId=r.id)})),e.reasons=t.reasons,e.adminCurrent=[{id:t.adminCurrent.id,name:t.adminCurrent.realName}],e.form.consultant.id?e.adminCurrent=[{id:e.form.consultant.id,name:e.form.consultant.realName}]:e.form.consultant={id:t.adminCurrent.id},e.form.area&&(e.areaId=e.form.area.id),"rescue"===e.$route.params.orderType&&(e.imageList=e.form.orderItems[0].appointment.images.map((function(e){return{url:e.path}}))),e.form.type=e.getOrderStatus(e.form.type),e.listExistCardTemplate(),e.listAdminByRole(),"2"===e.form.orderType&&(console.log("查询映射",e.form.orderType),e.getTagMapping(),e.getStoreTags()),e.offsetAmountChange()}),(function(t){e.$message.warning(t.errorMessage)}))},paymentTypeChange:function(e){"会员卡余额"!==e&&(this.form.memberCardId="",this.form.beanDiscount="",this.getOriginalAmount())},memberCardChange:function(){this.getMemberCardInfo(),this.getBeanRate()},getMemberCardInfo:function(){var e=this,t={userCardId:this.form.memberCardId};S["a"].get("/admin/memberCard/memberCard.jhtml",t).then((function(t){e.form.bean=t.content.bean,e.getCouponList()})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))},getBeanRate:function(){var e=this,t={id:this.form.memberCardId};S["a"].get("/admin/memberCard/memberCard.jhtml",t).then((function(t){e.beanRate=Number(t.rewardSet.cash)/Number(t.rewardSet.vBean)})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))},getCouponList:function(){var e=this;if(0!==this.orderItems.length){this.form.couponList=[];var t=this.orderItems.map((function(e){return{product:{id:e.productId},quantity:e.quantity||""}})),r={shopId:window.top.SHOP_ID||"",cartItems:t,userId:this.form.userId,userCardId:this.form.memberCardId};S["a"].post("/admin/order/couponCodes.jhtml",r).then((function(t){e.form.couponList=t.content,e.maxOffsetBean=t.maxOffsetBean,e.minOffsetBean=t.minOffsetBean})).catch((function(e){e.errorMessage&&console.log(e.errorMessage)}))}},listAdminByRole:function(){var e=this,t="";t="car"===this.$route.params.orderType?["salesman"]:["afterSale","reception","testDriver"],c["a"].listAdminByRole({roleTypes:t},(function(t){e.loading=!1,e.flag=!1,console.log(e.form.consultant.id),t.dataList.map((function(t){t.id===e.adminCurrent[0].id&&(e.flag=!0)})),e.flag?e.consultants=t.dataList:e.consultants=t.dataList.concat(e.adminCurrent)}),(function(e){console.log(e)}))},loanTerm:function(e){var t=this;c["a"].loanTerms({financialId:e},(function(e){t.loading=!1,t.form.orderItems[0].appointment.financialPlan.downPayments=[e.downPayment,e.downPayment+10,e.downPayment+20,e.downPayment+30],t.form.orderItems[0].appointment.downPayment="",t.form.orderItems[0].appointment.financialPlan.loanTerms=e.loanTerms}),(function(e){t.loading=!1,t.$message.warning(e.errorMessage)}))},orderOptions:function(){var e=this,t=!1;this.form.type="交易完成",c["a"].options({shopId:window.top.SHOP_ID},(function(r){e.loading=!1,e.paymentMethods=r.paymentMethods,e.paymentTypes=r.paymentTypes,e.shippingMethod=r.shippingMethods,e.deliveryCorps=r.deliveryCorps,e.reasons=r.reasons,e.rescueOrganizations=r.rescueOrganizations,e.workers=r.workers,e.adminCurrent=[{id:r.adminCurrent.id,name:r.adminCurrent.realName}],e.form.consultant={id:r.adminCurrent.id},e.listAdminByRole(),!e.itemId&&e.showInfo&&(e.paymentTypes.forEach((function(e){if("会员卡余额"===e.name)return t=!0,!1})),e.form.payments[0].paymentType=t?"会员卡余额":e.paymentTypes[0].name),e.form.userId&&e.listExistCardTemplate()}),(function(t){e.loading=!1,"店铺不存在"!==t.errorMessage&&e.$message.warning(t.errorMessage)}))},submitOrder:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,s,l,c,m,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.analysisAddress(e.currentUser.shop.address);case 2:return r=t.sent,t.next=5,e.analysisAddress(e.form.shippings[0].address);case 5:a=t.sent,n=e.form.orderItems,i=[],s=Object(o["a"])(n);try{for(s.s();!(l=s.n()).done;)for(c=l.value,m=0;m<c.quantity;m++)d={cname:e.currentUser.shop.name,spro:r.province,scity:r.city,num:c.product.vins[m].number,epro:a.province,ecity:a.city,depname:e.form.shippings[0].consignee},i.push(S["a"].post("/admin/order/shipping2XinYue.jhtml",d))}catch(p){s.e(p)}finally{s.f()}Promise.all(i).then((function(t){e.$emit("xrorder")})).catch((function(t){e.$emit("xrorder")}));case 11:case"end":return t.stop()}}),t)})))()},analysisAddress:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("开始解析, "+e),t.abrupt("return",new Promise((function(t,r){var a=new window.BMap.Geocoder;a.getPoint(e,(function(e){a.getLocation(e,(function(e){console.log(e),t({province:e.addressComponents.province,city:e.addressComponents.city})}))}))})));case 2:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;if(this.reasons&&this.reasons.length>0&&this.itemId&&this.form.orderItems[0].appointment&&(this.form.orderItems[0].appointment.reasons=this.reasons.map((function(t){return e.form.orderItems[0].appointment&&e.form.orderItems[0].appointment.reasons&&-1!==e.form.orderItems[0].appointment.reasons.indexOf(t.id)?{id:t.id,content:t.content}:{id:"",content:""}}))),""===this.form.consultant.id)return this.$message.warning("请输入顾问"),!1;if("ride"===this.$route.params.orderType){if(console.log(this.form.orderItems[0].appointment.plateNumber),""===this.form.orderItems[0].appointment.plateNumber)return this.$message.warning("请输入试驾车号"),!1;if(""===this.form.orderItems[0].appointment.product.fullName)return this.$message.warning("请输入试驾车型"),!1}if(this.itemId)if("shipping"===this.handler){if(this.loading=!0,this.shippingMethod.map((function(t){t.name===e.form.shippingMethodName&&(e.form.shippingMethodId=t.id)})),this.form.deliveryCorpId=this.form.shippings[0].deliveryCorpId,this.showDelivery){if(""===this.form.shippings[0].deliveryCorpId&&"0"===this.form.shippings[0].isLCL)return this.$message.warning("请输入物流公司"),this.loading=!1,!1;if(""===this.form.shippings[0].expressSn&&"0"===this.form.shippings[0].isLCL)return this.$message.warning("请输入物流单号"),this.loading=!1,!1;if(""===this.form.shippings[0].freight||!/^(0|[0-9][0-9]*)(\.\d+)?$/.test(this.form.shippings[0].freight))return this.$message.warning("请输入正确的物流费用"),this.loading=!1,!1;this.showReceiver?this.$set(this.form,"shippingData",{isLCL:this.form.shippings[0].isLCL,phone:this.form.shippings[0].phone||this.form.phone,address:this.form.shippings[0].address||this.form.areaName,consignee:this.form.shippings[0].consignee||this.form.consignee,expressSn:this.form.shippings[0].expressSn,freight:this.form.shippings[0].freight}):this.$set(this.form,"shippingData",{expressSn:this.form.shippings[0].expressSn,freight:this.form.shippings[0].freight})}else this.showReceiver&&!this.showDelivery&&(this.$set(this.form,"shippingData",{phone:this.form.shippings[0].phone||this.form.phone,address:this.form.shippings[0].address||this.form.areaName,consignee:this.form.shippings[0].consignee||this.form.consignee}),this.$set(this.form,"deliveryCorpId",this.form.shippings[0].deliveryCorpId));this.loading=!0,c["a"].shippingOrder(this.form,(function(t){e.loading=!1,e.$message.success("保存成功"),e.$emit("operationSuccess"),console.log("shipping-success"),e.isShipped=!0}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage)}))}else if("service"===this.handler)this.loading=!0,c["a"].excuteOrder(this.form,(function(t){e.loading=!1,e.$message.success("保存成功"),e.$emit("operationSuccess")}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage)}));else if("payment"===this.handler){if(this.loading=!0,this.paymentTypes.map((function(t){t.name===e.form.payments[0].paymentType&&(e.form.paymentTypeId=t.id)})),this.form.payment={payBank:this.form.payments[0].payBank,payAccount:this.form.payments[0].payAccount,amount:this.form.amount},!this.form.payments[0].paymentType||("刷卡"===this.form.payments[0].paymentType||"汇款"===this.form.payments[0].paymentType)&&(""===this.form.payments[0].payBank||""===this.form.payments[0].payAccount))return this.$message.warning("请输入付款信息"),this.loading=!1,!1;this.$refs.form.validate((function(t,r){t?c["a"].paymentOrder(e.form,(function(t){e.loading=!1,e.$message.success("保存成功"),e.$emit("operationSuccess")}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage)})):e.loading=!1}))}else this.loading=!0,c["a"].updateOrder(this.form,(function(t){e.loading=!1,e.$message.success("保存成功"),e.$emit("operationSuccess"),"2"===e.form.orderType&&e.tagMapping()}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage)}));else{if(!this.form.payments[0].paymentType)return this.$message.warning("请输入付款信息"),this.loading=!1,!1;this.createOrder()}var t=this.deliveryCorps.find((function(t){return t.id===e.form.shippings[0].deliveryCorpId})).name;"shipping"===this.handler&&"新悦物流"===t&&this.submitOrder()},setOrderItems:function(e){this.orderItems=e,this.orderItems.forEach((function(e){e.productId=e.productId?e.productId:e.id}));var t=0;e.map((function(e){t+=Number(e.quantity)*Number(e.price)})),this.originalAmount=t,this.form.originalAmount=t,this.offsetAmountChange(),this.form.member.nickname&&this.getCouponList()},createOrder:function(){var e=this;if(this.shippingMethod.map((function(t){t.name===e.form.shippingMethodName&&(e.form.shippingMethodId=t.id)})),this.paymentTypes.map((function(t){t.name===e.form.payments[0].paymentType&&(e.form.paymentTypeId=t.id)})),this.form.appointmentData=this.form.orderItems[0].appointment,"rescue"===this.$route.params.orderType&&(this.form.appointmentData.reasons=this.reasons.map((function(t){return-1!==e.form.appointmentData.reasons.indexOf(t.id)?{id:t.id,content:t.content}:{id:"",content:""}}))),this.showInfo&&!this.form.payments[0].paymentType||this.showInfo&&("刷卡"===this.form.payments[0].paymentType||"汇款"===this.form.payments[0].paymentType)&&(""===this.form.payments[0].payBank||""===this.form.payments[0].payAccount))return this.$message.warning("请输入付款信息"),this.loading=!1,!1;this.loading=!0,this.$refs.form.validate((function(t,r){t&&c["a"].createOrder({appointmentData:e.form.orderItems[0].appointment,appointmentDate:e.form.appointmentDate,appointmentEndDate:e.form.appointmentEndDate,sn:e.form.sn,type:e.form.type,orderType:e.$route.params.orderType,orderStatus:"交易完成"===e.form.type?"2":e.form.type,bean:e.form.beanDiscount,couponCode:e.getCouponCode,amount:e.form.amount,amountPrepay:e.form.amountPrepay,paymentTypeId:e.form.paymentTypeId,shippingMethod:{id:e.form.shippingMethodId},amountFinalpay:e.form.amountFinalpay,originalAmount:e.form.originalAmount,offsetAmount:e.form.offsetAmount,freight:e.form.shippings&&e.form.shippings.length?e.form.shippings[0].freight:"",memberCardId:e.form.memberCardId,amountPaid:e.form.curAmount,userId:e.form.userId,consultant:{id:e.form.consultant.id},car:{id:e.form.car.id},area:{id:e.areaId},address:e.form.address,areaName:e.form.areaName,consignee:e.form.consignee,phone:e.form.phone,zipCode:e.form.zipCode,remarks:e.form.remarks,memo:e.form.memo,promotionDiscount:e.form.promotionDiscount,couponDiscount:e.form.couponDiscount,beanDiscount:e.form.beanDiscount,point:e.form.point,giftBean:e.form.giftBean,shippingMethodName:e.form.shippingMethodName,paymentMethodId:e.form.paymentMethodId,invoiceState:e.form.invoiceState,orderTime:e.form.orderTime,deliveryTime:e.form.deliveryTime,paymentTime:e.form.paymentTime,completeTime:e.form.completeTime,orderItems:e.orderItems,payments:[{paymentType:e.form.payments[0].paymentType,payBank:e.form.payments[0].payBank,payAccount:e.form.payments[0].payAccount}],member:{nickname:e.form.member.nickname,gender:e.form.member.gender,mobile:e.form.member.mobile},shippings:[{isLCL:e.form.shippings[0].isLCL,shippingMethod:e.form.shippings[0].shippingMethod,deliveryCorpId:e.form.shippings[0].deliveryCorpId,expressSn:e.form.shippings[0].expressSn,freight:e.form.shippings[0].freight,address:e.form.shippings[0].address,consignee:e.form.shippings[0].consignee,phone:e.form.shippings[0].phone,zipCode:e.form.shippings[0].zipCode}]},(function(t){e.loading=!1,e.$message.success("保存成功"),e.form=e.getDefaultForm(),e.form.orderItems[0].appointment&&e.form.orderItems[0].appointment.driveStartDate&&(e.form.orderItems[0].appointment.driveStartDate=e.form.orderItems[0].appointment.driveStartDate.split(" ")[1]),e.form.orderItems[0].appointment&&e.form.orderItems[0].appointment.driveEndDate&&(e.form.orderItems[0].appointment.driveEndDate=e.form.orderItems[0].appointment.driveEndDate.split(" ")[1]),e.$emit("operationSuccess"),e.isCreated=!0,e.itemId=t.id,e.tagMapping()}),(function(t){e.loading=!1,e.$message.warning(t.errorMessage)}))}))},productChange:function(){var e=this;this.modeList.map((function(t){t.id===e.form.orderItems[0].appointment.product.id&&(e.form.orderItems[0].appointment.product.price=t.price)}))},listExistCardTemplate:function(){var e=this;c["a"].listExistCardTemplate({userId:this.form.userId},(function(t){e.loading=!1,e.listExistCard=t.content,e.listExistCard.forEach((function(e){e.template.name+=" ¥"+e.balance}))}),(function(e){console.log(e)}))},getFinancialPlans:function(){var e=this;c["a"].getFinancialPlans({shopId:window.top.SHOP_ID||""},(function(t){e.loading=!1,e.financialPlans=t.financials}),(function(e){console.log(e)}))},getSaveParams:function(){return{orderId:this.itemId}},areaChanged:function(e){this.areaId=e,this.isFirst&&(this.areaId="1568",this.isFirst=!1)},handleBrandChange:function(e){this.querySeriesList(e),this.$set(this.form.orderItems[0].appointment.product,"seriesId",""),this.$set(this.form.orderItems[0].appointment.product,"id","")},handleSeriesChange:function(e){this.queryTypeList(e),this.$set(this.form.orderItems[0].appointment.product,"id","")},queryMemberList:function(e){var t=this;c["a"].memberList(e,(function(e){t.dialogLoading=!1,t.dialogTableData=e.content,t.dialogPagination.total=Number(e.total)}),(function(e){console.log(e),console.log("code错误")}))},opened:function(){this.dialogPagination.currentPage=1,this.dialogPagination.pageSize=20,this.dialogFilters=[{type:"input",label:"",placeholder:"请输入名称或手机号",name:"searchValue",value:""}],this.queryMemberList(this.getDialogQueryParams())},getDialogQueryParams:function(){return{pageSize:this.dialogPagination.pageSize,pageNumber:this.dialogPagination.currentPage,searchValue:this.dialogFilters[0].value}},productPageSizeChange:function(e){this.$set(this.productPagination,"pageSize",e)},productCurrentPageChange:function(e){this.$set(this.productPagination,"currentPage",e)},dialogFilterDataChange:function(e){this.dialogPagination.currentPage=1,this.queryMemberList(this.getDialogQueryParams())},dialogPageSizeChange:function(e){this.$set(this.dialogPagination,"pageSize",e),this.queryMemberList(this.getDialogQueryParams())},dialogCurrentPageChange:function(e){this.$set(this.dialogPagination,"currentPage",e),this.queryMemberList(this.getDialogQueryParams())},handleSuccess:function(e,t,r){this.form.orderItems[0].appointment.images.push({path:e.fis[0].url})},handleRemove:function(e,t){var r=this.form.orderItems[0].appointment.images.findIndex((function(t){return t.path===e.path}));-1!==r&&this.form.orderItems[0].appointment.images.splice(r,1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.picDialogVisible=!0},dialogOperate:function(e){},queryBrandList:function(){var e=this;c["a"].brands({},(function(t){e.brandList=t.dataList}),(function(e){console.log(e),console.log("code错误")}))},querySeriesList:function(e){var t=this;c["a"].series({brandId:e},(function(e){t.seriesList=e.dataList}),(function(e){console.log(e),console.log("code错误")}))},getBrandList:function(){var e=this;M["a"].queryBrandList({},(function(t){e.brandData=t.dataList}),(function(e){console.log(e),console.log("code错误")}))},getSeriesList:function(e){var t=this;M["a"].querySeriesList({brand:e},(function(e){t.seriesData=e.dataList}),(function(e){console.log(e),console.log("code错误")}))},getModeList:function(e){var t=this;M["a"].queryTypeList({series:e,brand:this.formModel.defaultCarInfo.brand},(function(e){t.modeData=e.dataList}),(function(e){console.log(e),console.log("code错误")}))},queryTypeList:function(e){var t=this;c["a"].types({seriesId:e,brandId:this.form.brand},(function(e){t.modeList=e.dataList}),(function(e){console.log(e),console.log("code错误")}))},beforeAvatarUpload:function(e){var t=/^image\/(.*)$/.test(e.type);if(!t)return this.$message.error("请选择符合图片格式的文件上传!"),!1;var r=e.size/1024<=200;return!!r||(this.$message.error("上传图片大小不能超过 200K!"),!1)},addMember:function(){this.formModel={userName:"",mobile:"",name:"",password:"123456",nickname:"",gender:"2",defaultCarInfo:{plateNumber:"",vin:"",brand:"",series:"",type:""}},this.dialogVisible=!0},getOrderStatus:function(e){switch(e){case"11":return"卖家已发货";case"10":return"退款退货完成";case"9":return"退款退货中";case"8":return"已过期";case"7":return"已评价";case"6":return"订单关闭";case"5":return"交易完成";case"4":return"订单已执行";case"3":return"买家已付款";case"2":return"商家已确认";case"1":return"待商家确认";default:return"无"}},testDrives:function(){var e=this,t={pageSize:1e3,pageNumber:1,shopId:window.top.SHOP_ID||""};S["a"].get("/admin/testDriveMgmt/testDrives.jhtml",t).then((function(t){e.restaurants=t.dataList.map((function(e){return{value:e.car.plateNumber,id:e.car.id,type:e.car.type}}))})).catch((function(e){console.log(e.errorMessage)}))},querySearchAsync:function(e,t){var r=this.restaurants,a=e?r.filter(this.createStateFilter(e)):r;t(a)},createStateFilter:function(e){return function(e){return!0}},handleSelect:function(e){this.form.orderItems[0].appointment.product.fullName=e.type}})},_=O,k=(r("0f32"),Object(y["a"])(_,a,n,!1,null,null,null));t["a"]=k.exports},b680:function(e,t,r){"use strict";var a=r("23e7"),n=r("a691"),o=r("408a"),i=r("1148"),s=r("d039"),l=1..toFixed,c=Math.floor,m=function(e,t,r){return 0===t?r:t%2===1?m(e,t-1,r*e):m(e*e,t/2,r)},d=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},p=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){l.call({})}));a({target:"Number",proto:!0,forced:p},{toFixed:function(e){var t,r,a,s,l=o(this),p=n(e),u=[0,0,0,0,0,0],f="",g="0",h=function(e,t){var r=-1,a=t;while(++r<6)a+=e*u[r],u[r]=a%1e7,a=c(a/1e7)},b=function(e){var t=6,r=0;while(--t>=0)r+=u[t],u[t]=c(r/e),r=r%e*1e7},y=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==u[e]){var r=String(u[e]);t=""===t?r:t+i.call("0",7-r.length)+r}return t};if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(t=d(l*m(2,69,1))-69,r=t<0?l*m(2,-t,1):l/m(2,t,1),r*=4503599627370496,t=52-t,t>0){h(0,r),a=p;while(a>=7)h(1e7,0),a-=7;h(m(10,a,1),0),a=t-1;while(a>=23)b(1<<23),a-=23;b(1<<a),h(1,1),b(2),g=y()}else h(0,r),h(1<<-t,0),g=y()+i.call("0",p);return p>0?(s=g.length,g=f+(s<=p?"0."+i.call("0",p-s)+g:g.slice(0,s-p)+"."+g.slice(s-p))):g=f+g,g}})},c466:function(e,t,r){"use strict";r("99af"),r("d3b7"),r("ac1f"),r("25f0"),r("5319");t["a"]={nowDate:function(){var e=new Date,t=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getDate()+1<10?"0"+e.getDate():e.getDate();return e.getFullYear().toString()+"-"+t+"-"+r},getMonthDays:function(e){var t=new Date(Date.parse(e.replace(/-/g,"/"))),r=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,1),n=(a-r)/864e5;return n},halfYearAgo:function(e){var t="";return t=e?new Date(Date.parse(e.replace(/-/g,"/"))):new Date,console.log(t),t.setMonth(t.getMonth()-6),"".concat(t.getFullYear(),"-").concat(t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,"-").concat(t.getDate()<10?"0"+t.getDate():t.getDate())},lastMonthDate:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1<10?"0"+e.getMonth():e.getMonth(),a=e.getDate()+1<10?"0"+e.getDate():e.getDate();return"00"===r&&(r="12",t--),t.toString()+"-"+r+"-"+a},nextMonthDate:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),n=parseInt(r)+1;13===n&&(t=parseInt(t)+1,n=1);var o=new Date(t,n,0);return o=o.getDate(),a>o&&(a=o),n<10&&(n="0"+n),t+"-"+n+"-"+a},lastYearDate:function(){var e=new Date,t=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());return t.getFullYear()+"-"+this.convertToFullMode(t.getMonth()+1)+"-"+this.convertToFullMode(t.getDate())},lastTwoYearDate:function(){var e=new Date,t=new Date(e.getFullYear()+2,e.getMonth(),e.getDate());return t.getFullYear()+"-"+this.convertToFullMode(t.getMonth()+1)+"-"+this.convertToFullMode(t.getDate())},lastNYearDate:function(e,t){var r=new Date(e),a=new Date(r.getFullYear()+parseInt(t),r.getMonth(),r.getDate());return a.getFullYear()+"-"+this.convertToFullMode(a.getMonth()+1)+"-"+this.convertToFullMode(a.getDate())},dateConverter:function(e){return e instanceof Date?e.getFullYear()+"-"+this.convertToFullMode(e.getMonth()+1)+"-"+this.convertToFullMode(e.getDate()):e},timeConverter:function(e){return e instanceof Date?this.convertToFullMode(e.getHours())+":"+this.convertToFullMode(e.getMinutes())+":"+this.convertToFullMode(e.getSeconds()):e},shortTimeConverter:function(e){return e instanceof Date?this.convertToFullMode(e.getHours())+":"+this.convertToFullMode(e.getMinutes()):e},dateTimeConverter:function(e){return e instanceof Date?this.dateConverter(e)+" "+this.timeConverter(e):e},convertToFullMode:function(e){return e=e.toString(),1===e.length?"0"+e:e}}},caed:function(e,t,r){"use strict";var a=r("95b5"),n=r.n(a);n.a},d4c2:function(e,t,r){"use strict";var a=r("e725"),n=r.n(a);n.a},dc77:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"purchase-statistics"},[r("div",{attrs:{slot:"top"},slot:"top"},[r("biz-header",{attrs:{operations:e.operations,filters:e.filters,views:e.views},on:{operate:e.operate,filterDataChange:e.filterDataChange,"active-item-change":e.activeItemChange,"cascader-change":e.cascaderChange,onSwitch:e.onViewSwitch}}),r("div",{staticStyle:{"font-size":"14px","margin-bottom":"10px",display:"flex"}},[r("div",[e._v(" 销售金额： "),[e._v("￥"+e._s(e.sumPurchaseFee))]],2),r("div",{staticStyle:{"margin-left":"15px"}},[e._v(" 退货金额： "),[e._v("￥"+e._s(e.sumReturnFee))]],2)])],1),r("biz-list",{directives:[{name:"show",rawName:"v-show",value:"list"===this.activedView,expression:"this.activedView==='list'"}],ref:"table",attrs:{tableData:e.tableData,showSummary:!0,size:"small",height:"100%"},on:{handleSelectionChange:e.handleSelectionChange,rowClick:e.rowClick}},[r("el-table-column",{attrs:{type:"selection",width:"80"}}),r("el-table-column",{attrs:{label:"商品","min-width":"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"product-info-content"},[t.row.thumbnail&&" "!==e.orderItem.thumbnail?r("img",{attrs:{src:t.row.thumbnail,onerror:e.errorImg}}):r("img",{attrs:{src:"/resources/admin/images/default/product-default-100.png"}}),r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"titleClass",attrs:{title:t.row.specValue}},[e._v(e._s(t.row.specValue))]),r("div",{staticClass:"overflow"},[e._v(e._s(t.row.barCode))]),r("div",{staticClass:"overflow"},[e._v("单价(不含税)：")]),r("div",{staticClass:"overflow"},[e._v("单价(含税)：")])])])])])]}}])}),r("el-table-column",{attrs:{label:"销售","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"overflow"},[e._v("商品数量："+e._s(t.row.purchaseAmount))]),r("div",{staticClass:"overflow"},[e._v("金额(不含税)：")]),r("div",{staticClass:"overflow"},[e._v("税额(含税)：")]),r("div",{staticClass:"overflow"},[e._v("金额(含税)："+e._s(t.row.purchaseFee))])])]}}])}),r("el-table-column",{attrs:{label:"销售退货","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"overflow"},[e._v("商品数量："+e._s(t.row.returnAmount))]),r("div",{staticClass:"overflow"},[e._v("金额(不含税)：")]),r("div",{staticClass:"overflow"},[e._v("税额(含税)：")]),r("div",{staticClass:"overflow"},[e._v("金额(含税)："+e._s(t.row.returnFee))])])]}}])})],1),r("biz-list",{directives:[{name:"show",rawName:"v-show",value:"list1"===this.activedView,expression:"this.activedView==='list1'"}],ref:"table",attrs:{tableData:e.tableDataAgent,size:"small",height:"100%"},on:{handleSelectionChange:e.handleSelectionChange,rowClick:e.rowClickAgent}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),r("el-table-column",{attrs:{label:"客户","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"overflow"},[e._v(e._s(t.row.agentName))])])]}}])}),r("el-table-column",{attrs:{label:"订单数量","min-width":"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"overflow"},[e._v(e._s(t.row.orderQuantity))])])]}}])}),r("el-table-column",{attrs:{label:"销售","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"overflow"},[e._v("商品数量："+e._s(t.row.purchaseAmount))]),r("div",{staticClass:"overflow"},[e._v("金额(不含税)：")]),r("div",{staticClass:"overflow"},[e._v("税额(含税)：")]),r("div",{staticClass:"overflow"},[e._v("金额(含税)："+e._s(t.row.purchaseFee))])])]}}])}),r("el-table-column",{attrs:{label:"销售退货","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"overflow"},[e._v("商品数量："+e._s(t.row.returnAmount))]),r("div",{staticClass:"overflow"},[e._v("金额(不含税)：")]),r("div",{staticClass:"overflow"},[e._v("税额(含税)：")]),r("div",{staticClass:"overflow"},[e._v("金额(含税)："+e._s(t.row.returnFee))])])]}}])})],1),r("div",{attrs:{slot:"float"},slot:"float"},[r("biz-popup-tabs",{attrs:{open:e.open},on:{close:function(t){e.open=!1}},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"info"}},[r("base-info",{ref:"baseinfo",attrs:{itemId:e.itemId,beginTime:e.filters[2].value[0]?this.filters[2].value[0]+" 00:00:00":"",endTime:e.filters[2].value[1]?e.filters[2].value[1]+" 23:59:59":""},on:{openOrderTab:e.openOrderTab}})],1)],1),r("biz-popup-tabs",{attrs:{open:e.openAgent},on:{close:function(t){e.openAgent=!1}},model:{value:e.tabNameAgent,callback:function(t){e.tabNameAgent=t},expression:"tabNameAgent"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"baseinfo"}},[r("base-info-agent",{ref:"baseinfo",attrs:{agentId:e.agentId,beginTime:e.filters[2].value[0]?this.filters[2].value[0]+" 00:00:00":"",endTime:e.filters[2].value[1]?e.filters[2].value[1]+" 23:59:59":""}})],1)],1),r("biz-popup-tabs",{attrs:{open:e.openOrderSale},on:{close:function(t){e.openOrderSale=!1}},model:{value:e.orderTabName,callback:function(t){e.orderTabName=t},expression:"orderTabName"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"orderSaleInfo"}},[r("order-sale-info",{ref:"orderSaleInfo",attrs:{itemId:e.orderSaleId,isEdit:e.isEdit,handler:e.handlerName,activeNames:e.activeNames}})],1),r("el-tab-pane",{attrs:{label:"商品信息",name:"OrderSaleProductInfo"}},[r("order-sale-product-info",{ref:"OrderSaleProductInfo",attrs:{itemId:e.orderSaleId,isEdit:e.isEdit,handler:e.handlerName}})],1)],1)],1),r("div",{attrs:{slot:"bottom"},slot:"bottom"},[r("biz-pagination",{attrs:{pagination:e.pagination},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)],1)},n=[],o=(r("99af"),r("4160"),r("d81d"),r("b0c0"),r("a9e3"),r("d3b7"),r("ac1f"),r("25f0"),r("3ca3"),r("466d"),r("1276"),r("159b"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),i=r("5530"),s=r("b85c"),l=r("04d3"),c=r("7132"),m=r("f36f"),d=r("1ab1"),p=r("2f62"),u=r("c596"),f=r("bc3a"),g=r.n(f),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("biz-grid",{staticClass:"sale-item"},[r("biz-flex-table",{ref:"table",attrs:{tableData:e.tableData,loading:e.loading,pagination:e.pagination,checkable:!1},on:{operate:e.operate,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[r("el-table-column",{attrs:{prop:"orderSn",label:"订单编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.clickRelateBill(r,t.row)}}},[r("span",{staticStyle:{"white-space":"normal"}},[e._v(e._s(t.row.orderSn?t.row.orderSn:""))])])]}}])}),r("el-table-column",{attrs:{prop:"depotName",label:"客户"}}),r("el-table-column",{attrs:{prop:"productName",label:"类型"}}),r("el-table-column",{attrs:{prop:"purchaseAmount",label:"数量"}}),r("el-table-column",{attrs:{prop:"purchaseFee",label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.purchaseFee))]}}])}),r("el-table-column",{attrs:{prop:"createDate",label:"时间"}})],1)],1)},b=[],y={name:"BaseInfo",components:{BizFlexTable:l["c"],BizGrid:m["a"]},props:{itemId:{type:String,default:function(){return""}},beginTime:{type:String,default:function(){return""}},endTime:{type:String,default:function(){return""}}},data:function(){return{loading:!1,tableData:[],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:9}}},created:function(){},computed:{},mounted:function(){},watch:{itemId:function(e,t){e&&this.getList()}},methods:{operate:function(e){this[e]()},clickRelateBill:function(e,t){e.stopPropagation(),this.$emit("openOrderTab",t)},getList:function(){var e=this,t={pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize,shopId:window.top.SHOP_ID||"",productId:this.itemId,beginTime:this.beginTime,endTime:this.endTime};d["a"].get("/admin/invoicing/purchase/storeSalesReport.jhtml",t).then((function(t){e.tableData=t.dataList,e.pagination.total=Number(t.total),e.loading=!1})).catch((function(t){e.loading=!1,t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(t){e.loading=!1}))},handleSizeChange:function(e){this.pagination.pageSize=e,this.getList()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getList()}}},v=y,I=(r("afd6"),r("2877")),C=Object(I["a"])(v,h,b,!1,null,null,null),w=C.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("biz-grid",{staticClass:"sale-item"},[r("biz-flex-table",{ref:"table",attrs:{tableData:e.tableData,loading:e.loading,pagination:e.pagination,checkable:!1},on:{operate:e.operate,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[r("el-table-column",{attrs:{prop:"sn",label:"订单编号"}}),r("el-table-column",{attrs:{prop:"type",label:"状态",formatter:e.getOrderStatus}}),r("el-table-column",{attrs:{prop:"orderItems",label:"商品","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[r("div",{staticStyle:{width:"100%","margin-right":"30px"}},e._l(t.row.orderItems,(function(t){return r("div",{key:t.id,staticClass:"product-info"},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"titleClass",attrs:{title:t.fullName}},[e._v(e._s(t.fullName))])])])})),0)])]}}])}),r("el-table-column",{attrs:{label:"商品价格&数量","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",e._l(t.row.orderItems,(function(t){return r("div",{key:t.id},[e._v(" ￥"+e._s(t.price)+" x"+e._s(t.quantity))])})),0)]}}])}),r("el-table-column",{attrs:{prop:"purchaseFee",label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.amount))]}}])}),r("el-table-column",{attrs:{prop:"orderTime",label:"时间"}})],1)],1)},S=[],T={name:"BaseInfo",components:{BizFlexTable:l["c"],BizGrid:m["a"]},props:{agentId:{type:String,default:function(){return""}},beginTime:{type:String,default:function(){return""}},endTime:{type:String,default:function(){return""}}},data:function(){return{loading:!1,tableData:[],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:9}}},created:function(){},computed:{},mounted:function(){},watch:{agentId:function(e,t){e&&this.getList()}},methods:{operate:function(e){this[e]()},getOrderStatus:function(e){switch(e.type){case"11":return"已确认发货";case"10":return"退款退货完成";case"9":return"退款退货中";case"8":return"已过期";case"7":return"已评价";case"6":return"订单关闭";case"5":return"交易完成";case"4":return"订单已执行";case"3":return"买家已付款";case"2":return"商家已确认";case"1":return"待商家确认";default:return"无"}},getList:function(){var e=this,t={pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize,shopId:window.top.SHOP_ID||"",agentId:this.agentId,beginTime:this.beginTime,endTime:this.endTime};d["a"].get("/admin/invoicing/purchase/agentView/storeSalesReport.jhtml",t).then((function(t){e.tableData=t.dataList,e.pagination.total=Number(t.total),e.loading=!1})).catch((function(t){e.loading=!1,t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(t){e.loading=!1}))},handleSizeChange:function(e){this.pagination.pageSize=e,this.getList()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getList()}}},D=T,O=(r("caed"),Object(I["a"])(D,M,S,!1,null,null,null)),_=O.exports,k=r("11e9"),P=r("b06a"),$=r("5801"),x={name:"PurchaseStatistics",data:function(){return{title:"",itemId:"",agentId:"",loading:!1,visiable:!1,open:!1,isEdit:!0,tabName:"info",openAgent:!1,tabNameAgent:"baseinfo",openOrderSale:!1,orderTabName:"orderSaleInfo",orderSaleId:"",handlerName:"",activeNames:["2"],selections:[],productCategoryId:"",sumPurchaseFee:"",sumReturnFee:"",operations:[{label:"导出",name:"export",type:"",class:"show",auth:["admin:saleStatistic.export"]},{label:"导出",name:"exportAgent",type:"",class:"hidden"},{label:"刷新",name:"refresh",type:""}],filters:[{type:"select",label:"代理商",name:"agency",value:[],filterable:!0,multiple:!0,collapseTags:!0,options:[{value:"",label:"全部"}]},{type:"cascader",label:"商品分类",name:"category",filterable:!1,value:[],options:[]},{type:"daterange",label:"创建日期",name:"publishDate",value:[]},{type:"input",label:"",placeholder:"请输入商品名称",name:"searchValue",value:""}],views:[{actived:!0,class:"iconfont biz-icon-liebiaoshitu",name:"list",title:"商品视图"},{actived:!1,class:"iconfont biz-icon-liebiaoshitu",name:"list1",title:"代理商视图"}],tableData:[],tableDataAgent:[],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:9}}},components:{BizHeader:l["d"],BizPagination:l["f"],BizList:l["e"],BizGrid:m["a"],BizPopupTabs:c["a"],BaseInfo:w,BaseInfoAgent:_,OrderSaleProductInfo:$["a"],OrderSaleInfo:P["a"]},created:function(){this.refresh(),this.queryFilters(),this.queryAgency()},watch:{},computed:{activedView:function(){var e,t=Object(s["a"])(this.views);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.actived)return r.name}}catch(a){t.e(a)}finally{t.f()}return""}},mounted:function(){},methods:Object(i["a"])(Object(i["a"])({},Object(p["c"])(["getUser"])),{},{operate:function(e){this[e]()},openOrderTab:function(e){var t=this;this.openOrderTab="orderSaleInfo",this.orderSaleId=e.orderId,this.open=!1,this.openOrderSale=!0,this.$nextTick((function(){t.$refs.orderSaleInfo.init()})),this.isEdit=!1},queryAgency:function(){var e=this;d["a"].get("/admin/cooperationInfo/cooperationInfos.jhtml",{cooperationType:"1",pageSize:1e3,pageNumber:1}).then((function(t){e.filters[0].options=[{value:"",label:"全部"}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}})))})).catch((function(e){console.log(e),console.log("code错误")}))},refresh:function(){"list"===this.activedView?this.getSaleList():this.getAgentList()},onViewSwitch:function(e){document.querySelectorAll(".biz-header__operation-wrapper")[0].style.display="",document.querySelectorAll(".biz-table-filter")[0].style.display="";var t,r=Object(s["a"])(this.views);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.actived=!1,a.name===e&&(a.actived=!0)}}catch(n){r.e(n)}finally{r.f()}"list"===e?(this.operations[0].class="show",this.operations[1].class="hidden",this.getSaleList()):(this.operations[0].class="hidden",this.operations[1].class="show",this.getAgentList())},queryFilters:function(){var e=this,t={shopId:window.top.SHOP_ID||""};k["a"].queryFilters(t,(function(t){e.categoryDatas=t.categoryDatas,e.setCategoryFilters()}),(function(r){""!==r.errorMessage&&e.$message.error(r.errorMessage),console.log("获取过滤器失败",t)}))},setCategoryFilters:function(){var e=[{value:"",label:"全部"}];this.categoryDatas.forEach((function(t){e.push({value:t.id,label:t.name,children:[{label:"全部",value:""}]})})),this.filters[1].options=e},cascaderChange:function(e){this.productCategoryId=e[e.length-1],e.length>1&&""===this.productCategoryId&&(this.productCategoryId=e[e.length-2]),this.refresh()},activeItemChange:function(e){var t=this,r={shopId:this.getUser().shop.id,parentId:e.toString()};d["a"].get("/admin/shopProduct/productCategorys.jhtml",r).then((function(r){var a;t.setCategoryFilters(),t.filters[1].options.forEach((function(t){t.value===e[0]&&(a=t.children)})),r.dateList.forEach((function(e){a.push({value:e.id,label:e.name})}))})).catch((function(){}))},exportAgent:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],e.selections&&e.selections.length>0&&e.selections.forEach((function(e){r.push(e.agentId)})),a={ids:r,pageable:{pageSize:e.pagination.pageSize,pageNumber:e.pagination.currentPage,searchValue:e.filters[3].value},shopId:window.top.SHOP_ID||"",agentIds:e.filters[0].value,categoryId:e.productCategoryId,beginTime:e.filters[2].value[0]?e.filters[2].value[0]+" 00:00:00":"",endTime:e.filters[2].value[1]?e.filters[2].value[1]+" 23:59:59":""},t.prev=3,t.next=6,g.a.post("/admin/invoicing/purchase/agentView/storeSalesReports/export.jhtml",a,{responseType:"blob"});case 6:return n=t.sent,console.log("response => ",n),o=new Blob([n.data],{type:"application/vnd.ms-excel"}),console.log(decodeURI(n.headers["content-disposition"])),i=decodeURI(n.headers["content-disposition"].split("filename=")[1]),s=document.createElement("a"),s.download=i.match(/"(\S*)"/)[1],s.style.display="none",s.href=URL.createObjectURL(o),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s),t.abrupt("return");case 22:throw t.prev=22,t.t0=t["catch"](3),new Error(t.t0);case 25:case"end":return t.stop()}}),t,null,[[3,22]])})))()},export:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],e.selections&&e.selections.length>0&&e.selections.forEach((function(e){r.push(e.productId)})),a={ids:r,pageSize:e.pagination.pageSize,pageNumber:e.pagination.currentPage,shopId:window.top.SHOP_ID||"",searchValue:e.filters[3].value,agentIds:e.filters[0].value,categoryId:e.productCategoryId,beginTime:e.filters[2].value[0]?e.filters[2].value[0]+" 00:00:00":"",endTime:e.filters[2].value[1]?e.filters[2].value[1]+" 23:59:59":""},t.prev=3,t.next=6,g.a.post("/admin/invoicing/purchase/storeSalesReports/export.jhtml",a,{responseType:"blob"});case 6:return n=t.sent,console.log("response => ",n),o=new Blob([n.data],{type:"application/vnd.ms-excel"}),console.log(decodeURI(n.headers["content-disposition"])),i=decodeURI(n.headers["content-disposition"].split("filename=")[1]),s=document.createElement("a"),s.download=i.match(/"(\S*)"/)[1],s.style.display="none",s.href=URL.createObjectURL(o),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s),t.abrupt("return");case 22:throw t.prev=22,t.t0=t["catch"](3),new Error(t.t0);case 25:case"end":return t.stop()}}),t,null,[[3,22]])})))()},getSaleList:function(){var e=this,t={pageable:{pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage,searchValue:this.filters[3].value},shopId:window.top.SHOP_ID||"",agentIds:this.filters[0].value,categoryId:this.productCategoryId,beginTime:this.filters[2].value[0]?this.filters[2].value[0]+" 00:00:00":"",endTime:this.filters[2].value[1]?this.filters[2].value[1]+" 23:59:59":""};this.loading=!0,d["a"].post("/admin/invoicing/purchase/storeSalesReports.jhtml",t).then((function(t){e.tableData=t.dataList,e.sumPurchaseFee=t.sumPurchaseFee,e.sumReturnFee=t.sumReturnFee,e.pagination.total=Number(t.total),e.loading=!1})).catch((function(t){e.$message.warning(t.errorMessage),console.log("ERR_REFRESH: ",t)})).finally((function(t){e.loading=!1}))},getAgentList:function(){var e=this,t={shopId:window.top.SHOP_ID||"",pageable:{pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage,searchValue:this.filters[3].value},agentIds:this.filters[0].value,categoryId:this.productCategoryId,beginTime:this.filters[2].value[0]?this.filters[2].value[0]+" 00:00:00":"",endTime:this.filters[2].value[1]?this.filters[2].value[1]+" 23:59:59":""};this.loading=!0,d["a"].post("/admin/invoicing/purchase/agentView/storeSalesReports.jhtml",t).then((function(t){e.tableDataAgent=t.dataList,e.sumPurchaseFee=t.sumPurchaseFee,e.sumReturnFee=t.sumReturnFee,e.pagination.total=Number(t.total),e.loading=!1})).catch((function(t){e.$message.warning(t.errorMessage),console.log("ERR_REFRESH: ",t)})).finally((function(t){e.loading=!1}))},queryCategoryList:function(){var e=this,t={shopId:window.top.SHOP_ID||""};d["a"].get(u["g"].commodity.getProductCategoryList,t).then((function(t){e.filters[0].options=[{label:"全部",value:""}].concat(t.ProductCategoryManage.map((function(e){return{label:e.name,value:e.id}})))})).catch((function(t){e.$message.warning(t.errorMessage),console.log("ERR_REFRESH: ",t)})).finally((function(e){}))},handleSelectionChange:function(e){this.selections=e},filterDataChange:function(e){this.filters=e,this.pagination.currentPage=1,this.refresh()},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()},rowClick:function(e,t,r){var a=this;this.itemId=e.productId,this.tabName="info",this.open=!0,this.$nextTick((function(){a.$refs.baseinfo.getList()}))},rowClickAgent:function(e,t,r){this.agentId=e.agentId,this.tabName="info",this.openAgent=!0}})},N=x,L=(r("579b"),Object(I["a"])(N,a,n,!1,null,null,null));t["default"]=L.exports},e42c:function(e,t,r){"use strict";var a=r("2497"),n=r("bc3a"),o=r.n(n),i=r("c596");t["a"]={listOrder:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.list,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},viewOrder:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.order:i["g"].orderMgmt.orderMgmt.order,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},updateOrder:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.order:i["g"].orderMgmt.orderMgmt.order,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},createOrder:function(e,t,r){o.a.post("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.order:i["g"].orderMgmt.orderMgmt.order,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},excuteOrder:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.service:i["g"].orderMgmt.orderMgmt.service,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},closeOrder:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.close:i["g"].orderMgmt.orderMgmt.close,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},confirmOrder:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.confirm:i["g"].orderMgmt.orderMgmt.confirm,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},paymentOrder:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.payment:i["g"].orderMgmt.orderMgmt.payment,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},shippingOrder:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.shipping:i["g"].orderMgmt.orderMgmt.shipping,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},repairMaintainHistory:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.repairMaintainHistory,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},listAdminByRole:function(e,t,r){o.a.post(i["g"].orderMgmt.orderMgmt.listAdminByRole,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},listExistCardTemplate:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.listExistCardTemplate,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},viewProducts:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.viewProducts:i["g"].orderMgmt.orderMgmt.viewProducts,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},viewOrderlogs:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.viewOrderlogs:i["g"].orderMgmt.orderMgmt.viewOrderlogs,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},viewOrderRefunds:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.viewOrderRefunds:i["g"].orderMgmt.orderMgmt.viewOrderRefunds,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryInvoiceDetailByOrderID:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.queryInvoiceDetailByOrderID:i["g"].orderMgmt.orderMgmt.queryInvoiceDetailByOrderID,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},invoiceMail:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.invoiceMail:i["g"].orderMgmt.orderMgmt.invoiceMail,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},invoiceMailUpdate:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.invoiceMail:i["g"].orderMgmt.orderMgmt.invoiceMail,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},invoiceInfoDefault:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.invoiceInfoDefault:i["g"].orderMgmt.orderMgmt.invoiceInfoDefault,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},invoiceByOrder:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.invoiceByOrder:i["g"].orderMgmt.orderMgmt.invoiceByOrder,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},invoiceDetailCreate:function(e,t,r){o.a.post("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.invoice:i["g"].orderMgmt.orderMgmt.invoice,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},invoiceDetailUpdate:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.invoice:i["g"].orderMgmt.orderMgmt.invoice,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},invoiceDetail:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.invoiceDetail:i["g"].orderMgmt.orderMgmt.invoiceDetail,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},addOrderItems:function(e,t,r){o.a.post("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.addOrderItems:i["g"].orderMgmt.orderMgmt.addOrderItems,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},brands:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.brands,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},series:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.series,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},types:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.types,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},getFinancialPlans:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.getFinancialPlans,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},memberList:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.memberList,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},options:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.options,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},rescuers:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.rescuers,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},export:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.export,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},rescueOrderLogs:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.rescueOrderLogs,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},loanTerms:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.loanTerms,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},queryOrderKpi:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.queryOrderKpi,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},refundsAudit:function(e,t,r){o.a.put("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.refundsAudit:i["g"].orderMgmt.orderMgmt.refundsAudit,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},rescuerSetting:function(e,t,r){o.a.put(i["g"].orderMgmt.orderMgmt.rescuerSetting,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},rescuerDispath:function(e,t,r){o.a.put(i["g"].orderMgmt.orderMgmt.rescuerDispath,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},carOptions:function(e,t,r){o.a.put(i["g"].orderMgmt.orderMgmt.carOptions,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},createMember:function(e,t,r){o.a.post(i["g"].orderMgmt.orderMgmt.createMember,e).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},certificate:function(e,t,r){o.a.get("purchaseOrder"===window.top.dType?i["g"].orderMgmt.purchaseOrderMgmt.certificate:i["g"].orderMgmt.orderMgmt.certificate,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))},listProductByTestDrive:function(e,t,r){o.a.get(i["g"].orderMgmt.orderMgmt.listProductByTestDrive,{params:e}).then(Object(a["a"])(t,r)).catch((function(e){console.error(e)}))}}},e725:function(e,t,r){},f3ac:function(e,t,r){e.exports=r.p+"static/img/pic_default_none_100.6603f4ac.png"},f9a5:function(e,t,r){}}]);