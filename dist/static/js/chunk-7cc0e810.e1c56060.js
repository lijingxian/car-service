(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cc0e810"],{"308c":function(e,t,i){"use strict";var a=i("3ba9"),s=i.n(a);s.a},"3ba9":function(e,t,i){},b1d7:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"service-handbook"},[i("biz-flex-table",{attrs:{loading:e.loading,operations:e.operations,tableData:e.tableData,pagination:e.pagination,filters:e.filters},on:{operate:e.operate,"selection-change":e.handleSelectionChange,"row-click":e.rowClick,"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"filter-data-change":e.filterDataChange}},["shop"!==e.getUser().roleLevel?i("template",{slot:"operation"},[i("import-file",{ref:"importFile",staticStyle:{"margin-left":"10px"},attrs:{tableData:e.importResult,importLoading:e.importLoading,total:e.total,disabled:e.disabled,count:e.count,percentage:e.percentage,stepkey:e.stepkey,showProcess:e.showProcess,action:"/admin/baseData/importBooklet.jhtml",name:"uFile"},on:{clearTimeOut:e.clearTimeOut,restProcess:e.restProcess,"handle-import":e.handleImport}},[i("el-table-column",{attrs:{label:"编号",width:"50",prop:"row"}}),i("el-table-column",{attrs:{label:"状态",width:"150",prop:"result"}}),i("el-table-column",{attrs:{label:"信息",prop:"message"}})],1)],1):e._e(),i("el-table-column",{attrs:{label:"品牌",prop:"brand",width:"150px"}}),i("el-table-column",{attrs:{label:"系列",prop:"series",width:"150px"}}),i("el-table-column",{attrs:{label:"车型",prop:"carType"}})],2),i("biz-popup-tabs",{attrs:{open:e.open},on:{close:function(t){e.open=!1}},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[i("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[i("service-handbook-item-sys",{ref:"itemInfo",attrs:{itemId:e.itemId},on:{created:e.refresh}})],1)],1),i("biz-popup-tabs",{attrs:{open:e.openImport},on:{close:function(t){e.openImport=!1}},model:{value:e.tabImport,callback:function(t){e.tabImport=t},expression:"tabImport"}},[i("el-tab-pane",{attrs:{label:"导入保养手册",name:"import"}},[i("service-import",{ref:"item",on:{created:e.importSuccess}})],1)],1)],1)},s=[],n=(i("99af"),i("d81d"),i("b0c0"),i("a9e3"),i("b85c")),o=i("5530"),l=i("ff65"),r=i("7132"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"service-handbook-sys-item"},[i("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operate},slot:"top"}),i("el-form",{ref:"form",attrs:{model:e.formModel,"label-width":"100px",size:"small",rules:e.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"品牌",prop:"brandId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},on:{change:e.handleBrandChange},model:{value:e.formModel.brandId,callback:function(t){e.$set(e.formModel,"brandId",t)},expression:"formModel.brandId"}},e._l(e.brandList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"系列",prop:"seriesId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},on:{change:e.handleSeriesChange},model:{value:e.formModel.seriesId,callback:function(t){e.$set(e.formModel,"seriesId",t)},expression:"formModel.seriesId"}},e._l(e.seriesList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),i("biz-list",{ref:"table",attrs:{height:e.heightList,tableData:e.modeList},on:{handleSelectionChange:e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"50"}}),i("el-table-column",{attrs:{prop:"name",label:"车型"}})],1),i("biz-header",{attrs:{operations:e.operationsList},on:{operate:e.operate}}),e.tableData.length>0?i("biz-list",{ref:"list",attrs:{height:e.height,tableData:e.tableData},on:{handleSelectionChange:e.selectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"50"}}),i("el-table-column",{attrs:{prop:"mileage",label:"保养里程(km)",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[i("el-input-number",{attrs:{placeholder:"",size:"mini","controls-position":"right",min:0},model:{value:t.row.mileage,callback:function(i){e.$set(t.row,"mileage",i)},expression:"scope.row.mileage"}})],1)}}],null,!1,1714030071)}),i("el-table-column",{attrs:{prop:"cost",label:"推荐价格",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[i("el-input-number",{attrs:{placeholder:"",size:"mini","controls-position":"right",min:0},model:{value:t.row.cost,callback:function(i){e.$set(t.row,"cost",i)},expression:"scope.row.cost"}})],1)}}],null,!1,4100546866)}),e._l(e.tableData[0].item,(function(t,a){return e.tableData[0].item?i("el-table-column",{key:a,attrs:{prop:"name",label:t.name,"min-width":"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return i("div",{},[i("div",{staticClass:"biz-customcol"},e._l(a.row.item,(function(a,s){return t.name===a.name?i("div",{key:s},[i("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:a.ischecked,callback:function(t){e.$set(a,"ischecked",t)},expression:"booklets.ischecked"}})],1):e._e()})),0)])}}],null,!0)}):e._e()})),e._l(e.tableData[0].productList,(function(t,a){return e.tableData[0]&&e.tableData[0].productList?i("el-table-column",{key:a,attrs:{prop:"name",label:t.name,"min-width":"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return i("div",{},[i("div",{staticClass:"biz-customcol"},e._l(a.row.productList,(function(a,s){return t.id===a.id?i("div",{key:s},[i("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:a.ischecked,callback:function(t){e.$set(a,"ischecked",t)},expression:"booklets.ischecked"}})],1):e._e()})),0)])}}],null,!0)}):e._e()}))],2):e._e()],1)},d=[],m=(i("4160"),i("caad"),i("c975"),i("a15b"),i("a434"),i("2532"),i("159b"),i("f36f")),h=i("8330"),u=i("04d3"),p=i("2f62"),f={name:"ServiceHandbookItem",props:{itemId:{type:String}},data:function(){return{isCreated:!0,height:"500",heightList:"300",mode:100,loading:!1,serviceList:[],multipleSelection:[],selections:[],brandList:[],seriesList:[],modeList:[],itemList:[],tableData:[],carTypes:[],formModel:{},rules:{brandId:[{required:!0,message:"请选择品牌",trigger:["blur"]}],seriesId:[{required:!0,message:"请选择系列",trigger:["blur"]}]},operations:[{label:"保存",name:"save",type:"primary"}],operationsList:[{label:"添加",name:"add",type:"primary"},{label:"删除",name:"delete",type:"primary"}]}},watch:{itemId:function(e,t){this.itemId&&("shop"===this.getUser().roleLevel?this.query():this.querySys())}},components:{BizGrid:m["a"],BizSaveButton:h["a"],BizList:u["e"],BizHeader:u["d"]},created:function(){this.queryBrandList()},mounted:function(){var e=document.documentElement.clientHeight||window.innerHeight;this.height=String(e-282)},updated:function(){this.itemId&&this.updateSelection()},methods:Object(o["a"])(Object(o["a"])({},Object(p["c"])(["getUser"])),{},{operate:function(e){this[e]()},setDefaultModel:function(){this.tableData=this.getDefaultList(),this.modeList=[],this.formModel={brand:"",brandId:"",id:"",carType:"",carTypeId:[],name:"",series:"",seriesId:"",booklets:this.tableData}},add:function(){this.tableData.unshift({brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:"",series:"",seriesId:"",time:"",item:[{id:"",ischecked:"0",name:"机油"},{id:"",ischecked:"0",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]})},delete:function(){for(var e=0;e<this.selections.length;e++)-1!==this.tableData.indexOf(this.selections[e])&&this.tableData.splice(this.tableData.indexOf(this.selections[e]),1)},selectionChange:function(e){this.selections=e},getDefaultList:function(){return[{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:5e3,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:1e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:2e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:3e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"1",name:"空气滤清"},{id:"",ischecked:"1",name:"空调滤清"},{id:"",ischecked:"1",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"1",name:"燃油滤清"},{id:"",ischecked:"1",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:4e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:5e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:6e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"1",name:"空气滤清"},{id:"",ischecked:"1",name:"空调滤清"},{id:"",ischecked:"1",name:"制动液"},{id:"",ischecked:"1",name:"变速箱油"},{id:"",ischecked:"1",name:"燃油滤清"},{id:"",ischecked:"1",name:"火花塞(整套)"},{id:"",ischecked:"1",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:7e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:8e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:9e4,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"1",name:"空气滤清"},{id:"",ischecked:"1",name:"空调滤清"},{id:"",ischecked:"1",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"1",name:"燃油滤清"},{id:"",ischecked:"1",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]},{brand:"",brandId:"",cost:"",id:"",manufacturer:"",mileage:1e5,series:"",seriesId:"",time:"",item:[{id:"",ischecked:"1",name:"机油"},{id:"",ischecked:"1",name:"机油滤清"},{id:"",ischecked:"0",name:"汽油添加剂"},{id:"",ischecked:"0",name:"空气滤清"},{id:"",ischecked:"0",name:"空调滤清"},{id:"",ischecked:"0",name:"制动液"},{id:"",ischecked:"0",name:"变速箱油"},{id:"",ischecked:"0",name:"燃油滤清"},{id:"",ischecked:"0",name:"火花塞(整套)"},{id:"",ischecked:"0",name:"防冻液"}]}]},isRepeat:function(e){var t={};for(var i in e){if(t[e[i]])return!0;t[e[i]]=!0}return!1},save:function(){var e=this;this.$refs.form.validate((function(t){if(t){e.formModel.carTypeId=[];var i=[];if(e.multipleSelection.map((function(t){e.formModel.carTypeId.push(t.id),i.push(t.name)})),e.formModel.name=e.formModel.brand+" "+e.formModel.series+" "+i.join(" "),0===e.formModel.carTypeId.length)return void e.$message.warning("请选择指定车型");if(0===e.formModel.booklets.length)return void e.$message.warning("请添加保养手册");var a=[];if(e.tableData.map((function(e){a.push(e.mileage)})),e.isRepeat(a))return void e.$message.warning("存在重复的里程");e.itemId?e.sysUpdate():e.sysCreate()}}))},shopUpdate:function(){var e=this;this.loading=!0,l["a"].updateServiceHandbook(this.formModel,(function(t){e.$message.success("保存成功"),e.loading=!1,e.$emit("created")}),(function(t){console.log(t),e.loading=!1,e.$message.error(t.errorMessage),console.log("code错误")}))},sysCreate:function(){var e=this;this.loading=!0,l["a"].maintainBookletCreate(this.formModel,(function(t){e.$message.success("保存成功"),e.loading=!1,e.$emit("created")}),(function(t){console.log(t),e.loading=!1,e.$message.error(t.errorMessage),console.log("code错误")}))},sysUpdate:function(){var e=this;this.loading=!0,l["a"].maintainBookletUpdate(this.formModel,(function(t){e.$message.success("保存成功"),e.loading=!1,e.$emit("created")}),(function(t){console.log(t),e.loading=!1,e.$message.error(t.errorMessage),console.log("code错误")}))},queryBrandList:function(){var e=this;l["a"].baseData({type:"0"},(function(t){e.brandList=t.dataList}),(function(e){console.log(e),console.log("code错误")}))},querySeriesList:function(e){var t=this;l["a"].baseData({type:"1",brandId:e},(function(e){t.seriesList=e.dataList}),(function(e){console.log(e),console.log("code错误")}))},queryTypeList:function(e){var t=this;l["a"].baseData({type:"2",brandId:this.formModel.brandId,seriesId:e},(function(e){t.modeList=e.dataList}),(function(e){console.log(e),console.log("code错误")}))},updateSelection:function(){var e=this;this.modeList.forEach((function(t){e.carTypes.includes(parseInt(t.id))?e.$refs.table.toggleRowSelection(t,!0):e.$refs.table.toggleRowSelection(t,!1)}))},query:function(){var e=this;this.loading=!0,l["a"].getServiceHandbook({id:this.itemId},(function(t){e.loading=!1,e.formModel=t.result,e.tableData=t.result.booklets}),(function(t){console.log(t),e.loading=!1,console.log("code错误")}))},querySys:function(){var e=this;this.loading=!0,l["a"].maintainBookletQuery({id:this.itemId},(function(t){e.formModel=t.result,e.formModel.brandId=String(t.result.brandId),e.formModel.seriesId=String(t.result.seriesId),e.carTypes=t.result.carTypeId,e.loading=!1,e.tableData=t.result.booklets,t.result.seriesId&&(e.querySeriesList(t.result.brandId),e.queryTypeList(t.result.seriesId))}),(function(t){console.log(t),e.loading=!1,console.log("code错误")}))},handleBrandChange:function(e){var t=this;this.$refs.form.clearValidate("brandId"),this.querySeriesList(e),this.brandList.map((function(i){i.id===e&&(t.formModel.brand=i.name)})),this.$set(this.formModel,"seriesId","")},handleSeriesChange:function(e){var t=this;this.$refs.form.clearValidate("seriesId"),this.modeList=[],this.seriesList.map((function(i){i.id===e&&(t.formModel.series=i.name)})),this.queryTypeList(e)},handleSelectionChange:function(e){this.multipleSelection=e}})},b=f,g=(i("308c"),i("2877")),k=Object(g["a"])(b,c,d,!1,null,null,null),v=k.exports,I=i("84a1"),y=i("ccf0"),S=i("c596"),L={name:"ServiceHandbook",data:function(){return{total:0,count:0,percentage:0,stepkey:"",loading:!1,disabled:!1,importLoading:!1,showProcess:!1,isShop:!0,urls:S["g"],importResult:[],tableData:[],itemId:"",t:"",type:"",tabName:"first",tabImport:"import",tags:[],open:!1,openImport:!1,dialogVisible:!1,multipleSelection:[],brandId:"",seriesId:"",modeList:"",serviceList:[],serviceHandbookList:[],operations:[{disabled:!1,label:"添加",name:"add",type:"primary"},{disabled:!0,label:"删除",name:"delete",type:""}],filters:[{type:"select",label:"品牌",name:"brand",value:"",options:[]},{type:"select",label:"系列",name:"series",value:"",options:[]},{type:"select",label:"车型",name:"carType",value:"",options:[]}],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},components:{BizPopupTabs:r["a"],ServiceHandbookItemSys:v,BizFlexTable:u["c"],ImportFile:y["b"],ServiceImport:I["a"]},created:function(){this.handleImport(),"shop"===this.getUser().roleLevel&&"平台导入"!==this.operations[0].label?(this.isShop=!0,this.getServiceHandbookList(),this.baseShopData("0"),this.operations.unshift({label:"平台导入",name:"sysImport",type:"primary"})):(this.isShop=!1,this.listMaintainBooklet(),this.baseData("0"))},beforeDestroy:function(){this.t&&window.clearTimeout(this.t)},watch:{$route:function(e,t){this.refresh(),this.handleImport()},filters:{handler:function(e,t){for(var i=0;i<e.length;i++)t[i].value!==e[i].value&&console.log(e)},deep:!0}},methods:Object(o["a"])(Object(o["a"])({},Object(p["c"])(["getUser"])),{},{operate:function(e){this[e]()},add:function(){this.itemId="",this.open=!0,this.$refs.itemInfo.setDefaultModel()},importSuccess:function(){"shop"===this.getUser().roleLevel?this.baseShopData("0"):this.baseData("0"),this.refresh()},baseData:function(e,t,i){var a=this;l["a"].bookletbaseData({type:e,brandId:t,seriesId:i},(function(t){"0"===e&&(a.filters[0].options=[{label:"全部",value:""}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}}))),a.filters[1].value="",a.filters[2].value=""),"1"===e&&(a.filters[1].options=[{label:"全部",value:""}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}})))),"2"===e&&(a.filters[2].options=[{label:"全部",value:""}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}}))))}),(function(e){console.log(e),console.log("code错误")}))},baseShopData:function(e,t,i){var a=this;l["a"].bookletShopData({type:e,brandId:t,seriesId:i},(function(t){"0"===e&&(a.filters[0].options=[{label:"全部",value:""}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}}))),a.filters[1].value="",a.filters[2].value=""),"1"===e&&(a.filters[1].options=[{label:"全部",value:""}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}})))),"2"===e&&(a.filters[2].options=[{label:"全部",value:""}].concat(t.dataList.map((function(e){return{label:e.name,value:e.id}}))))}),(function(e){console.log(e),console.log("code错误")}))},queryBrandList:function(){var e=this;l["a"].queryBrandList({},(function(t){e.filters[0].options=t.dataList.map((function(e){return{label:e.name,value:e.id}}))}),(function(e){console.log(e),console.log("code错误")}))},querySeriesList:function(e){var t=this;l["a"].querySeriesList({brandId:e},(function(e){t.filters[1].options=e.dataList.map((function(e){return{label:e.name,value:e.id}}))}),(function(e){console.log(e),console.log("code错误")}))},queryModeList:function(e){var t=this;l["a"].listCarType({seriesId:e,brandId:this.filters[0].value},(function(e){t.filters[2].options=e.dataList.map((function(e){return{label:e.name,value:e.id}}))}),(function(e){console.log(e),console.log("code错误")}))},sysImport:function(){this.openImport=!0},delete:function(){if(0===this.multipleSelection.length)return this.$message.warning("请选择一条数据"),!1;"shop"===this.getUser().roleLevel?this.deleteOperate():this.deleteSys()},deleteSys:function(){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t,i=[],a=Object(n["a"])(e.multipleSelection);try{for(a.s();!(t=a.n()).done;){var s=t.value;i.push(s.id)}}catch(r){a.e(r)}finally{a.f()}var o={ids:i};e.loading=!0,l["a"].maintainBookletDelete(o,(function(t){e.$message({type:"success",message:"删除成功!"}),e.loading=!1,e.refresh()}),(function(t){console.log(t),e.loading=!1}))})).catch((function(){}))},deleteOperate:function(){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t,i=[],a=Object(n["a"])(e.multipleSelection);try{for(a.s();!(t=a.n()).done;){var s=t.value;i.push(s.id)}}catch(r){a.e(r)}finally{a.f()}var o={ids:i};e.loading=!0,l["a"].deleteServiceHandbook(o,(function(t){e.$message({type:"success",message:"删除成功!"}),e.loading=!1,e.refresh()}),(function(t){console.log(t),e.loading=!1}))})).catch((function(){}))},refresh:function(){this.open=!1,this.itemId="","shop"===this.getUser().roleLevel?this.getServiceHandbookList():this.listMaintainBooklet()},clearTimeOut:function(){window.clearTimeout(this.t)},restProcess:function(){this.total=0,this.count=0,this.stepkey="",this.percentage=0},handleImport:function(){var e=this;l["a"].queryImportBaseProgress({},(function(t){t.data.total||(e.total=0,e.count=0,e.stepkey="",e.percentage=0),t.data.total&&(e.total=Number(t.data.total||0),e.count=Number(t.data.count||0),e.stepkey=t.data.remark,e.percentage=Number(t.data.rate),e.$refs.importFile.title=t.data.title),t.data&&t.data.rate&&"100"===t.data.rate?(e.clearTimeOut(),e.$refs.importFile.showCurrentInfo=!1,e.$refs.importFile.title="导入完成",e.disabled=!1):t.data&&t.data.rate&&"100"!==t.data.rate?(e.t&&e.clearTimeOut(),e.t=setTimeout(e.handleImport,2e3),e.$refs.importFile.uploadingVisible=!0,e.$refs.importFile.showCurrentInfo=!0,e.disabled=!0):e.$refs.importFile.uploadingVisible=!1}),(function(t){console.log(t),console.log("code错误"),e.$refs.importFile.uploadingVisible=!1}))},listMaintainBooklet:function(){var e=this,t={shopId:window.top.SHOP_ID||"",brand:this.filters[0].value,series:this.filters[1].value,carType:this.filters[2].value,pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};this.loading=!0,l["a"].listMaintainBooklet(t,(function(t){e.tableData=t.dataList,e.pagination.total=Number(t.total),e.loading=!1}),(function(t){console.log(t),e.loading=!1}))},getServiceHandbookList:function(){var e=this,t={shopId:window.top.SHOP_ID||"",brand:this.filters[0].value,series:this.filters[1].value,carType:this.filters[2].value,pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};this.loading=!0,l["a"].getServiceHandbookList(t,(function(t){e.tableData=t.dataList,e.pagination.total=Number(t.total),e.loading=!1}),(function(t){console.log(t),e.loading=!1}))},handleSelectionChange:function(e){"shop"===this.getUser().roleLevel?(this.operations[2].disabled=!0,e.length>0&&(this.operations[2].disabled=!1)):(this.operations[1].disabled=!0,e.length>0&&(this.operations[1].disabled=!1)),this.multipleSelection=e},filterDataChange:function(e){e[0].value&&("shop"===this.getUser().roleLevel?this.baseShopData("1",this.filters[0].value):this.baseData("1",this.filters[0].value)),e[1].value&&("shop"===this.getUser().roleLevel?this.baseShopData("2",this.filters[0].value,this.filters[1].value):this.baseData("2",this.filters[0].value,this.filters[1].value)),this.refresh()},rowClick:function(e){this.open=!0,this.itemId=String(e.id)},handleSizeChange:function(e){this.pagination.pageSize=e,this.refresh()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.refresh()}})},w=L,D=(i("ec3e"),Object(g["a"])(w,a,s,!1,null,null,null));t["default"]=D.exports},dc88:function(e,t,i){},ec3e:function(e,t,i){"use strict";var a=i("dc88"),s=i.n(a);s.a}}]);