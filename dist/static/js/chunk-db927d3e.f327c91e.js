(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db927d3e"],{"0d09":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"sale-report"},[e("div",{staticClass:"top"},[e("div",{staticClass:"block"},[e("div",{staticClass:"demonstration"},[t._v("月份")]),e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"month",placeholder:"选择月",size:"mini","picker-options":t.pickerOptions},on:{change:t.dateChange},model:{value:t.endDate,callback:function(a){t.endDate=a},expression:"endDate"}}),e("div",{staticClass:"demonstration"},[t._v("店铺")]),e("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:t.shopChange},model:{value:t.checkedShops,callback:function(a){t.checkedShops=a},expression:"checkedShops"}},t._l(t.shopsList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("div",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.printView}},[t._v("打印")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.save}},[t._v("导出")])],1)]),e("div",{ref:"imageWrapper"},[e("div",{staticClass:"title-header"},[e("span",[t._v(t._s(t.shopName))]),e("span",[t._v("销售月报")]),e("span",[t._v("|")]),e("span",[t._v(t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"1-"+t._s(t.lastDate)+"日")])]),e("div",{staticClass:"content"},[t._m(0),e("div",{staticClass:"des"},[e("p",[t._v(" "+t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"， 新增新车销售台次共"+t._s(t.indicators.orderProductNumInc)+"台，同比增加"+t._s(t.indicators.orderProductNumIncYoy)+"%，环比增加"+t._s(t.indicators.orderProductNumIncMon)+"%； 人均销售台次"+t._s(t.indicators.orderProductAvgNumInc)+"台，同比增加"+t._s(t.indicators.orderProductAvgNumIncYoy)+"%，环比增加"+t._s(t.indicators.orderProductAvgNumIncMon)+"%； 新增销售收入"+t._s(t.indicators.orderAmountPaidInc)+"万元，同比增加"+t._s(t.indicators.orderAmountPaidIncYoy)+"%，环比增加"+t._s(t.indicators.orderAmountPaidIncMon)+"%； 人均销售收入"+t._s(t.indicators.orderAvgAmountPaidInc)+"万元，同比增加"+t._s(t.indicators.orderAvgAmountPaidIncYoy)+"%，环比增加"+t._s(t.indicators.orderAvgAmountPaidIncMon)+"%。 ")]),e("p",[t._v(" 精品收入"+t._s(t.indicators.productOrderAmountPaidInc)+"万元，同比增加"+t._s(t.indicators.productOrderAmountPaidIncYoy)+"%，环比增加"+t._s(t.indicators.productOrderAmountPaidIncMon)+"%； 金融收入"+t._s(t.indicators.financeOrderAmountPaidInc)+"万元，同比增加"+t._s(t.indicators.financeOrderAmountPaidIncYoy)+"%，环比增加"+t._s(t.indicators.financeOrderAmountPaidIncMon)+"%； 保险收入"+t._s(t.indicators.insuranceOrderAmountPaidInc)+"万元，同比增加"+t._s(t.indicators.insuranceOrderAmountPaidIncYoy)+"%，环比增加"+t._s(t.indicators.insuranceOrderAmountPaidIncMon)+"%。 ")])]),e("div",{staticClass:"chart-area"},[e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartData,loading:t.loading,showSearch:!1}}),e("div",{staticClass:"des",attrs:{align:"center"}},[t._v("销售台次变化趋势图")])],1),e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartDataOfAppreciation,loading:t.loading,showSearch:!1}}),e("div",{staticClass:"des",attrs:{align:"center"}},[t._v("精品及金融衍生收入趋势图")])],1)])]),e("div",{staticClass:"content"},[t._m(1),e("div",{staticClass:"des"},[e("p",[t._v(" "+t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"销售台次排行前五的车型是"+t._s(t.topCarX.join("、"))+"，分别是"+t._s(t.topCarY.join("台、"))+"台；销售收入排行前五的车型是"+t._s(t.topCarAmountX.join("、"))+"，分别是"+t._s(t.topCarAmountY.join("万元、"))+"万元。 ")]),e("p",[t._v(" "+t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"销售台次排行前五的销售顾问是"+t._s(t.topConsultantX.join("、"))+"，分别是"+t._s(t.topConsultantY.join("台、"))+"台；销售收入排行前五的销售顾问是"+t._s(t.topConsultantAmountX.join("、"))+"，分别是"+t._s(t.topConsultantAmountY.join("万元、"))+"万元。 ")]),e("p",[t._v(" "+t._s(t.endDate.split("-")[0]+"年"+t.endDate.split("-")[1]+"月")+"销售客户满意度评分，其中服务态度"+t._s(t.indicators.serviceAttitude)+"分，服务速度"+t._s(t.indicators.serviceSpeed)+"分，专业技能"+t._s(t.indicators.professional)+"分。 ")])]),e("div",{staticClass:"chart-area"},[e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartDataOfCarType,loading:t.loading,showSearch:!1}})],1),e("div",{staticClass:"graph"},[e("biz-chart",{attrs:{chartData:t.chartDataOfConsultant,loading:t.loading,showSearch:!1}})],1)])]),e("div",{staticClass:"content"},[t._m(2),e("div",{staticClass:"des"},[t._l(t.indicators.advise,(function(a,i){return e("p",{directives:[{name:"show",rawName:"v-show",value:t.indicators.advise&&t.indicators.advise.length>0,expression:"indicators.advise && indicators.advise.length > 0"}],key:i},[t._v(" "+t._s(a.join(","))+" ")])})),e("p",{directives:[{name:"show",rawName:"v-show",value:!t.indicators.advise||0===t.indicators.advise.length,expression:"!indicators.advise || indicators.advise.length === 0"}]},[t._v(" 您的店铺当月经营良好，暂无明显需要改善的地方。 ")])],2)])]),e("el-dialog",{attrs:{visible:t.dialogTableVisible,center:"",width:"1200px","append-to-body":""},on:{"update:visible":function(a){t.dialogTableVisible=a}}},[e("div",{attrs:{align:"right"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.print}},[t._v("打印")])],1),e("vue-easy-print",{ref:"easyPrint",attrs:{tableShow:""}},[e("img",{attrs:{src:t.url,width:"100%"}})])],1)],1)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title-header"},[e("span",[t._v("一、销售台次与产值情况")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title-header"},[e("span",[t._v("二、分车型/顾问销售情况")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"title-header"},[e("span",[t._v("三、结论建议")])])}],s=(e("d81d"),e("b0c0"),e("d3b7"),e("ac1f"),e("1276"),e("5530")),o=e("562e"),r=e("2f62"),c=e("fedf"),d=e("1ab1"),h=e("c466"),p=e("ce0c"),u=e("225d"),l=e("c0e9"),m=e.n(l),g=e("e511"),v=e.n(g),f={name:"CustomerServiceNav",data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},companyCount:0,storeCount:0,unionCount:0,beginDate:p["a"].getMonthStartDate(),endDate:h["a"].nowDate(),addOperator:"",addStore:"",storeList:"",url:"",isIndeterminateShops:!0,dialogTableVisible:!1,loading:!1,checkAllShops:!0,checkedShops:this.getUser().shop.id,shopsList:[],chartData:{},chartDataOfAppreciation:{},chartDataOfCarType:{},chartDataOfConsultant:{},topCarX:[],topCarY:[],topCarAmountX:[],topCarAmountY:[],topConsultantX:[],topConsultantY:[],topConsultantAmountX:[],topConsultantAmountY:[],indicators:{advise:[]},imgUrl:"",kpiName:["本期","同比","环比"]}},computed:{shopName:function(){var t=this,a=this.getUser().shop.name;return this.shopsList.map((function(e){t.checkedShops===e.id&&(a=e.name)})),a},lastDate:function(){return h["a"].getMonthDays(this.endDate)}},components:{BizChart:o["a"],vueEasyPrint:u["a"]},created:function(){this.getShopList()},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(r["c"])(["getUser"])),Object(r["d"])("Menu",["updateRoutes"])),Object(r["c"])("Authority",["currentAuth"])),{},{print:function(){this.$refs.easyPrint.print()},dateChange:function(){this.beginDate=this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-01",this.query()},init:function(){var t=this,a={viewType:"month",beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};d["a"].post("/admin/ecommerce/kpi/sales/summary/report.jhtml",a).then((function(a){t.indicators=a.indicators})).catch((function(a){a.errorMessage&&t.$message.warning(a.errorMessage)}))},printView:function(){var t=this,a=this;window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,setTimeout((function(){m()(t.$refs.imageWrapper).then((function(t){a.url=t.toDataURL(),a.dialogTableVisible=!0}))}),500)},save:function(){var t=this,a=this;window.pageYOffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0,setTimeout((function(){m()(t.$refs.imageWrapper).then((function(t){var e=t.width,i=t.height,n=e/592.28*841.89,s=i,o=0,r=595.28,c=592.28/e*i,d=t.toDataURL("image/jpeg",1),h=new v.a("","pt","a4");if(s<n)h.addImage(d,"JPEG",0,0,r,c);else while(s>0)h.addImage(d,"JPEG",0,o,r,c),s-=n,o-=841.89,s>0&&h.addPage();h.save("销售月报.pdf"),a.loading=!1}))}),500)},link:function(t){this.updateRoutes({routes:c["a"]["".concat(t.split("/")[1])]}),this.$router.push(t)},query:function(){this.getGraphData(),this.getGraphAppreciationData(),this.getGraphCarTypeData(),this.getGraphGeneralData(),this.getGraphCarTypeAmountData(),this.getGraphGeneralAmountData(),this.init()},shopChange:function(t){this.query()},getShopList:function(){var t=this,a={sourceType:"5"};d["a"].get("/admin/member/json/findEShops.jhtml",a).then((function(a){t.shopsList=a.shops,t.query()})).catch((function(a){a.errorMessage&&t.$message.warning(a.errorMessage)}))},getGraphGeneralData:function(){var t=this;this.loading=!0;var a={viewType:"month",indicators:["consultantOrderProductNum"],orderTypes:["car"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};d["a"].post("/admin/ecommerce/kpi/sales/graph/rank.jhtml",a).then((function(a){t.chartDataOfConsultant=t.dataConsultantFormat(a),t.topConsultantX=[],a.indicators.map((function(a,e){e<5&&t.topConsultantX.push(a.xValue)})),t.topConsultantY=[],a.indicators.map((function(a,e){e<5&&t.topConsultantY.push(a.yValue)}))})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},getGraphGeneralAmountData:function(){var t=this;this.loading=!0;var a={viewType:"month",indicators:["consultantOrderAmountPaid"],orderTypes:["car"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};d["a"].post("/admin/ecommerce/kpi/sales/graph/rank.jhtml",a).then((function(a){t.topConsultantAmountX=[],a.indicators.map((function(a,e){e<5&&t.topConsultantAmountX.push(a.xValue)})),t.topConsultantAmountY=[],a.indicators.map((function(a,e){e<5&&t.topConsultantAmountY.push(a.yValue)}))})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},dataConsultantFormat:function(t){for(var a=[],e=0;e<t.indicators.length;e++)a.push({"顾问":t.indicators[e].xValue,"台":t.indicators[e].yValue});var i={legendVisible:!1,type:"histogram",data:{columns:["顾问","台"],rows:a},settings:{}};return i},getGraphCarTypeData:function(){var t=this;this.loading=!0;var a={viewType:"month",indicators:["carTypeOrderProductNum"],orderTypes:["car"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};d["a"].post("/admin/ecommerce/kpi/sales/graph/rank.jhtml",a).then((function(a){t.chartDataOfCarType=t.dataCarTypeFormat(a),t.topCarX=[],a.indicators.map((function(a,e){e<5&&t.topCarX.push(a.xValue)})),t.topCarY=[],a.indicators.map((function(a,e){e<5&&t.topCarY.push(a.yValue)}))})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},getGraphCarTypeAmountData:function(){var t=this;this.loading=!0;var a={viewType:"month",indicators:["carTypeOrderAmountPaid"],orderTypes:["car"],beginDate:this.beginDate,endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};d["a"].post("/admin/ecommerce/kpi/sales/graph/rank.jhtml",a).then((function(a){t.topCarAmountX=[],a.indicators.map((function(a,e){e<5&&t.topCarAmountX.push(a.xValue)})),t.topCarAmountY=[],a.indicators.map((function(a,e){e<5&&t.topCarAmountY.push(a.yValue)}))})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},dataCarTypeFormat:function(t){for(var a=[],e=0;e<t.indicators.length;e++)a.push({"车型":t.indicators[e].xValue,"辆":t.indicators[e].yValue});var i={legendVisible:!1,type:"histogram",data:{columns:["车型","辆"],rows:a},settings:{}};return i},getGraphData:function(){var t=this;this.loading=!0;var a={viewType:"month",indicators:["orderProductNum"],orderTypes:["car"],beginDate:h["a"].halfYearAgo(this.endDate),endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),shopIds:[this.checkedShops]};d["a"].post("/admin/ecommerce/kpi/sales/graph/userOrder.jhtml",a).then((function(a){t.chartData=t.dataFormat(a)})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},dataFormat:function(t){for(var a=[],e=0;e<t.indicators.length;e++)a.push({"日期":t.indicators[e].xValue,"本期":t.indicators[e].yValue,"同比":t.indicators[e].yoyRate,"环比":t.indicators[e].momRate});var i={type:"histogram",data:{columns:["日期",this.kpiName[0],this.kpiName[1],this.kpiName[2]],rows:a},settings:{axisSite:{right:["同比","环比"]},yAxisType:["KMB","KMB"],yAxisName:["","%"],showLine:[this.kpiName[1],this.kpiName[2]]}};return i},getGraphAppreciationData:function(){var t=this;this.loading=!0;var a={viewType:"month",beginDate:h["a"].halfYearAgo(this.endDate),endDate:this.endDate.split("-")[0]+"-"+this.endDate.split("-")[1]+"-"+h["a"].getMonthDays(this.endDate),indicators:["orderAmountPaid"],orderTypes:["product"],shopIds:[this.checkedShops]};d["a"].post("/admin/ecommerce/kpi/sales/graph/userOrder.jhtml",a).then((function(a){t.chartDataOfAppreciation=t.dataAppreciationFormat(a)})).catch((function(a){t.loading=!1,a.errorMessage&&t.$message.warning(a.errorMessage)})).finally((function(a){t.loading=!1}))},dataAppreciationFormat:function(t){for(var a=[],e=0;e<t.indicators.length;e++)a.push({"日期":t.indicators[e].xValue,"本期":t.indicators[e].yValue,"同比":t.indicators[e].yoyRate,"环比":t.indicators[e].momRate});var i={type:"histogram",data:{columns:["日期",this.kpiName[0],this.kpiName[1],this.kpiName[2]],rows:a},settings:{axisSite:{right:["同比","环比"]},yAxisType:["KMB","KMB"],yAxisName:["","%"],showLine:[this.kpiName[1],this.kpiName[2]]}};return i}}),mounted:function(){}},D=f,y=(e("4a39"),e("2877")),C=Object(y["a"])(D,i,n,!1,null,null,null);a["default"]=C.exports},"4a39":function(t,a,e){"use strict";var i=e("5805"),n=e.n(i);n.a},5805:function(t,a,e){}}]);