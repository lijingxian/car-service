(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18d16d30"],{"0943":function(t,e,a){"use strict";var o=a("1fac"),i=a.n(o);i.a},1148:function(t,e,a){"use strict";var o=a("a691"),i=a("1d80");t.exports="".repeat||function(t){var e=String(i(this)),a="",n=o(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(a+=e);return a}},"11e9":function(t,e,a){"use strict";var o=a("2497"),i=a("bc3a"),n=a.n(i),r=a("c596");e["a"]={getCommodityList:function(t,e,a){n.a.get(r["g"].commodity.getCommodityList,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},delete:function(t,e,a){n.a.delete(r["g"].commodity.delete,{data:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},query:function(t,e,a){n.a.get(r["g"].commodity.query,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},soldoutAndPutaway:function(t,e,a){n.a.post(r["g"].commodity.soldoutAndPutaway,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},cloneProduct:function(t,e,a){n.a.post(r["g"].commodity.cloneProduct,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},queryPlatformCategoryTree:function(t,e,a){n.a.get(r["g"].commodity.queryPlatformCategoryTree,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},queryPlatformImportInfo:function(t,e,a){n.a.get(r["g"].commodity.queryPlatformImportInfo,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},importPlatformProduct:function(t,e,a){n.a.post(r["g"].commodity.importPlatformProduct,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},audit:function(t,e,a){n.a.post(r["g"].commodity.audit,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},auditTarget:function(t,e,a){n.a.post(r["g"].commodity.auditTarget,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},recallProduct:function(t,e,a){n.a.get(r["g"].commodity.recallProduct,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},queryFilters:function(t,e,a){n.a.get(r["g"].commodity.queryFilters,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))}}},1551:function(t,e,a){"use strict";var o=a("2497"),i=a("bc3a"),n=a.n(i),r=a("c596");e["a"]={getAttributeGroups:function(t,e,a){n.a.get(r["g"].commodity.getAttributeGroups,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},updateAttributeGroups:function(t,e,a){n.a.put(r["g"].commodity.updateAttributeGroups,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))}}},"15d9":function(t,e,a){"use strict";var o=a("6b8f"),i=a.n(o);i.a},"17ab":function(t,e,a){"use strict";var o=a("90d9"),i=a.n(o);i.a},"1fac":function(t,e,a){},2497:function(t,e,a){"use strict";var o=a("4360"),i=a("a18c");e["a"]=function(t,e){return function(a){var n=a.data;"100"===n.resultCode?t(n):"709"===n.resultCode?(o["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",o["a"].getters.currentUser),i["a"].push("/login")):e(n)}}},"30de":function(t,e,a){"use strict";var o=a("fcd3"),i=a.n(o);i.a},3230:function(t,e,a){"use strict";var o=a("bd3e"),i=a.n(o);i.a},"392e":function(t,e,a){"use strict";var o=a("2497"),i=a("bc3a"),n=a.n(i),r=a("c596");e["a"]={queryProductBasicInfo:function(t,e,a){n.a.get(r["g"].commodity.queryProductBasicInfo,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},updateProductBasicInfo:function(t,e,a){n.a.put(r["g"].commodity.updateProductBasicInfo,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},creatProductBasicInfo:function(t,e,a){n.a.post(r["g"].commodity.creatProductBasicInfo,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},creatBenefitsBasicInfo:function(t,e,a){n.a.post("/admin/shopProduct/benefitsProduct/basicInfo.jhtml",t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},queryProductDetail:function(t,e,a){n.a.get(r["g"].commodity.queryProductDetail,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},updateProductDetail:function(t,e,a){n.a.put(r["g"].commodity.queryProductDetail,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},queryProductDetail_pm:function(t,e,a){n.a.get(r["g"].commodity.queryProductDetail_pm,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},updateProductDetail_pm:function(t,e,a){n.a.put(r["g"].commodity.updateProductDetail_pm,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))}}},"408a":function(t,e,a){var o=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=o(t))throw TypeError("Incorrect invocation");return+t}},"44e0":function(t,e,a){"use strict";var o=a("2497"),i=a("bc3a"),n=a.n(i),r=a("c596");e["a"]={getParameterGroups:function(t,e,a){n.a.get(r["g"].commodity.getParameterGroups,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},updateParameterGroups:function(t,e,a){n.a.put(r["g"].commodity.updateParameterGroups,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))}}},"498a":function(t,e,a){"use strict";var o=a("23e7"),i=a("58a8").trim,n=a("c8d2");o({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"501c":function(t,e,a){},"58cb":function(t,e,a){},"5b8e":function(t,e,a){"use strict";var o=a("9678"),i=a.n(o);i.a},"697f":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"biz-dialog-selector",attrs:{title:t.title,visible:t.dialogVisible,"append-to-body":t.appendToBody},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close,open:t.open}},[t._t("top"),a("biz-flex-table",{ref:"table",attrs:{showTable:t.showTable,operations:t.operations,filters:t.filters,tags:t.tags,rowKeys:t.rowKeys,pagination:t.pagination,tableData:t.tableData,rowClassName:t.rowClassName,loading:t.loading,memberIds:t.memberIds,checkable:t.checkable,isDepotOutNew:t.isDepotOutNew,checkedTable:t.checkedTable},on:{operate:t.operate,"row-click":t.rowClick,"filter-data-change":t.filterDataChange,"select-all":t.handleSelectAll,select:t.handleSelectionChange,"size-change":t.pageSizeChange,"current-change":t.currentPageChange,"cascader-change":t.cascaderChange,"active-item-change":t.activeItemChange,"sort-change":t.handleSortChange}},[t._t("default")],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isClear?a("el-button",{attrs:{size:"small"},on:{click:t.clear}},[t._v("清除")]):t._e(),a("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.confirmed}},[t._v("确定")])],1)],2)},i=[],n=(a("99af"),a("4160"),a("c975"),a("a434"),a("a9e3"),a("159b"),a("04d3")),r={name:"BizDialogSelector",components:{BizFlexTable:n["c"]},props:{selectionMode:{type:String,default:function(){return"multi"}},max:{type:Number,default:0},title:{require:!0,type:String,default:function(){return" "}},visibility:{require:!0,type:Boolean},appendToBody:{default:!0,type:Boolean},keyField:{type:String,default:function(){return"id"}},isClear:{default:!0,type:Boolean},rowClassName:{type:Function,default:function(){return null}},selectionKeys:{type:Array,default:function(){return[]}},memberIds:{type:Array,default:function(){return[]}},operations:{type:Array,default:function(){return[]}},filters:{type:Array,default:function(){return[]}},tags:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0}}},isDepotOut:{type:Boolean,default:function(){return!1}},checkTable:{type:Array,default:function(){return[]}},showTable:{type:Boolean,default:function(){return!0}}},data:function(){return{dialogVisible:!1,innerSelectionKeys:[],isDepotOutNew:!1,checkedTable:[],innerSelection:[]}},methods:{rowKeys:function(t){return t.id},generateSelectionKeys:function(t,e){if(t.indexOf(e)>=0)this.innerSelectionKeys.push(e[this.keyField]),this.innerSelection.push(e);else{var a=this.innerSelectionKeys.indexOf(e[this.keyField]);this.innerSelectionKeys.splice(a,1),this.innerSelection.splice(a,1)}},open:function(t){this.innerSelectionKeys=this.selectionKeys.concat(),this.$emit("open",!1)},close:function(t){this.innerSelectionKeys=[],this.innerSelection=[],this.$emit("update:visibility",!1),this.$emit("close",!1)},confirmed:function(){if(this.innerSelectionKeys.length>0||!this.showTable){if(!this.showTable&&!/(http|https):\/\/([\w.]+\/?)\S*/.test(this.filters[2].value))return void this.$message.warning("必须以http,https开头,且需符合URL规范,检查格式是否正确");this.$emit("confirmed",this.innerSelectionKeys,this.innerSelection),this.dialogVisible=!1}else this.$message("请选择一项")},clear:function(){var t=this;this.tableData.forEach((function(e){t.$refs.table.toggleRowSelection(e,!1)})),this.innerSelectionKeys=[],this.innerSelection=[]},updateSelection:function(){var t=this;this.$refs&&this.$refs.table&&this.tableData.forEach((function(e){t.innerSelectionKeys.indexOf(e[t.keyField])>=0?(t.$refs.table.toggleRowSelection(e,!0),"single"===t.selectionMode&&(t.$refs.table.$refs.table.setCurrentRow(e),t.innerSelection=[e])):t.$refs.table.toggleRowSelection(e,!1)}))},operate:function(t){this.$emit("operate",t)},filterDataChange:function(t){this.$emit("filterDataChange",t)},handleSelectAll:function(t){var e=this;0===t.length?this.tableData.forEach((function(t){var a=e.innerSelectionKeys.indexOf(t[e.keyField]);a>=0&&e.innerSelectionKeys.splice(a,1)})):this.tableData.forEach((function(t){var a=e.innerSelectionKeys.indexOf(t[e.keyField]);a<0&&e.innerSelectionKeys.push(t[e.keyField])})),this.$emit("selectionChange",t)},handleSelectionChange:function(t,e){this.generateSelectionKeys(t,e),this.$emit("selectionChange",t)},pageSizeChange:function(t){this.$emit("pageSizeChange",t)},currentPageChange:function(t){this.$emit("currentPageChange",t)},cascaderChange:function(t){this.$emit("cascaderChange",t)},activeItemChange:function(t){this.$emit("active-item-change",t)},handleSortChange:function(t){this.$emit("sort-change",t)},rowClick:function(t,e,a){"single"===this.selectionMode&&(this.innerSelectionKeys=[t[this.keyField]],this.innerSelection=[t])}},watch:{visibility:function(t,e){this.dialogVisible=t,this.isDepotOutNew=this.isDepotOut,this.checkedTable=this.checkTable}},computed:{checkable:function(){return"single"!==this.selectionMode}},created:function(){},updated:function(){this.updateSelection()}},s=r,c=(a("0943"),a("2877")),l=Object(c["a"])(s,o,i,!1,null,null,null);e["a"]=l.exports},"6b8f":function(t,e,a){},7132:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"biz-fade-t"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(e){return e.target!==e.currentTarget?null:t.close(e)}}},[a("transition",{attrs:{name:"biz-fade-t-right"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"popup-content",style:t.contentStyle},[t._t("default")],2)])],1)])},i=[],n={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},r=n,s=(a("5b8e"),a("2877")),c=Object(s["a"])(r,o,i,!1,null,null,null),l=c.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"biz-popup-tabs"},[a("biz-popup",{attrs:{open:t.open,contentStyle:t.contentStyle},on:{close:t.close}},[a("el-tabs",{attrs:{type:"border-card",value:t.value},on:{"tab-click":t.tabClick}},[t._t("default")],2)],1)],1)},d=[],p=(a("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:l},methods:{close:function(){var t=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("close")}))},tabClick:function(t){this.$emit("input",t.name)}}}),h=p,f=(a("d4c2"),Object(s["a"])(h,u,d,!1,null,null,null)),g=f.exports;a.d(e,"a",(function(){return g}))},7443:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-bean-hypermarket-mgmt"},[a("biz-flex-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{operations:t.operations,filters:t.filters,tableData:t.tableData,pagination:t.pagination},on:{operate:t.operate,"filter-data-change":t.filterDataChange,"selection-change":t.handleSelectionChange,"row-click":t.rowClick,"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"sort-change":t.handleSortChange,"active-item-change":t.activeItemChange,"cascader-change":t.cascaderChange}},[a("el-table-column",{attrs:{prop:"shop.name",label:"商品","min-width":"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"product-info-content"},[e.row.image&&" "!==e.row.image?a("img",{attrs:{src:e.row.image,onerror:t.errorImg}}):a("img",{attrs:{src:"/resources/admin/images/default/product-default-100.png"}}),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"titleClass",attrs:{title:e.row.name}},[t._v(t._s(e.row.sn))]),a("div",{staticClass:"overflow"},[t._v(t._s(e.row.name))]),a("div",{staticClass:"overflow"},[t._v(t._s(e.row.fullName&&-1!==e.row.fullName.indexOf("[")?e.row.fullName.split("[")[1].split("]")[0]:""))])])])])])]}}])}),a("el-table-column",{attrs:{prop:"shop.name",label:"分类","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[t._v(" "+t._s(e.row.categoryName)+" ")])])]}}])}),a("el-table-column",{attrs:{prop:"shop.name",label:"销售价","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[t._v(" ￥"+t._s(t.toPrice(e.row.price))+" ")])])]}}])}),a("el-table-column",{attrs:{prop:"shop.name",label:"剩余库存/库存总数","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[t._v(" "+t._s(e.row.availableStock)+"/"),a("span",{style:{color:t.stateColor(e.row)}},[t._v(t._s(e.row.stock))])])])]}}])}),a("el-table-column",{attrs:{prop:"shop.name",label:"店铺","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[t._v(" "+t._s(e.row.shop.name)+" ")])])]}}])}),a("el-table-column",{attrs:{prop:"shop.name",label:"销量","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[t._v(" "+t._s(e.row.sales)+" ")])])]}}])}),a("el-table-column",{attrs:{prop:"shop.name",label:"状态","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"overflow"},[t._v(" "+t._s(t.getStatus(e.row))+" ")])])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",{staticClass:"biz-customcol"},[t.canOffsale(e.row)&&t.hasAuthOff?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return a.stopPropagation(),t.soldout(e.row.id)}}},[t._v(" 下架 ")]):t._e(),t.canOnsale(e.row)&&t.hasAuthOn?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return a.stopPropagation(),t.putaway(e.row.id)}}},[t._v(" 上架 ")]):t._e(),t.hasAuthDel?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return a.stopPropagation(),t.deleteVBean(e.row.id)}}},[t._v("移除")]):t._e()],1)])}}])})],1),a("biz-dialog-selector",{staticClass:"product-info-dailog",attrs:{title:"选择商品",visibility:t.showDialog,tableData:t.giftList,pagination:t.dialogPagination,filters:t.dialogFilters,selectionKeys:t.selectedGiftIds},on:{"update:visibility":function(e){t.showDialog=e},pageSizeChange:t.dialogPageSizeChange,currentPageChange:t.dialogCurrentPageChange,confirmed:t.confirmedProduct,filterDataChange:t.dialogFilterDataChange,selectionChange:t.selectionChange,"sort-change":t.handleDialogSortChange}},[a("el-table-column",{attrs:{width:"400",prop:"fullName",label:"商品名"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",{staticClass:"biz-two-column"},[a("img",{attrs:{src:e.row.image||t.defaultImg,onerror:t.errorImg}}),a("div",{staticClass:"biz-two-row"},[a("div",{staticStyle:{"margin-left":"10px"}},[t._v("编号："+t._s(e.row.sn))]),a("div",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.fullName))])])])])}}])}),a("el-table-column",{attrs:{prop:"categoryName",label:"分类"}}),a("el-table-column",{attrs:{label:"品牌",prop:"brandName"}}),a("el-table-column",{attrs:{prop:"price",label:"销售价",sortable:"custom",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[t._v("￥"+t._s(t.toPrice(e.row.price)))])}}])}),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存/库存总数",sortable:"custom",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("div",{staticClass:"biz-customcol"},[t._v(" "+t._s(e.row.availableStock)+"/ "),a("span",{style:{color:t.stateColor(e.row)}},[t._v(t._s(e.row.stock))])])])}}])}),a("el-table-column",{attrs:{prop:"state",label:"状态",formatter:t.getStatus}}),a("el-table-column",{attrs:{prop:"shop.name",label:"店铺"}})],1),a("VBean-popup",{attrs:{slot:"float",open:t.open,id:t.itemId,isEdit:t.isEdit,baseInfo:t.rowBaseInfo},on:{close:function(e){t.open=!1,t.itemId=""},operationSuccess:t.refresh,createdProductSuccess:t.createdProductSuccess},slot:"float"})],1)},i=[],n=(a("99af"),a("4160"),a("caad"),a("c975"),a("a15b"),a("d81d"),a("a434"),a("b0c0"),a("a9e3"),a("b680"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("2532"),a("5319"),a("1276"),a("159b"),a("b85c")),r=a("5530"),s=a("04d3"),c=a("11e9"),l=a("af3f"),u=a("2f62"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("biz-popup-tabs",{attrs:{open:t.open},on:{close:t.close},model:{value:t.tabSelection,callback:function(e){t.tabSelection=e},expression:"tabSelection"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"baseinfo"}},[a("BaseInfo",{attrs:{open:t.open,id:t.id,isEdit:t.isEdit,baseInfo:t.baseInfo,tabSelection:t.tabSelection},on:{operationSuccess:t.operationSuccess,createdProductSuccess:t.createdProductSuccess}})],1),t.id?a("el-tab-pane",{attrs:{label:"详情",name:"detail"}},[a("Detail",{attrs:{open:t.open,id:t.id,isEdit:t.isEdit,tabSelection:t.tabSelection},on:{operationSuccess:t.operationSuccess}})],1):t._e(),t.id?a("el-tab-pane",{attrs:{label:"参数",name:"parameter"}},[a("Parameter",{attrs:{open:t.open,id:t.id,isEdit:t.isEdit,tabSelection:t.tabSelection},on:{operationSuccess:t.operationSuccess}})],1):t._e(),t.id?a("el-tab-pane",{attrs:{label:"属性",name:"attribute"}},[a("Attribute",{attrs:{open:t.open,id:t.id,isEdit:t.isEdit,tabSelection:t.tabSelection},on:{operationSuccess:t.operationSuccess}})],1):t._e()],1)},p=[],h=a("7132"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("biz-grid",{staticClass:"add-product-base-info"},[t.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}):t._e(),a("div",{staticClass:"form-one"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"productDataForm",attrs:{"label-width":"130px",size:"small",model:t.productDataModel,rules:t.productDataRules,disabled:!t.isEdit,"inline-message":!0}},[a("el-form-item",{attrs:{label:"商品分类：",required:!0}},[a("el-cascader",{attrs:{options:t.categoryOptions,"change-on-select":"","show-all-levels":!1},on:{change:t.categoryChange},model:{value:t.productDataModel.categoryId,callback:function(e){t.$set(t.productDataModel,"categoryId",e)},expression:"productDataModel.categoryId"}})],1),a("product-category-select",{attrs:{initializing:t.initializing,refreshSign:t.refreshSign,brandId:t.productDataModel.brandId,categoryId:t.productDataModel.categoryId[0],seriesId:t.productDataModel.seriesId,name:t.productDataModel.name},on:{"update:brandId":function(e){return t.$set(t.productDataModel,"brandId",e)},"update:brand-id":function(e){return t.$set(t.productDataModel,"brandId",e)},"update:seriesId":function(e){return t.$set(t.productDataModel,"seriesId",e)},"update:series-id":function(e){return t.$set(t.productDataModel,"seriesId",e)},"update:name":function(e){return t.$set(t.productDataModel,"name",e)}}}),a("el-form-item",{attrs:{label:"类型："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{disabled:!1===t.isCreated,placeholder:"请选择商品类型"},on:{change:t.productTypeChange},model:{value:t.productDataModel.productType,callback:function(e){t.$set(t.productDataModel,"productType",e)},expression:"productDataModel.productType"}},t._l(t.productTypes,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"编号："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:t.productDataModel.id?"请输入编号":"创建成功后自动生成",readonly:!0,disabled:!0},model:{value:t.productDataModel.sn,callback:function(e){t.$set(t.productDataModel,"sn",e)},expression:"productDataModel.sn"}})],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 关键词 "),a("el-tooltip",{attrs:{placement:"bottom",effect:"light"}},[a("div",{staticStyle:{width:"300px"},attrs:{slot:"content"},slot:"content"},[t._v("填写关键词后，客户可以根据关键词搜索到此商品。使用符合用户习惯的关键词可以有效提高商品被搜索到的概率。")]),a("i",{staticClass:"el-icon-question"})])],1),a("div",{staticClass:"item-content"},[a("div",{staticClass:"tag-list"},[a("div",{staticClass:"tag-group"},t._l(t.tagGroup,(function(e,o){return a("el-tag",{key:o,attrs:{closable:"",size:"mini"},on:{close:function(e){return t.removeTag(o)}}},[t._v(t._s(e))])})),1),a("div",{staticClass:"toggle-btn",on:{click:function(e){t.showRecommend=!t.showRecommend}}},[a("div",{staticClass:"iconfont biz-icon-i-web-zd1",class:{"rotate-180":t.showRecommend}}),t._v(" "+t._s(t.toggleRecommendTxt)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showRecommend,expression:"showRecommend"}],staticClass:"recommend-group"},[t._l(t.recommendTagGroup,(function(e,o){return a("el-tag",{key:o,attrs:{type:"info",size:"mini"},on:{click:function(a){return t.addRecommendTag(e)}}},[t._v(t._s(e))])})),t.recommendTagGroup.length?t._e():a("span",{staticStyle:{color:"#bbbbbb"}},[t._v("暂无推荐")])],2)]),a("div",{staticClass:"add-tag"},[a("el-input",{attrs:{maxlength:18,placeholder:"请输入自定义关键词"},model:{value:t.newTagName,callback:function(e){t.newTagName=e},expression:"newTagName"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.addNewTag}},[t._v("添加")])],1)])]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showPriceRadio,expression:"showPriceRadio"}],attrs:{label:"销售价："}},[a("el-radio",{attrs:{label:"false"},model:{value:t.productDataModel.isPriceNegotiable,callback:function(e){t.$set(t.productDataModel,"isPriceNegotiable",e)},expression:"productDataModel.isPriceNegotiable"}},[t._v("一口价")]),a("el-radio",{attrs:{label:"true"},model:{value:t.productDataModel.isPriceNegotiable,callback:function(e){t.$set(t.productDataModel,"isPriceNegotiable",e)},expression:"productDataModel.isPriceNegotiable"}},[t._v("价格面议")])],1),t.isNeedToShowPrice?a("el-form-item",{attrs:{label:t.priceLabel,prop:"price"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入一口价"},model:{value:t.productDataModel.price,callback:function(e){t.$set(t.productDataModel,"price",e)},expression:"productDataModel.price"}})],1):t._e(),a("el-form-item",{attrs:{label:"市场指导价：",prop:"marketPrice"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入市场指导价"},model:{value:t.productDataModel.marketPrice,callback:function(e){t.$set(t.productDataModel,"marketPrice",e)},expression:"productDataModel.marketPrice"}})],1),a("el-form-item",{attrs:{label:"成本价：",prop:"cost"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入成本价"},model:{value:t.productDataModel.cost,callback:function(e){t.$set(t.productDataModel,"cost",e)},expression:"productDataModel.cost"}})],1),a("el-form-item",{attrs:{label:"商品缩略图：",prop:"image"}},[a("BizAvatarUploaderNew",{model:{value:t.productDataModel.image,callback:function(e){t.$set(t.productDataModel,"image",e)},expression:"productDataModel.image"}})],1),a("el-form-item",{attrs:{label:"库存：",prop:"stock"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入..."},model:{value:t.productDataModel.stock,callback:function(e){t.$set(t.productDataModel,"stock",e)},expression:"productDataModel.stock"}})],1),a("el-form-item",{attrs:{label:"销量："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入销量",readonly:!0,disabled:!0},model:{value:t.productDataModel.sales,callback:function(e){t.$set(t.productDataModel,"sales",e)},expression:"productDataModel.sales"}})],1),t.isNeedToShowBeanPercent()&&"false"===t.productDataModel.isPriceNegotiable?a("el-form-item",{attrs:{label:"V豆折扣上限(%)：",prop:"beanPercent"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"按会员奖励设置比例"},model:{value:t.productDataModel.beanPercent,callback:function(e){t.$set(t.productDataModel,"beanPercent",e)},expression:"productDataModel.beanPercent"}})],1):t._e(),"false"===t.productDataModel.isPriceNegotiable?a("el-form-item",{attrs:{label:"V豆赠送上限(%)：",prop:"giftPercent"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入..."},model:{value:t.productDataModel.giftPercent,callback:function(e){t.$set(t.productDataModel,"giftPercent",e)},expression:"productDataModel.giftPercent"}})],1):t._e(),t.isNeedToShowPaymentMethod&&"false"===t.productDataModel.isPriceNegotiable?a("el-form-item",{attrs:{label:"支付方式：",prop:"paymentMethodIds"}},[a("el-checkbox-group",{model:{value:t.productDataModel.paymentMethodIds,callback:function(e){t.$set(t.productDataModel,"paymentMethodIds",e)},expression:"productDataModel.paymentMethodIds"}},t._l(t.payOptions,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1)],1):t._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"7"!==t.productDataModel.productType&&"false"===t.productDataModel.isPriceNegotiable,expression:"productDataModel.productType!=='7'&&productDataModel.isPriceNegotiable==='false'"}],attrs:{label:"配送方式：",prop:"shippingMethodIds"}},[a("el-checkbox-group",{staticClass:"shipping-method",model:{value:t.shippingMethodIds,callback:function(e){t.shippingMethodIds=e},expression:"shippingMethodIds"}},t._l(t.shippingMethods,(function(e){return a("el-checkbox",{key:e.shopShippingMethod.id,attrs:{label:e.shopShippingMethod.id}},[t._v(t._s(e.shopShippingMethod.name))])})),1)],1),a("el-form-item",{attrs:{label:"商品重量：",prop:"weight"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"默认0"},model:{value:t.productDataModel.weight,callback:function(e){t.$set(t.productDataModel,"weight",e)},expression:"productDataModel.weight"}},[a("template",{slot:"append"},[t._v("KG")])],2)],1),t.isNeedToShowTestDrive?a("el-form-item",{attrs:{label:"试驾车辆"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.productDataModel.isSupportTestDrive,callback:function(e){t.$set(t.productDataModel,"isSupportTestDrive",e)},expression:"productDataModel.isSupportTestDrive"}},[t._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:t.productDataModel.isSupportTestDrive,callback:function(e){t.$set(t.productDataModel,"isSupportTestDrive",e)},expression:"productDataModel.isSupportTestDrive"}},[t._v("否")])],1):t._e(),a("el-form-item",{attrs:{label:"口碑："}},[t._l(t.productDataModel.reputations,(function(e){return a("el-tag",{key:e,attrs:{size:"small",closable:"","disable-transitions":!0,type:"warning"},on:{close:function(a){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"180px"},attrs:{size:"small",placeholder:"请输入1-6字口碑词汇"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+添加")])],2),a("el-form-item",{attrs:{label:"设置："}},[a("el-checkbox-group",{model:{value:t.checkedSet,callback:function(e){t.checkedSet=e},expression:"checkedSet"}},[a("el-checkbox",{attrs:{label:"是否置顶"}}),"false"===t.productDataModel.isPriceNegotiable?a("el-checkbox",{attrs:{label:"是否订金支付"}}):t._e()],1)],1)],1)],1),t.isSubscriptionChecked()?a("el-form",{ref:"subscriptionForm",attrs:{"label-width":"120px ",size:"small",model:t.productDataModel,rules:t.subscriptionRules}},[a("el-form-item",{attrs:{label:"订金金额：",prop:"subscription"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入不大于销售价的数字"},model:{value:t.productDataModel.subscription,callback:function(e){t.$set(t.productDataModel,"subscription",e)},expression:"productDataModel.subscription"}})],1),a("el-form-item",{attrs:{label:"订金可退："}},[a("el-radio-group",{model:{value:t.productDataModel.isSubscriptionReturn,callback:function(e){t.$set(t.productDataModel,"isSubscriptionReturn",e)},expression:"productDataModel.isSubscriptionReturn"}},[a("el-radio",{attrs:{label:"true"}},[t._v("是")]),a("el-radio",{attrs:{label:"false"}},[t._v("否")])],1)],1)],1):t._e()],1)},g=[],m=(a("fb6a"),a("6062"),a("3ca3"),a("498a"),a("ddb0"),a("2909")),b=a("f36f"),y=a("8330"),v=a("392e"),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-category-select"},[a("el-form",{attrs:{"label-width":"130px",size:"small","inline-message":!0}},[a("el-form-item",{attrs:{label:"品牌："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{value:t.brandId,placeholder:"请输入品牌",disabled:!0},on:{change:t.brandChange}},t._l(t.brandOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"系列："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{value:t.seriesId,placeholder:"请输入系列",disabled:!0},on:{change:t.seriesChange}},t._l(t.seriesOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"名称：",required:!0}},[a("el-autocomplete",{attrs:{value:t.name,"fetch-suggestions":t.querySearchAsync,placeholder:"请输入名称",disabled:!0},on:{input:t.onInputName,select:t.selectName}})],1)],1)],1)},S=[],w=(a("4de4"),a("1ab1")),M=a("c596"),I={name:"ProductCategorySelect",data:function(){return{brandOptions:[],seriesOptions:[],restaurants:[]}},props:{initializing:{type:Boolean,default:!1},categoryId:{type:String,default:""},brandId:{type:String,default:""},seriesId:{type:String,default:""},name:{type:String,default:""}},computed:{},created:function(){},watch:{categoryId:function(t){t&&this.getBrands(),this.initializing||this.$emit("update:brandId","")},brandId:function(t){if(!t)return this.seriesOptions=[],void this.$emit("update:seriesId","");this.initializing||this.$emit("update:seriesId",""),this.getSeries()},seriesId:function(t){if(!t)return this.restaurants=[],void this.$emit("update:name","");this.initializing||this.$emit("update:name",""),this.getName()}},mounted:function(){},methods:{querySearchAsync:function(t,e){var a=this.restaurants,o=t?a.filter(this.createStateFilter(t)):a;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e(o)}),300*Math.random())},createStateFilter:function(t){return function(t){return!0}},getBrands:function(){var t=this;if(""!==this.categoryId){var e={categoryId:this.categoryId};w["a"].get(M["g"].commodity.getBrands,e).then((function(e){t.brandOptions=e.brands}))}},getSeries:function(){var t=this;if(""!==this.brandId){var e={shopBrandId:this.brandId};w["a"].get(M["g"].commodity.getSeries,e).then((function(e){t.seriesOptions=e.series}))}},getName:function(){var t=this;if(""!==this.seriesId){var e={shopBrandId:this.brandId,shopSeriesId:this.seriesId};w["a"].get(M["g"].commodity.getName,e).then((function(e){t.restaurants=e.Type.map((function(t){return{value:t,id:t}}))}))}},categoryChange:function(t){this.$emit("update:categoryId",t)},brandChange:function(t){this.$emit("update:brandId",t)},seriesChange:function(t){this.$emit("update:seriesId",t)},onInputName:function(t){this.$emit("update:name",t)},selectName:function(t){this.$emit("update:name",t.value)}}},P=I,C=(a("17ab"),a("2877")),k=Object(C["a"])(P,D,S,!1,null,null,null),_=k.exports,x=a("c17f"),T=a("cc55"),O=function t(e){var a,o=[],i=Object(n["a"])(e);try{for(i.s();!(a=i.n()).done;){var r=a.value,s={value:r.id,label:r.name};if(r.childrenProductCategoryDataList&&r.childrenProductCategoryDataList.length>0&&(s.children=t(r.childrenProductCategoryDataList)),r.children&&r.children.length>0){s.hasOwnProperty("children")||(s.children=[]);var c,l=$(r.childrenProductCategoryDataList),u=Object(n["a"])(l);try{for(u.s();!(c=u.n()).done;){var d=c.value;s.children.push(d)}}catch(p){u.e(p)}finally{u.f()}}o.push(s)}}catch(p){i.e(p)}finally{i.f()}return o},$=function(t){var e,a=[],o=Object(n["a"])(t);try{for(o.s();!(e=o.n()).done;){var i=e.value;a.push({label:i.name,value:i.id})}}catch(r){o.e(r)}finally{o.f()}return a},B={name:"CommodityMgmtBaseInfo",data:function(){var t=this,e=function(e,a,o){t.productDataModel.categoryId&&t.productDataModel.categoryId.length>0?o():o(new Error("请选择分类"))},a=function(e,a,o){t.productDataModel.price&&Number(t.productDataModel.price)>=0?o():o(new Error("销售价必须为数字值"))},o=function(e,a,o){t.productDataModel.marketPrice,Number(t.productDataModel.marketPrice)>=0?o():o(new Error("市场指导价必须为数字值"))},i=function(e,a,o){t.productDataModel.cost,Number(t.productDataModel.cost)>=0?o():o(new Error("成本价必须为数字值"))},n=function(e,a,o){t.productDataModel.beanPercent,Number(t.productDataModel.beanPercent)>=0?(Number(t.productDataModel.beanPercent)>100&&o(new Error("V豆折扣上限(%)不能超过100")),o()):o(new Error("V豆折扣上限(%)必须为数字值"))},r=function(e,a,o){""===t.productDataModel.giftPercent&&(t.productDataModel.giftPercent=0),Number(t.productDataModel.giftPercent)>=0?(Number(t.productDataModel.giftPercent)>100&&o(new Error("V豆赠送上限(%)不能超过100")),o()):o(new Error("V豆赠送上限(%)必须为数字值"))},s=function(e,a,o){""===t.productDataModel.weight&&(t.productDataModel.weight=0),Number(t.productDataModel.weight)>=0?t.productDataModel.weight&&-1!==t.productDataModel.weight.indexOf(".")&&t.productDataModel.weight.split(".")[1].length>2?o(new Error("只允许输入到小数后两位")):o():o(new Error("重量必须为数字值"))},c=function(e,a,o){"undefined"!==typeof t.productDataModel.image?(console.log(t.productDataModel.image)," "!==t.productDataModel.image?o():o(new Error("缩略图必须上传"))):o(new Error("缩略图必须上传"))},l=function(e,a,o){console.log(t.productDataModel.stock),""!==t.productDataModel.stock&&Number(t.productDataModel.stock)>=0&&-1===t.productDataModel.stock.indexOf(".")?o():o(new Error("库存必须为整数值"))},u=function(e,a,o){""!==t.productDataModel.subscription&&Number(t.productDataModel.subscription)>0?(Number(t.productDataModel.subscription)>=Number(t.productDataModel.price)&&o(new Error("请输入不大于销售价的数字")),o()):o(new Error("订金金额必须为大于0数值"))},d=function(e,a,o){"2"===t.productDataModel.productType||"7"===t.productDataModel.productType||t.productDataModel.paymentMethodIds.length>0?o():o(new Error("请至少选择一种支付方式"))},p=function(e,a,o){"7"===t.productDataModel.productType||t.shippingMethodIds.length>0?o():(t.$message.warning("请至少选择一种配送方式"),o(new Error("请至少选择一种配送方式")))};return{tagGroup:[],showRecommend:!1,recommendTagGroup:[],newTagName:"",operations:[{label:"保存",name:"save",type:"primary",disabled:!1,auth:["admin:product.exchange.edit"]}],productDataRules:{categoryId:[{required:!0,trigger:"blur",validator:e}],price:[{required:!0,trigger:"blur",validator:a}],marketPrice:[{required:!1,trigger:"blur",validator:o}],cost:[{required:!1,trigger:"blur",validator:i}],beanPercent:[{required:!1,trigger:"blur",validator:n}],giftPercent:[{required:!1,trigger:"blur",validator:r}],weight:[{required:!0,trigger:"blur",validator:s}],image:[{required:!1,trigger:"blur",validator:c}],stock:[{required:!0,trigger:"blur",validator:l}],paymentMethodIds:[{required:!0,trigger:"blur",validator:d}],shippingMethodIds:[{required:!0,trigger:"blur",validator:p}]},subscriptionRules:{subscription:[{required:!0,trigger:"blur",validator:u}]},isCreated:"true",defaultImg:"/resources/admin/images/default/product-default.png",productDataModel:this.getDefaultProductDataModel(),categoryOptions:[],productCategoryManage:[],productTypes:[],payOptions:[],shippingMethods:[],shippingMethodIds:[],setOptions:["是否置顶","是否订金支付"],checkedSet:[],inputVisible:!1,inputValue:"",loading:!1,refreshSign:!0,initializing:!1}},components:{BizGrid:b["a"],BizSaveButton:y["a"],ProductCategorySelect:_,BizAvatarUploaderNew:x["b"]},props:{id:{type:String,default:""},tabSelection:{type:String},baseInfo:{type:Object},open:{type:Boolean},isEdit:{type:Boolean,default:function(){return!0}}},watch:{open:function(t){t?""!==this.id?this.isCreated=!1:(this.isCreated=!0,this.refresh()):(this.isCreated=!0,this.productTypes=[],this.payOptions=[],this.shippingMethods=[],this.checkedSet=[],this.recommendTagGroup=[])},id:function(t,e){var a=this;t?(this.$refs.productDataForm.$el.scrollTop=0,!0===this.open&&"baseinfo"===this.tabSelection&&(this.getProductCategoryList(this.baseInfo.shopId),this.$nextTick((function(){a.refresh()})))):this.productDataModel=this.getDefaultProductDataModel()}},created:function(){this.getDefaultImg(),this.getProductCategoryList()},computed:{toggleRecommendTxt:function(){var t=this.showRecommend;return t?"收起推荐":"展开推荐"},isNeedToShowPrice:function(){return("0"===this.productDataModel.productType||"1"===this.productDataModel.productType||"7"===this.productDataModel.productType)&&"false"===this.productDataModel.isPriceNegotiable},isNeedToShowPaymentMethod:function(){return"2"!==this.productDataModel.productType&&"7"!==this.productDataModel.productType},isNeedToShowTestDrive:function(){var t=this,e=!1;return this.productCategoryManage.map((function(a){console.log(a.name),a.id===t.productDataModel.categoryId[t.productDataModel.categoryId.length-1]&&"car"===a.type?e=!0:a.childrenProductCategoryDataList&&a.childrenProductCategoryDataList.map((function(a){a.id===t.productDataModel.categoryId[t.productDataModel.categoryId.length-1]&&"car"===a.type&&(e=!0)}))})),e},priceLabel:function(){return"0"===this.productDataModel.productType?"一口价：":"销售价："},showPriceRadio:function(){return"0"===this.productDataModel.productType}},methods:{operate:function(t){this[t]()},addRecommendTag:function(t){this.tagGroup=Object(m["a"])(new Set(this.tagGroup.concat(t)))},addNewTag:function(){String(this.newTagName).trim()&&(this.tagGroup=Object(m["a"])(new Set(this.tagGroup.concat(this.newTagName)))),this.newTagName=""},removeTag:function(t){this.tagGroup=this.tagGroup.slice(0,t).concat(this.tagGroup.slice(t+1)),console.log("tagGroup: ",t,this.tagGroup)},getRecommendTag:function(){var t=this,e="/admin/common/keywords.jhtml",a=this.productDataModel.name,o={content:a};w["a"].get(e,o).then((function(e){t.recommendTagGroup=Object(m["a"])(new Set(e.keywords))})).catch((function(t){console.log("ERR_GET_RECOMMEND_TAGS: ",t)}))},categoryChange:function(t){console.log(this.productDataModel.categoryId)},getDefaultImg:function(){var t=this,e={type:"displaySetting"};w["a"].get("/admin/settings/settings.jhtml",e).then((function(e){e.settingList.defaultThumbnailProductImage&&(t.defaultImg=e.settingList.defaultThumbnailProductImage)})).catch((function(e){console.log(e),console.log("code错误"),t.$message.warning(e.errorMessage)}))},handleClose:function(t){this.productDataModel.reputations.splice(this.productDataModel.reputations.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){if(this.inputValue.length>6)return this.$message.warning("请输入1-6字口碑词汇"),!1;this.inputVisible=!1,this.inputValue&&(this.productDataModel.reputations.push(this.inputValue),this.inputValue="")},getDefaultProductDataModel:function(){return{shopId:window.top.SHOP_ID||"",id:"",sn:"",categoryId:[],brandId:"",seriesId:"",name:"",typeName:"",image:this.defaultImg,price:"",isPriceNegotiable:"false",cost:"",marketPrice:"",sales:"",stock:"0",isSupportTestDrive:"0",isList:"false",isTop:"false",isSubscription:"false",subscription:"",isSubscriptionReturn:"true",reputations:[],paymentMethodIds:[],productType:"0",bean:"",beanPercent:"",giftPercent:"",weight:"0"}},getSaveProductDataModel:function(){var t=[];if("2"===this.productDataModel.productType){var e,a=Object(n["a"])(this.payOptions);try{for(a.s();!(e=a.n()).done;){var o=e.value;t.push(o.id)}}catch(d){a.e(d)}finally{a.f()}}else{var i,r=Object(n["a"])(this.productDataModel.paymentMethodIds);try{for(r.s();!(i=r.n()).done;){var s=i.value;t.push(s)}}catch(d){r.e(d)}finally{r.f()}}var c,l=Object(n["a"])(this.shippingMethods);try{for(l.s();!(c=l.n()).done;){var u=c.value;u.productValid="0",-1!==this.shippingMethodIds.indexOf(u.shopShippingMethod.id)&&(u.productValid="1")}}catch(d){l.e(d)}finally{l.f()}return{shopId:this.productDataModel.shopId,id:this.productDataModel.id,sn:this.productDataModel.sn,categoryId:this.productDataModel.categoryId[this.productDataModel.categoryId.length-1],brandId:this.productDataModel.brandId,seriesId:this.productDataModel.seriesId,name:this.productDataModel.name,image:this.productDataModel.image,price:this.productDataModel.price||"0",cost:this.productDataModel.cost,marketPrice:this.productDataModel.marketPrice,sales:this.productDataModel.sales,stock:this.productDataModel.stock,isSupportTestDrive:this.productDataModel.isSupportTestDrive,isPriceNegotiable:this.productDataModel.isPriceNegotiable,isList:String(this.isListChecked()),isTop:String(this.isTopChecked()),isSubscription:String(this.isSubscriptionChecked()),subscription:this.productDataModel.subscription,isSubscriptionReturn:this.productDataModel.isSubscriptionReturn,reputations:this.productDataModel.reputations,paymentMethodIds:t,shippingMethods:this.shippingMethods,productType:this.productDataModel.productType,bean:this.productDataModel.bean,beanPercent:this.productDataModel.beanPercent,giftPercent:this.productDataModel.giftPercent,weight:this.productDataModel.weight,keyword:this.tagGroup}},handleUploadSuccess:function(t){console.log(t),this.productDataModel.image=t},isListChecked:function(){var t,e=Object(n["a"])(this.checkedSet);try{for(e.s();!(t=e.n()).done;){var a=t.value;if("是否列出"===a)return!0}}catch(o){e.e(o)}finally{e.f()}return!1},isTopChecked:function(){var t,e=Object(n["a"])(this.checkedSet);try{for(e.s();!(t=e.n()).done;){var a=t.value;if("是否置顶"===a)return!0}}catch(o){e.e(o)}finally{e.f()}return!1},isSubscriptionChecked:function(){var t,e=Object(n["a"])(this.checkedSet);try{for(e.s();!(t=e.n()).done;){var a=t.value;if("是否订金支付"===a)return!0}}catch(o){e.e(o)}finally{e.f()}return!1},isNeedToShowBeanPercent:function(){return"0"===this.productDataModel.productType||"7"===this.productDataModel.productType},getParentCategory:function(t,e){var a=this;this.productDataModel.categoryId=[],t.forEach((function(t,o){if(t.value===e)return a.productDataModel.categoryId.unshift(t.value),!1;t.children&&t.children.forEach((function(o){if(o.value===e)return a.productDataModel.categoryId.unshift(o.value),a.productDataModel.categoryId.unshift(t.value),console.log(a.productDataModel.categoryId),!1;o.children&&o.children.forEach((function(i){if(i.value===e)return a.productDataModel.categoryId.unshift(i.value),a.productDataModel.categoryId.unshift(o.value),a.productDataModel.categoryId.unshift(t.value),!1;i.children&&i.children.forEach((function(n){if(n.value===e)return a.productDataModel.categoryId.unshift(n.value),a.productDataModel.categoryId.unshift(i.value),a.productDataModel.categoryId.unshift(o.value),a.productDataModel.categoryId.unshift(t.value),!1}))}))}))}))},refresh:function(){var t=this;this.initializing=!0,this.loading=!0;var e={id:this.id,shopId:window.top.SHOP_ID||""};v["a"].queryProductBasicInfo(e,(function(e){t.tagGroup=e.productBasicInfoData?e.productBasicInfoData.keyword:[],t.tagGroup.length?t.showRecommend=!1:t.showRecommend=!0,t.productTypes=e.productTypes,t.payOptions=e.paymentMethods,t.shippingMethods=e.shippingMethods,t.shippingMethodIds=[];var a,o=Object(n["a"])(t.shippingMethods);try{for(o.s();!(a=o.n()).done;){var i=a.value;"1"===i.productValid&&t.shippingMethodIds.push(i.shopShippingMethod.id)}}catch(u){o.e(u)}finally{o.f()}if(t.refreshSign=!t.refreshSign,t.id)t.productDataModel=t.convert2ProductDataModel(e.productBasicInfoData),t.getParentCategory(t.categoryOptions,t.productDataModel.categoryId[0]),t.getRecommendTag();else{t.productDataModel.image=t.defaultImg;var r,s=Object(n["a"])(t.payOptions);try{for(s.s();!(r=s.n()).done;){var c=r.value;t.productDataModel.paymentMethodIds.push(c.id)}}catch(u){s.e(u)}finally{s.f()}}var l=[];e.productBasicInfoData&&("true"===e.productBasicInfoData.isList&&l.push("是否列出"),"true"===e.productBasicInfoData.isTop&&l.push("是否置顶"),"true"===e.productBasicInfoData.isSubscription&&l.push("是否订金支付")),t.checkedSet=l,t.$nextTick((function(){t.initializing=!1,t.loading=!1}))}),(function(e){""!==e.errorMessage&&t.$message.warning(e.errorMessage),console.log("获取商品基本信息失败",t.id)}))},convert2ProductDataModel:function(t){return{shopId:t.shopId,id:t.id,sn:t.sn,categoryId:[t.categoryId],brandId:t.brandId,seriesId:t.seriesId,name:t.name,image:t.image,price:t.price,cost:t.cost,marketPrice:t.marketPrice,sales:t.sales,stock:t.stock,isSupportTestDrive:t.isSupportTestDrive,isList:t.isList,isTop:t.isTop,isSubscription:t.isSubscription,subscription:t.subscription,isSubscriptionReturn:t.isSubscriptionReturn||"true",reputations:t.reputations,paymentMethodIds:t.paymentMethodIds,productType:t.productType,bean:t.bean,beanPercent:t.beanPercent,giftPercent:t.giftPercent,isPriceNegotiable:t.isPriceNegotiable,weight:t.weight||0}},save:function(){var t=this;""!==this.productDataModel.name?""!==this.productDataModel.categoryId[0]?this.$refs.productDataForm.validate((function(e){if(!e)return!1;t.isSubscriptionChecked()?t.$refs.subscriptionForm.validate((function(e){if(!e)return!1;t.isCreated?t.createProduct():t.updateProduct()})):t.isCreated?t.createProduct():t.updateProduct()})):this.$message.warning("商品分类不能为空"):this.$message.warning("商品名称不能为空")},createProduct:function(){var t=this,e=this.getSaveProductDataModel(),a="7"===this.productDataModel.productType?"creatBenefitsBasicInfo":"creatProductBasicInfo";v["a"][a](e,(function(e){t.$message.success("添加商品基本信息成功"),t.id=e.id,t.isCreated=!1,t.refresh(),t.$emit("operationSuccess"),t.$emit("createdProductSuccess",e.id,t.productDataModel.productType)}),(function(e){""!==e.errorMessage&&t.$message.warning(e.errorMessage),console.log("添加商品基本信息失败",t.id)}))},updateProduct:function(){var t=this,e=this.getSaveProductDataModel();v["a"].updateProductBasicInfo(e,(function(e){t.refresh(),t.$message.success("更新商品基本信息成功"),t.$emit("operationSuccess")}),(function(e){""!==e.errorMessage&&t.$message.warning(e.errorMessage),console.log("更新商品基本信息失败",t.id)}))},productTypeChange:function(t){if("7"===t)this.shippingMethodIds=[],this.productDataModel.paymentMethodIds=[];else{var e,a=Object(n["a"])(this.payOptions);try{for(a.s();!(e=a.n()).done;){var o=e.value;this.productDataModel.paymentMethodIds.push(o.id)}}catch(c){a.e(c)}finally{a.f()}var i,r=Object(n["a"])(this.shippingMethods);try{for(r.s();!(i=r.n()).done;){var s=i.value;this.shippingMethodIds.push(s.shopShippingMethod.id)}}catch(c){r.e(c)}finally{r.f()}}"1"!==t&&(this.productDataModel.isPriceNegotiable="false")},getProductCategoryList:function(t){var e=this,a={shopId:t||window.top.SHOP_ID||"",pageNumber:1,pageSize:1e3};T["a"].getProductCategoryList(a,(function(t){e.productCategoryManage=t.ProductCategoryManage,e.categoryOptions=O(t.ProductCategoryManage),e.loading=!1}),(function(t){console.log(t),e.$message.warning(t.errorMessage),e.loading=!1}))}}},z=B,N=(a("30de"),Object(C["a"])(z,f,g,!1,null,null,null)),j=N.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("biz-grid",{staticClass:"propetry-base-info"},[t.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}):t._e(),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"106px",size:"small",disabled:!t.isEdit}},[a("el-form-item",{attrs:{label:"商品介绍"}}),a("div",{staticClass:"h-editor"},[a("biz-editor",{attrs:{height:"400px",width:"430px"},model:{value:t.form.introduction,callback:function(e){t.$set(t.form,"introduction",e)},expression:"form.introduction"}})],1),a("el-form-item",{attrs:{label:"购买须知"}}),a("div",{staticClass:"h-editor"},[a("biz-editor",{attrs:{height:"400px",width:"430px"},model:{value:t.form.notice,callback:function(e){t.$set(t.form,"notice",e)},expression:"form.notice"}})],1),a("el-form-item",{attrs:{label:"产品售后"}}),a("div",{staticClass:"h-editor"},[a("biz-editor",{attrs:{height:"400px",width:"430px"},model:{value:t.form.afterSale,callback:function(e){t.$set(t.form,"afterSale",e)},expression:"form.afterSale"}})],1),a("el-form-item",{attrs:{label:"语音播报介绍","label-width":"135px"}}),a("div",{staticClass:"y-editor"},[a("el-input",{attrs:{type:"textarea",maxlength:"200",autosize:{minRows:5,maxRows:8}},model:{value:t.form.memo,callback:function(e){t.$set(t.form,"memo",e)},expression:"form.memo"}})],1)],1)],1)},L=[],G=a("40ae"),q={name:"CommodityMgmtBaseInfo",data:function(){return{isCreated:!1,operations:[{label:"保存",name:"update",type:"primary",auth:["admin:product.exchange.edit"]}],form:{introduction:"",notice:"",afterSale:"",memo:""}}},props:{id:{type:String},tabSelection:{type:String},open:{type:Boolean},isEdit:{type:Boolean,default:function(){return!0}}},watch:{tabSelection:function(t){"detail"===t&&""!==this.id&&this.refresh()},open:function(t){t||(this.form.introduction="",this.form.notice="",this.form.afterSale="",this.form.memo="")}},components:{BizSaveButton:y["a"],BizGrid:b["a"],BizEditor:G["a"]},created:function(){},computed:{},methods:{checkVideo:function(t){this.$message.warning(t)},operate:function(t){this[t]()},onSubmit:function(){console.log("submit!")},refresh:function(){var t=this,e={id:this.id};this.isCreated=!0,v["a"].queryProductDetail(e,(function(e){t.form.introduction=e.introduction,t.form.notice=e.notice,t.form.afterSale=e.afterSale,t.form.memo=e.memo,t.$nextTick((function(){t.isCreated=!1}))}),(function(t){console.log(t)}))},update:function(){var t=this,e={id:this.id,introduction:this.form.introduction,notice:this.form.notice,afterSale:this.form.afterSale,memo:this.form.memo};v["a"].updateProductDetail(e,(function(e){t.$message.success("操作成功")}),(function(e){""!==e.errorMessage&&t.$message.warning(e.errorMessage),console.log(e)}))}}},F=q,R=(a("bdcd"),Object(C["a"])(F,E,L,!1,null,null,null)),A=R.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("biz-grid",{staticClass:"commodity-mgmt-parameter"},[t.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}):t._e(),a("el-form",{ref:"form",attrs:{size:"small","label-width":"120px",disabled:!t.isEdit}},t._l(t.parameterGroups,(function(e){return a("div",{key:e.id},[a("el-form-item",{staticStyle:{"font-weight":"bold"},attrs:{label:e.name+"："}}),t._l(e.parameters,(function(e){return a("el-form-item",{key:e.id,attrs:{label:e.name+"：",value:e.id}},["1"===e.type?a("el-select",{staticStyle:{width:"80%"},attrs:{clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"parameter.value"}},t._l(t.configureOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.value}})})),1):"2"===e.type?a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"","allow-create":"",clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"parameter.value"}},t._l(t.assembleOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.value}})})),1):a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入参数"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"parameter.value"}})],1)}))],2)})),0),0===t.parameterGroups.length?a("div",{style:t.styleObject}):t._e()],1)},K=[],U=a("44e0"),H=a("f260"),J=a.n(H),W={name:"CommodityMgmtParameter",components:{BizSaveButton:y["a"],BizGrid:b["a"]},data:function(){return{operations:[{label:"保存",name:"save",type:"primary",auth:["admin:product.exchange.edit"]}],configureOptions:[{id:"0",name:"-",value:"-"},{id:"1",name:"●",value:"●"},{id:"2",name:"○",value:"○"}],assembleOptions:[{id:"0",name:"主-/副-",value:"主-/副-"},{id:"1",name:"主-/副●",value:"主-/副●"},{id:"2",name:"主-/副○",value:"主-/副○"},{id:"3",name:"主●/副-",value:"主●/副-"},{id:"4",name:"主●/副●",value:"主●/副●"},{id:"5",name:"主●/副○",value:"主●/副○"},{id:"6",name:"主○/副-",value:"主○/副-"},{id:"7",name:"主○/副●",value:"主○/副●"},{id:"8",name:"主○/副○",value:"主○/副○"},{id:"9",name:"前-/后-",value:"前-/后-"},{id:"10",name:"前-/后●",value:"前-/后●"},{id:"11",name:"前-/后○",value:"前-/后○"},{id:"12",name:"前●/后-",value:"前●/后-"},{id:"13",name:"前●/后●",value:"前●/后●"},{id:"14",name:"前●/后○",value:"前●/后○"},{id:"15",name:"前○/后-",value:"前○/后-"},{id:"16",name:"前○/后●",value:"前○/后●"},{id:"17",name:"前○/后○",value:"前○/后○"},{id:"18",name:"自动-",value:"自动-"},{id:"19",name:"自动●",value:"自动●"},{id:"20",name:"自动○",value:"自动○"},{id:"21",name:"手动-",value:"手动-"},{id:"22",name:"手动●",value:"手动●"},{id:"23",name:"手动○",value:"手动○"}],parameterGroups:[]}},props:{id:{type:String,required:!0},tabSelection:{type:String},open:{type:Boolean},isEdit:{type:Boolean,default:function(){return!0}}},watch:{tabSelection:function(t){"parameter"===t&&""!==this.id&&this.query()},open:function(t){t||(this.parameterGroups=[])}},created:function(){},computed:{styleObject:function(){return{position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",background:"url("+J.a+") 50% 50% / 300px no-repeat"}}},methods:{operate:function(t){this[t]()},query:function(){var t=this,e={id:this.id};U["a"].getParameterGroups(e,(function(e){t.parameterGroups=e.parameterGroups,console.log("获取商品参数成功")}),(function(e){""!==e.errorMessage&&t.$message.warning(e.errorMessage),console.log("获取商品参数失败",t.id)}))},save:function(){var t=this,e={id:this.id,parameterGroups:this.parameterGroups};U["a"].updateParameterGroups(e,(function(e){t.query(),t.$message.success("更新商品参数成功")}),(function(e){""!==e.errorMessage&&t.$message.warning(e.errorMessage),console.log("更新商品参数失败",t.id)}))}}},Q=W,X=(a("3230"),Object(C["a"])(Q,V,K,!1,null,null,null)),Y=X.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("biz-grid",{staticClass:"commodity-mgmt-attribute"},[t.isEdit?a("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}):t._e(),a("el-form",{ref:"form",attrs:{size:"small","label-width":"120px",disabled:!t.isEdit}},t._l(t.attributeDatas,(function(e){return a("el-form-item",{key:e.id,attrs:{label:e.name+"：",value:e.id}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择属性值",clearable:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},t._l(e.options,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)})),1),0===t.attributeDatas.length?a("div",{style:t.styleObject}):t._e()],1)},tt=[],et=a("1551"),at={name:"CommodityMgmtAttribute",components:{BizSaveButton:y["a"],BizGrid:b["a"]},data:function(){return{operations:[{label:"保存",name:"save",type:"primary",auth:["admin:product.exchange.edit"]}],attributeDatas:[]}},props:{id:{type:String,required:!0},tabSelection:{type:String},open:{type:Boolean},isEdit:{type:Boolean,default:function(){return!0}}},watch:{tabSelection:function(t){"attribute"===t&&""!==this.id&&this.query()},open:function(t){t||(this.attributeDatas=[])}},created:function(){},computed:{styleObject:function(){return{position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",background:"url("+J.a+") 50% 50% / 300px no-repeat"}}},methods:{operate:function(t){this[t]()},query:function(){var t=this,e={id:this.id};et["a"].getAttributeGroups(e,(function(e){t.attributeDatas=e.attributeDatas,console.log("获取商品属性成功")}),(function(e){""!==e.errorMessage&&t.$message.warning(e.errorMessage),console.log("获取商品属性失败",t.id)}))},save:function(){var t=this,e={id:this.id,attributeDatas:this.attributeDatas};et["a"].updateAttributeGroups(e,(function(e){t.query(),t.$message.success("更新商品属性成功")}),(function(e){""!==e.errorMessage&&t.$message.warning(e.errorMessage),console.log("更新商品属性失败",t.id)}))}}},ot=at,it=(a("15d9"),Object(C["a"])(ot,Z,tt,!1,null,null,null)),nt=it.exports,rt={name:"TerminalClassPopup",components:{BizPopupTabs:h["a"],BaseInfo:j,Detail:A,Parameter:Y,Attribute:nt},props:{baseInfo:{type:Object,default:function(){return{shop:{name:""}}}},open:{type:Boolean},isEdit:{type:Boolean},id:{type:String,default:""}},data:function(){return{tabSelection:"baseinfo"}},methods:{close:function(t){this.$emit("close",t)},operationSuccess:function(t){this.$emit("operationSuccess",t)},createdProductSuccess:function(t,e){this.$emit("createdProductSuccess",t,e)}},watch:{open:function(t){t||(this.tabSelection="baseinfo")}}},st=rt,ct=Object(C["a"])(st,d,p,!1,null,null,null),lt=ct.exports,ut={name:"VBeanHypermarketMgmt",data:function(){return{productCategoryId:"",dialogProductCategoryId:"",rowBaseInfo:{},loading:!1,defaultImg:"/resources/admin/images/default/product-default.png",errorImg:'this.src="/resources/admin/images/default/product-default.png"',refreshSign:!0,multipleSelection:[],editShopIds:[],itemId:"",open:!1,isEdit:!0,operations:[{label:"添加",name:"add",type:"primary",auth:["admin:product.exchange.add"]},{disabled:!0,label:"删除",name:"deleteList",type:"",auth:["admin:product.exchange.delete"]},{label:"刷新",name:"refresh",type:""}],filters:[{type:"cascader",label:"分类",name:"category",filterable:!1,value:[],options:[]},{type:"select",label:"品牌",value:"",options:[]},{type:"select",label:"店铺",value:"",options:[]},{type:"input",label:"",placeholder:"请输入商品名称",value:""}],dialogFilters:[{type:"input",label:"",placeholder:"请输入商品名称",value:""}],tableData:[],giftList:[],showDialog:!1,selectedGiftIds:[],selectionList:[],categoryDatas:[],categoryDialogDatas:[],dialogPagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},sortInfo:{}}},components:{VBeanPopup:lt,BizFlexTable:s["c"],BizDialogSelector:l["a"]},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])("Authority",["currentAuth"])),{},{hasAuthDel:function(){return this.currentAuth.includes("admin:product.exchange.delete")},hasAuthOn:function(){return this.currentAuth.includes("admin:product.exchange.on")},hasAuthOff:function(){return this.currentAuth.includes("admin:product.exchange.off")},hasAuthEdit:function(){return this.currentAuth.includes("admin:product.exchange.edit")}}),created:function(){this.getUser(),this.refresh(),this.queryFilters(),this.getEditableStores(),this.getDefalutImg();var t="您可选择商品设置为V豆兑换商品，如需编辑商品请至商品信息功能";this.$message({customClass:"motorists-club-activity__kpi",showClose:!0,message:t,duration:3e3})},mounted:function(){},methods:Object(r["a"])(Object(r["a"])({},Object(u["c"])(["getUser"])),{},{operate:function(t){this[t]()},canOnsale:function(t){return!!t.unionConfig&&(!!t.unionConfig.auditConfig&&"1"===t.unionConfig.auditConfig.onsaleable)},canOffsale:function(t){return!!t.unionConfig&&(!!t.unionConfig.auditConfig&&"1"===t.unionConfig.auditConfig.offsaleable)},refresh:function(){this.getList()},createdProductSuccess:function(t,e){this.itemId=t,this.rowBaseInfo.productType=e},rowClick:function(t){this.itemId=t.id,this.rowBaseInfo=t,this.isEdit=!1,this.open=!0},stateColor:function(t){return t.stock>5?"#333333":"#f56c6c"},toPrice:function(t){return t=parseFloat(t).toFixed(2).toString().split("."),t[0]=t[0].replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,"),t.join(".")},soldout:function(t){var e=this;this.$confirm("是否确认下架?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];if(t)a.push(t);else{var o,i=Object(n["a"])(e.multipleSelection);try{for(i.s();!(o=i.n()).done;){var r=o.value;a.push(r.id)}}catch(l){i.e(l)}finally{i.f()}}var s={ids:a,state:"false"};c["a"].soldoutAndPutaway(s,(function(t){e.$message({type:"success",message:"下架成功!"}),e.refresh()}),(function(t){console.log(t),e.$message.warning(t.errorMessage)}))})).catch((function(){}))},putaway:function(t){var e=this;this.$confirm("是否确认上架?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];if(t)a.push(t);else{var o,i=Object(n["a"])(e.multipleSelection);try{for(i.s();!(o=i.n()).done;){var r=o.value;a.push(r.id)}}catch(l){i.e(l)}finally{i.f()}}var s={ids:a,state:"true"};c["a"].soldoutAndPutaway(s,(function(t){e.$message({type:"success",message:"上架成功!"}),e.refresh()}),(function(t){console.log(t),e.$message.warning(t.errorMessage)}))})).catch((function(){}))},getEditableStores:function(){var t=this;w["a"].get(M["j"].editableStores,{resourceType:"2"}).then((function(e){t.editShopIds=[],e.dataList.map((function(e){t.editShopIds.push(e.id)}))})).catch((function(t){console.log(t),console.log("code错误")}))},getDefalutImg:function(){var t=this;w["a"].get("/admin/settings/settings.jhtml",{type:"displaySetting"}).then((function(e){e.settingList.defaultThumbnailProductImage&&e.settingList.defaultThumbnailProductImage&&(t.defaultImg=e.settingList.defaultThumbnailProductImage)})).catch((function(t){console.log(t),console.log("code错误")}))},getList:function(){var t=this,e={productCategoryId:this.productCategoryId,brandId:this.getSelectedBrandId(),searchShopId:this.getSelectedShopId(),searchValue:this.filters[3].value,shopId:window.top.SHOP_ID,pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize,orderProperty:this.sortInfo.column,orderDirection:this.sortInfo.sort,isExchange:"1"};this.loading=!0,c["a"].getCommodityList(e,(function(e){t.tableData=e.content,t.pagination.total=Number(e.total),t.loading=!1}),(function(e){console.log(e),t.loading=!1,t.$message.warning(e.errorMessage)}))},getGiftList:function(){var t=this,e={searchValue:this.dialogFilters[0].value,shopId:window.top.SHOP_ID,pageNumber:this.dialogPagination.currentPage,pageSize:this.dialogPagination.pageSize,orderProperty:this.sortInfo.column,orderDirection:this.sortInfo.sort,isExchange:"0"};this.loading=!0,c["a"].getCommodityList(e,(function(e){t.giftList=e.content,t.dialogPagination.total=Number(e.total),t.loading=!1}),(function(e){console.log(e),t.loading=!1,t.$message.warning(e.errorMessage)}))},filterDataChange:function(t){this.pagination.currentPage=1,this.refresh()},dialogFilterDataChange:function(t){this.dialogPagination.currentPage=1,this.getGiftList()},add:function(){this.giftList=[],this.dialogFilters[0].value="",this.getGiftList(),this.showDialog=!0},cascaderChange:function(t){this.productCategoryId=t[t.length-1],t.length>1&&""===this.productCategoryId&&(this.productCategoryId=t[t.length-2]),this.refresh()},activeItemChange:function(t){var e=this,a={shopId:this.getUser().shop.id,parentId:t.toString()};w["a"].get("/admin/shopProduct/productCategorys.jhtml",a).then((function(a){var o;e.setCategoryFilters(),e.filters[0].options.forEach((function(e){e.value===t[0]&&(o=e.children)})),a.dateList.forEach((function(t){o.push({value:t.id,label:t.name})}))})).catch((function(){}))},handleSelectionChange:function(t){this.operations[1].disabled=!0,(t.length>0||"shop"!==this.getUser().roleLevel)&&(this.operations[1].disabled=!1),this.multipleSelection=t},handleSizeChange:function(t){this.pagination.pageSize=t,this.refresh()},handleCurrentChange:function(t){this.pagination.currentPage=t,this.refresh()},selectionChange:function(t){var e=this;t.forEach((function(t){-1===e.selectionList.indexOf(t)&&e.selectionList.push(t)}))},confirmedProduct:function(t){var e=this;this.selectedGiftIds=t.concat(),this.selectedGiftList=[],this.selectionList.map((function(t){-1!==e.selectedGiftIds.indexOf(t.id)&&e.selectedGiftList.push(t)})),this.selectedGiftList.forEach((function(t){e.handleSelect(t),e.listProduct(t)}))},handleSelect:function(t){var e=!1;if(t.productId=t.id,t.id="",0!==this.tableData.length){for(var a=0;a<this.tableData.length;a++)if(this.tableData[a].productId===t.productId){this.tableData[a].amount=(Number(this.tableData[a].amount)+1).toString(),e=!0;break}e||this.tableData.push(t)}else this.tableData.push(t)},listProduct:function(t){var e=this,a={ids:[t.productId]};w["a"].post("/admin/product/exchangeProduct.jhtml",a).then((function(t){e.$message.success("添加成功"),e.getList()})).catch((function(t){t.errorMessage&&console.log(t.errorMessage)}))},dialogPageSizeChange:function(t){this.dialogPagination.pageSize=t,this.getGiftList()},dialogCurrentPageChange:function(t){this.dialogPagination.currentPage=t,this.getGiftList()},deleteVBean:function(t){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=[];a.push(t);var o={ids:a};w["a"].delete("/admin/product/exchangeProduct.jhtml",o).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.refresh()})).catch((function(t){t.errorMessage&&console.log(t.errorMessage)}))}))},deleteList:function(){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e,a=[],o=Object(n["a"])(t.multipleSelection);try{for(o.s();!(e=o.n()).done;){var i=e.value;a.push(i.id)}}catch(s){o.e(s)}finally{o.f()}var r={ids:a};w["a"].delete("/admin/product/exchangeProduct.jhtml",r).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.refresh()})).catch((function(t){t.errorMessage&&console.log(t.errorMessage)}))}))},queryFilters:function(){var t=this,e={shopId:window.top.SHOP_ID||""};c["a"].queryFilters(e,(function(e){t.categoryDatas=e.categoryDatas,t.setCategoryFilters(),t.setBrandFilters(e.brandDatas),t.setStoreFilters(e.storeDatas)}),(function(a){""!==a.errorMessage&&t.$message.error(a.errorMessage),console.log("获取过滤器失败",e)}))},handleSortChange:function(t){console.log("column",t),this.sortInfo={column:t.prop,sort:t.order?"ascending"===t.order?"asc":"desc":void 0},this.getList()},handleDialogSortChange:function(t){this.sortInfo={column:t.prop,sort:t.order?"ascending"===t.order?"asc":"desc":void 0},this.getGiftList()},setCategoryFilters:function(){var t=[{value:"",label:"全部"}];this.categoryDatas.forEach((function(e){t.push({value:e.id,label:e.name,children:[{label:"全部",value:""}]})})),this.filters[0].options=t},setBrandFilters:function(t){this.filters[1].options=t.map((function(t){return{value:t.id,label:t.name}})),this.filters[1].options.splice(0,0,{value:"",label:"全部"})},setStoreFilters:function(t){this.filters[2].options=t.map((function(t){return{value:t.id,label:t.name}})),this.filters[2].options.splice(0,0,{value:"",label:"全部"})},getSelectedBrandId:function(){return this.filters[1].value},getSelectedShopId:function(){return this.filters[2].value},getStatus:function(t){switch(t.state){case"0":return"已创建";case"1":return"已提交";case"2":return"已上架";case"3":return"已下架";default:break}return""}})},dt=ut,pt=(a("fcb4"),Object(C["a"])(dt,o,i,!1,null,null,null));e["default"]=pt.exports},"90d9":function(t,e,a){},9678:function(t,e,a){},af3f:function(t,e,a){"use strict";var o=a("697f");e["a"]=o["a"]},b680:function(t,e,a){"use strict";var o=a("23e7"),i=a("a691"),n=a("408a"),r=a("1148"),s=a("d039"),c=1..toFixed,l=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},p=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));o({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,a,o,s,c=n(this),p=i(t),h=[0,0,0,0,0,0],f="",g="0",m=function(t,e){var a=-1,o=e;while(++a<6)o+=t*h[a],h[a]=o%1e7,o=l(o/1e7)},b=function(t){var e=6,a=0;while(--e>=0)a+=h[e],h[e]=l(a/t),a=a%t*1e7},y=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==h[t]){var a=String(h[t]);e=""===e?a:e+r.call("0",7-a.length)+a}return e};if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(f="-",c=-c),c>1e-21)if(e=d(c*u(2,69,1))-69,a=e<0?c*u(2,-e,1):c/u(2,e,1),a*=4503599627370496,e=52-e,e>0){m(0,a),o=p;while(o>=7)m(1e7,0),o-=7;m(u(10,o,1),0),o=e-1;while(o>=23)b(1<<23),o-=23;b(1<<o),m(1,1),b(2),g=y()}else m(0,a),m(1<<-e,0),g=y()+r.call("0",p);return p>0?(s=g.length,g=f+(s<=p?"0."+r.call("0",p-s)+g:g.slice(0,s-p)+"."+g.slice(s-p))):g=f+g,g}})},bd3e:function(t,e,a){},bdcd:function(t,e,a){"use strict";var o=a("501c"),i=a.n(o);i.a},c8d2:function(t,e,a){var o=a("d039"),i=a("5899"),n="​᠎";t.exports=function(t){return o((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}},cc55:function(t,e,a){"use strict";var o=a("2497"),i=a("bc3a"),n=a.n(i),r=a("c596");e["a"]={getProductCategoryList:function(t,e,a){n.a.get(r["g"].commodity.getProductCategoryList,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},deleteProductCategory:function(t,e,a){n.a.delete(r["g"].commodity.deleteProductCategory,{data:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},getInputProductCategoryList:function(t,e,a){console.log("[---- dachao ----] [API-从平台导入-get] getInputProductCategoryList() params=",t),n.a.get(r["g"].commodity.getInputProductCategoryList,{params:t}).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))},saveInputProductCategoryList:function(t,e,a){console.log("[---- dachao ----] [API-从平台导入-post] saveInputProductCategoryList() params=",t),n.a.post(r["g"].commodity.saveInputProductCategoryList,t).then(Object(o["a"])(e,a)).catch((function(t){console.error(t)}))}}},d4c2:function(t,e,a){"use strict";var o=a("e725"),i=a.n(o);i.a},e725:function(t,e,a){},fcb4:function(t,e,a){"use strict";var o=a("58cb"),i=a.n(o);i.a},fcd3:function(t,e,a){}}]);