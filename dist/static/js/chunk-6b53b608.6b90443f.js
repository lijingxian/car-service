(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b53b608"],{"241b":function(e,t,n){"use strict";var o=n("ad12"),i=n.n(o);i.a},2497:function(e,t,n){"use strict";var o=n("4360"),i=n("a18c");t["a"]=function(e,t){return function(n){var a=n.data;"100"===a.resultCode?e(a):"709"===a.resultCode?(o["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",o["a"].getters.currentUser),i["a"].push("/login")):t(a)}}},4511:function(e,t,n){"use strict";var o=n("d8b9"),i=n.n(o);i.a},"5a2b":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"motorists-club-activity"},[n("biz-header",{attrs:{slot:"top",operations:e.operations},on:{operate:e.handleOperate},slot:"top"}),n("promise-list",{attrs:{list:e.tableData},on:{"item-click":e.handleClick,"remove-item":e.handleDelete}}),n("right-popup",{attrs:{slot:"float",open:e.open,itemId:e.itemId},on:{close:function(t){e.open=!1},operationSuccess:e.handlePperationSuccess},slot:"float"})],1)},i=[],a=n("5530"),s=n("f36f"),r=n("04d3"),c=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"promise-list"},[e._l(e.list,(function(t,i){return o("a",{key:i,staticClass:"promise-item",on:{click:function(n){return e.handleClick(t,n)}}},[t.icon?o("img",{attrs:{src:t.icon}}):o("img",{attrs:{src:n("624d")}}),o("div",{staticClass:"title"},[e._v(e._s(t.name))]),o("div",{staticClass:"close",on:{click:function(n){return e.handleClose(t,n)}}},[o("i",{staticClass:"el-icon-close"})])])})),0===e.list.length?o("div",{style:e.styleObject}):e._e()],2)},l=[],u=n("f260"),d=n.n(u),m={name:"PromiseList",props:{list:{type:Array}},data:function(){return{}},computed:{styleObject:function(){return{position:"absolute",top:"0px",bottom:0,left:0,right:0,margin:"auto",background:"url("+d.a+") 50% 50% / 350px no-repeat"}}},methods:{handleClick:function(e,t){this.$emit("item-click",e,t)},handleClose:function(e,t){t.stopPropagation(),this.$emit("remove-item",e,t)}}},p=m,f=(n("241b"),n("2877")),h=Object(f["a"])(p,c,l,!1,null,null,null),g=h.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("biz-popup-tabs",{attrs:{open:e.open},on:{close:e.close},model:{value:e.tabSelection,callback:function(t){e.tabSelection=t},expression:"tabSelection"}},[n("el-tab-pane",{attrs:{label:"承诺信息",name:"0"}},[n("promise-base-info",{attrs:{itemId:e.itemId},on:{operationSuccess:e.operationSuccess}})],1)],1)},v=[],y=n("7132"),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"promise-rating-mgmt__promise-base-info"},[n("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.operateHandler},slot:"top"}),n("el-form",{ref:"form",attrs:{size:"small","label-width":"110px",model:e.formModel,rules:e.rules}},[n("el-form-item",{attrs:{label:"承诺名称",prop:"name"}},[n("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.handleRemote,placeholder:"请输入承诺名称","trigger-on-focus":!0,"value-key":"name",maxlength:5},on:{select:e.handlePromiseChange},model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),n("el-form-item",{attrs:{label:"承诺图标"}},[n("biz-avatar-uploader-new",{model:{value:e.formModel.icon,callback:function(t){e.$set(e.formModel,"icon",t)},expression:"formModel.icon"}})],1),n("el-form-item",{attrs:{label:"承诺描述"}},[n("el-input",{attrs:{type:"textarea",maxlength:200,placeholder:"请输入承诺描述"},model:{value:e.formModel.description,callback:function(t){e.$set(e.formModel,"description",t)},expression:"formModel.description"}})],1)],1)],1)},w=[],$=(n("a4d3"),n("e01a"),n("99af"),n("4de4"),n("c975"),n("d81d"),n("b0c0"),n("d3b7"),n("8330")),j=n("c17f"),O=n("2497"),P=n("bc3a"),x=n.n(P),_=n("c596"),z={query:function(e,t,n){x.a.get(_["g"].shopRate.PromiseMgmt_promise,{params:e}).then(Object(O["a"])(t,n)).catch((function(e){console.error(e)}))},add:function(e,t,n){x.a.post(_["g"].shopRate.PromiseMgmt_promise,e).then(Object(O["a"])(t,n)).catch((function(e){console.error(e)}))},update:function(e,t,n){x.a.put(_["g"].shopRate.PromiseMgmt_promise,e).then(Object(O["a"])(t,n)).catch((function(e){console.error(e)}))}},S=n("1ab1"),C=function(){return{icon:""}},k={loading:!1,operations:[{label:"保存",name:"save",type:"primary"}],rules:{name:[{required:!0,message:"请输入承诺名称",trigger:"blur"}]},formModel:C()},B={query:function(){var e=this;this.loading=!0,z.query({id:this.itemId.id,terminalTypeId:"2"},(function(t){var n=Object.assign(e.getDefaultModel(),t.data);e.formModel=n,e.$refs.form.resetFields(),e.loading=!1}),(function(t){console.log(t),console.log("code错误"),e.loading=!1}))},getSaveParams:function(){return{id:this.formModel.id,name:this.formModel.name,icon:this.formModel.icon,description:this.formModel.description}},resetModel:function(){this.formModel=this.getDefaultModel()},getDefaultModel:function(){return C()},save:function(){var e=this;this.$refs.form.validate((function(t,n){if(!t)return!1;e.loading=!0,e.formModel.id?z.update(e.getSaveParams(),(function(t){e.$message.success("保存成功"),e.$emit("operationSuccess"),e.loading=!1}),(function(t){e.$message.warning(t.errorMessage),e.loading=!1})):z.add(e.getSaveParams(),(function(t){e.$message.success("保存成功"),e.$emit("operationSuccess"),e.loading=!1}),(function(t){e.$message.warning(t.errorMessage),e.loading=!1}))}))}},I={operateHandler:function(e){this[e]()},handleAddressChange:function(e){this.formModel.address=e},handleAreaChanged:function(e){this.formModel.area.id=e}},q={data:{promiseList:[]},events:{handlePromiseChange:function(e){this.$set(this.formModel,"icon",e.value),this.$set(this.formModel,"name",e.name),this.$refs.form.validate()},handleRemote:function(e,t){if(e){var n=this.promiseList.filter((function(t){return t.name.indexOf(e)>=0}));t(n)}else t(this.promiseList)}},methods:{queryPromiseList:function(){var e=this;S["a"].get(_["g"].systemSetting.promiseList,{}).then((function(t){console.log("承诺图标列表",t),e.itemList=t.content.map((function(e){return{name:e.name,value:e.icon,description:e.description}})),e.promiseList=[{name:"一次修好",value:"static/promises/yicixiuhao.png",description:""},{name:"一年保修",value:"static/promises/yinianbaoxiu.png",description:""},{name:"24小时救援",value:"static/promises/24xiaoshijiuyuan.png",description:""},{name:"低价保证",value:"static/promises/dijiabaozheng.png",description:""},{name:"就近安装",value:"static/promises/jiujinanzhuang.png",description:""},{name:"快速维修",value:"static/promises/kuaisuweixiu.png",description:""},{name:"无理由退换",value:"static/promises/wuliyoutuihuan.png",description:""},{name:"验收无忧",value:"static/promises/yanshouwuyou.png",description:""},{name:"正品保证",value:"static/promises/zhengpinbaozheng.png",description:""},{name:"专属接待",value:"static/promises/zhuanshujiedai.png",description:""},{name:"专业服务",value:"static/promises/zhuanyefuwu.png",description:""}].concat(e.itemList)})).catch((function(t){e.$message({title:"警告",message:t.errorMessage,type:"warning"})})).finally((function(){}))}}},L={name:"PromiseBaseInfo",components:{BizSaveButton:$["a"],BizGrid:s["a"],BizAvatarUploaderNew:j["b"]},props:{itemId:{type:Object,default:function(){return{id:""}}}},data:function(){return Object(a["a"])(Object(a["a"])({},k),q.data)},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},B),I),q.methods),q.events),watch:{itemId:function(e,t){e&&e.id?this.query():(this.resetModel(),this.$refs.form.resetFields())}},created:function(){this.itemId.id&&this.query(),this.queryPromiseList()}},D=L,T=(n("4511"),Object(f["a"])(D,M,w,!1,null,null,null)),R=T.exports,E={name:"PromiseMgmtPopup",components:{BizPopupTabs:y["a"],PromiseBaseInfo:R},props:{open:{type:Boolean},itemId:{type:Object,default:function(){return{id:""}}}},data:function(){return{tabSelection:"0"}},methods:{close:function(e){this.$emit("close",e)},operationSuccess:function(e){this.$emit("operationSuccess",e)}},watch:{open:function(e){var t=this;e&&setTimeout((function(){t.tabSelection="0"}),500)}}},N=E,A=Object(f["a"])(N,b,v,!1,null,null,null),H=A.exports,U={query:function(e,t,n){x.a.get(_["g"].shopRate.PromiseMgmt_query,{params:e}).then(Object(O["a"])(t,n)).catch((function(e){console.error(e)}))},delete:function(e,t,n){x.a.delete(_["g"].shopRate.PromiseMgmt_promise,{data:e}).then(Object(O["a"])(t,n)).catch((function(e){console.error(e)}))}},F={itemId:{id:""},open:!1,loading:!1,tableData:[],operations:[{label:"新增",name:"add",type:"primary"}]},G={getQueryParams:function(){return{shopId:window.top.SHOP_ID||""}},query:function(){var e=this;this.loading=!0,U.query(this.getQueryParams(),(function(t){e.tableData=t.content,e.loading=!1}),(function(t){console.log(t),console.log("code错误"),e.loading=!1}))},add:function(){this.open=!0,this.itemId={id:""}},deleteItem:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,U.delete({ids:e},(function(e){t.loading=!1,t.$message.success("删除成功"),t.query()}),(function(e){t.$message.warning(e.errorMessage),t.loading=!1}))}))}},J={handlePperationSuccess:function(){this.open=!1,this.query()},handleOperate:function(e){this[e]()},handleClick:function(e,t){this.itemId={id:e.id},this.open=!0},handleDelete:function(e,t){this.deleteItem([e.id])}},Q={name:"PromiseMgmt",components:{BizGrid:s["a"],BizHeader:r["d"],PromiseList:g,rightPopup:H},props:{},data:function(){return Object(a["a"])({},F)},methods:Object(a["a"])(Object(a["a"])({},G),J),watch:{},created:function(){this.query()},mounted:function(){this.$message({customClass:"motorists-club-activity__kpi",showClose:!0,message:"您可在此建立对子店铺的承诺体系",duration:3e3})}},K=Q,V=Object(f["a"])(K,o,i,!1,null,null,null);t["default"]=V.exports},"5b8e":function(e,t,n){"use strict";var o=n("9678"),i=n.n(o);i.a},7132:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"biz-fade-t"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[n("transition",{attrs:{name:"biz-fade-t-right"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"popup-content",style:e.contentStyle},[e._t("default")],2)])],1)])},i=[],a={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},s=a,r=(n("5b8e"),n("2877")),c=Object(r["a"])(s,o,i,!1,null,null,null),l=c.exports,u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"biz-popup-tabs"},[n("biz-popup",{attrs:{open:e.open,contentStyle:e.contentStyle},on:{close:e.close}},[n("el-tabs",{attrs:{type:"border-card",value:e.value},on:{"tab-click":e.tabClick}},[e._t("default")],2)],1)],1)},d=[],m=(n("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:l},methods:{close:function(){var e=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("close")}))},tabClick:function(e){this.$emit("input",e.name)}}}),p=m,f=(n("d4c2"),Object(r["a"])(p,u,d,!1,null,null,null)),h=f.exports;n.d(t,"a",(function(){return h}))},9678:function(e,t,n){},ad12:function(e,t,n){},d4c2:function(e,t,n){"use strict";var o=n("e725"),i=n.n(o);i.a},d8b9:function(e,t,n){},e725:function(e,t,n){}}]);