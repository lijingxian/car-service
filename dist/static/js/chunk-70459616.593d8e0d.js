(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70459616"],{2497:function(t,e,a){"use strict";var i=a("4360"),n=a("a18c");e["a"]=function(t,e){return function(a){var l=a.data;"100"===l.resultCode?t(l):"709"===l.resultCode?(i["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",i["a"].getters.currentUser),n["a"].push("/login")):e(l)}}},2692:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"marketing-statistics-activity-kpi-report"},[a("biz-chart",{attrs:{chartData:t.chartData,filters:t.filters,loading:t.loading,pagination:t.pagination},on:{filterDataChange:t.filterDataChange,handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange,refreshHandle:t.refreshHandle,exportExcle:t.exportExcle}},[a("div",{attrs:{slot:"list"},slot:"list"},["articleIns"===t.filters[1].value||"totalArticleCnt"===t.filters[1].value||"readIns"===t.filters[1].value||"totalReadCnt"===t.filters[1].value?a("biz-list",{ref:"list",staticStyle:{width:"100%"},attrs:{height:t.height,tableData:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"文章名称"}}),a("el-table-column",{attrs:{prop:"date",label:"发布时间"}}),a("el-table-column",{attrs:{prop:"shopName",label:"店铺名称"}}),a("el-table-column",{attrs:{prop:"incRead",label:"新增阅读数"}}),a("el-table-column",{attrs:{prop:"totalRead",label:"累计阅读数"}})],1):t._e(),"followIns"===t.filters[1].value||"totalFollowCnt"===t.filters[1].value?a("biz-list",{ref:"list",staticStyle:{width:"100%"},attrs:{height:t.height,tableData:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"店铺名称"}}),a("el-table-column",{attrs:{prop:"date",label:"统计时间"}}),a("el-table-column",{attrs:{prop:"incAttend",label:"新增关注数"}}),a("el-table-column",{attrs:{prop:"totalAttend",label:"累计关注数"}})],1):t._e()],1),a("div",{attrs:{slot:"description"},slot:"description"},[a("p",[t._v("新增文章数：统计期内，选定内容类型，发布的文章数")]),a("p",[t._v("累计文章数：截止统计期末，选定内容类型，已发布文章总数")]),a("p",[t._v("新增阅读数：统计期内，公众号文章/店铺宣传文章增加阅读数量")]),a("p",[t._v("累计阅读数：本周新增关注截止统计期末，公众号文章/店铺宣传文章累计阅读数")]),a("p",[t._v("新增关注数：统计期内，公众号文章/店铺新增关注人数")]),a("p",[t._v("累计关注数：截止统计期末，公众号文章/店铺累计关注人数")])])])],1)},n=[],l=(a("99af"),a("a15b"),a("a9e3"),a("d3b7"),a("562e")),s=a("2e1d"),r=a("7558"),o=a("ce0c"),c=a("c596"),p=a("1ab1"),h={name:"ActivityKpiReport",data:function(){return{today:"",loading:!0,height:"500",beginDate:o["a"].getMonthStartDate(),endDate:o["a"].getMonthEndDate(),viewType:"month",pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},tableData:[],filters:[{type:"select",label:"活动类型",value:"",options:[{value:"",label:"全部"},{value:"article",label:"店铺文章"}]},{type:"select",label:"统计指标",value:"articleIns",options:[{value:"articleIns",label:"新增文章数"},{value:"totalArticleCnt",label:"累计文章数"},{value:"readIns",label:"新增阅读数"},{value:"totalReadCnt",label:"累计阅读数"},{value:"followIns",label:"新增关注数"},{value:"totalFollowCnt",label:"累计关注数"}]}],kpiName:["当前","同比","环比"],chartData:{}}},methods:{init:function(){var t=this;this.loading=!0;var e={type:this.filters[0].value,viewType:this.viewType,indicator:this.filters[1].value,beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};s["a"].getContentKpi(e,(function(e){t.loading=!1,t.chartData=t.dataFormat(e)}),(function(e){t.loading=!1,t.$message.warning({showClose:!0,message:e.errorMessage}),console.log("ERR_INIT: ",e)}))},getTable:function(){var t=this,e={type:this.filters[0].value,viewType:this.viewType,indicator:this.filters[1].value,beginDate:this.beginDate,endDate:this.endDate,shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage};p["a"].get(c["g"].marketingStatistics.queryContentKpiTable,e).then((function(e){t.tableData=e.dataList,t.pagination.total=Number(e.total)})).catch((function(e){t.loading=!1,e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(e){t.loading=!1}))},refreshHandle:function(t){this.viewType=t.viewType,this.beginDate=t.date[0],this.endDate=t.date[1],this.init(),this.getTable()},filterDataChange:function(t){this.filters=t,this.init(),this.getTable()},handleSizeChange:function(t){this.pagination.pageSize=t,this.getTable()},handleCurrentChange:function(t){this.pagination.currentPage=t,this.getTable()},exportExcle:function(){var t=this,e={type:this.filters[0].value,viewType:this.viewType,indicator:this.filters[1].value,beginDate:this.beginDate,endDate:this.endDate};p["a"].get(c["g"].marketingStatistics.contentExport,e).then().catch((function(a){if(a.errorMessage||"没有符合条件的数据"===a)"没有符合条件的数据"===a?t.$message.warning("没有符合条件的数据"):(t.$message.warning(a.errorMessage),console.log("ERR_EXPORT: ",a));else{var i=[];for(var n in e)i.push("".concat(n,"=").concat(e[n]));var l="".concat(c["g"].marketingStatistics.contentExport,"?")+i.join("&");window.open(l)}}))},dataFormat:function(t){for(var e=[],a=0;a<t.indicators.length;a++)e.push({"日期":t.indicators[a].xValue,"当前":t.indicators[a].yValue,"同比":t.indicators[a].yYearOnYear,"环比":t.indicators[a].yMonthOnMonth});var i={type:"histogram",data:{columns:["日期",this.kpiName[0],this.kpiName[1],this.kpiName[2]],rows:e},settings:{showLine:[this.kpiName[1],this.kpiName[2]],yAxisName:["个"]}};return i}},computed:{},created:function(){this.init(),this.getTable()},components:{BizChart:l["a"],BizList:r["a"]}},g=h,u=(a("4507"),a("2877")),d=Object(u["a"])(g,i,n,!1,null,null,null);e["default"]=d.exports},"2e1d":function(t,e,a){"use strict";var i=a("2497"),n=a("bc3a"),l=a.n(n),s=a("c596");e["a"]={getCouponKpi:function(t,e,a){l.a.get(s["g"].marketingStatistics.queryCouponKpiReport,{params:t}).then(Object(i["a"])(e,a)).catch((function(t){console.error(t)}))},getActivityKpi:function(t,e,a){l.a.get(s["g"].marketingStatistics.queryActivityKpiReport,{params:t}).then(Object(i["a"])(e,a)).catch((function(t){console.error(t)}))},getContentKpi:function(t,e,a){l.a.get(s["g"].marketingStatistics.queryContentKpiReport,{params:t}).then(Object(i["a"])(e,a)).catch((function(t){console.error(t)}))}}},4507:function(t,e,a){"use strict";var i=a("5271"),n=a.n(i);n.a},5271:function(t,e,a){}}]);