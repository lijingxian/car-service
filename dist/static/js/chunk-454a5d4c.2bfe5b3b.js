(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-454a5d4c"],{"04b8":function(e,s,a){"use strict";s["a"]={isUnifiedSocialCreditCode:function(e){var s=/^[0-9A-Z]{18}$/;return s.test(e)},isMobile:function(e){var s=/^1(3|4|5|7|8|9)\d{9}$/;return s.test(e)},isNaturalNum:function(e){var s=/^(0|[1-9][0-9]*)$/;return s.test(e)},isIdCard:function(e){var s=/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;return s.test(e)},isPlateNum:function(e){var s=/([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF])|([DF]([A-HJ-NP-Z0-9])[0-9]{4})))|([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1})/;return s.test(e)},isPostNum:function(e){var s=/^[0-9]{6}$/;return s.test(e)},isMail:function(e){var s=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;return s.test(e)},isNum:function(e){var s=/^\d+$/;return s.test(e)}}},"87c6":function(e,s,a){"use strict";a.r(s);var t=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"merchants-mgmt-qua"},[e._m(0),a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"填写个人信息"}}),a("el-step",{attrs:{title:"填写企业信息"}})],1),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:e.isFirst,expression:"isFirst"}],ref:"personal",attrs:{size:"mini",rules:e.personalRules,model:e.personal,"label-width":"150px","inline-message":!0}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{minlength:"1",maxlength:"20",placeholder:"请输入姓名"},model:{value:e.personal.name,callback:function(s){e.$set(e.personal,"name",s)},expression:"personal.name"}})],1),a("el-form-item",{attrs:{label:"身份证号",prop:"idCartCode"}},[a("el-input",{attrs:{placeholder:"请输入身份证号"},model:{value:e.personal.idCartCode,callback:function(s){e.$set(e.personal,"idCartCode",s)},expression:"personal.idCartCode"}})],1),a("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.personal.mobile,callback:function(s){e.$set(e.personal,"mobile",s)},expression:"personal.mobile"}})],1),a("el-form-item",{attrs:{label:"手持身份证正面照片",required:!0}},[a("BizAvatarUploaderNew",{model:{value:e.personal.personImg,callback:function(s){e.$set(e.personal,"personImg",s)},expression:"personal.personImg"}})],1),a("el-form-item",{attrs:{label:"身份证正面照片",required:!0}},[a("BizAvatarUploaderNew",{model:{value:e.personal.idCartImgFront,callback:function(s){e.$set(e.personal,"idCartImgFront",s)},expression:"personal.idCartImgFront"}})],1),a("el-form-item",{attrs:{label:"身份证反面照片",required:!0}},[a("BizAvatarUploaderNew",{model:{value:e.personal.idCartImgBack,callback:function(s){e.$set(e.personal,"idCartImgBack",s)},expression:"personal.idCartImgBack"}})],1),a("el-form-item",{attrs:{label:"所在区域",prop:"areaId"}},[a("biz-area-select",{attrs:{areaId:e.personal.areaId},on:{areaChanged:e.areaChanged}})],1),a("el-form-item",{attrs:{label:"详细街道地址",prop:"address"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入详细地址"},model:{value:e.personal.address,callback:function(s){e.$set(e.personal,"address",s)},expression:"personal.address"}})],1),a("el-form-item",{attrs:{label:"店铺名称",prop:"shopName"}},[a("el-input",{attrs:{placeholder:"请输入店铺名称"},model:{value:e.personal.shopName,callback:function(s){e.$set(e.personal,"shopName",s)},expression:"personal.shopName"}})],1),a("el-form-item",{attrs:{label:"主营业务",prop:"majorBusiness"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入主营业务"},model:{value:e.personal.majorBusiness,callback:function(s){e.$set(e.personal,"majorBusiness",s)},expression:"personal.majorBusiness"}})],1),a("el-form-item",{attrs:{label:"提交"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitPersonal}},[e._v("提交个人资质")])],1)],1),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:!e.isFirst,expression:"!isFirst"}],ref:"company",attrs:{size:"mini",rules:e.companyRules,model:e.company,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"企业名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入您的企业名称"},model:{value:e.company.name,callback:function(s){e.$set(e.company,"name",s)},expression:"company.name"}})],1),a("el-form-item",{attrs:{label:"统一社会信用代码",prop:"bussinessLicenseCode"}},[a("el-input",{attrs:{placeholder:"请输入18位社会信用代码"},model:{value:e.company.bussinessLicenseCode,callback:function(s){e.$set(e.company,"bussinessLicenseCode",s)},expression:"company.bussinessLicenseCode"}})],1),a("el-form-item",{attrs:{label:"营业执照所在地",prop:"address"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入详细地址"},model:{value:e.company.address,callback:function(s){e.$set(e.company,"address",s)},expression:"company.address"}})],1),a("el-form-item",{attrs:{label:"营业期限",prop:"bussinessLicenseDue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",clearable:e.clearable,placeholder:"请选择营业期限","value-format":"yyyy-MM-dd"},model:{value:e.company.bussinessLicenseDue,callback:function(s){e.$set(e.company,"bussinessLicenseDue",s)},expression:"company.bussinessLicenseDue"}})],1),a("el-form-item",{attrs:{label:"注册资本",prop:"registeredCapital"}},[a("el-input-number",{attrs:{placeholder:"请输入注册资本",min:0},model:{value:e.company.registeredCapital,callback:function(s){e.$set(e.company,"registeredCapital",s)},expression:"company.registeredCapital"}})],1),a("el-form-item",{attrs:{label:"营业执照副本扫描件(加盖公章)",required:!0}},[a("BizAvatarUploaderNew",{model:{value:e.company.bussinessLicenseImg,callback:function(s){e.$set(e.company,"bussinessLicenseImg",s)},expression:"company.bussinessLicenseImg"}})],1),a("el-form-item",{attrs:{label:"提交"}},[a("el-button",{attrs:{type:"primary",disabled:e.completed},on:{click:e.onSubmitCompany}},[e._v("提交企业资质")])],1)],1)],1)},n=[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"title"},[e._v(" 资质信息填写 "),a("span",{staticStyle:{"font-size":"14px",color:"#ff7300"}},[e._v("(请务必填写真实有效信息)")])])}],r=(a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("841c"),a("bc3a")),i=a.n(r),o=a("ce2e"),l=a("04b8"),m=a("c17f"),c={data:function(){var e=function(e,s,a){var t=/^1\d{10}$/;t.test(s)?a():a(new Error("请输入正确的手机号码"))},s=function(e,s,a){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;t.test(s)?a():a(new Error("请输入正确的身份证"))},a=function(e,s,a){l["a"].isUnifiedSocialCreditCode(s)?a():a(new Error("请输入正确的统一社会信用代码"))};return{loading:!1,completed:!1,clearable:!1,active:0,isFirst:!0,isInit:!0,fileData:{type:"0"},personal:{name:"",idCartCode:"",mobile:"",areaId:"1568",personImg:"",idCartImgFront:"",idCartImgBack:"",address:"",shopName:"",majorBusiness:"",remark:"",state:"0"},company:{name:"",bussinessLicenseCode:"",bussinessLicenseImg:"",address:"",bussinessLicenseDue:"",registeredCapital:0,remark:"",state:"0"},investmentId:"",personalId:"",companyId:"",isCreated:!0,personalRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],idCartCode:[{required:!0,message:"请输入身份证号码",trigger:"blur"},{validator:s,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话号码",trigger:"blur"},{validator:e,trigger:"blur"}],areaId:[{required:!0,message:"请选择",trigger:"blur"}],address:[{required:!0,message:"请输入街道地址",trigger:"blur"}],shopName:[{required:!0,message:"请输入店铺名称",trigger:"blur"}],majorBusiness:[{required:!0,message:"请输入主营业务",trigger:"blur"}]},companyRules:{registeredCapital:[{required:!0,message:"请输入注册资本",trigger:"blur"}],name:[{required:!0,message:"请输入企业名称",trigger:"blur"}],bussinessLicenseCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{validator:a,trigger:"blur"}],address:[{required:!0,message:"请输入营业执照所在地",trigger:"blur"}],bussinessLicenseDue:[{required:!0,message:"请输入营业期限",trigger:"blur"}]}}},created:function(){this.getParams()},components:{BizAreaSelect:o["a"],BizAvatarUploaderNew:m["b"]},methods:{getParams:function(){this.investmentId=this.getQueryString("investmentId")||"",this.personalId=this.getQueryString("personalId")||"",this.companyId=this.getQueryString("companyId")||"",""!==this.personalId&&(this.isCreated=!1,this.getPersonalInfo()),""!==this.companyId&&(this.isCreated=!1,this.isFirst=!1,this.active++,this.getCompanyInfo())},handlePersonImgSuccess:function(e){this.personal.personImg=e},handleIdCartImgFrontSuccess:function(e){this.personal.idCartImgFront=e},handleIdCartImgBackSuccess:function(e){this.personal.idCartImgBack=e},handleBussinessLicenseImgSuccess:function(e){this.company.bussinessLicenseImg=e},areaChanged:function(e){this.personal.areaId=e},next:function(){this.active++>2&&(this.active=0)},getQueryString:function(e){var s=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(s);return null!=a?unescape(a[2]):null},ignorePersonal:function(){this.active++,this.isFirst=!1},onSubmitPersonal:function(){var e=this;""!==this.personal.personImg&&""!==this.personal.idCartImgFront&&""!==this.personal.idCartImgBack?this.$refs.personal.validate((function(s){if(!s)return!1;e.submitPersonal()})):this.$message({message:"请上传所需资质照片",type:"warning"})},submitPersonal:function(){var e=this,s={name:this.personal.name,idCartCode:this.personal.idCartCode,personImg:this.personal.personImg,idCartImgFront:this.personal.idCartImgFront,idCartImgBack:this.personal.idCartImgBack,areaId:this.personal.areaId,address:this.personal.address,mobile:this.personal.mobile,shopName:this.personal.shopName,majorBusiness:this.personal.majorBusiness,remark:this.personal.remark,state:this.personal.state};this.isCreated?s.investmentId=this.investmentId:s.id=this.personalId;var a=this.isCreated?"/personalInfo/create.jhtml":"/personalInfo/update.jhtml";i.a.get(a,{params:s}).then((function(s){"100"===s.data.resultCode&&(e.$message({message:"恭喜您，个人信息提交成功！",type:"success"}),e.isCreated&&(e.active++,e.isFirst=!1)),"errorMessage"in s.data&&e.$message({message:s.data.errorMessage,type:"warning"})})).catch((function(e){console.log(e)}))},onSubmitCompany:function(){var e=this;""!==this.company.bussinessLicenseImg?this.$refs.company.validate((function(s){if(!s)return!1;e.submitCompany()})):this.$message({message:"请填写所需资质照片",type:"warning"})},submitCompany:function(){var e=this,s={name:this.company.name,registeredCapital:this.company.registeredCapital,bussinessLicenseCode:this.company.bussinessLicenseCode,bussinessLicenseImg:this.company.bussinessLicenseImg,address:this.company.address,bussinessLicenseDue:this.company.bussinessLicenseDue,remark:""};this.isCreated?s.investmentId=this.investmentId:s.id=this.companyId;var a=this.isCreated?"/enterpriseInfo/create.jhtml":"/enterpriseInfo/update.jhtml";i.a.get(a,{params:s}).then((function(s){"100"===s.data.resultCode&&(e.$message({message:"恭喜您，企业信息提交成功！",type:"success"}),e.isCreated&&e.active++),"errorMessage"in s.data&&e.$message({message:s.data.errorMessage,type:"warning"})})).catch((function(e){console.log(e)}))},getPersonalInfo:function(){var e=this,s={investmentId:this.investmentId};this.loading=!0,i.a.get("/rest/investment/personalInfo.jhtml",{params:s}).then((function(s){var a=s.data;"100"===s.data.resultCode&&(e.personal.name=a.content.name,e.personal.mobile=a.content.mobile,e.personal.idCartCode=a.content.idCartCode,e.personal.personImg=a.content.personImg,e.personal.idCartImgFront=a.content.idCartImgFront,e.personal.idCartImgBack=a.content.idCartImgBack,e.personal.areaId=a.content.areaId,e.personal.address=a.content.address,e.personal.shopName=a.content.shopName,e.personal.majorBusiness=a.content.majorBusiness,e.personal.remark=a.content.remark,e.personal.state=a.content.state,e.updateId=a.content.id),"errorMessage"in s.data&&e.$message({message:s.data.errorMessage,type:"warning"}),e.loading=!1})).catch((function(e){console.log(e)}))},getCompanyInfo:function(){var e=this,s={investmentId:this.investmentId};this.loading=!0,i.a.get("/rest/investment/enterpriseInfo.jhtml",{params:s}).then((function(s){var a=s.data;"100"===s.data.resultCode&&(e.company.name=a.content.name,e.company.bussinessLicenseCode=a.content.bussinessLicenseCode,e.company.bussinessLicenseImg=a.content.bussinessLicenseImg,e.company.bussinessLicenseDue=a.content.bussinessLicenseDue,e.company.registeredCapital=a.content.registeredCapital,e.company.address=a.content.address,e.company.remark=a.content.remark,e.company.state=a.content.state),"errorMessage"in s.data&&e.$message({message:s.data.errorMessage,type:"warning"}),e.loading=!1})).catch((function(e){console.log(e)}))}}},d=c,p=(a("edca"),a("2877")),u=Object(p["a"])(d,t,n,!1,null,null,null);s["default"]=u.exports},d052:function(e,s,a){},edca:function(e,s,a){"use strict";var t=a("d052"),n=a.n(t);n.a}}]);