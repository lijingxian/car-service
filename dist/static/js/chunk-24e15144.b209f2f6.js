(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24e15144"],{1622:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"financial-company-mgmt"},[n("biz-flex-table",{ref:"table",attrs:{operations:e.operations,tableData:e.tableData,loading:e.loading,pagination:e.pagination},on:{operate:e.handleOperate,"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange,"selection-change":e.handleSelectionChange,"filter-data-change":e.handleFilterDataChange,"row-click":e.handleRowClick}},[n("el-table-column",{attrs:{prop:"name",label:"金融机构名称","min-width":"150"}}),n("el-table-column",{attrs:{label:"机构类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"===t.row.type?"金融":"保险")+" ")]}}])}),n("el-table-column",{attrs:{prop:"mobile",label:"电话","min-width":"100"}}),n("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"200"}}),n("el-table-column",{attrs:{label:"操作","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handleStopClick(n,t.row)}}},[e._v(" "+e._s("1"===t.row.isEnabled?"停用":"启用")+" ")]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handleDeleteClick(n,t.row)}}},[e._v(" 删除 ")])]}}])})],1),n("div",{attrs:{slot:"float"},slot:"float"},[n("right-popup",{attrs:{open:e.open,itemId:e.itemId},on:{close:function(t){e.open=!1},operationSuccess:e.handleOperationSuccess}})],1)],1)},i=[],o=(n("4160"),n("a9e3"),n("25eb"),n("d3b7"),n("159b"),n("5530")),s=n("04d3"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("biz-popup-tabs",{attrs:{open:e.open},on:{close:e.close},model:{value:e.tabSelection,callback:function(t){e.tabSelection=t},expression:"tabSelection"}},[n("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[n("finacial-company-base-info",{attrs:{itemId:e.itemId},on:{operationSuccess:e.operationSuccess}})],1)],1)},l=[],c=n("7132"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"financial-program-mgmt__base-info"},[n("biz-save-button",{attrs:{slot:"top",operations:e.operations},on:{operate:e.handleOperate},slot:"top"}),n("el-form",{ref:"form",attrs:{size:"small","label-width":"110px",model:e.formModel,rules:e.rules,"inline-message":!0}},[n("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入机构名称"},model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),n("el-form-item",{attrs:{label:"机构类型",prop:"type"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择机构类型",disabled:!!e.itemId.id},on:{change:e.typeChange},model:{value:e.formModel.type,callback:function(t){e.$set(e.formModel,"type",t)},expression:"formModel.type"}},e._l(e.typeList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[n("el-input",{attrs:{type:"phone",placeholder:"请输入手机号",maxlength:"11"},model:{value:e.formModel.mobile,callback:function(t){e.$set(e.formModel,"mobile",t)},expression:"formModel.mobile"}})],1),n("el-form-item",{attrs:{label:"地址",prop:"address"}},[n("el-input",{attrs:{placeholder:"请输入地址",maxlength:"100"},model:{value:e.formModel.address,callback:function(t){e.$set(e.formModel,"address",t)},expression:"formModel.address"}})],1),n("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{attrs:{title:"接口配置",name:"baseinfo"}},[n("el-form-item",{attrs:{label:"接收接口",prop:"receive"}},[n("el-input",{attrs:{placeholder:"请输入接收接口"},model:{value:e.formModel.receive,callback:function(t){e.$set(e.formModel,"receive",t)},expression:"formModel.receive"}})],1),n("el-form-item",{attrs:{label:"发送接口",prop:"post"}},[n("el-input",{attrs:{placeholder:"请输入发送接口"},model:{value:e.formModel.post,callback:function(t){e.$set(e.formModel,"post",t)},expression:"formModel.post"}})],1)],1)],1)],1)],1)},d=[],f=(n("b0c0"),n("f36f")),p=n("8330"),m=n("1ab1"),h=n("2f62"),g={typeList:[{value:"0",label:"金融"},{value:"1",label:"保险"}],areaList:[],activeNames:["baseinfo"],operations:[{label:"保存",name:"save",type:"primary"}]},b=function(){return{name:"",mobile:"",address:"",type:"0",isEnabled:"0",receive:"",post:""}},v={data:{loading:!1,formModel:b()},events:{typeChange:function(){this.$refs.form.clearValidate("type")},handleOperate:function(e){this[e]()}},methods:{initModel:function(e){e?this.formModel=Object.assign(this.getDefaultModel(),e):this.resetModel(),this.$refs.form.resetFields()},query:function(){var e=this;this.loading=!0,m["a"].get("/admin/financialInstitution/queryFinancialInstitution.jhtml",{id:this.itemId.id}).then((function(t){e.initModel(t.content)})).catch((function(t){t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))},resetModel:function(){this.formModel=this.getDefaultModel()},getDefaultModel:function(){return b()},handleAddressChange:function(e,t){this.$set(this.formModel,"address",e),this.$refs.form.clearValidate("address")},getSaveParams:function(){return{id:this.formModel.id,name:this.formModel.name,type:this.formModel.type,mobile:this.formModel.mobile,address:this.formModel.address,isEnabled:this.formModel.isEnabled,receive:this.formModel.receive,post:this.formModel.post}},save:function(){var e=this;this.$refs.form.validate((function(t,n){if(!t)return!1;e.loading=!0;var a=function(t){e.loading=!1,e.$message.success("保存成功"),e.formModel.id||(e.formModel.id=t.id),e.$emit("operationSuccess",e.formModel.id)},i=function(t){t.errorMessage&&e.$message.warning(t.errorMessage),e.loading=!1},o=function(t){e.loading=!1};e.formModel.id?m["a"].put("/admin/financialInstitution/updateFinancialInstitution.jhtml",e.getSaveParams()).then(a).catch(i).finally(o):m["a"].post("/admin/financialInstitution/createFinancialInstitution.jhtml",e.getSaveParams()).then(a).catch(i).finally(o)}))}}},y={name:"FinacialProgramBaseInfo",components:{BizSaveButton:p["a"],BizGrid:f["a"]},data:function(){return Object(o["a"])(Object(o["a"])(Object(o["a"])({},g),v.data),{},{rules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],type:[{required:!0,message:"请选择机构类型",trigger:"blur"}],mobile:[{pattern:/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,message:"手机号格式错误",trigger:"blur"}]}})},props:{itemId:{type:Object,default:function(){return{id:""}}}},computed:{},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(h["c"])(["getUser"])),v.methods),v.events),watch:{itemId:function(e,t){this.activeNames=["baseinfo"],e.id?this.query():this.initModel()}},created:function(){this.itemId.id&&this.query()}},I=y,M=(n("e8e7"),n("2877")),w=Object(M["a"])(I,u,d,!1,null,null,null),S=w.exports,$={name:"FinacialProgramPopup",components:{BizPopupTabs:c["a"],FinacialCompanyBaseInfo:S},props:{open:{type:Boolean},itemId:{type:Object,default:function(){return{id:""}}}},data:function(){return{tabSelection:"0",alertId:{id:""},showFailure:!0,showSign:!0}},methods:{close:function(e){this.$emit("close",e)},operationSuccess:function(e){this.$emit("operationSuccess",e)}}},x=$,C=Object(M["a"])(x,r,l,!1,null,null,null),O=C.exports,_={itemId:{id:""},selections:[],open:!1},N={loading:!1,tableData:[],operations:[{label:"新增",name:"add",type:"primary"},{label:"删除",name:"delete",type:"",disabled:!0},{label:"刷新",name:"refresh",type:""}],pagination:{pageSize:20,currentPage:1,pageSizes:[10,20,50,100],total:0},sortInfo:{}},j={getQueryParams:function(){return{shopId:window.top.SHOP_ID||"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.currentPage}},getKpi:function(){var e=this;m["a"].get("/admin/financialInstitution/queryFinancialInstitutionCount.jhtml",{shopId:window.top.SHOP_ID||""}).then((function(t){e.$message({customClass:"motorists-club-activity__kpi",showClose:!0,message:"已创建金融机构".concat(t.createdCount,"个"),duration:3e3})})).catch((function(t){e.$message.warning(t.errorMessage||"操作出现错误")}))},query:function(){var e=this;this.loading=!0,m["a"].get("/admin/financialInstitution/queryFinancialInstitutionList.jhtml",this.getQueryParams()).then((function(t){e.tableData=t.content,e.$set(e.pagination,"total",Number.parseInt(t.total))})).catch((function(t){console.log(t),console.log("code错误"),t.errorMessage&&e.$message.warning(t.errorMessage)})).finally((function(){e.loading=!1}))},refresh:function(){this.query()},deleteItem:function(e){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,m["a"].delete("/admin/financialInstitution/deleteFinancialInstitution.jhtml",{ids:e,shopId:window.top.SHOP_ID||""}).then((function(e){t.$message.success("删除成功"),t.query()})).catch((function(e){console.log(e),console.log("code错误"),e.errorMessage&&t.$message.warning(e.errorMessage)})).finally((function(){t.loading=!1}))}))},delete:function(){if(this.selections&&this.selections.length>0){var e=[];this.selections.forEach((function(t){e.push(t.id)})),this.deleteItem(e)}else this.$message("请选择一条数据")},add:function(){this.defaultTab="0",this.open=!0,this.itemId={id:""}}},k={handleOperationSuccess:function(e){this.itemId={id:e},this.query()},handleOperate:function(e){this[e]()},handlePageSizeChange:function(e){this.pagination.pageSize=e,this.pagination.currentPage=1,this.query()},handleCurrentPageChange:function(e){this.pagination.currentPage=e,this.query()},handleSelectionChange:function(e){this.selections=e,this.operations[1].disabled=!0,e.length>0&&(this.operations[1].disabled=!1)},handleFilterDataChange:function(){this.query()},handleRowClick:function(e,t,n){this.defaultTab="0",this.itemId={id:String(e.id)},this.open=!0},handleStopClick:function(e,t){var n=this;e.stopPropagation(),this.$confirm("是否确认执行此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.loading=!0;var e="";e="0"===t.isEnabled?"1":"0";var a={isEnabled:e,id:t.id};m["a"].post("/admin/financialInstitution/enableFinancialInstitution.jhtml",a).then((function(e){n.$message.success("操作成功"),n.query()})).catch((function(e){console.log(e),console.log("code错误"),e.errorMessage&&n.$message.warning(e.errorMessage)})).finally((function(){n.loading=!1}))}))},handleDeleteClick:function(e,t){e.stopPropagation(),this.deleteItem([t.id])}},P={name:"FinacialProgramMgmt",components:{BizFlexTable:s["c"],RightPopup:O},props:{},data:function(){return Object(o["a"])(Object(o["a"])({},_),N)},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(h["c"])(["getUser"])),j),k),created:function(){this.query(),this.getKpi()}},z=P,E=Object(M["a"])(z,a,i,!1,null,null,null);t["default"]=E.exports},"25eb":function(e,t,n){var a=n("23e7"),i=n("c20d");a({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),i=n("5899"),o="["+i+"]",s=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),l=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(r,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5b8e":function(e,t,n){"use strict";var a=n("9678"),i=n.n(a);i.a},7132:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"biz-fade-t"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[n("transition",{attrs:{name:"biz-fade-t-right"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"popup-content",style:e.contentStyle},[e._t("default")],2)])],1)])},i=[],o={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},s=o,r=(n("5b8e"),n("2877")),l=Object(r["a"])(s,a,i,!1,null,null,null),c=l.exports,u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"biz-popup-tabs"},[n("biz-popup",{attrs:{open:e.open,contentStyle:e.contentStyle},on:{close:e.close}},[n("el-tabs",{attrs:{type:"border-card",value:e.value},on:{"tab-click":e.tabClick}},[e._t("default")],2)],1)],1)},d=[],f=(n("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:c},methods:{close:function(){var e=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("close")}))},tabClick:function(e){this.$emit("input",e.name)}}}),p=f,m=(n("d4c2"),Object(r["a"])(p,u,d,!1,null,null,null)),h=m.exports;n.d(t,"a",(function(){return h}))},9678:function(e,t,n){},a9e3:function(e,t,n){"use strict";var a=n("83ab"),i=n("da84"),o=n("94ca"),s=n("6eeb"),r=n("5135"),l=n("c6b6"),c=n("7156"),u=n("c04e"),d=n("d039"),f=n("7c73"),p=n("241c").f,m=n("06cf").f,h=n("9bf2").f,g=n("58a8").trim,b="Number",v=i[b],y=v.prototype,I=l(f(y))==b,M=function(e){var t,n,a,i,o,s,r,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=g(c),t=c.charCodeAt(0),43===t||45===t){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+c}for(o=c.slice(2),s=o.length,r=0;r<s;r++)if(l=o.charCodeAt(r),l<48||l>i)return NaN;return parseInt(o,a)}return+c};if(o(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(I?d((function(){y.valueOf.call(n)})):l(n)!=b)?c(new v(M(t)),n,S):M(t)},$=a?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;$.length>x;x++)r(v,w=$[x])&&!r(S,w)&&h(S,w,m(v,w));S.prototype=y,y.constructor=S,s(i,b,S)}},c20d:function(e,t,n){var a=n("da84"),i=n("58a8").trim,o=n("5899"),s=a.parseInt,r=/^[+-]?0[Xx]/,l=8!==s(o+"08")||22!==s(o+"0x16");e.exports=l?function(e,t){var n=i(String(e));return s(n,t>>>0||(r.test(n)?16:10))}:s},d4c2:function(e,t,n){"use strict";var a=n("e725"),i=n.n(a);i.a},d8b2:function(e,t,n){},e725:function(e,t,n){},e8e7:function(e,t,n){"use strict";var a=n("d8b2"),i=n.n(a);i.a}}]);