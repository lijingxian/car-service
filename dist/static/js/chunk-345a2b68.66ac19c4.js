(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-345a2b68"],{"20e4":function(t,a,e){"use strict";var i=e("5625"),o=e.n(i);o.a},2147:function(t,a,e){},2429:function(t,a,e){},2497:function(t,a,e){"use strict";var i=e("4360"),o=e("a18c");a["a"]=function(t,a){return function(e){var r=e.data;"100"===r.resultCode?t(r):"709"===r.resultCode?(i["a"].commit("updateUser",{shop:{}}),console.log("未登录: ",i["a"].getters.currentUser),o["a"].push("/login")):a(r)}}},"2c056":function(t,a,e){"use strict";var i=e("7a79"),o=e.n(i);o.a},3298:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("biz-grid",{staticClass:"platform-category-mgmt"},[e("biz-header",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operate},slot:"top"}),e("expand-table",{ref:"expandTable",attrs:{data:t.tableData,loading:t.loading},on:{"expand-change":t.expandChange,deleteCategory:t.deleteCategory,moveUp:t.moveUp,moveDown:t.moveDown,"row-click":t.rowClick,"selection-change":t.handleSelectionChange}}),e("biz-pagination",{attrs:{slot:"bottom",pagination:t.pagination},slot:"bottom"}),e("platform-category-mgmt-popup",{attrs:{slot:"float",open:t.open,itemId:t.itemId,tabName:t.tabName},on:{close:function(a){t.open=!1,t.itemId=""},operationSuccess:t.operationSuccess,createdCategorySuccess:t.createdCategorySuccess},slot:"float"})],1)},o=[],r=(e("c975"),e("d81d"),e("a9e3"),e("b85c")),n=e("5530"),s=e("04d3"),c=e("2497"),l=e("bc3a"),u=e.n(l),d=e("c596"),p={getPlatformCategoryList:function(t,a,e){u.a.get(d["g"].systemSetting.getPlatformCategoryList,{params:t}).then(Object(c["a"])(a,e)).catch((function(t){console.error(t)}))},deletePlatformCategory:function(t,a,e){u.a.delete(d["g"].systemSetting.deletePlatformCategory,{data:t}).then(Object(c["a"])(a,e)).catch((function(t){console.error(t)}))}},f=e("2f62"),m=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("biz-popup-tabs",{attrs:{open:t.open},on:{close:t.close},model:{value:t.clickTabName,callback:function(a){t.clickTabName=a},expression:"clickTabName"}},[e("el-tab-pane",{attrs:{label:"分类",name:"Category"}},[e("platform-category-setting",{attrs:{open:t.open,itemId:t.itemId},on:{operationSuccess:t.operationSuccess,createdCategorySuccess:t.createdCategorySuccess}})],1),t.itemId?e("el-tab-pane",{attrs:{label:"参数",name:"Parameter"}},[e("parameter-setting",{attrs:{itemId:t.itemId},on:{operationSuccess:t.operationSuccess}})],1):t._e(),t.itemId?e("el-tab-pane",{attrs:{label:"属性",name:"Attribute"}},[e("attribute-setting",{attrs:{itemId:t.itemId},on:{operationSuccess:t.operationSuccess}})],1):t._e(),t.itemId?e("el-tab-pane",{attrs:{label:"规格",name:"Specification"}},[e("specification-setting",{attrs:{itemId:t.itemId},on:{operationSuccess:t.operationSuccess}})],1):t._e()],1)},h=[],g=e("7132"),D=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("biz-grid",{staticClass:"platform-category-setting"},[e("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operateHandler},slot:"top"}),e("el-form",{ref:"form",attrs:{size:"small","label-width":"110px",model:t.productCategory,rules:t.rules}},[e("el-form-item",{attrs:{label:"分类名称:",prop:"name"}},[e("el-input",{model:{value:t.productCategory.name,callback:function(a){t.$set(t.productCategory,"name",a)},expression:"productCategory.name"}})],1),e("el-form-item",{attrs:{label:"上级分类:",prop:"parentId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择上级分类",disabled:t.hasChild()},on:{change:t.changeParentId},model:{value:t.productCategory.parentId,callback:function(a){t.$set(t.productCategory,"parentId",a)},expression:"productCategory.parentId"}},t._l(t.productCategoryList,(function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(!0===a.topCategory?a.name:""))]),e("span",{staticStyle:{float:"right"}},[t._v(t._s(!1===a.topCategory?a.name:""))])])})),1)],1),e("el-form-item",{attrs:{label:"类型:",prop:"type"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型",disabled:t.hasParent()},model:{value:t.productCategory.type,callback:function(a){t.$set(t.productCategory,"type",a)},expression:"productCategory.type"}},t._l(t.typeList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"logo：",prop:"logo"}},[e("BizAvatarUploaderNew",{model:{value:t.productCategory.logo,callback:function(a){t.$set(t.productCategory,"logo",a)},expression:"productCategory.logo"}})],1)],1)],1)},b=[],v=(e("c740"),e("4160"),e("b0c0"),e("159b"),e("f36f")),y=e("8330"),w=e("c17f"),L={getPlatformCategory:function(t,a,e){u.a.get(d["g"].systemSetting.getPlatformCategory,{params:t}).then(Object(c["a"])(a,e)).catch((function(t){console.error(t)}))},savePlatformCategory:function(t,a,e){u.a.post(d["g"].systemSetting.savePlatformCategory,t).then(Object(c["a"])(a,e)).catch((function(t){console.error(t)}))},updatePlatformCategory:function(t,a,e){u.a.put(d["g"].systemSetting.updatePlatformCategory,t).then(Object(c["a"])(a,e)).catch((function(t){console.error(t)}))}},S={name:"PlatformCategorySetting",components:{BizAvatarUploaderNew:w["b"],BizSaveButton:y["a"],BizGrid:v["a"]},data:function(){return{operations:[{label:"保存",name:"save",type:"primary"}],rules:{name:[{required:!0,message:"请输入分类名称",trigger:["blur","change"]}],parentId:[{required:!0,message:"请选择上级分类",trigger:["blur","change"]}],type:[{required:!0,message:"请选择类型",trigger:["blur","change"]}]},productCategory:this.getDefaultProductCategory(),productCategoryList:[],allCategoryList:[],typeList:[]}},props:{itemId:{type:String},open:{type:Boolean}},created:function(){},methods:{query:function(){console.log("CategorySetting::query() itemId:",this.itemId),this.itemId?this.queryWidthId(Number(this.itemId)):this.queryWidthOutId()},queryWidthId:function(t){var a=this,e={id:t};L.getPlatformCategory(e,(function(t){a.allCategoryList=t.productCategoryTree,a.productCategoryList=a.getTopCategoryList(t.productCategoryTree),a.typeList=t.productCategoryType;var e=t.productCategory;e.parentId=""===t.productCategory.parentId?"-1":t.productCategory.parentId,e.sort="null"===t.productCategory.sort?"":t.productCategory.sort,a.productCategory=e}),(function(e){console.log("queryWidthId",t),console.log(e),a.$message.warning(e.errorMessage)}))},queryWidthOutId:function(){var t=this,a={id:""};L.getPlatformCategory(a,(function(a){t.allCategoryList=a.productCategoryTree,t.productCategoryList=t.getTopCategoryList(a.productCategoryTree),t.typeList=a.productCategoryType,t.productCategory=t.getDefaultProductCategory()}),(function(a){console.log("queryWidthOutId"),console.log(a),t.$message.warning(a.errorMessage)}))},getDefaultProductCategory:function(){return{id:"",name:"",type:"",sort:"",parentId:"",topCategory:""}},getDefaultTopCategory:function(){return{id:"-1",name:"顶级分类",type:"",sort:"",parentId:"-1",topCategory:!0}},getTopCategoryList:function(t){var a=[];a.push(this.getDefaultTopCategory());var e,i=Object(r["a"])(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;!0===o.topCategory&&a.push(o)}}catch(n){i.e(n)}finally{i.f()}return a},operateHandler:function(t){this[t]()},save:function(){var t=this;console.log("save:",this.productCategory),this.$refs.form.validate((function(a){if(!a)return!1;var e=t.getSaveParams();if(t.hasSameNameProductCategory(e))return t.$message.warning("分类名称已存在"),!1;t.productCategory.id?L.updatePlatformCategory(e,(function(a){t.$message.success("更新分类成功"),t.$emit("operationSuccess"),t.query()}),(function(a){console.log("更新分类失败 id:",t.productCategory.id),t.$message.warning(a.errorMessage)})):L.savePlatformCategory(e,(function(a){t.$message.success("添加分类成功"),t.$emit("operationSuccess"),t.$emit("createdCategorySuccess",a.id)}),(function(a){console.log("添加分类失败"),t.$message.warning(a.errorMessage)}))}))},getSaveParams:function(){return{id:"-1"===this.productCategory.id?"":this.productCategory.id,name:this.productCategory.name,type:this.productCategory.type,sort:this.productCategory.sort,logo:this.productCategory.logo,parentId:"-1"===this.productCategory.parentId?"":this.productCategory.parentId,topCategory:this.productCategory.topCategory}},hasSameNameProductCategory:function(t){var a=this.allCategoryList.findIndex((function(a){return a.name===t.name}));return-1!==a&&this.allCategoryList[a].id!==t.id},changeParentId:function(t){var a=this;this.allCategoryList.forEach((function(e){e.id===t&&(a.productCategory.type=e.type)}))},hasChild:function(){var t=this;if(""===this.productCategory.id||"-1"===this.productCategory.id)return!1;var a=this.allCategoryList.findIndex((function(a){return a.parentId===t.productCategory.id}));return-1!==a},hasParent:function(){return"-1"!==this.productCategory.parentId&&""!==this.productCategory.parentId}},computed:{},watch:{itemId:function(t){!0===this.open&&this.query()},open:function(t){t?""===this.itemId&&this.query():(this.productCategory=this.getDefaultProductCategory(),this.productCategoryList=[],this.typeList=[],this.allCategoryList=[])}}},C=S,I=(e("20e4"),e("2877")),P=Object(I["a"])(C,D,b,!1,null,null,null),x=P.exports,V=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("biz-grid",{staticClass:"category-mgmt__parameter-setting"},[t.isEdit?e("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operateHandler},slot:"top"}):t._e(),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.parameterDataList,size:"small"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{prop:"name",label:"参数分类","min-width":"100"}}),e("el-table-column",{attrs:{prop:"parameters",label:"参数"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.parameters,(function(e,i){return[t._v(" "+t._s(e.name)+" "),i<a.row.parameters.length-1?[t._v(t._s(t.separator))]:t._e()]}))]}}])}),e("el-table-column",{attrs:{prop:"title",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"biz-customcol"},[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){e.stopPropagation(),a.row.id!==t.parameterDataList[0].id&&t.moveUp(a.row)}}},[t._v("上移")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){e.stopPropagation(),a.row.id!==t.parameterDataList[t.parameterDataList.length-1].id&&t.moveDown(a.row)}}},[t._v("下移")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.rowDeleteClickHandler(a.row)}}},[t._v(" 删除 ")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.rowEditClickHandler(a.row)}}},[t._v(" 编辑 ")])],1)]}}])})],1),e("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showParameterDataEditor,expression:"showParameterDataEditor"}],ref:"parameterDataForm",attrs:{size:"small","label-width":"110px",model:t.parameterData,rules:t.parameterDataFormRules}},[e("el-form-item",{attrs:{prop:"name",label:"名称:"}},[e("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.parameterData.name,callback:function(a){t.$set(t.parameterData,"name",a)},expression:"parameterData.name"}})],1),e("el-form-item",{attrs:{prop:"parameters",label:"参数"}},[t._l(t.parameterData.parameters,(function(a){return e("el-tag",{key:a.id,staticStyle:{"margin-right":"5px"},attrs:{size:"small",closable:"","disable-transitions":!0,type:"warning"},on:{close:function(e){return t.handleTagClose(a)}},nativeOn:{click:function(e){return t.handleTagClick(a)}}},[t._v(" "+t._s(a.name)+" ")])})),e("el-button",{attrs:{icon:"el-icon-plus",size:"mini"},on:{click:function(a){return a.stopPropagation(),t.handleAddParameterInfo(a)}}})],2)],1),e("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showParameterInfoEditor,expression:"showParameterInfoEditor"}],ref:"parameterInfoForm",attrs:{size:"small","label-width":"110px",model:t.parameterInfo,rules:t.parameterInfoFormRules}},[e("el-form-item",{attrs:{prop:"name",label:"参数名称: "}},[e("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:t.parameterInfo.name,callback:function(a){t.$set(t.parameterInfo,"name",a)},expression:"parameterInfo.name "}})],1),e("el-form-item",{attrs:{prop:"type",label:"类型: "}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择型"},model:{value:t.parameterInfo.type,callback:function(a){t.$set(t.parameterInfo,"type",a)},expression:"parameterInfo.type "}},t._l(t.parameterInfoTypeList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)},E=[],A=(e("4de4"),e("8316")),_=e("1ab1"),$={name:"ParameterSetting",components:{BizSaveButton:y["a"],BizGrid:v["a"]},data:function(){return{operations:[{label:"添加",name:"add",type:"primary"},{label:"保存",name:"save",type:"primary"}],parameterDataFormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},parameterInfoFormRules:{name:[{required:!0,message:"请输入参数名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:["blur","change"]}]},showParameterDataEditor:!1,showParameterInfoEditor:!1,parameterInfoTypeList:[],parameterDataList:[],dataList:[],parameterData:this.getDefaultParameterData(),parameterInfo:this.getDefaultParameterInfo(),separator:"、"}},computed:{},props:{itemId:{type:String},isEdit:{type:Boolean,default:function(){return!0}}},created:function(){this.query()},methods:{handleSelectionChange:function(t){this.operations[1].disabled=!0,t.length>0&&(this.operations[1].disabled=!1)},showUp:function(t){return!this.parameterDataList[0]||t.id!==this.parameterDataList[0].id},showDown:function(t){return!this.parameterDataList[0]||t.id!==this.parameterDataList[this.parameterDataList.length-1].id},moveUp:function(t){var a=this;this.loading=!0;var e=t.sort;this.parameterDataList.map((function(i){i.id===t.id&&(a.parameterDataList[a.parameterDataList.indexOf(t)].sort=a.parameterDataList[a.parameterDataList.indexOf(t)-1].sort,a.parameterDataList[a.parameterDataList.indexOf(t)-1].sort=e,a.dataList=[a.parameterDataList[a.parameterDataList.indexOf(t)],a.parameterDataList[a.parameterDataList.indexOf(t)-1]],a.sort())}))},moveDown:function(t){var a=this;this.loading=!0;var e=t.sort;this.dataList=[],this.parameterDataList.map((function(i){i.id===t.id&&(a.parameterDataList[a.parameterDataList.indexOf(t)].sort=a.parameterDataList[a.parameterDataList.indexOf(t)+1].sort,a.parameterDataList[a.parameterDataList.indexOf(t)+1].sort=e,a.dataList=[a.parameterDataList[a.parameterDataList.indexOf(t)],a.parameterDataList[a.parameterDataList.indexOf(t)+1]],a.sort())}))},sort:function(){var t=this;_["a"].put("/admin/parameter_group/parameterGroupSort.jhtml",this.dataList).then((function(a){t.query(),t.loading=!1})).catch((function(a){t.loading=!1,t.$message.warning(a.errorMessage||"操作出现错误")}))},getDefaultParameterData:function(){return{id:"",name:"",sort:"",parameters:[],productCategoryId:""}},getDefaultParameterInfo:function(){return{id:"",name:"",type:""}},operateHandler:function(t){this[t]()},rowEditClickHandler:function(t){var a=this;this.$refs.parameterDataForm.clearValidate(),!1===this.showParameterDataEditor&&(this.showParameterDataEditor=!0),this.parameterData.id!==t.id&&(this.parameterData=this.changeParameterData(t),this.hideParameterInfoEditor()),this.$nextTick((function(){a.$refs.parameterDataForm.$el["0"].focus()}))},changeParameterData:function(t){return{id:t.id,name:t.name,sort:t.sort,parameters:t.parameters,productCategoryId:t.productCategoryId}},add:function(){var t=this;!1===this.showParameterDataEditor&&(this.showParameterDataEditor=!0),this.hideParameterInfoEditor(),this.parameterData=this.getDefaultParameterData(),this.$nextTick((function(){t.$refs.parameterDataForm.$el["0"].focus()}))},hideParameterDataEditor:function(){!0===this.showParameterDataEditor&&(this.showParameterDataEditor=!1,this.parameterData=this.getDefaultParameterData(),this.hideParameterInfoEditor())},hideParameterInfoEditor:function(){!0===this.showParameterInfoEditor&&(this.showParameterInfoEditor=!1,this.parameterInfo=this.getDefaultParameterInfo())},save:function(){!0===this.showParameterInfoEditor?this.handlerParameterInfo():!0===this.showParameterDataEditor&&this.handlerParameterData()},handlerParameterData:function(){var t=this;this.$refs.parameterDataForm.validate((function(a){if(!a)return!1;var e=t.getParameterData();if(t.hasSameNameParameterData(e))return t.$message.warning("参数分类名称已存在"),!1;e.id?(console.log("parameterData变更"),t.updateParameterData(e)):(console.log("parameterData添加"),t.saveParameterData(e))}))},handlerParameterInfo:function(){var t=this;this.$refs.parameterDataForm.validate((function(a){if(!a)return!1;t.$refs.parameterInfoForm.validate((function(a){if(!a)return!1;var e=t.getParameterInfo(),i=t.getParameterData(),o=i.parameters.findIndex((function(t){return t.id===e.id}));return t.hasSameNameParameterData(i)?(t.$message.warning("参数分类名称已存在"),!1):t.hasSameNameParameterInfo(e,i.parameters)?(t.$message.warning("参数名称已存在"),!1):(-1===o?(console.log("ParameterInfo添加"),i.parameters.push(e)):(console.log("ParameterInfo变更"),i.parameters[o]=e),void(i.id?t.updateParameterData(i):t.saveParameterData(i)))}))}))},handleTagClose:function(t){var a=this,e=this.parameterDataList.findIndex((function(t){return t.id===a.parameterData.id}));if(-1!==e){var i={id:this.parameterDataList[e].id,name:this.parameterDataList[e].name,sort:this.parameterDataList[e].sort,parameters:this.parameterDataList[e].parameters,productCategoryId:this.parameterDataList[e].productCategoryId};i.parameters=i.parameters.filter((function(a){return a.id!==t.id})),this.hideParameterInfoEditor(),this.updateParameterData(i)}else console.log("关闭Tag所属的参数在参数列中不存在")},handleTagClick:function(t){!1===this.showParameterInfoEditor&&(this.showParameterInfoEditor=!0),this.parameterInfo.id=t.id,this.parameterInfo.name=t.name,this.parameterInfo.type=t.type},handleAddParameterInfo:function(){!1===this.showParameterInfoEditor&&(this.showParameterInfoEditor=!0),this.parameterInfo=this.getDefaultParameterInfo()},updateParameterData:function(t){var a=this;console.log("变更前parameterData",this.parameterData),console.log("参数parameterData",t),A["a"].updateCategoryParameter(t,(function(t){console.log("更新参数分类成功",t.id),a.$message.success("更新参数分类成功"),a.$emit("operationSuccess"),a.hideParameterInfoEditor(),a.query()}),(function(t){console.log("更新参数分类失败"),a.$message.warning(t.errorMessage)}))},saveParameterData:function(t){var a=this;console.log("保存前parameterData",this.parameterData),console.log("参数parameterData",t),""===t.productCategoryId&&(t.productCategoryId=this.itemId),A["a"].saveCategoryParameter(t,(function(t){console.log("添加参数分类成功",t.id),a.$message.success("添加参数分类成功"),a.parameterData=a.getDefaultParameterData(),a.$emit("operationSuccess"),a.parameterData.id=t.id,a.query(),a.$nextTick((function(){this.hideParameterDataEditor()}))}),(function(t){console.log("添加参数分类失败"),a.$message.warning(t.errorMessage)}))},query:function(){var t=this;console.log("查询分类的参数",this.itemId);var a={id:Number(this.itemId),shopId:window.top.SHOP_ID||""};A["a"].getCategoryParameter(a,(function(a){console.log("查询分类的参数成功",a),t.parameterDataList=a.parameterGroups,t.parameterInfoTypeList=a.allParameterType,!0===t.showParameterDataEditor&&(t.parameterData=t.getParameterDataFromList(t.parameterData.id))}),(function(a){console.log("查询分类的参数失败",t.itemId),console.log(a),t.$message.warning(a.errorMessage)}))},getParameterDataFromList:function(t){var a=this.parameterDataList.findIndex((function(a){return a.id===t}));return-1!==a?{id:this.parameterDataList[a].id,name:this.parameterDataList[a].name,sort:this.parameterDataList[a].sort,parameters:this.parameterDataList[a].parameters,productCategoryId:this.parameterDataList[a].productCategoryId}:(console.log("新添加的参数在分类中没有找到",this.parameterData.id),this.getDefaultParameterData())},rowDeleteClickHandler:function(t){var a=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[];e.push(t.id);var i={ids:e};A["a"].deleteCategoryParameter(i,(function(t){a.$message({type:"success",message:"删除成功!"}),a.$emit("operationSuccess"),a.hideParameterDataEditor(),a.query()}),(function(t){console.log("删除失败",t),a.$message.warning(t.errorMessage)}))})).catch((function(){}))},getParameterData:function(){return{id:this.parameterData.id,name:this.parameterData.name,sort:this.parameterData.sort,parameters:this.parameterData.parameters,productCategoryId:this.parameterData.productCategoryId}},getParameterInfo:function(){return{id:this.parameterInfo.id,name:this.parameterInfo.name,type:this.parameterInfo.type}},hasSameNameParameterData:function(t){var a=this.parameterDataList.findIndex((function(a){return a.name===t.name}));return-1!==a&&this.parameterDataList[a].id!==t.id},hasSameNameParameterInfo:function(t,a){var e=a.findIndex((function(a){return a.name===t.name}));return-1!==e&&a[e].id!==t.id}},watch:{itemId:function(t){console.log("ParameterSetting::watch() Val:",t),this.hideParameterDataEditor(),this.parameterInfoTypeList=[],this.parameterDataList=[],this.query()}}},N=$,O=(e("d597"),Object(I["a"])(N,V,E,!1,null,null,null)),k=O.exports,z=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"category-mgmt__attribute-setting"},[t.isEdit?e("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operateHandler},slot:"top"}):t._e(),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.attributeDataList,size:"small"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{label:"属性名称",prop:"attributeData.name","min-width":"80"}}),e("el-table-column",{attrs:{label:"属性值",prop:"attributeData.valueList","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.attributeData.valueList,(function(e,i){return[t._v(" "+t._s(e)+" "),i<a.row.attributeData.valueList.length-1?[t._v(t._s(t.separator))]:t._e()]}))]}}])}),e("el-table-column",{attrs:{prop:"title",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"biz-customcol"},[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){e.stopPropagation(),a.row.attributeData.id!==t.attributeDataList[0].attributeData.id&&t.moveUp(a.row)}}},[t._v("上移")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){e.stopPropagation(),a.row.attributeData.id!==t.attributeDataList[t.attributeDataList.length-1].attributeData.id&&t.moveDown(a.row)}}},[t._v("下移")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.rowDeleteClickHandler(a.row)}}},[t._v(" 删除 ")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.rowEditClickHandler(a.row)}}},[t._v(" 编辑 ")])],1)]}}])})],1),e("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showAttributeDataEditor,expression:"showAttributeDataEditor"}],ref:"attributeDataForm",attrs:{size:"small","label-width":"110px",model:t.attributeData,rules:t.rules}},[e("el-form-item",{attrs:{label:"属性名称: ",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入属性名称"},model:{value:t.attributeData.name,callback:function(a){t.$set(t.attributeData,"name",a)},expression:"attributeData.name"}})],1),e("el-form-item",{attrs:{label:"属性值: ",prop:"valueList"}},[t._l(t.attributeData.valueList,(function(a){return e("el-tag",{key:a.id,staticStyle:{"margin-right":"5px"},attrs:{size:"small",closable:"","disable-transitions":!0,type:"warning"},on:{close:function(e){return t.handleTagClose(a)}},nativeOn:{click:function(e){return t.handleTagClick(a)}}},[t._v(" "+t._s(a)+" ")])})),e("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(a){return a.stopPropagation(),t.handleAddAttributeValue(a)}}})],2)],1),e("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showAttributeValueEditor,expression:"showAttributeValueEditor"}],ref:"attributeValueForm",attrs:{size:"small","label-width":"110px",model:t.attributeValueData,rules:t.rules}},[e("el-form-item",{attrs:{label:"属性值名称: ",prop:"valueName"}},[e("el-input",{attrs:{placeholder:"请输入属性值名称"},model:{value:t.attributeValueData.valueName,callback:function(a){t.$set(t.attributeValueData,"valueName",a)},expression:"attributeValueData.valueName"}})],1)],1)],1)},T=[],B=(e("a434"),e("498a"),e("f562")),q={name:"AttributeSetting",components:{BizSaveButton:y["a"],BizGrid:v["a"]},data:function(){return{operations:[{label:"添加",name:"addAttributeOperate",type:"primary"},{label:"保存",name:"saveAttributeOperate",type:"primary"}],rules:{name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],valueName:[{required:!0,min:1,message:"请输入属性值名称",trigger:"blur"}]},loading:!1,showAttributeDataEditor:!1,showAttributeValueEditor:!1,attributeDataList:[],dataList:[],attributeData:this.getDefaultAttributeData(),attributeValueData:this.getDefaultAttributeValueData(),separator:"、"}},computed:{},props:{itemId:{type:String},isEdit:{type:Boolean,default:function(){return!0}}},created:function(){this.query()},methods:{query:function(){this.attributeDataList=this.getAttributeDataList()},showUp:function(t){return!this.attributeDataList[0]||t.attributeData.id!==this.attributeDataList[0].attributeData.id},showDown:function(t){return!this.attributeDataList[0]||t.attributeData.id!==this.attributeDataList[this.attributeDataList.length-1].attributeData.id},moveUp:function(t){var a=this;this.loading=!0;var e=t.attributeData.sort;this.attributeDataList.map((function(i){i.attributeData.id===t.attributeData.id&&(a.attributeDataList[a.attributeDataList.indexOf(t)].attributeData.sort=a.attributeDataList[a.attributeDataList.indexOf(t)-1].attributeData.sort,a.attributeDataList[a.attributeDataList.indexOf(t)-1].attributeData.sort=e,a.dataList=[a.attributeDataList[a.attributeDataList.indexOf(t)].attributeData,a.attributeDataList[a.attributeDataList.indexOf(t)-1].attributeData],a.sort())}))},moveDown:function(t){var a=this;this.loading=!0;var e=t.attributeData.sort;this.dataList=[],this.attributeDataList.map((function(i){i.attributeData.id===t.attributeData.id&&(a.attributeDataList[a.attributeDataList.indexOf(t)].attributeData.sort=a.attributeDataList[a.attributeDataList.indexOf(t)+1].attributeData.sort,a.attributeDataList[a.attributeDataList.indexOf(t)+1].attributeData.sort=e,a.dataList=[a.attributeDataList[a.attributeDataList.indexOf(t)].attributeData,a.attributeDataList[a.attributeDataList.indexOf(t)+1].attributeData],a.sort())}))},sort:function(){var t=this;_["a"].put("/admin/attribute/attributeSort.jhtml",this.dataList).then((function(a){t.query()})).catch((function(a){t.loading=!1,t.$message.warning(a.errorMessage||"操作出现错误")}))},update:function(){var t=this;B["a"].updateProductAttribute(this.getAttributeUpdateParams(),(function(a){console.log("[---- dachao ----] [API-属性编辑-更新成功] data=>",a),t.$message.success("更新属性成功"),t.query(),t.$emit("operationSuccess")}),(function(a){console.log("[---- dachao ----] [API-属性编辑-更新失败] ErrorData=>",a),t.$message.warning(a.errorMessage)}))},save:function(){var t=this;B["a"].saveProductAttribute(this.getAttributeSaveParams(),(function(a){console.log("[---- dachao ----] [API-属性编辑-添加成功] data=>",a),t.$message.success("添加属性成功"),t.query(),t.$emit("operationSuccess")}),(function(a){console.log("[---- dachao ----] [API-属性编辑-添加失败] ErrorData=>",a),t.$message.warning(a.errorMessage)}))},handleSelectionChange:function(t){this.operations[1].disabled=!0,t.length>0&&(this.operations[1].disabled=!1)},getAttributeDataList:function(){var t=this,a=[],e={shopId:window.top.SHOP_ID||"",id:this.itemId};return B["a"].getProductAttributeList(e,(function(e){console.log("[---- dachao ----] [API-属性编辑-查询成功] data=>",e),e.attribute.forEach((function(t,e){a.push({attributeData:{id:t.id,name:t.name,sort:t.sort,valueList:t.options}})})),t.loading=!1,console.log("[---- dachao ----] [    属性编辑        ] 查询后的所有的属性信息 table=>",a),console.log("[---- dachao ----] [    属性编辑        ] 当前编辑中的属性信息-更新前 attributeData=>",t.attributeData),t.attributeData=t.getAttributeData(a),console.log("[---- dachao ----] [    属性编辑        ] 当前编辑中的属性信息-更新后 attributeData=>",t.attributeData)}),(function(a){t.loading=!1,console.log(a),console.log("code错误"),t.$message.warning(a.errorMessage)})),a},getAttributeData:function(t){var a=this,e=t.findIndex((function(t){return t.attributeData.id===a.attributeData.id}));return-1!==e?{id:t[e].attributeData.id,name:t[e].attributeData.name,sort:t[e].attributeData.sort,valueList:t[e].attributeData.valueList}:this.getDefaultAttributeData()},operateHandler:function(t){this[t]()},rowEditClickHandler:function(t){console.log("[---- dachao ----] [    属性编辑        ] 编辑属性行 row=>",t),this.$refs.attributeDataForm.clearValidate(),this.attributeData=Object.assign({},t.attributeData),this.showAttributeDataEditor=!0,this.hideAttributeValueEditor()},rowDeleteClickHandler:function(t){console.log("[---- dachao ----] [    属性编辑        ] 删除属性行 row=>",t),this.deleteAttribute([t.attributeData.id])},saveAttributeOperate:function(){console.log("[---- dachao ----] [    属性编辑        ] 保存属性数据"),this.showAttributeValueEditor?this.saveByAttributeValueForm():this.saveByAttributeDataForm()},saveByAttributeValueForm:function(){var t=this;this.$refs.attributeDataForm.validate((function(a,e){if(!a)return!1;t.$refs.attributeValueForm.validate((function(a,e){if(!a)return!1;if(t.attributeValueData.valueName.trim()){if(t.hasSameNameAttributeData(t.attributeData))return t.$message.warning("属性名称已存在"),!1;if(t.hasSameNameAttributeValue(t.attributeValueData,t.attributeData))return t.$message.warning("属性值名称已存在"),!1;console.log("[---- dachao ----] [    属性编辑        ] 编辑前的属性值 valueList=>",t.attributeData.valueList),t.attributeData.valueList.indexOf(t.attributeValueData.oldValueName)<0?(t.attributeData.valueList.push(t.attributeValueData.valueName),console.log("[---- dachao ----] [    属性编辑        ] 新增的属性值 valueList=>",t.attributeData.valueList)):(t.attributeData.valueList=t.attributeData.valueList.map((function(a){return a===t.attributeValueData.oldValueName?t.attributeValueData.valueName:a})),console.log("[---- dachao ----] [    属性编辑        ] 修改的属性值 valueList=>",t.attributeData.valueList))}t.hideAttributeValueEditor(),t.saveByAttributeDataForm()}))}))},saveByAttributeDataForm:function(){var t=this;this.$refs.attributeDataForm.validate((function(a,e){return!!a&&(t.hasSameNameAttributeData(t.attributeData)?(t.$message.warning("属性名称已存在"),!1):void(t.attributeData.id?(t.update(),t.resetAttributeValueData()):(t.save(),t.resetAttributeValueData())))}))},deleteAttribute:function(t){var a=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){B["a"].deleteProductAttribute(a.getAttributeDeleteParams(t),(function(t){console.log("[---- dachao ----] [API-属性编辑-删除成功] data=>",t),a.$message.success("删除成功"),a.$emit("operationSuccess"),a.query()}),(function(t){console.log("[---- dachao ----] [API-属性编辑-删除失败] ErrorData=>",t),a.$message.warning(t.errorMessage)})),t.indexOf(a.attributeData.id)>=0&&a.resetAttributeData(),a.resetAttributeValueData(),a.hideAttributeValueEditor()}))},addAttributeOperate:function(){console.log("[---- dachao ----] [    属性编辑        ] 属性编辑状态 -> 新增属性"),this.resetAttributeData(),this.resetAttributeValueData(),this.showAttributeDataEditor=!0,this.hideAttributeValueEditor()},handleAddAttributeValue:function(){console.log("[---- dachao ----] [    属性编辑        ] 属性值编辑状态 -> 新增属性值"),this.resetAttributeValueData(),this.showAttributeValueEditor=!0},handleTagClose:function(t){console.log("[---- dachao ----] [    属性编辑        ] 删除属性值 tag=>",t),this.deleteAttrbuteValue([t])},handleTagClick:function(t){console.log("[---- dachao ----] [    属性编辑        ] 属性值编辑状态 -> 修改属性值 tag=>",t),this.attributeValueData={valueName:t,oldValueName:t},this.showAttributeValueEditor=!0},resetAttributeData:function(){this.attributeData=this.getDefaultAttributeData()},resetAttributeValueData:function(){this.attributeValueData=this.getDefaultAttributeValueData()},hideAttributeDataEditor:function(){!0===this.showAttributeDataEditor&&(this.showAttributeDataEditor=!1,this.attributeData=this.getDefaultAttributeData(),this.hideAttributeValueEditor())},hideAttributeValueEditor:function(){!0===this.showAttributeValueEditor&&(this.showAttributeValueEditor=!1,this.attributeValueData=this.getDefaultAttributeValueData())},deleteAttrbuteValue:function(t){var a=this;console.log(this.attributeData),this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("[---- dachao ----] [    属性编辑        ] 删除指定的属性值 attrValues=",t);var e=a.attributeDataList.findIndex((function(t){return t.attributeData.id===a.attributeData.id}));if(-1!==e){var i={id:a.attributeDataList[e].attributeData.id,name:a.attributeDataList[e].attributeData.name,sort:a.attributeDataList[e].attributeData.sort,valueList:a.attributeDataList[e].attributeData.valueList},o=[];i.valueList.forEach((function(a,e){t.indexOf(a)>=0&&o.push(e)})),o.reverse().forEach((function(t,a){i.valueList.splice(t,1)})),a.attributeData=i,a.hideAttributeValueEditor(),a.update()}else console.log("关闭Tag所属的属性在属性列中不存在")}))},getAttributeUpdateParams:function(){return{productCategoryId:this.itemId,id:this.attributeData.id,options:this.attributeData.valueList,name:this.attributeData.name,sort:this.attributeData.sort}},getAttributeSaveParams:function(){return{productCategoryId:this.itemId,options:this.attributeData.valueList,name:this.attributeData.name,sort:this.attributeData.sort}},getAttributeDeleteParams:function(t){return{productCategoryId:this.itemId,ids:t}},getDefaultAttributeValueData:function(){return console.log("[---- dachao ----] [    属性编辑        ] 清空AttributeValueData"),{oldValueName:"",valueName:""}},getDefaultAttributeData:function(){return console.log("[---- dachao ----] [    属性编辑        ] 清空AttributeValueData"),{id:"",name:"",sort:"",valueList:[]}},hasSameNameAttributeData:function(t){var a=this.attributeDataList.findIndex((function(a){return a.attributeData.name===t.name}));return-1!==a&&this.attributeDataList[a].attributeData.id!==t.id},hasSameNameAttributeValue:function(t,a){var e=a.valueList.findIndex((function(a){return a===t.valueName}));return-1!==e&&a.valueList[e]!==t.oldValueName}},watch:{itemId:function(t){console.log("[---- dachao ----] [    属性编辑        ] 商品分类选择条目变更 itemId=>",t),this.hideAttributeDataEditor(),this.attributeData={},this.attributeValueData={},this.query()}}},F=q,j=(e("c455"),Object(I["a"])(F,z,T,!1,null,null,null)),H=j.exports,M=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("biz-grid",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"category-mgmt__specification-setting"},[t.isEdit?e("biz-save-button",{attrs:{slot:"top",operations:t.operations},on:{operate:t.operateHandler},slot:"top"}):t._e(),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.specificationDataList,size:"small"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{label:"规格名称",prop:"specificationData.name","min-width":"80"}}),e("el-table-column",{attrs:{label:"类型",prop:"specificationData.type","min-width":"80"}}),e("el-table-column",{attrs:{label:"规格值",prop:"specificationData.valueList","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.specificationData.valueList,(function(e,i){return[t._v(" "+t._s(e.name)+" "),i<a.row.specificationData.valueList.length-1?[t._v(t._s(t.separator))]:t._e()]}))]}}])}),e("el-table-column",{attrs:{prop:"title",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"biz-customcol"},[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){e.stopPropagation(),a.row.specificationData.id!==t.specificationDataList[0].specificationData.id&&t.moveUp(a.row)}}},[t._v("上移")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){e.stopPropagation(),a.row.specificationData.id!==t.specificationDataList[t.specificationDataList.length-1].specificationData.id&&t.moveDown(a.row)}}},[t._v("下移")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.rowDeleteClickHandler(a.row)}}},[t._v(" 删除 ")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.rowEditClickHandler(a.row)}}},[t._v(" 编辑 ")])],1)]}}])})],1),e("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showSpecificationDataEditor,expression:"showSpecificationDataEditor"}],ref:"specificationDataForm",attrs:{size:"small","label-width":"110px",model:t.specificationData,rules:t.rules}},[e("el-form-item",{attrs:{label:"规格名称: ",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入规格名称"},model:{value:t.specificationData.name,callback:function(a){t.$set(t.specificationData,"name",a)},expression:"specificationData.name"}})],1),e("el-form-item",{attrs:{label:"规格类型: ",prop:"type"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.specificationChange},model:{value:t.specificationData.type,callback:function(a){t.$set(t.specificationData,"type",a)},expression:"specificationData.type"}},t._l(t.typeList,(function(t){return e("el-option",{key:t.id,attrs:{label:t,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"排序: ",prop:"sort"}},[e("el-input",{attrs:{clearable:"",placeholder:"请输入排序"},model:{value:t.specificationData.sort,callback:function(a){t.$set(t.specificationData,"sort",a)},expression:"specificationData.sort"}})],1),e("el-form-item",{attrs:{label:"规格值: ",prop:"valueList"}},[t._l(t.specificationData.valueList,(function(a){return e("el-tag",{key:a.id,staticStyle:{"margin-right":"5px"},attrs:{size:"small",closable:"","disable-transitions":!0,type:"warning"},on:{close:function(e){return t.handleTagClose(a)}},nativeOn:{click:function(e){return t.handleTagClick(a)}}},[t._v(" "+t._s(a.name)+" ")])})),e("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(a){return a.stopPropagation(),t.handleAddSpecificationValue(a)}}})],2)],1),e("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showSpecificationValueEditor,expression:"showSpecificationValueEditor"}],ref:"specificationValueForm",attrs:{size:"small","label-width":"110px",model:t.specificationValueData,rules:t.rules}},[e("el-form-item",{attrs:{label:"规格值名称:",prop:"valueName"}},[e("el-input",{attrs:{placeholder:"请输入规格值名称"},model:{value:t.specificationValueData.valueName,callback:function(a){t.$set(t.specificationValueData,"valueName",a)},expression:"specificationValueData.valueName"}})],1)],1),e("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showSpecificationValueImageEditor,expression:"showSpecificationValueImageEditor"}],ref:"specificationValueImageForm",attrs:{size:"small","label-width":"110px",model:t.specificationValueData,rules:t.rules}},[e("el-form-item",{attrs:{label:"规格值图片:",prop:"attrValueImag"}},[e("BizAvatarUploaderNew",{attrs:{title:"建议尺寸1:1"},model:{value:t.specificationValueData.valueImage,callback:function(a){t.$set(t.specificationValueData,"valueImage",a)},expression:"specificationValueData.valueImage"}})],1)],1)],1)},U=[],R=e("dd58"),G={name:"SpecificationSetting",components:{BizSaveButton:y["a"],BizGrid:v["a"],BizAvatarUploaderNew:w["b"]},data:function(){return{operations:[{label:"添加",name:"addSpecificationOperate",type:"primary"},{label:"保存",name:"saveSpecificationOperate",type:"primary"}],rules:{name:[{required:!0,message:"请输入规格名称",trigger:"blur"}],type:[{required:!0,message:"请输入规格类型",trigger:"blur"}],valueName:[{required:!0,min:1,message:"请输入规格值名称",trigger:"blur"}],attrValueImag:[{required:!0,min:1,message:"请输入规格值图片",trigger:"blur"}]},showSpecificationDataEditor:!1,showSpecificationValueEditor:!1,showSpecificationValueImageEditor:!1,loading:!1,specificationDataList:[],dataList:[],specificationData:this.getDefaultSpecificationData(),specificationValueData:this.getDefaultSpecificationValueData(),typeList:[],separator:"、"}},computed:{},props:{itemId:{type:String},isEdit:{type:Boolean,default:function(){return!0}}},created:function(){this.query()},methods:{specificationChange:function(){this.$refs.specificationDataForm.clearValidate("type")},query:function(){this.specificationDataList=this.getSpecificationDataList()},showUp:function(t){return!this.specificationDataList[0]||t.specificationData.id!==this.specificationDataList[0].specificationData.id},showDown:function(t){return!this.specificationDataList[0]||t.specificationData.id!==this.specificationDataList[this.specificationDataList.length-1].specificationData.id},moveUp:function(t){var a=this;this.loading=!0;var e=t.specificationData.sort;this.specificationDataList.map((function(i){i.specificationData.id===t.specificationData.id&&(a.specificationDataList[a.specificationDataList.indexOf(t)].specificationData.sort=a.specificationDataList[a.specificationDataList.indexOf(t)-1].specificationData.sort,a.specificationDataList[a.specificationDataList.indexOf(t)-1].specificationData.sort=e,a.dataList=[a.specificationDataList[a.specificationDataList.indexOf(t)].specificationData,a.specificationDataList[a.specificationDataList.indexOf(t)-1].specificationData],a.sort())}))},moveDown:function(t){var a=this;this.loading=!0;var e=t.specificationData.sort;this.dataList=[],this.specificationDataList.map((function(i){i.specificationData.id===t.specificationData.id&&(a.specificationDataList[a.specificationDataList.indexOf(t)].specificationData.sort=a.specificationDataList[a.specificationDataList.indexOf(t)+1].specificationData.sort,a.specificationDataList[a.specificationDataList.indexOf(t)+1].specificationData.sort=e,a.dataList=[a.specificationDataList[a.specificationDataList.indexOf(t)].specificationData,a.specificationDataList[a.specificationDataList.indexOf(t)+1].specificationData],a.sort())}))},sort:function(){var t=this;_["a"].put("/admin/specification/specificationSort.jhtml",this.dataList).then((function(a){t.query()})).catch((function(a){t.loading=!1,t.$message.warning(a.errorMessage||"操作出现错误")}))},update:function(){var t=this;R["a"].updateProductSpecification(this.getSpecificationUpdateParams(),(function(a){console.log("[---- dachao ----] [API-规格编辑-更新成功] data=>",a),t.$message.success("更新规格成功"),t.query(),t.$emit("operationSuccess")}),(function(a){console.log("[---- dachao ----] [API-规格编辑-更新失败] ErrorData=>",a),t.$message.warning(a.errorMessage)}))},save:function(){var t=this;R["a"].saveProductSpecification(this.getSpecificationSaveParams(),(function(a){console.log("[---- dachao ----] [API-规格编辑-添加成功] data=>",a),t.$message.success("添加规格成功"),t.query(),t.$emit("operationSuccess")}),(function(a){console.log("[---- dachao ----] [API-规格编辑-添加失败] ErrorData=>",a),t.$message.warning(a.errorMessage)}))},handleSelectionChange:function(t){this.operations[1].disabled=!0,t.length>0&&(this.operations[1].disabled=!1)},getSpecificationDataList:function(){var t=this,a=[],e={shopId:window.top.SHOP_ID||"",id:this.itemId};return R["a"].getProductSpecificationList(e,(function(e){console.log("[---- dachao ----] [API-规格编辑-查询成功] data=>",e),e.specification.forEach((function(t,e){a.push({specificationData:{id:t.id,name:t.name,sort:t.sort,valueList:t.specificationValueData,type:t.type}})})),t.typeList=e.types,t.loading=!1,console.log("[---- dachao ----] [    规格编辑        ] 查询后的所有的规格信息 table=>",a),console.log("[---- dachao ----] [    规格编辑        ] 当前编辑中的规格信息-更新前 specificationData=>",t.specificationData),t.specificationData=t.getSpecificationData(a),console.log("[---- dachao ----] [    规格编辑        ] 当前编辑中的规格信息-更新后 specificationData=>",t.specificationData)}),(function(a){console.log("[---- dachao ----] [API-规格编辑-查询失败] ErrorData=>",a),t.$message.warning(a.errorMessage)})),a},getSpecificationData:function(t){var a=this,e=t.findIndex((function(t){return t.specificationData.id===a.specificationData.id}));return-1!==e?{id:t[e].specificationData.id,name:t[e].specificationData.name,sort:t[e].specificationData.sort,valueList:t[e].specificationData.valueList,type:t[e].specificationData.type}:this.getDefaultSpecificationData()},operateHandler:function(t){this[t]()},rowEditClickHandler:function(t){console.log("[---- dachao ----] [    规格编辑        ] 编辑规格行 row=>",t),this.$refs.specificationDataForm.clearValidate(),this.specificationData=Object.assign({},t.specificationData),this.showSpecificationDataEditor=!0,this.showSpecificationValueEditor=!1,this.showSpecificationValueImageEditor=!1},rowDeleteClickHandler:function(t){console.log("[---- dachao ----] [    规格编辑        ] 删除规格行 row=>",t),this.deleteSpecification([t.specificationData.id])},saveSpecificationOperate:function(){console.log("[---- dachao ----] [    规格编辑        ] 保存规格数据"),this.showSpecificationValueImageEditor?this.saveBySpecificationValueImageForm():this.showSpecificationValueEditor?this.saveBySpecificationValueForm():this.showSpecificationDataEditor&&this.saveBySpecificationDataForm()},saveBySpecificationValueImageForm:function(){var t=this;this.$refs.specificationDataForm.validate((function(a,e){a&&t.$refs.specificationValueForm.validate((function(a,e){if(!a)return!1;t.specificationValueData.valueImage.trim()?(console.log("[---- dachao ----] [    规格编辑        ] 保存规格值图片数据"),t.saveBySpecificationValueForm()):(console.log("[---- dachao ----] [    规格编辑        ] 没有输入规格值图片数据"),t.$refs.specificationValueImageForm.validate((function(t,a){if(!t)return!1})))}))}))},saveBySpecificationValueForm:function(){var t=this;this.$refs.specificationDataForm.validate((function(a,e){if(!a)return!1;t.$refs.specificationValueForm.validate((function(a,e){if(!a)return!1;if(console.log("[---- dachao ----] [    规格编辑        ] 编辑前的规格值 valueList=>",t.specificationData.valueList),t.specificationValueData.valueName.trim()){if(t.hasSameNameSpecificationData(t.specificationData))return t.$message.warning("规格名称已存在"),!1;if(t.hasSameNameSpecificationValue(t.specificationValueData,t.specificationData))return t.$message.warning("规格值名称已存在"),!1;var i=t.specificationData.valueList.findIndex((function(a){return a.id===t.specificationValueData.valueID}));-1===i?(t.specificationData.valueList.push({id:t.specificationValueData.valueID,image:t.specificationValueData.valueImage,name:t.specificationValueData.valueName}),console.log("[---- dachao ----] [    规格编辑        ] 新增的规格值 valueList=>",t.specificationData.valueList)):(t.specificationData.valueList[i]={id:t.specificationValueData.valueID,image:t.specificationValueData.valueImage,name:t.specificationValueData.valueName},console.log("[---- dachao ----] [    规格编辑        ] 修改的属性值 valueList=>",t.specificationData.valueList)),t.saveBySpecificationDataForm()}t.showSpecificationValueEditor=!1,t.showSpecificationValueImageEditor=!1}))}))},saveBySpecificationDataForm:function(){var t=this;this.$refs.specificationDataForm.validate((function(a,e){return console.log("[---- dachao ----] [    属性编辑        ] 保存规格数据"),!!a&&(t.hasSameNameSpecificationData(t.specificationData)?(t.$message.warning("规格名称已存在"),!1):void(t.specificationData.id?(t.update(),t.resetSpecificationValueData()):(t.save(),t.resetSpecificationValueData())))}))},deleteSpecification:function(t){var a=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){R["a"].deleteProductSpecification(a.getSpecificationDeleteParams(t),(function(t){console.log("[---- dachao ----] [API-规格编辑-删除成功] data=>",t),a.$message.success("删除成功"),a.$emit("operationSuccess"),a.query()}),(function(t){console.log("[---- dachao ----] [API-规格编辑-删除失败] ErrorData=>",t),a.$message.warning(t.errorMessage)})),t.indexOf(a.specificationData.id)>=0&&a.resetSpecificationData(),a.resetSpecificationValueData(),a.showSpecificationValueEditor=!1,a.showSpecificationValueImageEditor=!1}))},addSpecificationOperate:function(){console.log("[---- dachao ----] [    规格编辑        ] 规格编辑状态 -> 新增规格"),this.resetSpecificationData(),this.resetSpecificationValueData(),this.showSpecificationDataEditor=!0,this.showSpecificationValueEditor=!1,this.showSpecificationValueImageEditor=!1},handleAddSpecificationValue:function(){console.log("[---- dachao ----] [    规格编辑        ] 规格值编辑状态 -> 新增规格值"),this.resetSpecificationValueData(),this.showSpecificationValueEditor=!0,"图片"===this.specificationData.type?this.showSpecificationValueImageEditor=!0:this.showSpecificationValueImageEditor=!1},handleTagClose:function(t){console.log("[---- dachao ----] [    规格编辑        ] 删除规格值 tag=>",t),this.deleteSpecificationValue([t.name])},handleTagClick:function(t){console.log("[---- dachao ----] [    规格编辑        ] 规格值编辑状态 -> 修改规格值 tag=>",t),this.specificationValueData={valueID:t.id,valueName:t.name,valueImage:t.image},this.showSpecificationValueEditor=!0,"图片"===this.specificationData.type?this.showSpecificationValueImageEditor=!0:this.showSpecificationValueImageEditor=!1},resetSpecificationData:function(){this.specificationData=this.getDefaultSpecificationData()},resetSpecificationValueData:function(){this.specificationValueData=this.getDefaultSpecificationValueData()},hideSpecificationDataEditor:function(){!0===this.showSpecificationDataEditor&&(this.showSpecificationDataEditor=!1,this.specificationData=this.getDefaultSpecificationData(),this.hideSpecificationValueEditor())},hideSpecificationValueEditor:function(){!0===this.showSpecificationValueEditor&&(this.showSpecificationValueEditor=!1,this.specificationValueData=this.getDefaultSpecificationValueData(),this.hideSpecificationValueImageEditor())},hideSpecificationValueImageEditor:function(){!0===this.showSpecificationValueImageEditor&&(this.showSpecificationValueImageEditor=!1,this.specificationValueData=this.getDefaultSpecificationValueData())},handleUploadSuccess:function(t){console.log("[---- dachao ----] [    规格编辑        ] 规格值图片加载成功 url=>",t),this.specificationValueData.valueImage=t},deleteSpecificationValue:function(t){var a=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("[---- dachao ----] [    规格编辑        ] 删除指定的规格值 attrValues=",t);var e=a.specificationDataList.findIndex((function(t){return t.specificationData.id===a.specificationData.id}));if(-1!==e){var i={id:a.specificationDataList[e].specificationData.id,name:a.specificationDataList[e].specificationData.name,sort:a.specificationDataList[e].specificationData.sort,valueList:a.specificationDataList[e].specificationData.valueList,type:a.specificationDataList[e].specificationData.type},o=[];i.valueList.forEach((function(a,e){t.indexOf(a.name)>=0&&o.push(e)})),o.reverse().forEach((function(t,a){i.valueList.splice(t,1)})),a.specificationData=i,a.hideSpecificationValueEditor(),a.update()}else console.log("关闭Tag所属的属性在属性列中不存在")}))},getSpecificationUpdateParams:function(){return{productCategoryId:this.itemId,id:this.specificationData.id,name:this.specificationData.name,sort:this.specificationData.sort,specificationValueData:this.specificationData.valueList,type:this.specificationData.type}},getSpecificationSaveParams:function(){return{productCategoryId:this.itemId,name:this.specificationData.name,sort:this.specificationData.sort,specificationValueData:this.specificationData.valueList,type:this.specificationData.type}},getSpecificationDeleteParams:function(t){return{productCategoryId:this.itemId,ids:t}},getDefaultSpecificationValueData:function(){return console.log("[---- dachao ----] [    规格编辑        ] 清空SpecificationValueData"),{valueID:"",valueImage:"",valueName:""}},getDefaultSpecificationData:function(){return console.log("[---- dachao ----] [    规格编辑        ] 清空SpecificationData"),{id:"",name:"",sort:"",valueList:[],type:""}},hasSameNameSpecificationData:function(t){var a=this.specificationDataList.findIndex((function(a){return a.specificationData.name===t.name}));return-1!==a&&this.specificationDataList[a].specificationData.id!==t.id},hasSameNameSpecificationValue:function(t,a){var e=a.valueList.findIndex((function(a){return a.name===t.valueName}));return-1!==e&&a.valueList[e].id!==t.valueID}},watch:{itemId:function(t){console.log("[---- dachao ----] [    规格编辑        ] 商品分类选择条目变更 itemId=>",t),this.hideSpecificationDataEditor(),this.specificationData={},this.specificationValueData={},this.query()}}},W=G,X=(e("b785"),Object(I["a"])(W,M,U,!1,null,null,null)),K=X.exports,Y={name:"PlatformCategoryMgmtPopup",components:{BizPopupTabs:g["a"],PlatformCategorySetting:x,ParameterSetting:k,AttributeSetting:H,SpecificationSetting:K},props:{open:{type:Boolean},itemId:{type:String},tabName:{type:String}},data:function(){return{}},computed:{clickTabName:{get:function(){return this.tabName},set:function(){}}},methods:{close:function(t){this.$emit("close",t)},operationSuccess:function(t){this.$emit("operationSuccess",t)},createdCategorySuccess:function(t){this.$emit("createdCategorySuccess",t)}},watch:{itemId:function(t){console.log("CategoryMgmtPopup::watch() Val:",t)}}},J=Y,Q=Object(I["a"])(J,m,h,!1,null,null,null),Z=Q.exports,tt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"expandTable",staticClass:"expand-table",staticStyle:{width:"100%","min-height":"100%"},attrs:{size:"small","tooltip-effect":"dark","row-key":"id",height:t.height,border:t.showBorder,data:t.data,"show-header":t.showHeader,"expand-row-keys":t.expandedRowKeys,rowClassName:t.setClassName,"cell-class-name":t.cellClassName},on:{"expand-change":t.expandChangeHandler,"row-click":t.rowClickHandler,"selection-change":t.handleSelectionChange,deleteCategory:t.deleteCategory,moveUp:t.moveUp,moveDown:t.moveDown}},[e("el-table-column",{attrs:{type:"expand",label:t.maxLevel,width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.childrenProductCategoryDataList.length>0?e("expand-table",{staticClass:"expand-table-child",attrs:{height:"auto",layer:t.layer+1,data:a.row.childrenProductCategoryDataList,"show-header":!1,"show-border":!1,"expand-row-keys":t.expandedRowKeys},on:{deleteCategory:t.deleteCategory,moveUp:t.moveUp,moveDown:t.moveDown,"expand-change":t.expandChangeHandler,"row-click":t.rowClickHandler,"selection-change":t.handleSelectionChange}}):t._e()]}}])}),e("el-table-column",{attrs:{prop:"name",label:"分类"}}),e("el-table-column",{attrs:{prop:"childrenProductCategoryData",label:"参数"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.parameterGroupDataList,(function(e,i){return[t._v(" "+t._s(e.name)+" "),i<a.row.parameterGroupDataList.length-1?[t._v(t._s(t.separator))]:t._e()]}))]}}])},[e("template",{slot:"header"},[e("div",{attrs:{slot:"label"},slot:"label"},[t._v(" 参数 "),e("el-button",{directives:[{name:"popover",rawName:"v-popover:parameter",arg:"parameter"}],attrs:{type:"text",size:"small"}},[e("i",{staticClass:"iconfont el-icon-question"})]),e("el-popover",{ref:"parameter",attrs:{placement:"bottom-start",width:"300",trigger:"hover"}},[e("p",[t._v("参数用于用户端商品详细页面展示商品信息")])])],1)])],2),e("el-table-column",{attrs:{prop:"childrenProductCategoryData",label:"规格"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.specificationDataList,(function(e,i){return[t._v(" "+t._s(e.name)+" "),i<a.row.specificationDataList.length-1?[t._v(t._s(t.separator))]:t._e()]}))]}}])},[e("template",{slot:"header"},[e("div",{attrs:{slot:"label"},slot:"label"},[t._v(" 规格 "),e("el-button",{directives:[{name:"popover",rawName:"v-popover:specification",arg:"specification"}],attrs:{type:"text",size:"small"}},[e("i",{staticClass:"iconfont el-icon-question"})]),e("el-popover",{ref:"specification",attrs:{placement:"bottom-start",width:"300",trigger:"hover"}},[e("p",[t._v("规格 是依据顾客的购买习惯而独立出来的一种商品的特殊属性；商品规格不同，可能会有不同的价格。如一款车有红色、黑色、白色3种颜色，消费者可以选择任一颜色进行购买，这里的颜色被称为规格")])])],1)])],2),e("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"biz-customcol"},[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){e.stopPropagation(),a.row.id!==t.data[0].id&&t.moveUp(a.row)}}},[t._v("上移")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){e.stopPropagation(),a.row.id!==t.data[t.data.length-1].id&&t.moveDown(a.row)}}},[t._v("下移 ")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.deleteCategory(a.row)}}},[t._v("删除")])],1)]}}])})],1)},at=[],et=(e("cb29"),e("a15b"),e("ac1f"),e("1276"),{name:"ExpandTable",filters:{formatToMark:function(t){return isNaN(t)?t:Number(t)?"√":"X"}},props:{showHeader:{type:Boolean,default:!0},hasChild:{type:String,default:"1"},data:{type:Array,default:function(){return[]}},height:{type:String,default:"100%"},loading:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!0},layer:{type:Number,default:0},expandedRowKeys:{type:Array,default:function(){return[]}}},data:function(){return{maxLevel:"1",separator:"、",className:"",selections:[],selectionsChild:[]}},components:{},computed:{},watch:{},mounted:function(){var t=document.documentElement.clientHeight||window.innerHeight,a=String(t-185);document.querySelectorAll(".el-table__body-wrapper")[0].style.height=a+"px",document.querySelectorAll(".el-table__body-wrapper")[0].style.overflowX="hidden",document.querySelectorAll(".el-table__body-wrapper")[0].style.overflowY="auto"},updated:function(){this.doLayout()},methods:{setClassName:function(t){var a=t.row;t.index;return a.childrenProductCategoryDataList&&a.childrenProductCategoryDataList.length>0?"expand":"noexpand"},cellClassName:function(t){var a=t.row;t.column,t.rowIndex,t.columnIndex;return"row"+a.id},showUp:function(t){return!this.data[0]||t.id!==this.data[0].id},showDown:function(t){return!this.data[0]||t.id!==this.data[this.data.length-1].id},doLayout:function(){document.querySelectorAll(".expand-table-child .el-table__body-wrapper").forEach((function(t){t.style.height="auto"})),document.querySelectorAll(".el-table__expand-icon").forEach((function(t){t.children[0].className="iconfont biz-icon-i-web-zk1"}))},formatTreeLayer:function(t,a){var e=[];return a&&(e.push(new Array(a).fill("|").join(" ")),e.push("--")),e.push(t),e.join("")},expandChangeHandler:function(t,a){this.doLayout();var e=[];if(t.treeLevel>0){for(var i=0;i<=t.treeLevel;i++)e.push(i+1);this.maxLevel=e.join(" ")}this.className&&this.className.split(".")[1]!=="row"+t.id&&(document.querySelector(this.className).children[0].children[0].style.color="#666666"),this.className=".row"+t.id,document.querySelector(this.className).children[0].children[0].style.color="#ff7300",a&&0===a.length&&(this.maxLevel="1"),console.log(this.$refs.expandTable),this.$emit("expand-change",t)},rowClickHandler:function(t){this.$emit("row-click",t)},deleteFunction:function(t){this.$emit("delete",t)},handleSelectionChange:function(t){this.selections=t,this.$emit("selection-change",t)},deleteCategory:function(t){this.$emit("deleteCategory",t)},moveUp:function(t){this.$emit("moveUp",t)},moveDown:function(t){this.$emit("moveDown",t)},adminMgmt:function(t){this.$router.push({path:"/oa/staff-mgmt/admin",query:{parentId:t.id,type:t.userType}})}}}),it=et,ot=(e("2c056"),Object(I["a"])(it,tt,at,!1,null,null,null)),rt=ot.exports,nt={name:"PlatformCategoryMgmt",data:function(){return{loading:!1,categoryId:"",refreshSign:!0,open:!1,itemId:"",tabName:"Category",dataList:[],multipleSelection:[],operations:[{label:"添加",name:"add",type:"primary"},{label:"刷新",name:"refresh",type:""}],filters:[{type:"input",label:"",placeholder:"请输入关键字",name:"searchValue",value:""}],tableData:[],pagination:{pageSize:1e3,currentPage:1,pageSizes:[1e3],total:9}}},computed:{},components:{PlatformCategoryMgmtPopup:Z,BizHeader:s["d"],ExpandTable:rt,BizGrid:v["a"],BizPagination:s["f"]},created:function(){this.getUser(),this.refresh()},mounted:function(){},methods:Object(n["a"])(Object(n["a"])({},Object(f["c"])(["getUser"])),{},{expandChange:function(t,a){},operate:function(t){this[t]()},refresh:function(){this.getList()},getChildren:function(t,a,e){var i=this,o=a.sort;t.map((function(r){r.id===a.id?("up"===e?(t[t.indexOf(a)].sort=t[t.indexOf(a)-1].sort,t[t.indexOf(a)-1].sort=o,i.dataList=[t[t.indexOf(a)],t[t.indexOf(a)-1]]):(t[t.indexOf(a)].sort=t[t.indexOf(a)+1].sort,t[t.indexOf(a)+1].sort=o,i.dataList=[t[t.indexOf(a)],t[t.indexOf(a)+1]]),i.sort()):r.childrenProductCategoryDataList&&i.getChildren(r.childrenProductCategoryDataList,a,e)}))},moveUp:function(t){var a=this;this.loading=!0;var e=t.sort;this.tableData.map((function(i){i.id===t.id?(a.tableData[a.tableData.indexOf(t)].sort=a.tableData[a.tableData.indexOf(t)-1].sort,a.tableData[a.tableData.indexOf(t)-1].sort=e,a.dataList=[a.tableData[a.tableData.indexOf(t)],a.tableData[a.tableData.indexOf(t)-1]],a.sort()):i.childrenProductCategoryDataList&&a.getChildren(i.childrenProductCategoryDataList,t,"up")}))},moveDown:function(t){var a=this;this.loading=!0;var e=t.sort;this.dataList=[],this.tableData.map((function(i){i.id===t.id?(a.tableData[a.tableData.indexOf(t)].sort=a.tableData[a.tableData.indexOf(t)+1].sort,a.tableData[a.tableData.indexOf(t)+1].sort=e,a.dataList=[a.tableData[a.tableData.indexOf(t)],a.tableData[a.tableData.indexOf(t)+1]],a.sort()):a.getChildren(i.childrenProductCategoryDataList,t,"down")}))},sort:function(){var t=this;_["a"].put("/admin/product_category/categorySort.jhtml",this.dataList).then((function(a){t.getList(),t.loading=!1})).catch((function(a){t.loading=!1,t.$message.warning(a.errorMessage||"操作出现错误")}))},getList:function(){var t=this,a={pageNumber:this.pagination.currentPage,pageSize:this.pagination.pageSize};!0!==this.open&&(this.loading=!0),p.getPlatformCategoryList(a,(function(a){t.tableData=a.ProductCategoryManage,t.pagination.total=Number(a.dataSum),t.loading=!1}),(function(a){console.log(a),t.$message.warning(a.errorMessage),t.loading=!1}))},filterDataChange:function(t){},deleteList:function(){var t=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a,e=[],i=Object(r["a"])(t.multipleSelection);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.push(o.childrenProductCategoryData.id)}}catch(s){i.e(s)}finally{i.f()}var n={ids:e};p.deletePlatformCategory(n,(function(a){t.$message({type:"success",message:"删除成功!"}),t.refresh()}),(function(a){console.log(a),t.$message.warning(a.errorMessage)}))})).catch((function(){}))},deleteCategory:function(t){var a=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[];e.push(t.id);var i={ids:e};p.deletePlatformCategory(i,(function(t){a.$message({type:"success",message:"删除成功!"}),a.refresh()}),(function(t){console.log(t),a.$message.warning(t.errorMessage)}))})).catch((function(){}))},add:function(){this.open=!0,this.itemId="",this.tabName="Category"},handleSelectionChange:function(t){this.operations[1].disabled=!0,t.length>0&&(this.operations[1].disabled=!1),this.multipleSelection=t},rowClick:function(t){this.open=!0,this.itemId=t.id,this.tabName="Category"},handleSizeChange:function(t){this.pagination.pageSize=t,this.refresh()},handleCurrentChange:function(t){this.pagination.currentPage=t,this.refresh()},typeFilterHandler:function(t,a){return a.type===t},statusFilterHandler:function(t,a){return a.state===t},objectSpanMethod:function(t){var a=t.row,e=(t.column,t.rowIndex,t.columnIndex);if(1===e)return this.isHead(a.id,a.childrenProductCategoryData.id)?{rowspan:this.getRows(a.id),colspan:1}:{rowspan:0,colspan:0}},getRows:function(t){var a,e=Object(r["a"])(this.tableData);try{for(e.s();!(a=e.n()).done;){var i=a.value;if(i.id===t)return i.childrenProductCategoryDataList.length+1}}catch(o){e.e(o)}finally{e.f()}},isHead:function(t,a){return t===a},operationSuccess:function(){this.refresh()},createdCategorySuccess:function(t){this.itemId=t}})},st=nt,ct=(e("8f31"),Object(I["a"])(st,i,o,!1,null,null,null));a["default"]=ct.exports},"48cf":function(t,a,e){},"498a":function(t,a,e){"use strict";var i=e("23e7"),o=e("58a8").trim,r=e("c8d2");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return o(this)}})},5625:function(t,a,e){},5899:function(t,a){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,a,e){var i=e("1d80"),o=e("5899"),r="["+o+"]",n=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),c=function(t){return function(a){var e=String(i(a));return 1&t&&(e=e.replace(n,"")),2&t&&(e=e.replace(s,"")),e}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5b8e":function(t,a,e){"use strict";var i=e("9678"),o=e.n(i);o.a},7132:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("transition",{attrs:{name:"biz-fade-t"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"biz-popup",on:{click:function(a){return a.target!==a.currentTarget?null:t.close(a)}}},[e("transition",{attrs:{name:"biz-fade-t-right"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"popup-content",style:t.contentStyle},[t._t("default")],2)])],1)])},o=[],r={name:"BizPopup",props:{open:{type:Boolean,default:function(){return!1}},contentStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{close:function(){this.$emit("close")}}},n=r,s=(e("5b8e"),e("2877")),c=Object(s["a"])(n,i,o,!1,null,null,null),l=c.exports,u=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"biz-popup-tabs"},[e("biz-popup",{attrs:{open:t.open,contentStyle:t.contentStyle},on:{close:t.close}},[e("el-tabs",{attrs:{type:"border-card",value:t.value},on:{"tab-click":t.tabClick}},[t._t("default")],2)],1)],1)},d=[],p=(e("b0c0"),{name:"BizPopupTabs",data:function(){return{}},props:{open:{type:Boolean,default:!1},value:{type:String,required:!0},contentStyle:{type:Object,default:function(){return{}}}},components:{BizPopup:l},methods:{close:function(){var t=this;this.$confirm("是否保存当前页面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("close")}))},tabClick:function(t){this.$emit("input",t.name)}}}),f=p,m=(e("d4c2"),Object(s["a"])(f,u,d,!1,null,null,null)),h=m.exports;e.d(a,"a",(function(){return h}))},"7a79":function(t,a,e){},"81d5":function(t,a,e){"use strict";var i=e("7b0b"),o=e("23cb"),r=e("50c4");t.exports=function(t){var a=i(this),e=r(a.length),n=arguments.length,s=o(n>1?arguments[1]:void 0,e),c=n>2?arguments[2]:void 0,l=void 0===c?e:o(c,e);while(l>s)a[s++]=t;return a}},8316:function(t,a,e){"use strict";var i=e("2497"),o=e("bc3a"),r=e.n(o),n=e("c596");a["a"]={getCategoryParameter:function(t,a,e){r.a.get(n["g"].commodity.getCategoryParameter,{params:t}).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},deleteCategoryParameter:function(t,a,e){r.a.delete(n["g"].commodity.deleteCategoryParameter,{data:t}).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},saveCategoryParameter:function(t,a,e){r.a.post(n["g"].commodity.saveCategoryParameter,t).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},updateCategoryParameter:function(t,a,e){r.a.put(n["g"].commodity.updateCategoryParameter,t).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))}}},"8f31":function(t,a,e){"use strict";var i=e("2147"),o=e.n(i);o.a},9678:function(t,a,e){},a9e3:function(t,a,e){"use strict";var i=e("83ab"),o=e("da84"),r=e("94ca"),n=e("6eeb"),s=e("5135"),c=e("c6b6"),l=e("7156"),u=e("c04e"),d=e("d039"),p=e("7c73"),f=e("241c").f,m=e("06cf").f,h=e("9bf2").f,g=e("58a8").trim,D="Number",b=o[D],v=b.prototype,y=c(p(v))==D,w=function(t){var a,e,i,o,r,n,s,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),a=l.charCodeAt(0),43===a||45===a){if(e=l.charCodeAt(2),88===e||120===e)return NaN}else if(48===a){switch(l.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+l}for(r=l.slice(2),n=r.length,s=0;s<n;s++)if(c=r.charCodeAt(s),c<48||c>o)return NaN;return parseInt(r,i)}return+l};if(r(D,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var L,S=function(t){var a=arguments.length<1?0:t,e=this;return e instanceof S&&(y?d((function(){v.valueOf.call(e)})):c(e)!=D)?l(new b(w(a)),e,S):w(a)},C=i?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;C.length>I;I++)s(b,L=C[I])&&!s(S,L)&&h(S,L,m(b,L));S.prototype=v,v.constructor=S,n(o,D,S)}},b785:function(t,a,e){"use strict";var i=e("2429"),o=e.n(i);o.a},c455:function(t,a,e){"use strict";var i=e("dba1"),o=e.n(i);o.a},c8d2:function(t,a,e){var i=e("d039"),o=e("5899"),r="​᠎";t.exports=function(t){return i((function(){return!!o[t]()||r[t]()!=r||o[t].name!==t}))}},cb29:function(t,a,e){var i=e("23e7"),o=e("81d5"),r=e("44d2");i({target:"Array",proto:!0},{fill:o}),r("fill")},d4c2:function(t,a,e){"use strict";var i=e("e725"),o=e.n(i);o.a},d597:function(t,a,e){"use strict";var i=e("48cf"),o=e.n(i);o.a},dba1:function(t,a,e){},dd58:function(t,a,e){"use strict";var i=e("2497"),o=e("bc3a"),r=e.n(o),n=e("c596");a["a"]={getProductSpecificationList:function(t,a,e){console.log("[---- dachao ----] [API-规格编辑-get] getProductSpecificationList() params=",t),r.a.get(n["g"].commodity.getProductSpecificationList,{params:t}).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},saveProductSpecification:function(t,a,e){console.log("[---- dachao ----] [API-规格编辑-post] saveProductSpecification() params=",t),r.a.post(n["g"].commodity.saveProductSpecification,t).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},updateProductSpecification:function(t,a,e){console.log("[---- dachao ----] [API-规格编辑-put] updateProductSpecification() params=",t),r.a.put(n["g"].commodity.updateProductSpecification,t).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},deleteProductSpecification:function(t,a,e){console.log("[---- dachao ----] [API-规格编辑-delete] updateProductSpecification() params=",t),r.a.delete(n["g"].commodity.deleteProductSpecification,{data:t}).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))}}},e725:function(t,a,e){},f562:function(t,a,e){"use strict";var i=e("2497"),o=e("bc3a"),r=e.n(o),n=e("c596");a["a"]={getProductAttributeList:function(t,a,e){console.log("[---- dachao ----] [API-属性编辑-get] getProductAttributeList() params=",t),r.a.get(n["g"].commodity.getProductAttributeList,{params:t}).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},saveProductAttribute:function(t,a,e){console.log("[---- dachao ----] [API-属性编辑-post] saveProductAttribute() params=",t),r.a.post(n["g"].commodity.saveProductAttribute,t).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},updateProductAttribute:function(t,a,e){console.log("[---- dachao ----] [API-属性编辑-put] updateProductAttribute() params=",t),r.a.put(n["g"].commodity.updateProductAttribute,t).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))},deleteProductAttribute:function(t,a,e){console.log("[---- dachao ----] [API-属性编辑-delete] deleteProductAttribute() params=",t),r.a.delete(n["g"].commodity.deleteProductAttribute,{data:t}).then(Object(i["a"])(a,e)).catch((function(t){console.error(t)}))}}}}]);